(window.webpackJsonp=window.webpackJsonp||[]).push([[33,2,11,12,15],{2122:function(e,t,a){"use strict";a.d(t,"b",function(){return d}),a.d(t,"c",function(){return u}),a.d(t,"d",function(){return p}),a.d(t,"a",function(){return m});var r=a(4),n=a.n(r),i=a(41),o=a(44),s=a(26),l=a(94),c=a(10);const d=e=>n()(e,"indexPrices.indexPrices"),u=e=>n()(e,"indexPrices.areIndexPricesLoaded"),p=Object(i.a)([o.e,d,s.d],(e,t,a)=>m({pair:e,allIndexPrices:t,allMarkets:a})),m=({pair:e,allIndexPrices:t,allMarkets:a})=>{const r=e.orderMarket,n=e.baseSymbol,i=e.quoteSymbol,o=Object(s.c)({allMarkets:a,symbol:n}),d=Object(s.c)({allMarkets:a,symbol:i}),u=t[r];if(u)return new l.a(u,o,d).getNaturalValue();const p=Object(s.c)({allMarkets:a,symbol:"DAI"});if(p&&p.oraclePrice){if("WETH-DAI"===r){if(t["WETH-USDC"])return new l.a(t["WETH-USDC"],o,Object(s.c)({allMarkets:a,symbol:"USDC"})).getNaturalValue().div(p.oraclePrice)}if("DAI-USDC"===r)return Object(c.a)(p.oraclePrice)}return null}},2125:function(e,t,a){e.exports={loadingDots:"_3jMPchhhIOb4dZOy6GLdPk",dot:"_2f58i9-DZX4n6MkcSDUG0","dot-keyframes":"j0RjL1ZlcGTCa4Xjy9tyY",newLoadingDots:"oppLNwiDeV9-rzLw4k37w","dot-animation":"_15KINsZKdzjYj3pK_pSvRH",compact:"_1WWoQQoq0KrhJIG9Mb9dfZ"}},2130:function(e,t,a){"use strict";var r=a(0),n=a.n(r),i=a(1),o=a.n(i),s=a(19),l=a.n(s),c=a(2139),d=a.n(c),u=a(384),p=a(2128),m=a(620);a(2159);const b=({className:e,children:t})=>n.a.createElement("div",{className:l()("new-table",e)},t);b.propTypes={className:o.a.string,children:o.a.oneOfType([o.a.arrayOf(o.a.node),o.a.node]).isRequired};const h=({children:e,className:t,expandable:a,expandableContent:r,highlighted:i,hoverContent:o,isExpanded:s,isGreyedOut:c,isLoading:p,leftBorderGreen:b,leftBorderRed:h,noLoadingCell:y,onClick:E,useLegacyStyles:O=!1,useModuleStyles:f=!1})=>n.a.createElement("div",{tabIndex:0,role:"button",className:l()("row-container",t,{"row-container__highlight":i,"row-container__hover":a,"row-container__expanded":s,"row-container__loading":p,"row-container__greyed-out":c,"row-container__left-border-red":h,"row-container__left-border-green":b,"row-container__module-styles":f,"row-container__legacy-styles":O}),onClick:E},n.a.createElement("div",{className:l()("row",{"row__module-styles":f})},n.a.createElement("div",{className:l()("row-content",{"row-content__loading":p,"row-content__greyed-out":c})},e),!y&&n.a.createElement(g,{className:"loading-cell"},p&&n.a.createElement(u.a,null))),a&&n.a.createElement(d.a,{isOpened:s},n.a.createElement("div",{className:"expandable-row"},r)),!p&&(o||a)&&n.a.createElement("div",{className:l()("hover-content-container",{"hover-content-container__with-gradient":!!o})},n.a.createElement("div",{className:"hover-content"},o,a&&n.a.createElement("div",{className:"expandable-row-icon-container"},n.a.createElement("div",{className:l()("expandable-row-icon",{"expandable-row-icon__expanded":s})},n.a.createElement(m.a,null)))))," ");h.propTypes={children:o.a.oneOfType([o.a.arrayOf(o.a.node),o.a.node]).isRequired,className:o.a.string,expandable:o.a.bool,expandableContent:o.a.oneOfType([o.a.arrayOf(o.a.node),o.a.node]),highlighted:o.a.bool,hoverContent:o.a.oneOfType([o.a.arrayOf(o.a.node),o.a.node]),isExpanded:o.a.bool,isGreyedOut:o.a.bool,isLoading:o.a.bool,leftBorderGreen:o.a.bool,leftBorderRed:o.a.bool,noLoadingCell:o.a.bool,onClick:o.a.func,useLegacyStyles:o.a.bool,useModuleStyles:o.a.bool};const g=({children:e,className:t,marketSymbol:a,isTitle:r,label:i,green:o,red:s,orange:c,grey:d,stacked:u,uppercase:m,width:b})=>n.a.createElement("div",{className:l()("cell",t,{cell__title:r,cell__stacked:u,"cell__with-label":i,cell__uppercase:m,red:s,green:o,orange:c,grey:d}),style:{flexBasis:b}},i&&n.a.createElement("div",{className:"label"},i),a&&n.a.createElement("div",{className:"currency-icon-container"},n.a.createElement("div",{className:`currency-icon-${a.toLowerCase()}`},n.a.createElement(p.a,{symbol:a}))),e);g.propTypes={children:o.a.oneOfType([o.a.arrayOf(o.a.node),o.a.node]),className:o.a.string,marketSymbol:o.a.string,isTitle:o.a.bool,label:o.a.oneOfType([o.a.string,o.a.node]),green:o.a.bool,red:o.a.bool,orange:o.a.bool,grey:o.a.bool,stacked:o.a.bool,uppercase:o.a.bool,width:o.a.string},a.d(t,"c",function(){return b}),a.d(t,"b",function(){return h}),a.d(t,"a",function(){return g})},2132:function(e,t,a){"use strict";var r=a(2126),n=a.n(r),i=a(0),o=a.n(i),s=a(1),l=a.n(s),c=a(2125),d=a.n(c);const u=({size:e=2})=>o.a.createElement("div",{className:d.a.loadingDots,style:{width:3*e+8}},n()(3,t=>o.a.createElement("div",{key:t,className:d.a.dot,style:{height:e,width:e}})));u.propTypes={size:l.a.number};var p=u,m=a(19),b=a.n(m);const h=({compact:e})=>o.a.createElement("div",{className:b()(d.a.newLoadingDots,{[d.a.compact]:e})});h.propTypes={compact:l.a.bool};var g=h;a.d(t,"b",function(){return p}),a.d(t,"a",function(){return g})},2134:function(e,t,a){e.exports={emptyState:"_1zSGkn9574CJw_zgFytURn",loading:"_1SVbZA8N8vyAQWeViUq5VG",content:"_1u3pYOs23j8ttVBpg9qBdW",contentPerpetual:"_3yWRuRvOs55FQVlNcjIpe1"}},2135:function(e,t,a){"use strict";var r=a(37),n=a.n(r),i=a(55),o=a.n(i),s=a(4),l=a.n(s),c=a(0),d=a.n(c),u=a(1),p=a.n(u),m=a(19),b=a.n(m),h=a(31);a(2185);class g extends c.Component{constructor(e){super(e),this.onClickOutside=(e=>{this.dropdownMenuRef.current&&this.dropdownMenuRef.current.contains(e.target)||this.closeMenu()}),this.onChangeSelection=(e=>{(0,this.props.onChangeSelection)(e)}),this.closeMenu=(()=>this.setState({isMenuOpen:!1})),this.toggleMenuOpen=(()=>this.setState(({isMenuOpen:e})=>({isMenuOpen:!e}))),this.state={isMenuOpen:!1},this.dropdownMenuRef=Object(c.createRef)()}componentWillMount(){window.addEventListener("click",this.onClickOutside)}componentWillUnmount(){window.removeEventListener("click",this.onClickOutside)}render(){const e=this.state.isMenuOpen,t=this.props,a=t.className,r=t.menuItems,i=t.selectedItemKey,s=t.disabled,c=t.compact,u=t.hoverable,p=t.black;return d.a.createElement("div",{ref:this.dropdownMenuRef,role:"button",tabIndex:0,onClick:this.toggleMenuOpen,className:b()("component-dropdown-menu",{"component-dropdown-menu__open":e,"component-dropdown-menu__disabled":s,"component-dropdown-menu__compact":c,"component-dropdown-menu__hoverable":u,"component-dropdown-menu__black":p},a)},l()(n()(r,({key:e})=>e===i),"label"),!s&&d.a.createElement(h.m,null),d.a.createElement("div",{className:b()("menu",{menu__open:e})},o()(r,({key:e,label:t,disabled:a})=>d.a.createElement("div",{key:e,role:"button",tabIndex:0,className:b()("menu-item",{"menu-item__disabled":a,menu__black:p}),onClick:()=>this.onChangeSelection(e)},t,e===i&&d.a.createElement("div",{className:"selected-check"},d.a.createElement(h.p,null))))))}}g.propTypes={className:p.a.string,selectedItemKey:p.a.string.isRequired,menuItems:p.a.arrayOf(p.a.shape({key:p.a.string.isRequired,label:p.a.oneOfType([p.a.string,p.a.node]).isRequired,disabled:p.a.bool})).isRequired,onChangeSelection:p.a.func.isRequired,disabled:p.a.bool,compact:p.a.bool,hoverable:p.a.bool,black:p.a.bool};var y=a(251),E=a(2186),O=a.n(E);function _slicedToArray(e,t){return function _arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function _iterableToArrayLimit(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var a=[],r=!0,n=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(l){n=!0,i=l}finally{try{r||null==s.return||s.return()}finally{if(n)throw i}}return a}(e,t)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}const f=({className:e,dropdownMenuItems:t,onChangeSelection:a,selectedItemKey:r})=>{const i=Object(c.useRef)(null),s=_slicedToArray(Object(c.useState)(!1),2),l=s[0],u=s[1];Object(c.useEffect)(()=>{const e=e=>{i.current&&i.current.contains(e.target)||u(!1)};return window.addEventListener("click",e),()=>window.removeEventListener("click",e)},[]);const p=n()(t,({key:e})=>e===r);return d.a.createElement("div",{ref:i,className:b()(O.a.dropdownMenuWrapper,{[O.a.menuOpen]:l})},d.a.createElement("button",{type:"button",onClick:()=>u(!l),className:b()(O.a.dropdownMenuButton,{[O.a.menuOpen]:l},e)},p&&d.a.createElement("div",{className:O.a.selectedItem},p.icon&&d.a.createElement("div",{className:b()(O.a.menuItemIcon,{[O.a.iconUsesFill]:p.iconUsesFill,[O.a.iconUsesStroke]:p.iconUsesStroke})},p.icon),p.label,p.tag&&d.a.createElement(y.a,{light:!0,marginLeft:!0},p.tag)),d.a.createElement(h.m,null)),d.a.createElement("div",{className:b()(O.a.menu,{[O.a.menuOpen]:l})},o()(t,({key:e,label:t,icon:r,iconUsesFill:n,iconUsesStroke:i,tag:o,menuOnlyDetail:s})=>d.a.createElement("div",{key:e,role:"button",tabIndex:0,className:O.a.menuItem,onClick:()=>{a(e),u(!1)}},r&&d.a.createElement("div",{className:b()(O.a.menuItemIcon,{[O.a.iconUsesFill]:n,[O.a.iconUsesStroke]:i})},r),t,o&&d.a.createElement(y.a,{marginLeft:!0,className:O.a.menuItemTag},o),s&&d.a.createElement("div",{className:O.a.menuOnlyDetail},s)))))};f.propTypes={className:p.a.string,dropdownMenuItems:p.a.arrayOf(p.a.shape({key:p.a.string.isRequired,label:p.a.oneOfType([p.a.string,p.a.node]).isRequired,icon:p.a.node,iconUsesStroke:p.a.bool,iconUsesFill:p.a.bool,disabled:p.a.bool,tag:p.a.string})).isRequired,onChangeSelection:p.a.func.isRequired,selectedItemKey:p.a.string.isRequired};var _=f;a.d(t,"b",function(){return g}),a.d(t,"a",function(){return _})},2136:function(e,t,a){"use strict";var r=a(55),n=a.n(r),i=a(0),o=a.n(i),s=a(1),l=a.n(s),c=a(19),d=a.n(c),u=a(74),p=a(2138),m=a(2123),b=a(2130),h=a(2160),g=a.n(h);const y=({headerConfig:e,useModuleStyles:t,stringGetter:a})=>o.a.createElement(b.b,{useModuleStyles:t},n()(e,({titleKey:e,titleBottomKey:t,width:r,tooltip:n,tooltipBottom:i,tag:s})=>{const l=a({key:e}),c=t?a({key:t}):void 0;if(!c&&!n)return o.a.createElement(b.a,{isTitle:!0,key:l,width:r},s?o.a.createElement(p.a,{tag:s},l):l);const u=n?o.a.createElement(m.a,{className:d()({[g.a.doubleTooltip]:!!c}),top:n.top||8,left:n.left||-36,tooltip:n.name,stringParams:n.stringParams},l):o.a.createElement("div",{className:g.a.doubleTooltip},l);let h;c&&(h=i?o.a.createElement(m.a,{className:g.a.doubleTooltip,top:i.top||8,left:i.left||-36,tooltip:i.name,stringParams:n.stringParams},c):o.a.createElement("div",{className:g.a.doubleTooltip},c));const y=o.a.createElement("div",{className:d()(g.a.title,{[g.a.doubleTitle]:!!c})},u,c?o.a.createElement("span",null,"/"):null,h);return o.a.createElement(b.a,{isTitle:!0,key:l,width:r},s?o.a.createElement(p.a,{tag:s},y):y)}));y.propTypes={headerConfig:l.a.arrayOf(l.a.shape({titleKey:l.a.string.isRequired,titleBottomKey:l.a.string,width:l.a.string.isRequired,tag:l.a.oneOfType([l.a.string,l.a.node]),tooltip:l.a.shape({top:l.a.number,left:l.a.number,name:l.a.string.isRequired,stringParams:l.a.object}),tooltipBottom:l.a.shape({top:l.a.number,left:l.a.number,name:l.a.string.isRequired,stringParams:l.a.object})})).isRequired,stringGetter:l.a.func,useModuleStyles:l.a.bool};var E=Object(u.k)(y);a.d(t,"a",function(){return E})},2138:function(e,t,a){"use strict";var r=a(0),n=a.n(r),i=a(1),o=a.n(i),s=a(19),l=a.n(s),c=a(2145),d=a.n(c);const u=({tag:e,children:t,extraSpacing:a})=>n.a.createElement(r.Fragment,null,t,e&&n.a.createElement("div",{className:l()(d.a.tag,{[d.a.extraSpacing]:a})},e));u.propTypes={children:o.a.oneOfType([o.a.arrayOf(o.a.node),o.a.node]).isRequired,extraSpacing:o.a.bool,tag:o.a.oneOfType([o.a.string,o.a.node])};var p=u;a.d(t,"a",function(){return p})},2143:function(e,t,a){"use strict";var r=a(231),n=a.n(r),i=a(0),o=a.n(i),s=a(1),l=a.n(s),c=a(19),d=a.n(c),u=a(2149),p=a.n(u);const m=({className:e,label:t,labelClassName:a,checked:r,onClick:i,topAlignedCheckbox:s})=>o.a.createElement("div",{className:d()(p.a.checkboxWrapper,e)},o.a.createElement("div",{className:p.a.checkbox,role:"button",tabIndex:0,onClick:i},o.a.createElement("input",{type:"checkbox",checked:r,onChange:n.a}),o.a.createElement("span",{className:d()(p.a.custom,{[p.a.topAligned]:s})}),t&&o.a.createElement("div",{className:d()(p.a.label,a)},t)));m.propTypes={checked:l.a.bool,className:l.a.string,label:l.a.oneOfType([l.a.arrayOf(l.a.node),l.a.node,l.a.string]),labelClassName:l.a.string,onClick:l.a.func.isRequired,topAlignedCheckbox:l.a.bool};var b=m;a.d(t,"a",function(){return b})},2144:function(e,t,a){"use strict";var r=a(55),n=a.n(r),i=a(0),o=a.n(i),s=a(1),l=a.n(s),c=a(19),d=a.n(c),u=a(191),p=a(2161),m=a.n(p);const b={SMALL:"SMALL",LARGE:"LARGE"},h=({className:e,collateralization:t,size:a,red:r,suffix:n})=>o.a.createElement("div",{className:d()(m.a.collateralization,e,{[m.a.red]:r,[m.a.small]:a===b.SMALL,[m.a.large]:a===b.LARGE})},Object(u.d)(t)||o.a.createElement("div",{className:d()(m.a.infinite,{[m.a.withSuffix]:n})},"\u221e")," ",n);h.propTypes={className:l.a.string,collateralization:l.a.object,size:l.a.oneOf(n()(b,e=>e)),red:l.a.bool,suffix:l.a.string},h.defaultProps={size:b.LARGE};var g=h;a.d(t,"b",function(){return g}),a.d(t,"a",function(){return b})},2145:function(e,t,a){e.exports={tag:"_2ukp2icrWLdgvD3odSm2Hm",extraSpacing:"_18tcZvIMJWLJT8DSy4PNW3"}},2146:function(e,t,a){},2149:function(e,t,a){e.exports={checkboxWrapper:"vNRaxmHo46U6RappONKFH",checkbox:"_19RMSXPBlUqYk12l-xPHYr",custom:"_2kl9Enu9XNPp7I5yxjjUlj",topAligned:"_3mLmd2r1moWl1-lllnQKfj",label:"_2h1JC1J1RFcB8X-C9rrGQk"}},2150:function(e,t,a){e.exports={animatedToggle:"_2uX6PC8cA8YPCtdcDGUDVn",toggled:"_3NWbtL9arP0Eum-jEVhUtn",grayscale:"_4TrMjUnhys9QgRpb_qejA",label:"_3pd4To_unYOQ9_wOU2cXJO",compact:"_2cnM-EVr5tBuRyrxovo9uS"}},2152:function(e,t,a){"use strict";var r=a(0),n=a.n(r),i=a(1),o=a.n(i),s=a(52),l=a(60),c=a(19),d=a.n(c),u=a(74),p=a(384),m=a(190),b=a(45),h=a(33),g=a(44),y=a(296),E=a(102),O=a(24),f=a(5),_=a(38);a(2146);const k=({areAccountsLoaded:e,arePerpBalancesLoaded:t,arePerpMarketsLoaded:a,currentPair:{type:r},isBorrowPage:i,isPerpPage:o,isTradePage:s,isWalletConnecting:l,isWalletIncorrectNetwork:c,isWalletInvalid:u,isWalletReady:b,openModal:h,stringGetter:g,withBorder:y})=>{const E=d()("component-sidebar-wallet-ctas",{"component-sidebar-wallet-ctas__with-border":y,"component-sidebar-wallet-ctas__trade":s,"component-sidebar-wallet-ctas__perp":o,"component-sidebar-wallet-ctas__spot":!i&&r===O.d.SPOT});return c?n.a.createElement("div",{className:E},n.a.createElement("div",{className:"cta-content"},g({key:f.a.CHANGE_NETWORK_REQUEST}))):!l&&u?n.a.createElement("div",{className:E},n.a.createElement("div",{className:"cta-content"},g({key:f.a.GET_STARTED_DESCRIPTION})),n.a.createElement("div",null,n.a.createElement(m.g,{blue:!0,className:"connect-wallet-button",onClick:()=>h({type:_.a.CONNECT_WALLET})},g({key:f.a.CONNECT_WALLET})))):!l&&b&&(o?a&&t:e)?null:n.a.createElement("div",{className:E},n.a.createElement("div",{className:"cta-content"},n.a.createElement(p.a,null)))};k.defaultProps={withBorder:!0},k.propTypes={areAccountsLoaded:o.a.bool.isRequired,arePerpBalancesLoaded:o.a.bool.isRequired,arePerpMarketsLoaded:o.a.bool.isRequired,currentPair:o.a.object.isRequired,isBorrowPage:o.a.bool,isPerpPage:o.a.bool,isTradePage:o.a.bool,isWalletConnecting:o.a.bool.isRequired,isWalletIncorrectNetwork:o.a.bool.isRequired,isWalletInvalid:o.a.bool.isRequired,isWalletReady:o.a.bool.isRequired,openModal:o.a.func.isRequired,stringGetter:o.a.func.isRequired,withBorder:o.a.bool};var T=Object(u.k)(Object(s.c)(e=>({areAccountsLoaded:Object(E.i)(e),arePerpBalancesLoaded:Object(y.c)(e),arePerpMarketsLoaded:Object(y.d)(e),currentPair:Object(g.e)(e),isWalletConnecting:Object(h.e)(e),isWalletIncorrectNetwork:Object(h.f)(e),isWalletInvalid:Object(h.g)(e),isWalletReady:Object(h.h)(e)}),e=>Object(l.b)({openModal:b.c},e))(k));a.d(t,"a",function(){return T})},2153:function(e,t,a){"use strict";var r=a(0),n=a.n(r),i=a(1),o=a.n(i),s=a(19),l=a.n(s),c=a(2150),d=a.n(c);const u=({className:e,compact:t,grayscale:a,isToggledRight:r,leftLabel:i,onClickLeft:o,onClickRight:s,rightLabel:c})=>n.a.createElement("div",{className:l()(d.a.animatedToggle,{[d.a.toggled]:r,[d.a.grayscale]:a,[d.a.compact]:t},e)},n.a.createElement("div",{role:"button",tabIndex:0,className:d.a.label,onClick:o},i),n.a.createElement("div",{role:"button",tabIndex:0,className:d.a.label,onClick:s},c));u.propTypes={className:o.a.string,compact:o.a.bool,grayscale:o.a.bool,isToggledRight:o.a.bool,leftLabel:o.a.oneOfType([o.a.string,o.a.node]).isRequired,onClickLeft:o.a.func.isRequired,onClickRight:o.a.func.isRequired,rightLabel:o.a.oneOfType([o.a.string,o.a.node]).isRequired};var p=u;a.d(t,"a",function(){return p})},2155:function(e,t,a){"use strict";var r=a(55),n=a.n(r),i=a(90),o=a.n(i),s=a(67),l=a.n(s),c=a(231),d=a.n(c),u=a(6),p=a.n(u),m=a(0),b=a.n(m),h=a(1),g=a.n(h),y=a(52),E=a(34),O=a(60),f=a(19),_=a.n(f),k=a(74),T=a(384),v=a(2136),R=a(2130),S=a(190);function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var a,r,n=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var a,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var P=b.a.createElement("path",{d:"M12 13.3333V6.66663",stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),I=b.a.createElement("path",{d:"M8 13.3333V2.66663",stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),w=b.a.createElement("path",{d:"M4 13.3334V9.33337",stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),N=function SvgMarketOrderOutline(e){var t=e.svgRef,a=_objectWithoutProperties(e,["svgRef"]);return b.a.createElement("svg",_extends({width:16,height:16,viewBox:"0 0 16 16",fill:"none",ref:t},a),P,I,w)},C=b.a.forwardRef(function(e,t){return b.a.createElement(N,_extends({svgRef:t},e))});a.p;function limit_order_outline_extends(){return(limit_order_outline_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function limit_order_outline_objectWithoutProperties(e,t){if(null==e)return{};var a,r,n=function limit_order_outline_objectWithoutPropertiesLoose(e,t){if(null==e)return{};var a,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var A=b.a.createElement("path",{d:"M12 12L8 8L4 12",stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),j=b.a.createElement("line",{x1:4.75,y1:3.25,x2:11.25,y2:3.25,stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),L=function SvgLimitOrderOutline(e){var t=e.svgRef,a=limit_order_outline_objectWithoutProperties(e,["svgRef"]);return b.a.createElement("svg",limit_order_outline_extends({width:16,height:16,viewBox:"0 0 16 16",fill:"none",ref:t},a),A,j)},M=b.a.forwardRef(function(e,t){return b.a.createElement(L,limit_order_outline_extends({svgRef:t},e))}),D=(a.p,a(83)),x=a(80),q=a(33),B=a(102),F=a(44),W=a(146),G=a(2122),U=a(249),V=a(21),K=a(5),H=a(24),Y=a(61),z=a(94),Z=a(10),$=a(191),Q=a(614),X=a(103),J=a(2),ee=a(2203),te=a.n(ee),ae=a(2134),re=a.n(ae);const ne=(e,t,a)=>({TYPE:{titleKey:K.a.TYPE,width:"15%"},AMOUNT:{titleKey:K.a.AMOUNT,tag:a?t:e,width:"15%"},FILLED:{titleKey:K.a.AMOUNT_FILLED,tag:a?t:e,width:"15%"},PRICE:{titleKey:K.a.PRICE,tag:t,width:"15%"},STOP_INDEX:{titleKey:K.a.STOP_PRICE_ABBREVIATED,titleBottomKey:K.a.INDEX_PRICE_ABBREVIATED,tag:t,width:"20%",tooltip:{name:"stop-price",stringParams:{SYMBOL:e}},tooltipBottom:{name:"index-price"}},STATUS:{titleKey:K.a.STATUS,width:"10%"},GOOD_TIL:{titleKey:K.a.GOOD_TIL_DATE_ABBREVIATED,width:"10%"}}),ie=()=>({TYPE:{titleKey:K.a.TYPE,width:"24%"},AMOUNT:{titleKey:K.a.AMOUNT,titleBottomKey:K.a.AMOUNT_FILLED,width:"29%"},PRICE:{titleKey:K.a.PRICE,titleBottomKey:K.a.STOP_PRICE,width:"29%"},STATUS_GOOD_TIL:{titleKey:K.a.STATUS,titleBottomKey:K.a.GOOD_TIL_DATE_ABBREVIATED,width:"18%"}});class oe extends m.Component{constructor(e){super(e),this.onClickRow=(e=>{this.state.expandedOrder===e?this.setState({expandedOrder:null}):this.setState({expandedOrder:e})}),this.state={expandedOrder:null}}getTableConfig(){const e=this.props,t=e.currentPair,a=t.baseSymbol,r=t.displayQuoteSymbol,n=t.isInversePerpetual;return e.isMobile?ie():ne(a,r,n)}renderStopAndIndex(e){const t=this.props,a=t.baseMarket,r=t.currentPair,n=t.quoteMarket,i=t.indexPriceNatural,o=e.orderType,s=e.triggerPrice,l=r.tickDecimals,c=this.getTableConfig();if(!p()([V.n.PERPETUAL_STOP_LIMIT,V.n.CANONICAL_STOP_LIMIT,V.n.CANONICAL_SPOT_STOP_LIMIT],o))return b.a.createElement(R.a,{width:c.STOP_INDEX.width},"-");const d=new z.a(Object(Z.a)(s),a,n).getNaturalValue().toFixed(l);return b.a.createElement(R.a,{stacked:!0,width:c.STOP_INDEX.width},b.a.createElement("div",null,d),b.a.createElement("div",null,i?i.toFixed(l):"-"))}renderCancelButton(e){const t=e.id,a=e.orderType,r=e.status,n=this.props,i=n.currentPair,o=n.cancelLimitOrder,s=n.clearDexOrder,l=n.legacySigning,c=n.stringGetter,d=n.walletAddress,u=n.walletType;return b.a.createElement(R.a,{className:te.a.mobileFullWidth},r===V.l.CANCELED||r===V.l.FILLED?b.a.createElement(S.g,{className:te.a.mobileFullWidth,onClick:e=>{e.stopPropagation(),s(t)}},c({key:K.a.CLEAR})):b.a.createElement(S.g,{className:te.a.mobileFullWidth,onClick:e=>{e.stopPropagation(),o({pair:i,walletAddress:d,walletType:u,legacySigning:l,orderHash:t,tradeOrderType:a})}},c({key:K.a.CANCEL})))}renderTableRow(e){const t=e.id,a=e.baseAmount,r=e.filledAmount,n=e.orderType,i=e.price,o=e.triggerPrice,s=e.side,l=e.createdAt,c=e.updatedAt,u=e.expiresAt,h=e.status,g=e.cancelReason,y=e.fillOrKill,O=e.trailingPercent,f=this.props,k=f.baseMarket,T=f.currentPair,v=T.tickDecimals,S=T.isInversePerpetual,P=f.isMobile,I=f.quoteMarket,w=f.stringGetter,N=this.state.expandedOrder,A=S?I:k,j=new z.a(Object(Z.a)(i),k,I).getNaturalValue().toFixed(v),L=o?`${new z.a(Object(Z.a)(o),k,I).getNaturalValue().toFixed(v)} ${I.symbol}`:"-",D=Object($.e)(a,A.currency.decimals),x=Object($.e)(r,A.currency.decimals),q=Object(Q.c)({expiration:E.DateTime.fromISO(u).minus({minutes:V.j}),abbreviateUnits:P,stringGetter:w}),B=q.timeString,F=q.unitString,W=q.hasExpirationWarning,G=`${Object(Z.a)(r).div(a).times(100).toFixed(2)}%`,U=h===V.l.PENDING,H=h===V.l.CANCELED,ee=h===V.l.FILLED,ae=U?"-":x,re=p()([V.n.PERPETUAL_STOP_LIMIT,V.n.CANONICAL_STOP_LIMIT,V.n.CANONICAL_SPOT_STOP_LIMIT],n),ne=Object(X.e)(h,g),ie=ne?w({key:ne}):"-",oe=V.b[g]||"-",se=B&&!H&&h!==V.l.FILLED&&(re||!y),le=se?`${B}${P?"":" "}${F}`:"-",ce=P?this.renderCancelButton(e):b.a.createElement(m.Fragment,null,b.a.createElement(R.a,{label:w({key:K.a.FILLED_PERCENT})},U||H?"-":G),O&&b.a.createElement(R.a,{label:w({key:K.a.TRAILING_PERCENT})},Object(Z.a)(O).toFixed(Y.k),"%"),b.a.createElement(R.a,{label:w({key:K.a.CREATED_AT})},E.DateTime.fromISO(l).toFormat("MM/dd/yyyy hh:mm ZZZZ")),b.a.createElement(R.a,{label:w({key:K.a.UPDATED_AT})},E.DateTime.fromISO(c).toFormat("MM/dd/yyyy hh:mm ZZZZ")),H&&b.a.createElement(R.a,{label:w({key:K.a.CANCEL_REASON})},b.a.createElement("span",{className:te.a.uppercase},oe))),de=this.getTableConfig();return b.a.createElement(R.b,{key:t,expandable:!0,expandableContent:ce,hoverContent:this.renderCancelButton(e),isGreyedOut:H||ee,isLoading:U,isExpanded:N===t,onClick:U?d.a:()=>this.onClickRow(t),leftBorderRed:s===J.f.SELL,leftBorderGreen:s===J.f.BUY},b.a.createElement(R.a,{width:de.TYPE.width},b.a.createElement("div",{className:te.a.typeCell},y?b.a.createElement(C,null):b.a.createElement(M,null),b.a.createElement("div",{className:te.a.typeCellText},b.a.createElement("div",null,re&&`${w({key:K.a.ORDER_TYPES_STOP})} `,(!P||!re)&&w(y?{key:K.a.ORDER_TYPES_MARKET}:{key:K.a.ORDER_TYPES_LIMIT})),b.a.createElement("div",{className:_()(te.a.direction,{[te.a.red]:s===J.f.SELL})},s===J.f.BUY?w({key:K.a.BUY}):w({key:K.a.SELL}))))),b.a.createElement(R.a,{stacked:P,width:de.AMOUNT.width},P?b.a.createElement(m.Fragment,null,b.a.createElement("div",null,D," ",k.symbol),b.a.createElement("div",null,ae," ",k.symbol)):D),!P&&b.a.createElement(R.a,{width:de.FILLED.width},ae),!P&&b.a.createElement(R.a,{uppercase:!0,width:de.PRICE.width},re&&y?w({key:K.a.MARKET_PRICE_SHORT}):`${j}`),P?b.a.createElement(R.a,{stacked:!0,uppercase:!0,width:de.PRICE.width},b.a.createElement("div",null,re&&y?w({key:K.a.MARKET_PRICE_ABBREVIATED}):`${j} ${I.symbol}`),b.a.createElement("div",null,L)):this.renderStopAndIndex(e),P?b.a.createElement(R.a,{stacked:!0,uppercase:!0,width:de.STATUS_GOOD_TIL.width},b.a.createElement("div",null,ie),b.a.createElement("div",{className:_()({[te.a.red]:se&&W})},le)):b.a.createElement(m.Fragment,null,b.a.createElement(R.a,{uppercase:!0,width:de.STATUS.width},ie),b.a.createElement(R.a,{uppercase:!0,width:de.GOOD_TIL.width,red:se&&W},le)))}renderContent(){const e=this.props,t=e.orders,a=e.filter,r=e.currentPair,i=e.stringGetter,s=r.marketName;let c,d=i({key:K.a.EMPTY_ALL_ORDERS,params:{MARKET:s}});switch(a){case V.i.ALL_ORDERS:c=t;break;case V.i.MARKET_ORDERS:c=l()(t,e=>p()([V.n.LIMIT,V.n.CANONICAL_CROSS,V.n.PERPETUAL_CROSS],e.orderType)&&e.fillOrKill),d=i({key:K.a.EMPTY_MARKET_ORDERS,params:{MARKET:s}});break;case V.i.LIMIT_ORDERS:c=l()(t,e=>p()([V.n.LIMIT,V.n.CANONICAL_CROSS,V.n.PERPETUAL_CROSS],e.orderType)&&!e.fillOrKill),d=i({key:K.a.EMPTY_LIMIT_ORDERS,params:{MARKET:s}});break;case V.i.STOP_ORDERS:c=l()(t,e=>p()([V.n.PERPETUAL_STOP_LIMIT,V.n.CANONICAL_STOP_LIMIT,V.n.CANONICAL_SPOT_STOP_LIMIT],e.orderType)),d=i({key:K.a.EMPTY_STOP_ORDERS,params:{MARKET:s}});break;default:c=t}return b.a.createElement(m.Fragment,null,o()(c)?b.a.createElement("div",{className:re.a.emptyState},d):b.a.createElement(m.Fragment,null,n()(c,e=>this.renderTableRow(e))))}render(){const e=this.props,t=e.currentPair,a=e.isWalletConnecting,r=e.isWalletReady,i=e.ordersLoaded,o=e.userHasNoAccounts;return b.a.createElement("div",{className:"component-cross-limit-orders"},b.a.createElement(R.c,null,b.a.createElement(v.a,{headerConfig:n()(this.getTableConfig(),e=>e)}),b.a.createElement("div",{className:_()(re.a.content,{[re.a.contentPerpetual]:t&&t.type===H.d.PERPETUAL})},a||!o&&!i&&r?b.a.createElement("div",{className:re.a.loading},b.a.createElement(T.a,null)):this.renderContent())))}}oe.propTypes={baseMarket:g.a.object.isRequired,cancelLimitOrder:g.a.func.isRequired,clearDexOrder:g.a.func.isRequired,currentPair:g.a.object.isRequired,filter:g.a.oneOf(n()(V.i,e=>e)),indexPriceNatural:g.a.object,isMobile:g.a.bool.isRequired,isWalletConnecting:g.a.bool.isRequired,isWalletReady:g.a.bool.isRequired,legacySigning:g.a.bool.isRequired,orders:g.a.array.isRequired,ordersLoaded:g.a.bool.isRequired,quoteMarket:g.a.object.isRequired,stringGetter:g.a.func.isRequired,userHasNoAccounts:g.a.bool.isRequired,walletAddress:g.a.string,walletType:g.a.string};var se=Object(k.k)(Object(y.c)(e=>({baseMarket:Object(F.d)(e),currentPair:Object(F.e)(e),indexPriceNatural:Object(G.d)(e),isMobile:Object(W.d)(e).isMobile,isWalletConnecting:Object(q.e)(e),isWalletReady:Object(q.w)(e),orders:Object(U.e)(e),ordersLoaded:Object(U.l)(e),quoteMarket:Object(F.h)(e),userHasNoAccounts:Object(B.y)(e),walletAddress:Object(q.m)(e),walletType:Object(q.q)(e),legacySigning:Object(q.i)(e)}),e=>Object(O.b)({cancelLimitOrder:D.a,clearDexOrder:x.a},e))(oe));a.d(t,"a",function(){return se})},2156:function(e,t,a){"use strict";var r=a(55),n=a.n(r),i=a(0),o=a.n(i),s=a(1),l=a.n(s),c=a(19),d=a.n(c),u=a(74),p=a(2123);a(2204);function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}const m=({config:e,onClick:t,selectedToggleKey:a,className:r,stringGetter:s})=>o.a.createElement("div",{className:d()("component-tabbed-header",r)},o.a.createElement("div",{className:"buttons"},n()(e,({key:e,labelKey:r,badge:n,notification:l,tooltip:c})=>{const u=s({key:r}),m=c?p.a:i.Fragment,b=c?{top:c.top,left:c.left,tooltip:c.name}:{};return o.a.createElement(m,_extends({key:e},b),o.a.createElement("div",{role:"button",tabIndex:0,className:d()("tab",{tab__selected:a===e}),onClick:()=>t(e)},u,n&&n.label&&o.a.createElement("div",{className:d()("badge",{badge__alert:n.hasAlert})},n.label),l&&o.a.createElement("div",{className:"notification-dot"})))})));m.propTypes={className:l.a.string,config:l.a.arrayOf(l.a.shape({key:l.a.string.isRequired,labelKey:l.a.string.isRequired,notification:l.a.bool,tooltip:l.a.shape({top:l.a.number.isRequired,left:l.a.number.isRequired,name:l.a.string.isRequired}),badge:l.a.shape({label:l.a.number,hasAlert:l.a.bool})})).isRequired,onClick:l.a.func.isRequired,selectedToggleKey:l.a.string,stringGetter:l.a.func.isRequired};var b=Object(u.k)(m);a.d(t,"a",function(){return b})},2157:function(e,t,a){"use strict";var r=a(113),n=a.n(r),i=a(116),o=a.n(i),s=a(55),l=a.n(s),c=a(90),d=a.n(c),u=a(0),p=a.n(u),m=a(1),b=a.n(m),h=a(9),g=a.n(h),y=a(52),E=a(34),O=a(19),f=a.n(O),_=a(74),k=a(31),T=a(384),v=a(2130),R=a(2136),S=a(33),P=a(102),I=a(44),w=a(26),N=a(249),C=a(146),A=a(5),j=a(21),L=a(24),M=a(61),D=a(94),x=a(10),q=a(2),B=a(191),F=a(46),W=a(614),G=a(2202),U=a.n(G),V=a(2134),K=a.n(V);const H=(e,t,a)=>({TYPE:{titleKey:A.a.TYPE,width:"12%"},AMOUNT:{titleKey:A.a.AMOUNT,width:"16%",tag:a?t:e},PRICE:{titleKey:A.a.PRICE,width:"15%",tag:t},FEE:{titleKey:A.a.FEE,width:"15%",tag:a?e:t},STATUS:{titleKey:A.a.STATUS,width:"15%"},TIME:{titleKey:A.a.TIME,width:"15%"},TRANSACTION:{titleKey:A.a.TRANSACTION,width:"12%"}}),Y=()=>({TYPE:{titleKey:A.a.TYPE,titleBottomKey:A.a.AMOUNT,width:"36%"},PRICE:{titleKey:A.a.PRICE,titleBottomKey:A.a.FEE,width:"29%"},STATUS:{titleKey:A.a.STATUS,titleBottomKey:A.a.TIME,width:"24%"},TRANSACTION:{titleKey:A.a.TRANSACTION_ABBREVIATED,width:"11%"}});class z extends u.Component{constructor(...e){super(...e),this.getTableConfig=(()=>{const e=this.props,t=e.currentPair,a=t.baseSymbol,r=t.displayQuoteSymbol,n=t.isInversePerpetual;return e.isMobile?Y():H(a,r,n)})}renderTableRow(e){const t=e.uuid,a=e.amount,r=e.createdAt,n=e.price,i=e.transactionHash,o=e.status,s=e.side,l=e.feeAmount,c=this.props,d=c.allMarkets,m=c.currentPair,b=m.baseSymbol,h=m.quoteSymbol,y=m.tickDecimals,O=m.isInversePerpetual,f=c.isMobile,_=c.stringGetter,T=Object(w.c)({allMarkets:d,symbol:b}),R=Object(w.c)({allMarkets:d,symbol:h}),S=O?R:T,P=O?T:R,I=new D.a(n,T,R).getNaturalValue().toFixed(y),N=Object(F.a)(Object(x.a)(a),S.currency.decimals).toFixed(M.n,g.a.ROUND_HALF_UP),C=l?Object(F.a)(Object(x.a)(l),P.currency.decimals).toFixed(M.n):q.a.ZERO.toFixed(M.n),L=Object(W.b)({datetime:E.DateTime.fromISO(r),abbreviateUnits:f,stringGetter:_}),G=L.timeString,V=L.unitString;let K="-";o===j.d.CONFIRMED?K=_({key:A.a.CONFIRMED}):o===j.d.PENDING?K=_({key:A.a.PENDING}):o===j.d.REVERTED&&(K=_({key:A.a.REVERTED}));const H=s===q.f.BUY?_({key:A.a.BUY}):_({key:A.a.SELL}),Y=this.getTableConfig();return p.a.createElement(v.b,{key:t,leftBorderRed:s===q.f.SELL,leftBorderGreen:s===q.f.BUY},p.a.createElement(v.a,{uppercase:!0,className:U.a.typeCell,width:Y.TYPE.width},s===q.f.BUY?p.a.createElement(k.d,null):p.a.createElement(k.c,null),f?p.a.createElement("div",{className:U.a.typeCellText},p.a.createElement("div",null,H),p.a.createElement("div",null,N," ",S.symbol)):H),!f&&p.a.createElement(v.a,{width:Y.AMOUNT.width},N),p.a.createElement(v.a,{stacked:f,width:Y.PRICE.width},f?p.a.createElement(u.Fragment,null,p.a.createElement("div",null,I," ",R.symbol),p.a.createElement("div",null,C," ",R.symbol)):I),!f&&p.a.createElement(v.a,{width:Y.FEE.width},C),p.a.createElement(v.a,{uppercase:!0,stacked:f,width:Y.STATUS.width},f?p.a.createElement(u.Fragment,null,p.a.createElement("div",null,K),p.a.createElement("div",{className:U.a.uppercaseMobile},`${G}${V}`)):K),!f&&p.a.createElement(v.a,{uppercase:!0,width:Y.TIME.width},`${G} ${V}`),p.a.createElement(v.a,{width:Y.TRANSACTION.width,grey:!0,className:U.a.etherscanLink},p.a.createElement("a",{target:"blank",href:`https://etherscan.io/tx/${i}`},Object(B.f)(i,f)),!f&&p.a.createElement(k.ub,null)))}renderContent(){const e=this.props.fills;return p.a.createElement(u.Fragment,null,d()(e)?p.a.createElement("div",{className:K.a.emptyState},"You have no past order fills."):p.a.createElement(u.Fragment,null,l()(o()(n()(e,"createdAt")),e=>this.renderTableRow(e))))}render(){const e=this.props,t=e.currentPair,a=e.fillsLoaded,r=e.isWalletConnecting,n=e.isWalletInvalid,i=e.userHasNoAccounts;return p.a.createElement("div",{className:U.a.crossFills},p.a.createElement(v.c,null,p.a.createElement(R.a,{headerConfig:l()(this.getTableConfig(),e=>e)}),p.a.createElement("div",{className:f()(K.a.content,{[K.a.contentPerpetual]:t&&t.type===L.d.PERPETUAL})},r||!a&&!i&&!n?p.a.createElement("div",{className:K.a.loading},p.a.createElement(T.a,null)):this.renderContent())))}}z.propTypes={allMarkets:b.a.array.isRequired,currentPair:b.a.object.isRequired,fills:b.a.array.isRequired,fillsLoaded:b.a.bool.isRequired,isMobile:b.a.bool.isRequired,isWalletConnecting:b.a.bool.isRequired,isWalletInvalid:b.a.bool.isRequired,stringGetter:b.a.func.isRequired,userHasNoAccounts:b.a.bool.isRequired};var Z=Object(_.k)(Object(y.c)(e=>({allMarkets:Object(w.d)(e),currentPair:Object(I.e)(e),fills:Object(N.i)(e),fillsLoaded:Object(N.j)(e),isMobile:Object(C.d)(e).isMobile,isWalletConnecting:Object(S.e)(e),isWalletInvalid:Object(S.v)(e),userHasNoAccounts:Object(P.y)(e)}))(z));a.d(t,"a",function(){return Z})},2159:function(e,t,a){},2160:function(e,t,a){e.exports={title:"_1PdUqVekrSRpvnWjZzeVrE",doubleTitle:"wSdqhEheF-kdmofL9_n5G",doubleTooltip:"_1t07aupEV6Hw8ag1Rwh-TC"}},2161:function(e,t,a){e.exports={collateralization:"_3Jjxqc_v5i6Sl5-pDI7v7m",red:"_2gfHkqdC0ZUKvmVSopFplt",withSuffix:"_2p_GsP7NpEmOIJxEpIcqvQ",infinite:"_1nKenGGt0Xnppcydfg8wMl",small:"wO275Y596ZIW4aEBgpYmG",large:"_3GPX8iSGVCnbO9zOBVdBHr"}},2163:function(e,t,a){e.exports={dropdown:"_1bDdh5nYnDoQPasNegtesO",pairEntry:"MlQzEhmgD54Z_7Vjdkg4v",marketNameIcon:"_2CGihejg78xcuReXJ-I4A-",marketIcon:"_1PT28MDH5ajkWUdca3wUDH",marketIconPerp:"_3jFoxkwsboUZdn84dSmw9N",priceContainer:"_3thVNRhdg-9vUsxPkS5Sr5",changeContainer:"_3KJb-Ugk3JWSc16uCwq8pt",percentChange:"_20wHTcDc9-9tMSTIZRhukZ",green:"_1ofSXY8MpqyE8wBB-Bf0qf",red:"_3mgukL4c2j2iQUlH7zk3gT",selectedEntryCheck:"NriznvnNx5anjGeVLd89P"}},2164:function(e,t,a){e.exports={selectMarket:"_3VTmhdaPb6jsKr_xWs7O4s",selectMarketButtonDropdown:"_2c9nPvfS0xREcVBT0UV0Th",selectMarketButton:"_3otHCMFe5i-y9MuVHLnwDT",buttonDropdownOpen:"_2ukGPwyHMU-X7PDKk9KVqn",symbol:"_1KyaoMW9ey14gBxUpsnhIP",symbolLeft:"lKQgak8Xz8OZwGwLy9zAk",marketIcon:"a02BZ1WRbWeqd9OIqZGPr",marketIconPerp:"_2Y49FczbTgR88wNJXMmWr2"}},2165:function(e,t,a){e.exports={productUnavailable:"_1CMeWrBVL3aPcbGjV1gSxC",text:"_2SOpRg2GW_SfGzHF_c4h-A"}},2166:function(e,t,a){e.exports={perpetualLeverageSlider:"_1U7TbKmmnqSpgqUSMzMGnl",leverageLabel:"_3SS4uL0oiVJ95ZZpN8c2MH",leverageBadge:"_24lBUpwb_4ulI1dQjyW5FW",leverageBadgeLong:"_1mSLMt9CMuA--sISM8xxbk",leverageBadgeShort:"_2DCxw1Av9qUfcCIT2PF7US",labels:"_2qMVcLKoCXviMD57PW0hHI",label:"aHAZB2Puou6lpxYWCzUnX",dots:"_3Exz7KbogeEsI9jsg4IV2y",dot:"_3hSuMH5NWlLCVFvsIPBpJ-"}},2167:function(e,t,a){e.exports={tradeReceipt:"_2yaua8HwORaH7jJ7NwfOj1",row:"VECzWHOu1NYOqt4QMDpJL",title:"_2yqVWTegM_6-T7pfXfUzhe",value:"lL-Ev8uaBnxL2usqFe_xi",red:"_V15lf8hBhJzUQHozGZEV",badge:"_1WITnQD-qzACgA3Tyha60u",badgeGradient:"QKC-IeLKiz2ZeiO1dkMvH"}},2168:function(e,t,a){},2169:function(e,t,a){e.exports={slidingTabs:"tlLiCocP8Y6yD1BqIOJOd",twoTabs:"_2AB8qMvzSs9mlUfRd9oyim",threeTabs:"_2r_2I2ObnCAflzw6yh_6uJ","selectedIndex--1":"_2YCmapsZytOs1cDrNdC9IW","selectedIndex--2":"_2OgA-aYVumFpXox1o6dCc8",tab:"_3YmH3d966IPzt4Sy5Nb5hD",selected:"_3Iu8gYmW-eRtXTaTMQkyMz"}},2170:function(e,t,a){e.exports={leverageGrid:"_1fb1gpofDClK2ZVyTFjtDH"}},2171:function(e,t,a){},2172:function(e,t,a){"use strict";var r=a(231),n=a.n(r),i=a(112),o=a.n(i),s=a(4),l=a.n(s),c=a(0),d=a.n(c),u=a(1),p=a.n(u),m=a(52),b=a(60),h=a(19),g=a.n(h),y=a(9),E=a.n(y),O=a(74),f=a(31),_=a(250),k=a(44),T=a(5),v=a(24),R=a(2165),S=a.n(R);const P=({currentPair:e,isUserInUsa:t,stringGetter:a})=>e.type===v.d.PERPETUAL&&t?d.a.createElement("div",{className:S.a.productUnavailable},d.a.createElement(f.a,null),d.a.createElement("div",{className:S.a.text},a({key:T.a.PERPETUAL_NOT_AVAILABLE})," ",a({key:T.a.MORE_DETAILS_TOS}),d.a.createElement("a",{href:"https://dydx.exchange/terms-of-use/",target:"_blank",rel:"noopener noreferrer"},d.a.createElement(f.ub,null)))):null;P.propTypes={currentPair:p.a.object.isRequired,isUserInUsa:p.a.bool.isRequired,stringGetter:p.a.func.isRequired};var I=Object(O.k)(Object(m.c)(e=>({currentPair:Object(k.e)(e),isUserInUsa:Object(_.c)(e)}))(P)),w=a(2126),N=a.n(w),C=a(621),A=a.n(C),j=a(2501),L=a(2500),M=a(2261),D=a(2123),x=a(2127),q=a(86),B=a(296),F=a(26),W=a(2122),G=a(343),U=a(132),V=a(171),K=a(61),H=a(2),Y=a(615),z=a(10),Z=a(46),$=a(2166),Q=a.n($);const X=Object(M.a)({rail:{height:6,background:"linear-gradient(90deg, #ff5757, #616774, #57ff5f)",opacity:1,borderRadius:4},thumb:{zIndex:1,marginTop:-3,backgroundColor:"#ffffff","&:hover":{boxShadow:"0 0 5px #959eb1"},"&:active":{boxShadow:"none"}},valueLabel:{top:8,fontSize:11,left:"calc(-50% - 12px)"}})(j.a),J=Object(M.a)({tooltip:{backgroundColor:"#17181a",margin:"8px 0",fontSize:11,fontFamily:"Roboto Mono"}})(L.a),ee=({children:e,open:t,value:a})=>d.a.createElement(J,{open:t,enterTouchDelay:0,placement:"bottom",title:a},e);class te extends c.Component{constructor(e){super(e),this.getPositionLeverage=(({amount:e,price:t,side:a}={})=>{const r=this.props,n=r.allIndexPrices,i=r.arePerpetualBalancesLoaded,o=r.currentPair,s=o.orderMarket,l=o.isInversePerpetual,c=r.perpetualBalances;if(!i)return H.a.ZERO;const d=c[s],u=d.margin,p=d.position,m=n[s];let b=Object(z.a)(p),h=Object(z.a)(u);if(e&&t&&a){const r=l?e.div(t.baseAmount):e.times(t.baseAmount);b=a===H.f.SELL?b.minus(e):b.plus(e),h=a===H.f.SELL?h.plus(r):h.minus(r)}const g=Object(Y.c)({positionBN:b,marginBN:h,indexPrice:m,isInversePerpetual:l});return g||H.a.ZERO}),this.onChangeLeverage=((e,t)=>{const a=this.props,r=a.allIndexPrices,n=a.allMarkets,i=a.allOrderbookOrders,o=a.perpetualBalances,s=a.currentPair,l=a.setTradeData,c=s.orderMarket,d=s.isInversePerpetual,u=s.baseSymbol,p=s.quoteSymbol,m=o[c]||{},b=m.margin,h=m.position,g=r[c],y=Object(F.c)({allMarkets:n,symbol:d?p:u}),E=Object(z.a)(h),O=Object(z.a)(b);let f,_;d?(f=E,_=O.times(g)):(f=E.times(g),_=O);const k=Object(z.a)(t),T=this.getPositionLeverage();let v,R;v=k.gt(T)?k.times(f.plus(_)).minus(f):f.minus(k.times(f.plus(_))),d||(v=v.div(g)),R=d?k.gt(E.lt(0)?T:-1*T)?H.f.BUY:H.f.SELL:k.gt(E.gte(0)?T:-1*T)?H.f.BUY:H.f.SELL;let S=Object(U.a)({allOrderbookOrders:i,allMarkets:n,pair:s,side:R,amount:v});const P=this.getPositionLeverage({amount:v,price:S,side:R});S&&P&&!P.dp(K.e).eq(k.abs())&&(v=d?S.baseAmount.times(k.times(_).plus(k.times(f)).plus(f)).div(k.times(S.baseAmount).plus(S.baseAmount).minus(k.times(g))):k.gt(T)?k.times(_.plus(f)).minus(f).div(S.baseAmount.times(k).minus(k.times(g)).plus(g)):k.abs().times(_.plus(f)).minus(f).div(k.minus(1).times(g).minus(S.baseAmount.times(k))),S=Object(U.a)({allOrderbookOrders:i,allMarkets:n,pair:s,side:R,amount:v.abs()})),l({amount:v.abs(),amountDisplayValue:Object(Z.a)(v,y.currency.decimals).toFixed(K.n),selectedPerpetualLeverage:k,side:R,price:S})}),this.onChangeLeverage=A()(this.onChangeLeverage,100)}render(){const e=this.props,t=e.allIndexPrices,a=e.allMarkets,r=e.arePerpetualBalancesLoaded,n=e.arePerpetualMarketsLoaded,i=e.currentPair,s=e.currentTradeData,l=e.perpetualBalances,c=e.perpetualMarkets,u=e.stringGetter,p=i.maxLeverage,m=s.selectedPerpetualLeverage;let b=m;if(o()(b)&&r&&n){const e=Object(Y.h)({allIndexPrices:t,allMarkets:a,currentPair:i,perpetualBalances:l,perpetualMarkets:c,currentTradeData:s}),r=e.positionLeverage,n=e.positionSide,o=e.newPositionLeverage,d=e.newPositionSide;b=e.hasOrderDiff?d===V.d.SHORT?o.negated():o:n===V.d.SHORT?r.negated():r}const h=[];return N()(11,e=>h.push(d.a.createElement("div",{key:e,className:Q.a.dot}))),d.a.createElement(x.c,{label:d.a.createElement(D.a,{className:Q.a.leverageLabel,top:8,left:-48,tooltip:"perpetual-leverage-slider"},u({key:T.a.LEVERAGE}),m&&!m.isZero()&&d.a.createElement("div",{className:g()(Q.a.leverageBadge,{[Q.a.leverageBadgeShort]:m.lt(0),[Q.a.leverageBadgeLong]:m.gt(0)})},u({key:m.lt(0)?T.a.SHORT:T.a.LONG})))},d.a.createElement("div",{className:Q.a.perpetualLeverageSlider},d.a.createElement(X,{track:!1,ValueLabelComponent:ee,min:p.negated().toNumber(),max:p.toNumber(),step:.1,valueLabelFormat:e=>`${Math.abs(e).toFixed(K.e)}\xd7`,value:b?b.toNumber():0,onChange:this.onChangeLeverage,valueLabelDisplay:"auto"}),d.a.createElement("div",{className:Q.a.dots},h)),d.a.createElement("div",{className:Q.a.labels},d.a.createElement("div",{className:Q.a.label},p.toFixed(0),"\xd7"),d.a.createElement("div",{className:Q.a.label},"0\xd7"),d.a.createElement("div",{className:Q.a.label},p.toFixed(0),"\xd7")))}}te.propTypes={allIndexPrices:p.a.object.isRequired,allMarkets:p.a.array.isRequired,allOrderbookOrders:p.a.object.isRequired,arePerpetualBalancesLoaded:p.a.bool.isRequired,arePerpetualMarketsLoaded:p.a.bool.isRequired,currentPair:p.a.object.isRequired,currentTradeData:p.a.object.isRequired,perpetualBalances:p.a.object.isRequired,perpetualMarkets:p.a.object.isRequired,setTradeData:p.a.func.isRequired,stringGetter:p.a.func.isRequired};var ae=Object(O.k)(Object(m.c)(e=>({allIndexPrices:Object(W.b)(e),allMarkets:Object(F.d)(e),allOrderbookOrders:Object(U.d)(e),arePerpetualBalancesLoaded:Object(B.c)(e),arePerpetualMarketsLoaded:Object(B.d)(e),currentPair:Object(k.e)(e),currentTradeData:Object(G.b)(e),perpetualBalances:Object(B.e)(e),perpetualMarkets:Object(B.g)(e)}),e=>Object(b.b)({setTradeData:q.e},e))(te)),re=a(34),ne=a(232),ie=a(33),oe=a(11),se=a(150),le=a(57),ce=a(94),de=a(386),ue=a(614),pe=a(301),me=a(2167),be=a.n(me);const he=({allPairOrderData:e,orderMarket:t,isPerpetual:a=!1})=>{const r=e[t]||{};return Object(Z.a)(r.smallOrderThreshold||0,a?r.decimals:l()(r,"baseCurrency.decimals",0))};class ge extends c.Component{renderRow({title:e,value:t,tooltipConfig:{tooltip:a,top:r,left:n,stringParams:i,learnMoreLink:o}={}}){return t?d.a.createElement("div",{className:be.a.row},d.a.createElement("div",{className:be.a.title},a?d.a.createElement(D.a,{top:r,left:n,tooltip:a,stringParams:i,learnMoreLink:o},e):e),d.a.createElement("div",{className:be.a.value},t)):null}renderMarginDeposit(){const e=this.props,t=e.currentTradeData.marginDeposit,a=e.stringGetter;return t?this.renderRow({title:a({key:T.a.MARGIN_DEPOSIT}),value:`${t.getNaturalValue().toFixed(K.n)} ${t.market.symbol}`,tooltipConfig:{tooltip:"margin-deposit",top:8,left:-48}}):null}renderTradeAmount(){const e=this.props,t=e.allPairOrderData,a=e.baseMarket,r=e.currentPair.orderMarket,n=e.currentTradeData.amount,i=e.selectedTradeType,o=e.stringGetter,s=e.tradeAmount,l=(t[r]||{}).minimumOrderSize,c=i===oe.v.ISOLATED&&n&&!n.isZero()&&new le.a(s,a);return c&&this.renderRow({title:o({key:T.a.TRADE_AMOUNT}),value:d.a.createElement("div",{className:g()({[be.a.red]:c.baseAmount.lt(l)})},c.getNaturalValue().toFixed(K.n)," ",c.market.symbol),tooltipConfig:{tooltip:"isolated-trade-amount",top:8,left:-48}})}renderExpectedPrice(){const e=this.props,t=e.currentPair,a=t.type,r=t.tickDecimals,n=t.displayQuoteSymbol,i=e.currentTradeData,o=i.tradeOrderType,s=i.price,l=e.selectedTradeType,c=e.stringGetter,d=(l===oe.v.ISOLATED||a===v.d.PERPETUAL&&o===oe.u.MARKET)&&s;return d&&d.baseAmount.isFinite()&&this.renderRow({title:c({key:T.a.EXPECTED_PRICE}),value:`${d.getNaturalValue().toFixed(r)} ${n}`,tooltipConfig:{tooltip:"slippage-expected-price",top:8,left:-48,learnMoreLink:"https://help.dydx.exchange/trading-faq/spread-price-impact-and-slippage"}})}renderIndexPrice(){const e=this.props,t=e.baseMarket,a=e.quoteMarket,r=e.currentPair,n=r.displayQuoteSymbol,i=r.tickDecimals,o=e.currentTradeData.tradeOrderType,s=e.indexPriceNatural,l=e.stringGetter,c=o===oe.u.STOP&&ce.a.fromNaturalValue(s,t,a);return c&&c.baseAmount.isFinite()&&this.renderRow({title:l({key:T.a.INDEX_PRICE}),value:`${c.getNaturalValue().toFixed(i)} ${n}`,tooltipConfig:{tooltip:"index-price",top:8,left:-48}})}renderInitialStopPrice(){const e=this.props,t=e.currentPair,a=t.displayQuoteSymbol,r=t.tickDecimals,n=e.currentTradeData,i=n.triggerPriceMP,o=n.trailingPercent,s=e.stringGetter;return o&&!o.isZero()&&i&&this.renderRow({title:s({key:T.a.INITIAL_STOP_PRICE}),value:`${i.getNaturalValue().toFixed(r)} ${a}`,tooltipConfig:{tooltip:"initial-stop-price",top:8,left:-48}})}renderWorstPrice(){const e=this.props,t=e.currentPair,a=t.displayQuoteSymbol,r=t.tickDecimals,n=e.currentTradeData,i=n.side,o=n.price,s=n.tradeOrderType,l=n.triggerPriceMP,c=e.slippage,d=e.stopSlippage,u=e.stringGetter;let p=null;return s===oe.u.MARKET&&o?p=o.getMarketPriceWithSlippage(c,i):s===oe.u.STOP&&l&&(p=l.getMarketPriceWithSlippage(d,i)),p&&p.baseAmount.isFinite()&&this.renderRow({title:u({key:T.a.WORST_PRICE}),value:`${p.getNaturalValue().toFixed(r)} ${a}`,tooltipConfig:{tooltip:"slippage-worst-price",top:8,left:-48,learnMoreLink:"https://help.dydx.exchange/trading-faq/spread-price-impact-and-slippage"}})}renderTotal({feeAmount:e,isTaker:t}){const a=this.props,r=a.baseMarket,n=a.currentPair,i=n.displayQuoteSymbol,o=n.tickDecimals,s=n.isInversePerpetual,l=a.currentTradeData,c=l.side,d=l.price,u=l.amount,p=l.tradeOrderType,m=l.limitPrice,b=l.triggerPriceMP,h=a.quoteMarket,g=a.selectedTradeType,y=a.stringGetter;let E,O,f;return g===oe.v.CROSS&&u&&(p===oe.u.MARKET&&d?O=d.baseAmount:p===oe.u.LIMIT&&m?O=m.baseAmount:p===oe.u.STOP&&b&&(O=b.baseAmount),O&&(E=s?u.div(O):u.times(O))),E&&(f=s?new le.a(E,r):new le.a(c===H.f.BUY?E.plus(e?e.baseAmount:0):E.minus(e?e.baseAmount:0),h)),f&&this.renderRow({title:y({key:T.a.TOTAL}),value:`${p!==oe.u.LIMIT||t?"\u2248 ":""}${f.getNaturalValue().toFixed(Math.max(o,K.f))} ${s?f.market.symbol:i}`})}renderLiquidationPrice(){const e=this.props,t=e.currentPair,a=t.baseSymbol,r=t.displayQuoteSymbol,n=t.tickDecimals,i=e.currentTradeData.side,o=e.liquidationPrice,s=e.stringGetter;return o&&o.baseAmount.isFinite()&&this.renderRow({title:s({key:T.a.LIQUIDATION_PRICE}),value:`${o.getNaturalValue().toFixed(n)} ${r}`,tooltipConfig:{tooltip:i===H.f.BUY?"liquidation-price-long":"liquidation-price-short",top:8,left:-48,stringParams:{SYMBOL:a}}})}renderPriceImpact(){const e=this.props,t=e.priceImpact,a=e.stringGetter;return t&&this.renderRow({title:a({key:T.a.PRICE_IMPACT}),value:d.a.createElement("div",{className:g()({[be.a.red]:t.abs().gt(oe.r)})},t.abs().times(100).toFixed(K.k),"%"),tooltipConfig:{tooltip:"price-impact",top:8,left:-48}})}renderInterest(){const e=this.props,t=e.baseMarket,a=e.quoteMarket,r=e.selectedTradeType,n=e.currentTradeData,i=n.side,o=n.amount,s=n.price,l=n.marginDeposit,c=e.stringGetter,d=Object(de.a)({tradeType:r,price:s,side:i,amount:o,marginDepositMV:l}),u=d.debtWei,p=d.collateralWei;let m,b;i===H.f.SELL?(m=t,b=a):i===H.f.BUY&&(m=a,b=t);const h=Object(de.d)({borrowMarket:m,supplyMarket:b,debtWei:u,collateralWei:p});return r===oe.v.ISOLATED&&h&&!h.isZero()&&this.renderRow({title:c({key:T.a.INTEREST_RATE_APR}),value:`${h.lt(0)?"+":""}${h.negated().times(100).toFixed(K.k)}%`,tooltipConfig:{tooltip:"interest-rate",top:-148,left:-48,stringParams:{SUPPLY_SYMBOL:b.symbol,BORROW_SYMBOL:m.symbol}}})}renderFeesFields({feeAmount:e,feePercentage:t,isTaker:a,isSmallOrder:r}){const n=this.props,i=n.allPairOrderData,o=n.currentPair,s=o.orderMarket,l=o.displayQuoteSymbol,u=o.tickDecimals,p=o.type,m=o.isInversePerpetual,b=n.stringGetter,h=n.walletData,y=p===v.d.PERPETUAL;let E,O,f,_="";t&&(y&&!a?(E=b({key:T.a.MAKER}),_="fee-maker-rebate",O=-96):r?(E=b({key:T.a.SMALL_ORDER}),_="fee-small-order",O=-148,f={ETH_THRESHOLD:he({allPairOrderData:i,orderMarket:"WETH-DAI"}),DAI_THRESHOLD:he({allPairOrderData:i,orderMarket:"DAI-USDC"}),USD_THRESHOLD:he({allPairOrderData:i,orderMarket:"WETH-PUSD",isPerpetual:!0}),BTC_THRESHOLD:he({allPairOrderData:i,orderMarket:"PBTC-USDC",isPerpetual:!0})}):(E=b(a?{key:T.a.TAKER}:{key:T.a.MAKER}),_=a?"fee-taker":"fee-maker",O=a?-96:-84));const k=K.m,R=Math.max(u,k),S=h[se.e.HAS_SET_REFERRER];return d.a.createElement(c.Fragment,null,t&&this.renderRow({title:d.a.createElement(c.Fragment,null,b({key:T.a.FEE})," ",d.a.createElement("div",{className:be.a.badge},E),"WETH-PUSD"!==s&&S&&a&&d.a.createElement("div",{className:g()(be.a.badge,be.a.badgeGradient)},"10% OFF"),"PLINK-USDC"===s&&a&&d.a.createElement("div",{className:g()(be.a.badge,be.a.badgeGradient)},"50% OFF")),value:t.isZero()?b({key:T.a.FREE}):d.a.createElement("div",{className:g()({[be.a.red]:t.gte(oe.h)})},t.times(100).toFixed(R),"%"),tooltipConfig:{tooltip:_,top:O,left:-48,stringParams:f}}),e&&this.renderRow({title:b({key:T.a.FEE_AMOUNT}),value:`\u2248 ${e.getNaturalValue().toFixed(R)} ${m?e.market.symbol:l}`}))}renderExpiration(){const e=this.props,t=e.canBypass28DayRequirement,a=e.selectedTradeType,r=e.stringGetter;let n;if(a===oe.v.ISOLATED){const e=re.DateTime.local().plus({days:H.b}),a=Object(ue.c)({expiration:e,stringGetter:r}),i=a.timeString,o=a.unitString;n=t?r({key:T.a.NONE}):`${i} ${o}`}return n&&this.renderRow({title:r({key:T.a.EXPIRY}),value:n,tooltipConfig:{tooltip:"expiration",top:-108,left:-48}})}render(){const e=this.props,t=e.allOrderbookOrders,a=e.allPairOrderData,r=e.baseMarket,n=e.currentPair,i=e.currentTradeData,o=e.isLeverageValid,s=e.quoteMarket,l=e.selectedTradeType,c=e.tradeAmount,u=e.walletData,p=e.walletAddress;if(!o)return d.a.createElement("div",{className:be.a.tradeReceipt},this.renderExpiration());const m=Object(pe.a)({allOrderbookOrders:t,allPairOrderData:a,baseMarket:r,currentPair:n,currentTradeData:i,quoteMarket:s,selectedTradeType:l,tradeAmount:c,walletData:u,walletAddress:p}),b=m.feeAmount,h=m.feePercentage,g=m.isTaker,y=m.isSmallOrder;return d.a.createElement("div",{className:be.a.tradeReceipt},this.renderMarginDeposit(),this.renderTradeAmount(),this.renderExpectedPrice(),this.renderIndexPrice(),this.renderInitialStopPrice(),this.renderWorstPrice(),this.renderLiquidationPrice(),this.renderPriceImpact(),this.renderInterest(),this.renderFeesFields({feeAmount:b,feePercentage:h,isTaker:g,isSmallOrder:y}),this.renderTotal({feeAmount:b,isTaker:g}),this.renderExpiration())}}ge.propTypes={allOrderbookOrders:p.a.object.isRequired,allPairOrderData:p.a.object.isRequired,baseMarket:p.a.object.isRequired,canBypass28DayRequirement:p.a.bool.isRequired,currentPair:p.a.object.isRequired,currentTradeData:p.a.object.isRequired,isLeverageValid:p.a.bool.isRequired,liquidationPrice:p.a.object,indexPriceNatural:p.a.object,priceImpact:p.a.object,quoteMarket:p.a.object.isRequired,selectedTradeType:p.a.string.isRequired,slippage:p.a.object.isRequired,stopSlippage:p.a.object.isRequired,stringGetter:p.a.func.isRequired,tradeAmount:p.a.object,walletData:p.a.object,walletAddress:p.a.string};var ye=Object(O.k)(Object(m.c)(e=>({allOrderbookOrders:Object(U.d)(e),allPairOrderData:Object(k.c)(e),baseMarket:Object(k.d)(e),canBypass28DayRequirement:Object(_.a)(e),currentPair:Object(k.e)(e),currentTradeData:Object(G.b)(e),indexPriceNatural:Object(W.d)(e),quoteMarket:Object(k.h)(e),selectedTradeType:Object(G.f)(e),walletData:Object(ne.b)(e),walletAddress:Object(ie.m)(e)}))(ge)),Ee=a(2153),Oe=a(2143),fe=a(2135),_e=a(2139),ke=a.n(_e);a(2168);function _slicedToArray(e,t){return function _arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function _iterableToArrayLimit(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var a=[],r=!0,n=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(l){n=!0,i=l}finally{try{r||null==s.return||s.return()}finally{if(n)throw i}}return a}(e,t)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}const Te=({label:e,badge:t,children:a,largeText:r,onClick:n})=>{const i=_slicedToArray(Object(c.useState)(!1),2),o=i[0],s=i[1];return d.a.createElement("div",{className:"component-expandable-menu"},d.a.createElement("div",{role:"button",tabIndex:0,className:g()("label",{label__expanded:o,"label__large-text":r}),onClick:()=>{n&&n(),s(!o)}},e,d.a.createElement("div",{className:"right-container"},t&&d.a.createElement("div",{className:g()("badge",{badge__activated:t.isActive})},t.label),d.a.createElement(f.m,null))),d.a.createElement(ke.a,{isOpened:o},d.a.createElement("div",{className:"menu-content"},a)))};Te.propTypes={badge:p.a.shape({label:p.a.string.isRequired,isActive:p.a.bool}),children:p.a.oneOfType([p.a.arrayOf(p.a.node),p.a.node]).isRequired,label:p.a.string.isRequired,largeText:p.a.bool,onClick:p.a.func};var ve=Te,Re=a(55),Se=a.n(Re),Pe=a(97),Ie=a.n(Pe),we=a(39),Ne=a.n(we),Ce=a(2169),Ae=a.n(Ce);const je=({className:e,tabConfig:t,selectedTabKey:a,onClick:r})=>d.a.createElement("div",{className:g()(Ae.a.slidingTabs,{[Ae.a.twoTabs]:2===Ne()(t),[Ae.a.threeTabs]:3===Ne()(t)},Ae.a[`selectedIndex--${Ie()(t,({key:e})=>e===a)}`],e)},Se()(t,({key:e,label:t})=>d.a.createElement("div",{key:e,role:"button",tabIndex:0,className:g()(Ae.a.tab,{[Ae.a.selected]:a===e}),onClick:()=>r(e)},t)));je.propTypes={className:p.a.string,tabConfig:p.a.arrayOf(p.a.shape({key:p.a.string.isRequired,label:p.a.string.isRequired})).isRequired,selectedTabKey:p.a.string.isRequired,onClick:p.a.func.isRequired};var Le=je,Me=a(190),De=a(2170),xe=a.n(De);const qe=({buttonConfig:e,largeText:t,maxSlippage:a,onChangeInput:r,onClickButton:n,slippage:i,slippageInput:o,stringGetter:s,tooltip:l="max-slippage"})=>d.a.createElement(x.c,{grey:t,label:d.a.createElement(D.a,{top:8,left:-48,tooltip:l},s({key:T.a.MAXIMUM_SLIPPAGE})),size:t?x.a.MEDIUM:x.a.SMALL},d.a.createElement("div",{className:xe.a.leverageGrid},Se()(e,({label:e,value:t})=>d.a.createElement(Me.g,{key:t,type:Me.a.SECONDARY,selected:""===o&&i.eq(t),onClick:()=>n(t)},e)),d.a.createElement(Me.h,{type:Me.a.SECONDARY,onChange:e=>{const t=e.slice(0,-1);r(t)},placeholder:s({key:T.a.CUSTOM_INPUT}),selected:""!==o,max:a,value:o,suffix:"%"})));qe.propTypes={buttonConfig:p.a.arrayOf(p.a.shape({label:p.a.string,value:p.a.number})).isRequired,largeText:p.a.bool,maxSlippage:p.a.number,onChangeInput:p.a.func.isRequired,onClickButton:p.a.func.isRequired,slippage:p.a.object,slippageInput:p.a.string,stringGetter:p.a.func.isRequired,tooltip:p.a.string};var Be=Object(O.k)(qe),Fe=a(618),We=a(79);function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var a,r,n=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var a,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var Ge=d.a.createElement("rect",{width:16,height:16,rx:4,fill:"#4280F9"}),Ue=d.a.createElement("path",{d:"M8 13C10.7614 13 13 10.7614 13 8C13 5.23858 10.7614 3 8 3C5.23858 3 3 5.23858 3 8C3 10.7614 5.23858 13 8 13Z",stroke:"white",strokeLinecap:"round",strokeLinejoin:"round"}),Ve=d.a.createElement("path",{d:"M8 5V8L10 9",stroke:"white",strokeLinecap:"round",strokeLinejoin:"round"}),Ke=function SvgGoodTil(e){var t=e.svgRef,a=_objectWithoutProperties(e,["svgRef"]);return d.a.createElement("svg",_extends({width:16,height:16,viewBox:"0 0 16 16",fill:"none",ref:t},a),Ge,Ue,Ve)},He=d.a.forwardRef(function(e,t){return d.a.createElement(Ke,_extends({svgRef:t},e))});a.p;function fill_or_kill_extends(){return(fill_or_kill_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function fill_or_kill_objectWithoutProperties(e,t){if(null==e)return{};var a,r,n=function fill_or_kill_objectWithoutPropertiesLoose(e,t){if(null==e)return{};var a,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var Ye=d.a.createElement("rect",{width:16,height:16,rx:4,fill:"#FF5757"}),ze=d.a.createElement("path",{d:"M4 9H7V12",stroke:"white",strokeLinecap:"round",strokeLinejoin:"round"}),Ze=d.a.createElement("path",{d:"M12 7H9V4",stroke:"white",strokeLinecap:"round",strokeLinejoin:"round"}),$e=d.a.createElement("path",{d:"M9 7L12.5 3.5",stroke:"white",strokeLinecap:"round",strokeLinejoin:"round"}),Qe=d.a.createElement("path",{d:"M3.5 12.5L7 9",stroke:"white",strokeLinecap:"round",strokeLinejoin:"round"}),Xe=function SvgFillOrKill(e){var t=e.svgRef,a=fill_or_kill_objectWithoutProperties(e,["svgRef"]);return d.a.createElement("svg",fill_or_kill_extends({width:16,height:16,viewBox:"0 0 16 16",fill:"none",ref:t},a),Ye,ze,Ze,$e,Qe)},Je=d.a.forwardRef(function(e,t){return d.a.createElement(Xe,fill_or_kill_extends({svgRef:t},e))}),et=(a.p,a(83)),tt=a(49),at=a(45),rt=a(102),nt=a(249),it=a(21),ot=a(38),st=a(279),lt=a(32);const ct=window.crypto||window.msCrypto;var dt=a(85),ut=a(103),pt=a(25),mt=a(170);a(2171);function trade_box_objectWithoutProperties(e,t){if(null==e)return{};var a,r,n=function trade_box_objectWithoutPropertiesLoose(e,t){if(null==e)return{};var a,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function asyncGeneratorStep(e,t,a,r,n,i,o){try{var s=e[i](o),l=s.value}catch(c){return void a(c)}s.done?t(l):Promise.resolve(l).then(r,n)}function _asyncToGenerator(e){return function(){var t=this,a=arguments;return new Promise(function(r,n){var i=e.apply(t,a);function _next(e){asyncGeneratorStep(i,r,n,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(i,r,n,_next,_throw,"throw",e)}_next(void 0)})}}function ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(a,!0).forEach(function(t){_defineProperty(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const bt=[{labelKey:T.a.DAYS_ABBREVIATED,value:it.g.DAYS},{labelKey:T.a.HOURS_ABBREVIATED,value:it.g.HOURS},{labelKey:T.a.MINS_ABBREVIATED,value:it.g.MINUTES}],ht={leverageInput:"",leverage:new E.a(2),slippageInput:"",slippage:oe.d,stopSlippageInput:"",stopSlippage:oe.e,error:null,loading:!1,didSetExpirationApproval:!1},gt=_objectSpread({},ht,{goodTilDateInput:null,isTrailingStopOrder:!1});class yt extends c.Component{constructor(e){var t;super(e),t=this,this.componentDidUpdate=(e=>{const t=this.props,a=t.selectedTradeType,r=t.currentPair,n=t.currentTradeData,i=n.price,o=n.side,s=n.amount,c=t.setTradeData,d=this.state.leverage,u=e.currentPair,p=e.selectedTradeType;if(r.key!==u.key||r.type!==u.type)this.resetTradeBox();else if(a!==p)this.resetTradeBox({resetTradeData:!1});else{const e=this.getMarketPrice(o,s,d);l()(e,"baseAmount","").toString()!==l()(i,"baseAmount","").toString()&&c({price:this.getMarketPrice(o,s,d)})}}),this.resetTradeBox=(({resetTradeData:e=!0,resetIsTrailing:t=!0}={})=>{const a=this.props.setTradeData;e&&a(oe.c);const r=_objectSpread({},ht);t&&(r.isTrailingStopOrder=!1),this.setState(r)}),this.getMarginAccountBalanceBN=(e=>{const t=this.props.marginAccount;if(!e)return null;const a=Object(rt.b)({account:t,market:e});return a?Object(z.a)(a.wei):null}),this.onClickCta=_asyncToGenerator(function*(){const e=t.props,a=e.allPairOrderData,r=e.baseMarket,n=e.canBypass28DayRequirement,i=e.currentPair,o=e.currentTradeData,s=o.amount,l=o.price,c=o.side,u=o.marginDeposit,p=o.tradeOrderType,m=o.triggerPriceMP,b=o.trailingPercent,h=e.legacySigning,g=e.marginAccount,y=e.openModal,O=e.placeCrossOrder,f=e.placeMarketIsolatedOrder,_=e.quoteMarket,k=e.selectedTradeType,R=e.stringGetter,S=e.walletAddress,P=e.walletType,I=i.type,w=t.state,N=w.leverage,C=w.slippage,A=w.isTrailingStopOrder;t.setState({loading:!0});const j=t.getIsolatedTradeAmount(s,N,c),L=function(){var e=_asyncToGenerator(function*(){try{if(k===oe.v.CROSS){const e=t.getSoloLimitOrderData(),r=e.order,n=e.fillOrKill,o=e.postOnly,s=e.setExpirationOnFill,l=p===oe.u.STOP;yield O({allPairOrderData:a,pair:i,walletType:P,legacySigning:h,order:r,fillOrKill:n,postOnly:o,setExpirationOnFill:s,isStopOrder:l,isTrailingStopOrder:l&&A,triggerPriceMP:(l||A)&&m,trailingPercent:l&&A&&(c===H.f.BUY?b:b.negated())})}else{const e=function getRandomHex(e){const t=ct.getRandomValues(new Uint8Array(e));let a="0x";for(let r=0;r<=t.length-1;r+=1){let e=t[r].toString(16);1===e.length&&(e=`0${e}`),a+=e}return a}(32),o=new E.a(e),d=l.getMarketPriceWithSlippage(C,c),p=Object(ut.a)({allPairOrderData:a,pair:i,baseMarket:r,quoteMarket:_,amount:j,side:c,priceMP:d,walletAddress:S,accountNumber:o,tradeOrderType:oe.u.MARKET,isIsolatedOrder:!0}).order;yield f({order:p,marginDeposit:u,positionSize:s,leverage:N,liquidationPrice:t.getLiquidationPrice(),openPriceMP:d,side:c,baseMarket:r,quoteMarket:_,pair:i,accountNumberBN:o,walletAddress:S,walletType:P,legacySigning:h,setExpiration:!n})}t.resetTradeBox({resetIsTrailing:!1})}catch(e){let a;Object(mt.d)(e)?I===v.d.SPOT?(a=R({key:T.a.SPOT_LOW_COLL_TRY_POST_ONLY}),Object(dt.b)("trade-box","spot-collateralization-threshold-error")):(a=R({key:T.a.LOW_COLL_ORDER_TRY_AGAIN}),Object(dt.b)("trade-box","collateralization-threshold-error")):Object(mt.a)(e)?(a=R({key:T.a.PENDING_FILLS_TRY_AGAIN}),Object(dt.b)("trade-box","pending-fills-error")):Object(mt.f)(e)&&(a=R({key:T.a.SPOT_BALANCE_BELOW_ZERO}),Object(dt.b)("trade-box","spot-balance-below-zero-error"));const r=Object(mt.j)({error:e,walletAddress:S,walletType:P,location:"trade-box:place-order",notifyBugsnag:!a,stringGetter:R}).message;t.setState({loading:!1,error:a||r})}});return function executeOrder(){return e.apply(this,arguments)}}(),M=Object(z.a)(t.getPriceImpact()),D=M.abs().gt(oe.r),x=t.getMarginAccountBalanceBN(r),q=t.getMarginAccountBalanceBN(_);let B=!1;k===oe.v.ISOLATED&&(B=c===H.f.BUY?x.gte(0)&&x.minus(u.baseAmount).lt(0):q.gte(0)&&q.minus(u.baseAmount).lt(0));const F=Object(rt.c)({account:g,market:r}),W=Object(rt.c)({account:g,market:_});let G;k===oe.v.ISOLATED&&(c===H.f.BUY&&x.lt(0)&&(F||n||(G=!0)),c===H.f.SELL&&q.lt(0)&&(W||n||(G=!0)));const U={onClickCta:L,onClickCancel:()=>t.setState({loading:!1}),onClickOutside:()=>t.setState({loading:!1})};if(B){let e="";n||(e=R({key:T.a.EXPIRATION_WARNING})),yield y({type:ot.a.WARNING,props:_objectSpread({title:R({key:T.a.NEGATIVE_BALANCE_WARNING_TITLE}),body:d.a.createElement("span",null,R({key:T.a.NEGATIVE_BALANCE_WARNING_BODY,params:{SYMBOL:c===H.f.BUY?r.symbol:_.symbol}})," ",e," ",R({key:T.a.WARNING_CONFIRM_TRADE})),ctaLabel:R({key:T.a.YES_CONTINUE})},U)})}else if(G){const e=c===H.f.BUY?r.symbol:_.symbol;yield y({type:ot.a.WARNING,props:_objectSpread({title:R({key:T.a.NEW_EXPIRY_WARNING_TITLE}),body:d.a.createElement("span",null,R({key:T.a.NEW_EXPIRY_WARNING_BODY,params:{SYMBOL:e}})," ",R({key:T.a.WARNING_CONFIRM_TRADE})),ctaLabel:R({key:T.a.YES_CONTINUE})},U)})}else D?yield y({type:ot.a.WARNING,props:_objectSpread({title:R({key:T.a.HIGH_PRICE_IMPACT_WARNING_TITLE}),body:d.a.createElement("span",null,R({key:T.a.HIGH_PRICE_IMPACT_WARNING_BODY,params:{PRICE_IMPACT:`${M.times(100).toFixed(2)}%`}})," ",R({key:T.a.WARNING_CONFIRM_TRADE})),ctaLabel:R({key:T.a.YES_CONTINUE})},U)}):yield L();t.setState({loading:!1})}),this.setDydexExpirationApproval=_asyncToGenerator(function*(){const e=t.props,a=e.setExpiryApproval,r=e.stringGetter,n=e.walletAddress,i=e.walletType;t.setState({loading:!0,didSetExpirationApproval:!0});try{yield a({walletAddress:n})}catch(o){const e=Object(mt.j)({error:o,walletAddress:n,walletType:i,location:"trade-box:set-approval",stringGetter:r}).message;t.setState({loading:!1,error:e,didSetExpirationApproval:!1})}t.setState({loading:!1})}),this.getSoloLimitOrderData=(()=>{const e=this.props,t=e.allPairOrderData,a=e.baseMarket,r=e.canBypass28DayRequirement,n=e.currentPair,i=e.currentTradeData,o=i.amount,s=i.price,l=i.side,c=i.tradeOrderType,d=i.limitPrice,u=i.triggerPriceMP,p=i.postOnlyChecked,m=i.timeInForceOption,b=i.trailingPercent,h=e.selectedTradeType,g=e.quoteMarket,y=e.spotAccount,O=e.walletAddress,f=this.state,_=f.leverage,k=f.slippage,T=f.stopSlippage,R=f.goodTilDateInput,S=f.goodTilDateTimescale,P=f.isTrailingStopOrder;if(!o||o.lt(0)||c===oe.u.LIMIT&&!d||c===oe.u.MARKET&&!s||c===oe.u.STOP&&(P?!b||b.isZero():!u))return{};const I=n.type;let w;if(c===oe.u.LIMIT)w=d;else if(c===oe.u.MARKET){const e=s.getMarketPriceWithSlippage(k,l);if(I===v.d.SPOT&&l===H.f.BUY){const t=lt.a.canonicalOrders.getFeeForOrder(Object(z.a)(a.id),o),r=Object(z.a)(Object(rt.b)({account:y,market:g}).wei).div(o.times(t.plus(1)));w=new ce.a(E.a.min(r,e.baseAmount),a,g)}else w=e}else c===oe.u.STOP&&(w=u.getMarketPriceWithSlippage(T,l));const N=h===oe.v.ISOLATED,C=Object(ut.a)({allPairOrderData:t,pair:n,baseMarket:a,quoteMarket:g,amount:N?this.getIsolatedTradeAmount(o,_,l):o,side:l,priceMP:w,triggerPriceMP:u,walletAddress:O,tradeOrderType:c,goodTilDate:new E.a(Object(ut.d)(R,S.value).toSeconds()).integerValue(E.a.ROUND_CEIL),timeInForceOption:m,postOnly:p,decreaseOnly:!1,isTrailingStopOrder:P,isIsolatedOrder:N});return{order:C.order,fillOrKill:C.fillOrKill,postOnly:C.postOnly,setExpirationOnFill:!r}}),this.onChangeCustomLeverage=(e=>{const t=this.props.currentTradeData.side,a=e.slice(0,-1);this.setState({leverageInput:a}),Object(dt.b)("trade-box","change-custom-leverage-button",{leverage:a}),(t===H.f.SELL&&a>0&&a<=4||t===H.f.BUY&&a>1&&a<=5)&&this.updateOrder({leverage:new E.a(e.slice(0,-1))})}),this.onUpdateLeverage=(e=>{this.setState({leverageInput:""}),Object(dt.b)("trade-box","click-leverage-button",{leverage:e}),this.updateOrder({leverage:new E.a(e)})}),this.onUpdateAmountInput=((e,t)=>{const a=this.state.leverage;this.updateOrder({newAmount:e,newAmountDisplayValue:t,leverage:a})}),this.onUpdateLimitPriceInput=((e,t)=>{const a=this.props,r=a.allPairOrderData,n=a.currentPair.orderMarket,i=a.setTradeData,o=a.baseMarket,s=a.quoteMarket,l=a.currentTradeData.tradeOrderType,c=(r[n]||{}).minimumTickSize,d=H.a.ONE.shiftedBy(o.currency.decimals);let u=l;t&&(u=oe.u.LIMIT),i({tradeOrderType:u,limitPrice:t?new ce.a(e.div(d),o,s).getMarketPriceRoundedToTickSize(c):null}),this.setState({error:null})}),this.onUpdateStopPriceInput=((e,t)=>{const a=this.props,r=a.allPairOrderData,n=a.currentPair.orderMarket,i=a.setTradeData,o=a.baseMarket,s=a.quoteMarket,l=(r[n]||{}).minimumTickSize,c=H.a.ONE.shiftedBy(o.currency.decimals);i({triggerPriceMP:t?new ce.a(e.div(c),o,s).getMarketPriceRoundedToTickSize(l):null}),this.setState({error:null})}),this.onUpdateTrailingPercentInput=(e=>{const t=this.props,a=t.allIndexPrices,r=t.allMarkets,n=t.baseMarket,i=t.currentPair,o=t.currentTradeData.side,s=t.quoteMarket,l=t.setTradeData;let c=null;if(e&&!e.isZero()){const t=Object(W.a)({pair:i,allIndexPrices:a,allMarkets:r});c=ce.a.fromNaturalValue(Object(z.a)(t).times(o===H.f.BUY?H.a.ONE.plus(e.shiftedBy(-2)):H.a.ONE.minus(e.shiftedBy(-2))),n,s)}l({trailingPercent:e,triggerPriceMP:c}),this.setState({error:null})}),this.onUpdateGoodTilDate=((e,t)=>{let a=parseInt(e,10);a>it.e&&(a=it.e),this.setState({error:null,goodTilDateInput:a,goodTilDateTimescale:t})}),this.onClickMax=(()=>{const e=this.props,t=e.allMarkets,a=e.allOrderbookOrders,r=e.currentPair,n=e.baseMarket,i=e.quoteMarket,o=e.currentTradeData.side,s=e.selectedTradeType,l=this.state.leverage,c=this.getMarginAccountBalanceBN(n),d=this.getMarginAccountBalanceBN(i);if(n&&i&&c&&d&&s===oe.v.ISOLATED){const e=Object(de.c)({allMarkets:t,allOrderbookOrders:a,currentPair:r,baseMarket:n,quoteMarket:i,side:o,leverage:l,baseMarketBalanceBN:c,quoteMarketBalanceBN:d,collateralization:this.getCollateralization(l,o)});if(e){const t=e.amount,a=e.amountNatural;this.updateOrder({newAmount:t,newAmountDisplayValue:a,leverage:l})}}}),this.onClickBuy=(()=>{const e=this.props.selectedTradeType,t=this.state.leverage;let a=t;e!==oe.v.ISOLATED||!t.lte(1)&&this.getIsLeverageValid()||(a=new E.a(2),this.setState({leverageInput:""})),Object(dt.b)("trade-box","click-long"),this.updateOrder({newSide:H.f.BUY,leverage:a})}),this.onClickSell=(()=>{const e=this.state.leverage;let t=e;!e.gte(3)&&this.getIsLeverageValid()||(t=new E.a(3),this.setState({leverageInput:""})),Object(dt.b)("trade-box","click-short"),this.updateOrder({newSide:H.f.SELL,leverage:t})}),this.updateOrder=(({newAmount:e,newAmountDisplayValue:t,newSide:a,leverage:r})=>{const n=this.props,i=n.baseMarket,s=n.currentTradeData,l=s.amount,c=s.side,d=n.quoteMarket,u=n.selectedTradeType,p=n.setTradeData,m=this.state.amountDisplayValue,b=e||l,h=a||c,g=this.getMarketPrice(h,b,r);if(u===oe.v.CROSS)return p({amount:b,amountDisplayValue:o()(t)?m:t,side:h,price:g,selectedPerpetualLeverage:null}),void this.setState({error:null,leverage:r});const y=h===H.f.SELL?d:i;let E=null;g&&b.gt(H.a.ZERO)&&(E=Object(de.b)({positionCollateralization:this.getCollateralization(r,h),tradeAmount:this.getIsolatedTradeAmount(b,r,h),orderSide:h,orderAmount:b,price:g,marginDepositMarket:y,quoteMarket:d})),p({amount:b,amountDisplayValue:o()(t)?m:t,side:h,price:g,marginDeposit:E,marginDepositMarket:y}),this.setState({error:null,leverage:r})}),this.getIsLeverageValid=(()=>{const e=this.state,t=e.leverageInput,a=e.leverage;return!(""!==t&&!new E.a(t).eq(a))}),this.renderSubmitButton=(e=>{const t=this.props,a=t.areDydexOrdersEnabled,r=t.canBypass28DayRequirement,i=t.currentPair.type,o=t.currentTradeData,s=o.amount,l=o.side,c=o.tradeOrderType,u=o.limitPrice,p=o.triggerPriceMP,m=o.trailingPercent,b=t.isPairOrderDataLoaded,h=t.isUserInUsa,g=t.isWalletReady,y=t.selectedTradeType,E=t.stringGetter,O=t.walletAddress,f=this.state,_=f.loading,k=f.didSetExpirationApproval,R=f.isTrailingStopOrder,S=i===v.d.PERPETUAL,P=i===v.d.MARGIN;let I,w,N=!1;P&&g&&(!1!==a||r||(N=!0));const C=S&&h&&!Object(Y.d)(O);C?(I=n.a,w=E({key:T.a.UNAVAILABLE})):N?(I=this.setDydexExpirationApproval,w=E({key:T.a.ENABLE_DYDX_ORDERS})):(I=this.onClickCta,y===oe.v.ISOLATED?w=l===H.f.BUY?E({key:T.a.OPEN_LONG_POSITION}):E({key:T.a.OPEN_SHORT_POSITION}):c===oe.u.MARKET?w=E({key:T.a.PLACE_MARKET_ORDER}):c===oe.u.LIMIT?w=E({key:T.a.PLACE_LIMIT_ORDER}):c===oe.u.STOP&&(w=E({key:T.a.PLACE_STOP_ORDER})));const A=h&&P&&g&&null===a,j=k&&!a,L=!!e||!s||s.eq(H.a.ZERO)||c===oe.u.LIMIT&&(!u||u.baseAmount.isZero())||c===oe.u.STOP&&(R?!m||m.isZero():!p)||!this.getIsLeverageValid(),M=!g||!N&&L||S&&C;return d.a.createElement(Me.c,{className:"cta-button",onClick:I,disabled:!st.a.enablealways&&(M||A||!b),green:l===H.f.BUY,red:l===H.f.SELL,loading:_||A||j||!b},w)}),this.getError=(()=>{const e=this.props,t=e.allIndexPrices,a=e.allMarkets,r=e.allOrderbookOrders,n=e.allOrders,i=e.allPairOrderData,o=e.baseMarket,s=e.currentPair,l=e.currentTradeData,c=e.marginAccount,d=e.perpetualBalances,u=e.perpetualMarkets,p=e.quoteMarket,m=e.selectedTradeType,b=e.spotAccount,h=e.stringGetter,g=this.state,y=g.leverage,E=g.goodTilDateInput,O=g.goodTilDateTimescale,f=l.side,_=l.amount;return Object(mt.i)({account:s.type===v.d.SPOT?b:c,allIndexPrices:t,allMarkets:a,allOrders:n,allPairOrderData:i,baseMarket:o,currentPair:s,currentTradeData:l,goodTilDateInput:E,goodTilDateTimescale:O,oraclePriceNatural:Object(F.a)({allMarkets:a,perpetualMarkets:u,pair:s}),perpetualBalances:d,perpetualMarkets:u,quoteMarket:p,selectedTradeType:m,soloLimitOrderData:this.getSoloLimitOrderData(),stringGetter:h,tradeAmount:m===oe.v.CROSS?_:this.getIsolatedTradeAmount(_,y,f),worstPrice:Object(U.b)({allOrderbookOrders:r,allMarkets:a,pair:s,side:f,amount:_})})});const a=e.stringGetter;this.state=_objectSpread({},gt,{goodTilDateTimescale:{label:a({key:bt[0].labelKey}),value:bt[0].value}})}getIsolatedTradeAmount(e,t,a){return a===H.f.SELL?e:e.times(H.a.ONE.minus(H.a.ONE.div(t)))}getCollateralization(e,t){if(t===H.f.SELL){if(e.lte(H.a.ZERO))throw new Error(`Leverage <= 0 : ${e.toFixed()}`);return e.plus(1).div(e)}if(e.lte(1))throw new Error(`Leverage <= 1 : ${e.toFixed()}`);return e.div(e.minus(1))}getMarketPrice(e,t,a){const r=this.props,n=r.allOrderbookOrders,i=r.allMarkets,o=r.currentPair;let s=t;return r.selectedTradeType===oe.v.ISOLATED&&(s=this.getIsolatedTradeAmount(t,a,e)),Object(U.a)({allOrderbookOrders:n,allMarkets:i,pair:o,side:e,amount:s})}getPriceImpact(){const e=this.props,t=e.currentPair,a=e.allOrderbookOrders,r=e.currentTradeData,n=r.price,i=r.side,o=r.amount,s=r.tradeOrderType,l=Object(U.c)({allOrderbookOrders:a,pair:t,side:i});let c;return s===oe.u.MARKET&&l&&o.gt(H.a.ZERO)&&n&&(c=new E.a(n.baseAmount).minus(l).div(l)),c}getLiquidationPrice(){const e=this.props,t=e.baseMarket,a=e.quoteMarket,r=e.selectedTradeType,n=e.currentTradeData,i=n.price,o=n.side,s=n.amount,l=n.marginDeposit;let c;if(!i||!s.gt(H.a.ZERO))return c;const d=Object(de.a)({tradeType:r,price:i,side:o,amount:s,marginDepositMV:l}),u=d.debtWei,p=d.collateralWei;if(r===oe.v.ISOLATED){let e;o===H.f.BUY?e=u.times(oe.k).div(p).abs():o===H.f.SELL&&(e=p.div(oe.k).div(u).abs()),c=new ce.a(e,t,a)}return c}renderInputs(){const e=this.props,t=e.currentPair,a=t.type,r=t.displayQuoteSymbol,n=t.tickDecimals,i=t.isInversePerpetual,o=e.baseMarket,s=e.quoteMarket,l=e.currentTradeData,u=l.amount,p=l.amountDisplayValue,m=l.side,b=l.tradeOrderType,h=l.limitPrice,g=l.triggerPriceMP,y=l.trailingPercent,O=e.selectedTradeType,f=e.setTradeData,_=e.stringGetter,k=this.state,R=k.leverage,S=k.isTrailingStopOrder,P=this.getMarketPrice(m,u.gt(0)?u:new E.a(.1),R),I=P?`~${P.getNaturalValue().toFixed(n)}`:"-",w=a===v.d.PERPETUAL,N=O===oe.v.ISOLATED,C=O===oe.v.CROSS,A=b===oe.u.MARKET,j=b===oe.u.LIMIT,L=b===oe.u.STOP,M=[{key:oe.u.MARKET,label:_({key:T.a.ORDER_TYPES_MARKET})},{key:oe.u.LIMIT,label:_({key:T.a.ORDER_TYPES_LIMIT})},{key:oe.u.STOP,label:_({key:T.a.ORDER_TYPES_STOP})}];let q;q=N?"position-size":m===H.f.BUY?"amount-buy":"amount-sell";const B=w?j:C&&!L;return d.a.createElement(c.Fragment,null,C&&d.a.createElement(Le,{className:"order-type-tabs",tabConfig:M,selectedTabKey:b,onClick:e=>{this.setState({isTrailingStopOrder:!1}),f({tradeOrderType:e,limitPrice:null,triggerPriceMP:null,trailingPercent:null})}}),L&&d.a.createElement(Ee.a,{className:"toggle",leftLabel:_({key:T.a.STANDARD}),rightLabel:d.a.createElement("div",{className:"trailing-stop-toggle"},d.a.createElement("div",{className:"trailing-label"},_({key:T.a.TRAILING_STOP_ABBREVIATED}),d.a.createElement(D.a,{shortDelay:!0,className:"help-icon",top:12,left:-228,tooltip:"trailing-stop"},"?"))),onClickLeft:()=>{this.setState({isTrailingStopOrder:!1}),f({triggerPriceMP:null,trailingPercent:null})},onClickRight:()=>{this.setState({isTrailingStopOrder:!0}),f({triggerPriceMP:null,trailingPercent:null})},isToggledRight:S,grayscale:!0,compact:!0}),d.a.createElement(x.c,{label:d.a.createElement(D.a,{top:8,left:-48,tooltip:q,stringParams:{SYMBOL:o.symbol}},_(N?{key:T.a.POSITION_SIZE}:{key:T.a.AMOUNT}))},d.a.createElement(Fe.b,{autoFillZero:!0,value:p,market:i?_objectSpread({},s,{symbol:r}):o,onChange:this.onUpdateAmountInput,onClickMax:N?this.onClickMax:null})),B&&d.a.createElement(x.c,{label:_({key:T.a.PRICE})},d.a.createElement(Fe.b,{value:h&&h.getNaturalValue().toFixed(n),market:_objectSpread({},s,{symbol:r}),whitePlaceholder:b===oe.u.MARKET,placeholder:b===oe.u.MARKET?I:_({key:T.a.ENTER_PRICE}),onChange:this.onUpdateLimitPriceInput})),w&&A&&d.a.createElement(c.Fragment,null,d.a.createElement("div",{className:"perpetual-slider-divider"},d.a.createElement("div",{className:"perpetual-slider-divider__line"}),d.a.createElement("div",{className:"perpetual-slider-divider__text"},_({key:T.a.OR})),d.a.createElement("div",{className:"perpetual-slider-divider__line"})),d.a.createElement(ae,null)),L&&(S?d.a.createElement(x.c,{label:d.a.createElement(D.a,{top:8,left:-48,tooltip:"trailing-stop"},_({key:T.a.TRAILING_PERCENT}))},d.a.createElement(Fe.b,{suffix:"%",value:y?y.toFixed(K.k):"",placeholder:_({key:T.a.ENTER_PERCENT}),onChange:this.onUpdateTrailingPercentInput})):d.a.createElement(x.c,{label:d.a.createElement(D.a,{top:8,left:-48,tooltip:"stop-price",stringParams:{SYMBOL:o.symbol}},_({key:T.a.STOP_PRICE}))},d.a.createElement(Fe.b,{value:g&&g.getNaturalValue().toFixed(n),market:_objectSpread({},s,{symbol:r}),placeholder:_({key:T.a.ENTER_PRICE}),onChange:this.onUpdateStopPriceInput}))),N&&this.renderLeverageGrid())}renderLeverageGrid(){const e=this.props,t=e.currentTradeData.side,a=e.stringGetter,r=this.state,n=r.leverage,i=r.leverageInput,o=""!==i;return d.a.createElement(x.c,{label:d.a.createElement(D.a,{top:6,left:-48,tooltip:"leverage"},a({key:T.a.LEVERAGE}))},d.a.createElement("div",{className:"leverage-grid"},d.a.createElement(Me.g,{type:Me.a.SECONDARY,disabled:t===H.f.BUY,selected:!o&&n.eq(1),onClick:()=>this.onUpdateLeverage(1)},"1x"),d.a.createElement(Me.g,{type:Me.a.SECONDARY,selected:!o&&n.eq(2),onClick:()=>this.onUpdateLeverage(2)},"2x"),d.a.createElement(Me.g,{type:Me.a.SECONDARY,selected:!o&&n.eq(3),onClick:()=>this.onUpdateLeverage(3)},"3x"),d.a.createElement(Me.g,{type:Me.a.SECONDARY,selected:!o&&n.eq(4),onClick:()=>this.onUpdateLeverage(4)},"4x"),d.a.createElement(Me.g,{type:Me.a.SECONDARY,disabled:t===H.f.SELL,selected:!o&&n.eq(5),onClick:()=>this.onUpdateLeverage(5)},"5x"),d.a.createElement(Me.h,{type:Me.a.SECONDARY,onChange:this.onChangeCustomLeverage,placeholder:a({key:T.a.CUSTOM_INPUT}),selected:o,max:t===H.f.SELL?4:5,value:i,suffix:"X"})))}renderSlippageGrid(){let e,t,a,r,n;this.props.currentTradeData.tradeOrderType===oe.u.STOP?(e="stopSlippage",t="stopSlippageInput",a=oe.e,r=oe.o,n=[{value:.02,label:"2.0%"},{value:.05,label:"5.0%"}]):(e="slippage",t="slippageInput",a=oe.d,r=oe.l,n=[{value:.005,label:"0.5%"},{value:.01,label:"1.0%"}]);const i=this.state,o=i[e],s=i[t];return d.a.createElement(Be,{slippage:o,slippageInput:s,buttonConfig:n,onClickButton:a=>this.setState({[e]:new E.a(a),[t]:""}),onChangeInput:r=>this.setState({[e]:r?new E.a(r).div(100):a,[t]:r}),maxSlippage:r.times(100).toNumber()})}getTimeInForceConfig(){const e=this.props.stringGetter;return[{key:it.p.GOOD_TIL,label:d.a.createElement("div",{className:"time-in-force-option"},d.a.createElement(He,null),e({key:T.a.GOOD_TIL_DATE_ABBREVIATED}))},{key:it.p.FILL_OR_KILL,label:d.a.createElement("div",{className:"time-in-force-option"},d.a.createElement(Je,null),e({key:T.a.FILL_OR_KILL}))}]}renderGoodTilDate(){const e=this.props.stringGetter,t=this.state,a=t.goodTilDateInput,r=t.goodTilDateTimescale;return d.a.createElement(x.c,{label:d.a.createElement(D.a,{top:8,left:-48,tooltip:"good-til-date"},e({key:T.a.GOOD_TIL_DATE}))},d.a.createElement(Fe.c,{inputValue:a,dropdownValue:r,placeholder:H.b,onChange:this.onUpdateGoodTilDate,dropdownConfig:bt.map(t=>{let a=t.labelKey;return _objectSpread({},trade_box_objectWithoutProperties(t,["labelKey"]),{label:e({key:a})})}),max:1e3}))}renderLimitOrderOptions(){const e=this.props,t=e.currentTradeData,a=t.postOnlyChecked,r=t.timeInForceOption,n=e.setTradeData,i=e.stringGetter;return d.a.createElement(c.Fragment,null,d.a.createElement(x.c,{label:d.a.createElement(D.a,{top:8,left:-48,tooltip:"time-in-force"},i({key:T.a.TIME_IN_FORCE}))},d.a.createElement(fe.b,{compact:!0,selectedItemKey:r,onChangeSelection:e=>n({timeInForceOption:e}),menuItems:this.getTimeInForceConfig()})),r===it.p.GOOD_TIL&&d.a.createElement(c.Fragment,null,this.renderGoodTilDate(),d.a.createElement(x.c,{label:i({key:T.a.TRADE_EXECUTION})},d.a.createElement(Oe.a,{className:"post-only-checkbox",checked:a,label:d.a.createElement(c.Fragment,null,d.a.createElement("div",{className:"post-only-checkbox__label"},i({key:T.a.POST_ONLY}),d.a.createElement(D.a,{className:"post-only-checkbox__tooltip",top:8,left:-144,tooltip:"post-only"},"?"))),onClick:()=>n({postOnlyChecked:!a})}))))}renderAdvancedOptions(){const e=this.props,t=e.baseMarket,a=e.currentPair.type,r=e.currentTradeData,n=r.tradeOrderType,i=r.newBaseMarketAccountBalance,o=r.newQuoteMarketAccountBalance,s=e.quoteMarket,l=e.selectedTradeType,u=e.stringGetter,p=this.state.isTrailingStopOrder;let m;switch(n){case oe.u.MARKET:m=this.renderSlippageGrid();break;case oe.u.LIMIT:m=this.renderLimitOrderOptions();break;case oe.u.STOP:m=d.a.createElement(c.Fragment,null,this.renderGoodTilDate(),this.renderSlippageGrid());break;default:m=d.a.createElement("div",null)}const b=this.getMarginAccountBalanceBN(t),h=this.getMarginAccountBalanceBN(s),g=a===v.d.MARGIN;let y;l===oe.v.CROSS&&g&&(y={label:u({key:T.a.MARGIN}),isActive:b.lt(0)||h.lt(0)||i&&i.lt(0)||o&&o.lt(0)});const E=Object(pt.b)(pt.a.HIDE_MARGIN_TRADING_INFO)||!g;return d.a.createElement(ve,{label:u({key:T.a.ADVANCED_OPTIONS}),badge:y,onClick:()=>Object(dt.b)("trade-box","toggle-advanced-options",{selectedTradeType:l,tradeOrderType:n,isTrailingStopOrder:p})},m,l===oe.v.CROSS&&!E&&d.a.createElement(x.c,{label:d.a.createElement("div",{className:"margin-trading-info"},u({key:T.a.MARGIN_TRADING}),d.a.createElement("div",{role:"button",tabIndex:0,className:"dismiss-button",onClick:()=>{Object(pt.d)(pt.a.HIDE_MARGIN_TRADING_INFO,!0)}},u({key:T.a.DISMISS})))},d.a.createElement("div",{className:"info-subsection"},u({key:T.a.MARGIN_TRADING_DESCRIPTION}))))}renderReceipt(){const e=this.props,t=e.currentTradeData,a=t.side,r=t.amount,n=e.selectedTradeType,i=this.state,o=i.leverage,s=i.slippage,l=i.stopSlippage,c=n===oe.v.CROSS?r:this.getIsolatedTradeAmount(r,o,a);return d.a.createElement(ye,{priceImpact:this.getPriceImpact(),tradeAmount:c,isLeverageValid:this.getIsLeverageValid(),liquidationPrice:this.getLiquidationPrice(),slippage:s,stopSlippage:l})}render(){const e=this.props,t=e.currentPair.type,a=e.currentTradeData.side,r=e.selectedTradeType,n=e.stringGetter,i=e.walletAddress,o=this.state.error;let s=n({key:T.a.LONG}),l=n({key:T.a.SHORT});r===oe.v.CROSS&&(s=n({key:T.a.BUY}),l=n({key:T.a.SELL}));const c=o||this.getError();return d.a.createElement("div",{className:g()("component-trade-box",{"component-trade-box__top-border-radius":t!==v.d.MARGIN})},d.a.createElement("div",{className:"order-section"},!Object(Y.d)(i)&&d.a.createElement(I,null),d.a.createElement(Ee.a,{className:"toggle",leftLabel:s,rightLabel:l,onClickLeft:this.onClickBuy,onClickRight:this.onClickSell,isToggledRight:a===H.f.SELL}),this.renderInputs(),this.renderAdvancedOptions(),this.renderReceipt(),this.renderSubmitButton(c)),d.a.createElement("div",{className:"error-section"},c?d.a.createElement(We.c,null,c):null))}}yt.propTypes={allIndexPrices:p.a.object.isRequired,allMarkets:p.a.array.isRequired,allOrderbookOrders:p.a.object.isRequired,allOrders:p.a.array.isRequired,allPairOrderData:p.a.object.isRequired,areDydexOrdersEnabled:p.a.bool,baseMarket:p.a.object.isRequired,canBypass28DayRequirement:p.a.bool.isRequired,currentPair:p.a.object.isRequired,currentTradeData:p.a.object.isRequired,isPairOrderDataLoaded:p.a.bool.isRequired,isUserInUsa:p.a.bool.isRequired,isWalletReady:p.a.bool.isRequired,legacySigning:p.a.bool,marginAccount:p.a.object,openModal:p.a.func.isRequired,perpetualBalances:p.a.object.isRequired,perpetualMarkets:p.a.object.isRequired,placeCrossOrder:p.a.func.isRequired,placeMarketIsolatedOrder:p.a.func.isRequired,quoteMarket:p.a.object.isRequired,selectedTradeType:p.a.string.isRequired,setExpiryApproval:p.a.func.isRequired,setTradeData:p.a.func.isRequired,spotAccount:p.a.object,stringGetter:p.a.func.isRequired,walletAddress:p.a.string,walletType:p.a.string};var Et=Object(O.k)(Object(m.c)(e=>({allIndexPrices:Object(W.b)(e),allMarkets:Object(F.d)(e),allOrderbookOrders:Object(U.d)(e),allOrders:Object(nt.k)(e),allPairOrderData:Object(k.c)(e),areDydexOrdersEnabled:Object(nt.f)(e),baseMarket:Object(k.d)(e),canBypass28DayRequirement:Object(_.a)(e),currentPair:Object(k.e)(e),currentTradeData:Object(G.b)(e),isPairOrderDataLoaded:Object(k.f)(e),isUserInUsa:Object(_.c)(e),isWalletReady:Object(ie.w)(e),legacySigning:Object(ie.i)(e),marginAccount:Object(rt.r)(e),perpetualBalances:Object(B.e)(e),perpetualMarkets:Object(B.g)(e),quoteMarket:Object(k.h)(e),selectedTradeType:Object(G.f)(e),spotAccount:Object(rt.v)(e),walletAddress:Object(ie.m)(e),walletType:Object(ie.q)(e)}),e=>Object(b.b)({placeMarketIsolatedOrder:et.d,openModal:at.c,setExpiryApproval:tt.d,setTradeData:q.e,placeCrossOrder:et.c},e))(yt));a.d(t,"a",function(){return Et})},2173:function(e,t,a){"use strict";var r=a(0),n=a.n(r),i=a(1),o=a.n(i),s=a(52),l=a(19),c=a.n(l),d=a(2128),u=a(55),p=a.n(u),m=a(148),b=a(31),h=a(44),g=a(2137),y=a(24),E=a(61),O=a(2),f=a(10),_=a(2163),k=a.n(_);const T=({currentPair:{key:e,type:t},marketStats:a,onClick:r})=>{let i;return t===y.d.SPOT?i=y.g:t===y.d.MARGIN?i=y.e:t===y.d.PERPETUAL&&(i=y.f),n.a.createElement("div",{className:k.a.dropdown},p()(i,i=>{const o=i.key,s=i.path,l=i.marketName,u=i.baseSymbol,p=i.quoteSymbol,h=i.tickDecimals,_=Object(g.b)({allMarketStats:a,pair:i}),T=_&&_.open&&_.last&&"0"!==_.open?Object(f.a)(_.last).minus(_.open).div(_.open).times(100):O.a.ZERO;return n.a.createElement(m.a,{key:o,to:s,onClick:r},n.a.createElement("div",{className:k.a.pairEntry},n.a.createElement("div",{className:k.a.marketNameIcon},n.a.createElement("div",{className:c()(k.a.marketIcon,{[k.a.marketIconPerp]:t===y.d.PERPETUAL})},n.a.createElement(d.a,{symbol:u})),l),n.a.createElement("div",{className:k.a.priceContainer},_&&_.last&&`${Object(f.a)(_.last).toFixed(h)} ${p}`),n.a.createElement("div",{className:k.a.changeContainer},T?n.a.createElement("div",{className:c()(k.a.percentChange,{[k.a.green]:T.gte(0),[k.a.red]:T.lt(0)})},`${T.gte(0)?"+":""}${T.toFixed(E.k)}%`):n.a.createElement("div",null),e===o?n.a.createElement("div",{className:k.a.selectedEntryCheck},n.a.createElement(b.p,null)):n.a.createElement("div",null))))}))};T.propTypes={currentPair:o.a.object.isRequired,marketStats:o.a.array,onClick:o.a.func};var v=Object(s.c)(e=>({currentPair:Object(h.e)(e),marketStats:Object(g.i)(e)}))(T),R=a(2164),S=a.n(R);class P extends r.Component{constructor(e){super(e),this.onClickOutside=(e=>{this.marketDropdownRef.current.contains(e.target)||this.setState({showMarketDropdown:!1})}),this.toggleMarketDropdown=(()=>this.setState(({showMarketDropdown:e})=>({showMarketDropdown:!e}))),this.state={showMarketDropdown:!1},this.marketDropdownRef=Object(r.createRef)()}componentWillMount(){window.addEventListener("click",this.onClickOutside)}componentWillUnmount(){window.removeEventListener("click",this.onClickOutside)}render(){const e=this.props.currentPair,t=e.key,a=e.type,r=this.state.showMarketDropdown,i=y.b[t],o=i.baseSymbol,s=i.displayQuoteSymbol;return n.a.createElement("div",{className:S.a.selectMarket},n.a.createElement("div",{className:S.a.selectMarketButtonDropdown},n.a.createElement("div",{role:"button",tabIndex:0,className:c()(S.a.selectMarketButton,{[S.a.buttonDropdownOpen]:r}),ref:this.marketDropdownRef,onClick:this.toggleMarketDropdown},o,n.a.createElement("div",{className:c()(S.a.marketIcon,{[S.a.marketIconPerp]:a===y.d.PERPETUAL})},n.a.createElement(d.a,{symbol:o})),s),r&&n.a.createElement(v,null)))}}P.propTypes={currentPair:o.a.object.isRequired};var I=Object(s.c)(e=>({currentPair:Object(h.e)(e)}))(P);a.d(t,"a",function(){return I})},2177:function(e,t,a){"use strict";a.d(t,"a",function(){return m});var r=a(0),n=a.n(r);function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var a,r,n=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var a,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var i=n.a.createElement("path",{d:"M0 4C0 1.79086 1.79086 0 4 0H12C14.2091 0 16 1.79086 16 4V12C16 14.2091 14.2091 16 12 16H4C1.79086 16 0 14.2091 0 12V4Z",fill:"#4280F9"}),o=n.a.createElement("path",{d:"M6.5 5H11.5",stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),s=n.a.createElement("path",{d:"M6.5 8H11.5",stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),l=n.a.createElement("path",{d:"M6.5 11H11.5",stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),c=n.a.createElement("path",{d:"M4 5H4.00556",stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),d=n.a.createElement("path",{d:"M4 8H4.00556",stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),u=n.a.createElement("path",{d:"M4 11H4.00556",stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),p=function SvgList(e){var t=e.svgRef,a=_objectWithoutProperties(e,["svgRef"]);return n.a.createElement("svg",_extends({width:16,height:16,viewBox:"0 0 16 16",fill:"none",ref:t},a),i,o,s,l,c,d,u)},m=n.a.forwardRef(function(e,t){return n.a.createElement(p,_extends({svgRef:t},e))});a.p},2178:function(e,t,a){"use strict";a.d(t,"a",function(){return d});var r=a(0),n=a.n(r);function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var a,r,n=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var a,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var i=n.a.createElement("path",{d:"M0 4C0 1.79086 1.79086 0 4 0H12C14.2091 0 16 1.79086 16 4V12C16 14.2091 14.2091 16 12 16H4C1.79086 16 0 14.2091 0 12V4Z",fill:"#4280F9"}),o=n.a.createElement("path",{d:"M12 13.3334V6.66669",stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),s=n.a.createElement("path",{d:"M8 13.3334V2.66669",stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),l=n.a.createElement("path",{d:"M4 13.3333V9.33331",stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),c=function SvgMarketOrder(e){var t=e.svgRef,a=_objectWithoutProperties(e,["svgRef"]);return n.a.createElement("svg",_extends({width:16,height:16,viewBox:"0 0 16 16",fill:"none",ref:t},a),i,o,s,l)},d=n.a.forwardRef(function(e,t){return n.a.createElement(c,_extends({svgRef:t},e))});a.p},2179:function(e,t,a){"use strict";a.d(t,"a",function(){return c});var r=a(0),n=a.n(r);function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var a,r,n=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var a,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var i=n.a.createElement("path",{d:"M0 4C0 1.79086 1.79086 0 4 0H12C14.2091 0 16 1.79086 16 4V12C16 14.2091 14.2091 16 12 16H4C1.79086 16 0 14.2091 0 12V4Z",fill:"#4280F9"}),o=n.a.createElement("path",{d:"M12 12L8 8L4 12",stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),s=n.a.createElement("line",{x1:4.75,y1:4.25,x2:11.25,y2:4.25,stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),l=function SvgLimitOrder(e){var t=e.svgRef,a=_objectWithoutProperties(e,["svgRef"]);return n.a.createElement("svg",_extends({width:16,height:16,viewBox:"0 0 16 16",fill:"none",ref:t},a),i,o,s)},c=n.a.forwardRef(function(e,t){return n.a.createElement(l,_extends({svgRef:t},e))});a.p},2180:function(e,t,a){"use strict";a.d(t,"a",function(){return c});var r=a(0),n=a.n(r);function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var a,r,n=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var a,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var i=n.a.createElement("path",{d:"M0 4C0 1.79086 1.79086 0 4 0H12C14.2091 0 16 1.79086 16 4V12C16 14.2091 14.2091 16 12 16H4C1.79086 16 0 14.2091 0 12V4Z",fill:"#4280F9"}),o=n.a.createElement("path",{d:"M8 13C10.7614 13 13 10.7614 13 8C13 5.23858 10.7614 3 8 3C5.23858 3 3 5.23858 3 8C3 10.7614 5.23858 13 8 13Z",stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),s=n.a.createElement("path",{d:"M10 6H6V10H10V6Z",stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),l=function SvgStopOrder(e){var t=e.svgRef,a=_objectWithoutProperties(e,["svgRef"]);return n.a.createElement("svg",_extends({width:16,height:16,viewBox:"0 0 16 16",fill:"none",ref:t},a),i,o,s)},c=n.a.forwardRef(function(e,t){return n.a.createElement(l,_extends({svgRef:t},e))});a.p},2185:function(e,t,a){},2186:function(e,t,a){e.exports={dropdownMenuWrapper:"_3y66tpIF12GHRR2mN0Xqna",menuOpen:"_27QFgE5ivnJPJ79QD0t3hi",dropdownMenuButton:"AWIpunDrAzBSDnXwzR9pW",menu:"_1Xc6tvQPITyIvr0Mw6IL-X",menuItem:"_1SbvxWwyvOWN0vtGlf2vo9",menuItemTag:"DOrtEXR8tIosJRIAamV9W",selectedItem:"_28N0AA2L5JMZO1a4Gl0WqQ",menuItemIcon:"_3rSc_a18XzDxuQcaLPcJiq",iconUsesStroke:"_16ycs9_msbXY7N7igyYL4W",iconUsesFill:"AbIn0-VhlDPXlMt7aJYcP",menuOnlyDetail:"_3hP6DJCkzruwWMsFEJxYCM"}},2193:function(e,t,a){},2194:function(e,t,a){},2195:function(e,t,a){},2196:function(e,t,a){!function(a){"use strict";var n=function e(){return(n=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function o(e,t){var a=n({},e);for(var r in t)"object"!=typeof e[r]||null===e[r]||Array.isArray(e[r])?void 0!==t[r]&&(a[r]=t[r]):a[r]=o(e[r],t[r]);return a}var i={mobile:{disabled_features:["left_toolbar","header_widget","timeframes_toolbar","edit_buttons_in_legend","context_menus","control_bar","border_around_the_chart"],enabled_features:[]}},s={width:800,height:500,interval:"1D",timezone:"Etc/UTC",container_id:"",library_path:"",locale:"en",widgetbar:{details:!1,watchlist:!1,watchlist_settings:{default_symbols:[]}},overrides:{"mainSeriesProperties.showCountdown":!1},studies_overrides:{},trading_customization:{position:{},order:{}},brokerConfig:{configFlags:{}},fullscreen:!1,autosize:!1,disabled_features:[],enabled_features:[],debug:!1,logo:{},time_frames:[{text:"5y",resolution:"1W"},{text:"1y",resolution:"1W"},{text:"6m",resolution:"120"},{text:"3m",resolution:"60"},{text:"1m",resolution:"30"},{text:"5d",resolution:"5"},{text:"1d",resolution:"1"}],client_id:"0",user_id:"0",charts_storage_api_version:"1.0",favorites:{intervals:[],chartTypes:[]}};function r(){return"16.000 (internal id df1e6a68 @ 2020-07-17 13:51:54.948951)"}var l=function(){function t(e){if(this._id="tradingview_"+(1048576*(1+Math.random())|0).toString(16).substring(1),this._ready=!1,this._readyHandlers=[],this._onWindowResize=this._autoResizeChart.bind(this),!e.datafeed)throw new Error("Datafeed is not defined");if(this._options=o(s,e),e.preset){var t=i[e.preset];t?(void 0!==this._options.disabled_features?this._options.disabled_features=this._options.disabled_features.concat(t.disabled_features):this._options.disabled_features=t.disabled_features,void 0!==this._options.enabled_features?this._options.enabled_features=this._options.enabled_features.concat(t.enabled_features):this._options.enabled_features=t.enabled_features):console.warn("Unknown preset: `"+e.preset+"`")}"Dark"===this._options.theme&&void 0===this._options.loading_screen&&(this._options.loading_screen={backgroundColor:"#131722"}),this._create()}return t.prototype.onChartReady=function(e){this._ready?e.call(this):this._readyHandlers.push(e)},t.prototype.headerReady=function(){var e=this;return this._innerWindowLoaded.then(function(){return e._innerWindow().headerReady()})},t.prototype.onGrayedObjectClicked=function(e){this._innerAPI().onGrayedObjectClicked(e)},t.prototype.onShortcut=function(e,t){this._innerWindow().createShortcutAction(e,t)},t.prototype.subscribe=function(e,t){this._innerAPI().subscribe(e,t)},t.prototype.unsubscribe=function(e,t){this._innerAPI().unsubscribe(e,t)},t.prototype.chart=function(e){return this._innerAPI().chart(e)},t.prototype.setLanguage=function(e){this.remove(),this._options.locale=e,this._create()},t.prototype.setSymbol=function(e,t,a){this._innerAPI().changeSymbol(e,t,a)},t.prototype.remove=function(){window.removeEventListener("resize",this._onWindowResize),this._readyHandlers.splice(0,this._readyHandlers.length),delete window[this._id],this._iFrame.parentNode&&this._iFrame.parentNode.removeChild(this._iFrame)},t.prototype.closePopupsAndDialogs=function(){this._innerAPI().closePopupsAndDialogs()},t.prototype.selectLineTool=function(e){this._innerAPI().selectLineTool(e)},t.prototype.selectedLineTool=function(){return this._innerAPI().selectedLineTool()},t.prototype.save=function(e){this._innerAPI().saveChart(e)},t.prototype.load=function(e,t){this._innerAPI().loadChart({json:e,extendedData:t})},t.prototype.getSavedCharts=function(e){this._innerAPI().getSavedCharts(e)},t.prototype.loadChartFromServer=function(e){this._innerAPI().loadChartFromServer(e)},t.prototype.saveChartToServer=function(e,t,a){this._innerAPI().saveChartToServer(e,t,a)},t.prototype.removeChartFromServer=function(e,t){this._innerAPI().removeChartFromServer(e,t)},t.prototype.onContextMenu=function(e){this._innerAPI().onContextMenu(e)},t.prototype.createButton=function(e){return this._innerWindow().createButton(e)},t.prototype.showNoticeDialog=function(e){this._innerAPI().showNoticeDialog(e)},t.prototype.showConfirmDialog=function(e){this._innerAPI().showConfirmDialog(e)},t.prototype.showLoadChartDialog=function(){this._innerAPI().showLoadChartDialog()},t.prototype.showSaveAsChartDialog=function(){this._innerAPI().showSaveAsChartDialog()},t.prototype.symbolInterval=function(){return this._innerAPI().getSymbolInterval()},t.prototype.mainSeriesPriceFormatter=function(){return this._innerAPI().mainSeriesPriceFormatter()},t.prototype.getIntervals=function(){return this._innerAPI().getIntervals()},t.prototype.getStudiesList=function(){return this._innerAPI().getStudiesList()},t.prototype.addCustomCSSFile=function(e){this._innerWindow().addCustomCSSFile(e)},t.prototype.applyOverrides=function(e){this._options=o(this._options,{overrides:e}),this._innerWindow().applyOverrides(e)},t.prototype.applyStudiesOverrides=function(e){this._innerWindow().applyStudiesOverrides(e)},t.prototype.watchList=function(){return this._innerAPI().watchlist()},t.prototype.activeChart=function(){return this._innerAPI().activeChart()},t.prototype.chartsCount=function(){return this._innerAPI().chartsCount()},t.prototype.layout=function(){return this._innerAPI().layout()},t.prototype.setLayout=function(e){this._innerAPI().setLayout(e)},t.prototype.layoutName=function(){return this._innerAPI().layoutName()},t.prototype.changeTheme=function(e,t){this._innerWindow().changeTheme(e,t)},t.prototype.getTheme=function(){return this._innerWindow().getTheme()},t.prototype.takeScreenshot=function(){this._innerAPI().takeScreenshot()},t.prototype.lockAllDrawingTools=function(){return this._innerAPI().lockAllDrawingTools()},t.prototype.hideAllDrawingTools=function(){return this._innerAPI().hideAllDrawingTools()},t.prototype.drawOnAllCharts=function(e){this._innerAPI().drawOnAllCharts(e)},t.prototype.magnetEnabled=function(){return this._innerAPI().magnetEnabled()},t.prototype.magnetMode=function(){return this._innerAPI().magnetMode()},t.prototype.undoRedoState=function(){return this._innerAPI().undoRedoState()},t.prototype.setIntervalLinkingEnabled=function(e){this._innerAPI().setIntervalLinkingEnabled(e)},t.prototype.setTimeFrame=function(e){this._innerAPI().setTimeFrame(e)},t.prototype.symbolSync=function(){return this._innerAPI().symbolSync()},t.prototype.intervalSync=function(){return this._innerAPI().intervalSync()},t.prototype.crosshairSync=function(){return this._innerAPI().crosshairSync()},t.prototype.timeSync=function(){return this._innerAPI().timeSync()},t.prototype._innerAPI=function(){return this._innerWindow().tradingViewApi},t.prototype._innerWindow=function(){return this._iFrame.contentWindow},t.prototype._autoResizeChart=function(){this._options.fullscreen&&(this._iFrame.style.height=window.innerHeight+"px")},t.prototype._create=function(){var e=this,t=this._render(),a=document.getElementById(this._options.container_id);if(null===a)throw new Error("There is no such element - #"+this._options.container_id);a.innerHTML=t,this._iFrame=a.querySelector("#"+this._id);var r=this._iFrame;(this._options.autosize||this._options.fullscreen)&&(r.style.width="100%",this._options.fullscreen||(r.style.height="100%")),window.addEventListener("resize",this._onWindowResize),this._onWindowResize(),this._innerWindowLoaded=new Promise(function(e){!function retry(){r&&r.contentWindow&&void 0!==r.contentWindow.widgetReady?e():setTimeout(retry,100)}()}),this._innerWindowLoaded.then(function(){e._innerWindow().widgetReady(function(){e._ready=!0;for(var t=0,a=e._readyHandlers;t<a.length;t++){var r=a[t];try{r.call(e)}catch(e){console.error(e)}}e._innerWindow().initializationFinished()})})},t.prototype._render=function(){var e=window;if(e[this._id]={datafeed:this._options.datafeed,customFormatters:this._options.custom_formatters||this._options.customFormatters,brokerFactory:this._options.broker_factory||this._options.brokerFactory,overrides:this._options.overrides,studiesOverrides:this._options.studies_overrides,tradingCustomization:this._options.trading_customization,disabledFeatures:this._options.disabled_features,enabledFeatures:this._options.enabled_features,brokerConfig:this._options.broker_config||this._options.brokerConfig,restConfig:this._options.restConfig,favorites:this._options.favorites,logo:this._options.logo,numeric_formatting:this._options.numeric_formatting,rss_news_feed:this._options.rss_news_feed,newsProvider:this._options.news_provider,loadLastChart:this._options.load_last_chart,saveLoadAdapter:this._options.save_load_adapter,loading_screen:this._options.loading_screen,settingsAdapter:this._options.settings_adapter,getCustomIndicators:this._options.custom_indicators_getter},this._options.saved_data)e[this._id].chartContent={json:this._options.saved_data};else if(!Boolean(this._options.symbol))throw new Error("Symbol is not defined");var t=xyz+"static/"+encodeURIComponent(this._options.locale)+"-tv-chart.df1e6a6876536645d8cf.html#symbol="+encodeURIComponent(this._options.symbol||"")+"&interval="+encodeURIComponent(this._options.interval)+(this._options.timeframe?"&timeframe="+encodeURIComponent(this._options.timeframe):"")+(this._options.toolbar_bg?"&toolbarbg="+encodeURIComponent(this._options.toolbar_bg.replace("#","")):"")+(this._options.studies_access?"&studiesAccess="+encodeURIComponent(JSON.stringify(this._options.studies_access)):"")+"&widgetbar="+encodeURIComponent(JSON.stringify(this._options.widgetbar))+(this._options.drawings_access?"&drawingsAccess="+encodeURIComponent(JSON.stringify(this._options.drawings_access)):"")+"&timeFrames="+encodeURIComponent(JSON.stringify(this._options.time_frames))+"&locale="+encodeURIComponent(this._options.locale)+"&uid="+encodeURIComponent(this._id)+"&clientId="+encodeURIComponent(String(this._options.client_id))+"&userId="+encodeURIComponent(String(this._options.user_id))+(this._options.charts_storage_url?"&chartsStorageUrl="+encodeURIComponent(this._options.charts_storage_url):"")+(this._options.charts_storage_api_version?"&chartsStorageVer="+encodeURIComponent(this._options.charts_storage_api_version):"")+(this._options.custom_css_url?"&customCSS="+encodeURIComponent(this._options.custom_css_url):"")+(this._options.auto_save_delay?"&autoSaveDelay="+encodeURIComponent(String(this._options.auto_save_delay)):"")+"&debug="+encodeURIComponent(String(this._options.debug))+(this._options.snapshot_url?"&snapshotUrl="+encodeURIComponent(this._options.snapshot_url):"")+(this._options.timezone?"&timezone="+encodeURIComponent(this._options.timezone):"")+(this._options.study_count_limit?"&studyCountLimit="+encodeURIComponent(String(this._options.study_count_limit)):"")+(this._options.symbol_search_request_delay?"&ssreqdelay="+encodeURIComponent(String(this._options.symbol_search_request_delay)):"")+(this._options.theme?"&theme="+encodeURIComponent(String(this._options.theme)):"");return'<iframe id="'+this._id+'" name="'+this._id+'"  src="'+t+'"'+(this._options.autosize||this._options.fullscreen?"":' width="'+this._options.width+'" height="'+this._options.height+'"')+' frameborder="0" allowTransparency="true" scrolling="no" allowfullscreen style="display:block;"></iframe>'},t}();window.TradingView=window.TradingView||{},window.TradingView.version=r,a.version=r,a.widget=l,Object.defineProperty(a,"__esModule",{value:!0})}(t)},2197:function(e,t,a){e.exports={chartContainer:"sqGbqwSR6KCkYy07INYMD",chartSidebar:"_1wP87eq42J2Ebxq45nFORp",button:"_2ukXyebcoi-5EhBXbpGIzX",resolutionButton:"WKF63lX3KaIpoahiH_8X3"}},2198:function(e,t,a){},2199:function(e,t,a){e.exports={infoItem:"_2FeuvaksRu2m9vRudRQ0Fk",label:"_2T54nwj4rkOv4vybXbeldm"}},2200:function(e,t,a){},2202:function(e,t,a){e.exports={typeCell:"_2avqTeEtkQ60SmQ0f_A__z",typeCellText:"_38JJZl0YRm80WFvV7l0_9u",uppercaseMobile:"_2efOsCFF3WCjxy8VnGhtFE",etherscanLink:"_3T-bDfemeooLD3FO2SSCQN"}},2203:function(e,t,a){e.exports={headerTooltip:"JzTU_56Z8O75-AzNqkZmT",typeCell:"_3x5ahjnac_-Z3NlNQr_tzH",typeCellText:"XKt5CopXogD3bPle1nDxB",direction:"KMcauQm_7xLQGOFRkprh_",red:"_2Wt2drTgFePNslGFCqasqL",mobileFullWidth:"_3R0TaDRjPWQz9nj0rzsgGG",uppercase:"_3gQhn0WAddJG8sd3596Rmd"}},2204:function(e,t,a){},2207:function(e,t,a){"use strict";var r=a(118),n=a.n(r),i=a(486),o=a.n(i),s=a(39),l=a.n(s),c=a(90),d=a.n(c),u=a(4),p=a.n(u),m=a(17),b=a.n(m),h=a(55),g=a.n(h),y=a(0),E=a.n(y),O=a(1),f=a.n(O),_=a(52),k=a(60),T=a(34),v=a(19),R=a.n(v),S=a(31),P=a(2196),I=a(25),w=a(99),N=a(166),C=a(5),A=a(2197),j=a.n(A);function ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const L={[C.b.EN]:"en",[C.b.ZH_CN]:"zh",[C.b.JA]:"ja",[C.b.RU]:"ru"},M={container_id:"tv-price-chart",library_path:"/tv-charting-library/",custom_css_url:"/tv-charting-library/custom.css",locale:"en",autosize:!0,time_frames:[],disabled_features:["header_widget","compare_symbol","symbol_search_hot_key","left_toolbar","symbol_info","go_to_date","border_around_the_chart","timeframes_toolbar","edit_buttons_in_legend"],enabled_features:["remove_library_container_border","hide_last_na_study_output","dont_show_boolean_study_arguments"],overrides:{"paneProperties.background":"#1c1d23","paneProperties.horzGridProperties.color":"#272A31","paneProperties.vertGridProperties.color":"#272A31","paneProperties.crossHairProperties.style":1,"paneProperties.legendProperties.showBarChange":!1,"mainSeriesProperties.style":1,"mainSeriesProperties.candleStyle.upColor":"#29A935","mainSeriesProperties.candleStyle.borderUpColor":"#29A935","mainSeriesProperties.candleStyle.wickUpColor":"#29A935","mainSeriesProperties.candleStyle.downColor":"#ff5757","mainSeriesProperties.candleStyle.borderDownColor":"#ff5757","mainSeriesProperties.candleStyle.wickDownColor":"#ff5757","mainSeriesProperties.statusViewStyle.symbolTextSource":"ticker","mainSeriesProperties.showPriceLine":!1,"scalesProperties.textColor":"#ffffff","scalesProperties.backgroundColor":"#17181a","scalesProperties.showSeriesLastValue":!1},studies_overrides:{"volume.volume.color.0":"#ff5757","volume.volume.color.1":"#29a935","volume.volume ma.visible":!1,"relative strength index.plot.color":"#4280f9","relative strength index.plot.linewidth":2,"relative strength index.hlines background.color":"#134A9F"},loading_screen:{backgroundColor:"#17181a",foregroundColor:"#17181a"}},D=({startedAt:e,open:t,close:a,low:r,high:n,baseTokenVolume:i})=>({time:e,open:parseFloat(t,10),close:parseFloat(a,10),high:parseFloat(n,10),low:parseFloat(r,10),volume:Math.ceil(i)}),x=e=>g()(e,D);class q extends y.Component{constructor(e){super(e),this.onInsertIndicatorClick=(()=>{this.chartWidget&&this.chartWidgetReady&&this.chartWidget.activeChart().executeActionById("insertIndicator")}),this.getHistorySlice=((e,t,a)=>{const r=this.props.data,n=1e3*e,i=1e3*t,o=[];return!a&&!d()(r)&&i<r[0].startedAt?o:(b()(r,e=>{e.startedAt>=n&&o.push(D(e))}),o)}),this.chartWidget=null,this.chartWidgetReady=!1,this.chartLocale="en",this.oldResolution=null,this.subscriberCallback=null,this.resetCacheCallback=null,this.state={chartDataCallbacks:[]}}getSavedResolution(e){if(!e)return null;let t;return b()(e.charts,e=>{if(b()(e.panes,e=>{if(b()(e.sources,e=>{if("MainSeries"===e.type)return t=p()(e,"state.interval"),!1}),t)return!1}),t)return!1}),t}setVisibleRange(e){const t=N.b[e].defaultTimeframe;this.chartWidget.activeChart().setVisibleRange({from:T.DateTime.local().minus(t).toSeconds(),to:T.DateTime.local().toSeconds()},{percentRightMargin:10})}create(){const e=this.props,t=e.resolution,a=e.pair,r=e.onClickResolution,n=JSON.parse(Object(I.b)(I.a.TRADING_VIEW_CHART_CONFIG)),i=this.getSavedResolution(n);i&&i!==t&&r();const o=new P.widget(function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(a,!0).forEach(function(t){_defineProperty(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({symbol:a.chartInfo.tradingViewSymbol,interval:i||t,datafeed:this.getDataFeed()},M,{saved_data:n}));o.onChartReady(()=>{const e=this.props.onChartReady;e&&e(),o.activeChart().setTimezone(T.DateTime.local().get("zoneName")),this.setVisibleRange(i||t),o.subscribe("onAutoSaveNeeded",()=>o.save(e=>Object(I.d)(I.a.TRADING_VIEW_CHART_CONFIG,JSON.stringify(e)))),this.chartWidgetReady=!0}),this.chartWidget=o}destroy(){this.chartWidget&&this.chartWidgetReady&&(this.chartWidget.remove(),this.chartWidget=null)}componentDidMount(){this.create()}componentWillUnmount(){this.destroy()}componentDidUpdate(e){const t=e.data,a=e.resolution,r=e.pair,n=this.props,i=n.data,o=n.resolution,s=n.pair,c=n.isDataLoading,u=n.selectedLocale,p=this.state.chartDataCallbacks;d()(p)||c||(b()(p,e=>e()),this.setState({chartDataCallbacks:[]})),this.chartWidget&&this.chartWidgetReady&&(r.key!==s.key&&(this.resetLocalChartData(),this.chartWidget.activeChart().setSymbol(s.chartInfo.tradingViewSymbol)),a!==o&&(this.resetLocalChartData(),this.oldResolution=a,this.chartWidget.activeChart().setResolution(o,()=>this.setVisibleRange(o))),this.chartLocale!==u&&(this.chartWidget.setLanguage(L[u]),this.chartLocale=u),d()(t)||d()(i)||l()(t)===l()(i)||!this.resetCacheCallback||(this.resetCacheCallback(),this.chartWidget.activeChart().resetData()),this.updateChartData())}resetLocalChartData(){this.oldResolution=null,this.subscriberCallback=null,this.resetCacheCallback=null,this.setState({chartDataCallbacks:[]})}updateChartData(){const e=this.props.data;this.subscriberCallback&&!d()(e)&&this.subscriberCallback(x([o()(e)])[0])}getPair(){return this.props.pair}getDataFeed(){const e=n()(this.getPair().chartInfo.supportedResolutions);return{onReady:t=>t({supports_search:!1,supports_time:!0,supports_marks:!1,supported_resolutions:e}),searchSymbols:(e,t,a,r)=>{r([])},resolveSymbol:(t,a)=>{const r=this.getPair().chartInfo,n=r.tradingViewName;a({name:n,ticker:n,description:n,type:"crypto",has_intraday:!0,has_daily:!0,minmov:1,pricescale:r.priceScale||100,session:"24x7",intraday_multipliers:["60"],supported_resolutions:e})},getBars:(e,t,a,r,n,i,o)=>{const s=this.props,l=s.pair,c=s.setEarliestRequestedCandle,u=()=>{const e=this.getHistorySlice(a,r,o);n(e,{noData:d()(e)})};if(!o){if(t===N.d["1H"])return void n([],{noData:!0});c({pairKey:l.key,time:a})}this.setState(e=>({chartDataCallbacks:[...e.chartDataCallbacks,u]}))},subscribeBars:(e,t,a,r,n)=>{this.subscriberCallback=a,this.resetCacheCallback=n},unsubscribeBars:()=>{this.subscriberCallback=null,this.resetCacheCallback=null}}}render(){const e=this.props,t=e.onClickResolution,a=e.resolution;return E.a.createElement("div",{className:j.a.chartContainer},E.a.createElement("div",{className:j.a.chartSidebar},E.a.createElement("div",{role:"button",tabIndex:0,className:R()(j.a.button,j.a.resolutionButton),onClick:t},N.c[a]),E.a.createElement("div",{role:"button",tabIndex:0,className:j.a.button,onClick:this.onInsertIndicatorClick},E.a.createElement(S.K,null))),E.a.createElement("div",{id:"tv-price-chart"}))}}q.propTypes={data:f.a.array,isDataLoading:f.a.bool,onChartReady:f.a.func,onClickResolution:f.a.func,pair:f.a.object.isRequired,resolution:f.a.string.isRequired,selectedLocale:f.a.string.isRequired,setEarliestRequestedCandle:f.a.func.isRequired};var B=Object(_.c)(null,e=>Object(k.b)({setEarliestRequestedCandle:w.b},e))(q),F=a(40),W=a(2205),G=a(74),U=a(41),V=a(44),K=a(132),H=a(94),Y=a(10),z=a(46),Z=a(2);const $=Object(U.a)([V.e,K.g,K.i,e=>e.depthChart.orderZoom,V.d,V.h],(e,t,a,r,n,i)=>{if(!t||!a)return[];const o=e.isInversePerpetual,s=[];t.slice(0,r).reduce((e,t)=>{const a=Object(z.a)(t.amount,(o?i:n).currency.decimals),r=new H.a(t.price,n,i).getNaturalValue(),l=e.totalVolume.plus(o?a.div(r):a),c=e.totalCost.plus(o?a:a.times(r));return s.push({price:r.toNumber(),volume:l.toNumber(),cost:c.toNumber(),buyVolume:l.toNumber()}),{totalVolume:l,totalCost:c}},{totalVolume:Z.a.ZERO,totalCost:Z.a.ZERO});const l=[];a.slice(0,r).reduce((e,t)=>{const a=Object(z.a)(t.amount,(o?i:n).currency.decimals),r=new H.a(t.price,n,i).getNaturalValue(),s=e.totalVolume.plus(o?a.div(r):a),c=e.totalCost.plus(o?a:a.times(r));return l.push({price:r.toNumber(),volume:s.toNumber(),cost:c.toNumber(),sellVolume:s.toNumber()}),{totalVolume:s,totalCost:c}},{totalVolume:Z.a.ZERO,totalCost:Z.a.ZERO});const c=Q(s,(e,t)=>e>t,e=>e-.01,e=>e+.01),d=Q(l,(e,t)=>e<t,e=>e+.01,e=>e-.01);return c.concat(d).sort((e,t)=>{if(Object(Y.a)(e.price).eq(t.price)){if(e.buyVolume&&t.buyVolume)return Object(Y.a)(e.volume).lt(t.volume)?1:-1;if(e.sellVolume&&t.sellVolume)return Object(Y.a)(e.volume).lt(t.volume)?-1:1}return Object(Y.a)(e.price).lt(t.price)?-1:1})}),Q=(e,t,a,r)=>e;var X=a(146),J=a(8),ee=a(61);a(2198);const te="#57FF5F",ae="#2A5C2E",re="#FF5757",ne="#5D2A2C";class ie extends y.Component{constructor(){super(),this.mouseMove=(e=>{this.lastEvent=e}),this.renderTooltip=(({payload:e,label:t})=>{const a=this.props.stringGetter;if(!e||!e[0])return null;let r,n;e[0].payload.buyVolume?(r=Z.f.SELL,n=a({key:C.a.SELL})):(r=Z.f.BUY,n=a({key:C.a.BUY}));const i=R()("depth-chart-tooltip",{buy:r===Z.f.BUY,sell:r===Z.f.SELL}),o=Object(Y.a)(e[0].payload.volume),s=Object(Y.a)(t).toFormat(ee.n),l=Object(Y.a)(e[0].payload.cost).toFormat(ee.n);return E.a.createElement("div",{className:i},E.a.createElement("div",{className:"left-bar"}),E.a.createElement("div",{className:"data"},E.a.createElement("div",{className:"price"},s),E.a.createElement("div",{className:"line-item"},E.a.createElement("div",{className:"label"},n),E.a.createElement("div",{className:"value"},o.toFormat(ee.n))),E.a.createElement("div",{className:"line-item"},E.a.createElement("div",{className:"label"},a({key:C.a.CHARTS_COST})),E.a.createElement("div",{className:"value"},l))))}),this.renderActiveDot=(e=>{const t=e.cx,a=e.cy,r=e.dataKey;if(!a)return null;let n;return"buyVolume"===r?n="#57ff5f":"sellVolume"===r&&(n="#ff5757"),E.a.createElement("g",null,E.a.createElement("circle",{cx:t,cy:a,r:3,stroke:"white",strokeWidth:4}),E.a.createElement("circle",{cx:t,cy:a,r:2,stroke:n,strokeWidth:4}),E.a.createElement("line",{x1:t,x2:t,y1:a,y2:p()(this.componentRef,"current.clientHeight",0)-66,stroke:n,strokeWidth:1,strokeDasharray:"6 4"}))}),this.chartRef=E.a.createRef(),this.componentRef=E.a.createRef(),this.lastEvent=null}componentDidMount(){window.addEventListener("mousemove",this.mouseMove)}componentWillUnmount(){window.removeEventListener("mousemove",this.mouseMove)}componentDidUpdate(){this.chartRef.current&&this.lastEvent&&this.chartRef.current.handleMouseMove(this.lastEvent)}renderChart(){const e=this.props,t=e.data,a=e.midMarketPrice,r=e.currentPair.tickDecimals,n=e.pageViewport;let i;t.length>0&&(i=Math.min(a-t[0].price,t[t.length-1].price-a));const o=p()(this.componentRef,"current.clientHeight",.56*n.height-60)-32;let s;return s=n.isMobile?n.width:n.width>=J.a?Math.max(n.width-3*Z.e-32,J.c-3*Z.e-32):Math.max(n.width-2*Z.e-16,J.c-2*Z.e-16),E.a.createElement("div",{className:"chart"},E.a.createElement(W.b,{ref:this.chartRef,width:s,height:o,data:t,onMouseMove:this.onMouseMove,margin:{top:0,right:0,bottom:0,left:0}},E.a.createElement("defs",null,E.a.createElement("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",gradientUnits:"userSpaceOnUse"},E.a.createElement("stop",{offset:"40%",stopColor:"#1c1d23"}),E.a.createElement("stop",{offset:"41%",stopColor:"#403f4c"}))),E.a.createElement(W.e,{x:a,stroke:"url(#gradient)",strokWidth:1,ifOverflow:"extendDomain",viewBox:{height:10}}),E.a.createElement(W.a,{strokeWidth:2,dot:!1,activeDot:this.renderActiveDot,stroke:te,fill:ae,fillOpacity:1,dataKey:"buyVolume",isAnimationActive:!1,type:"step",connectNulls:!0}),E.a.createElement(W.a,{strokeWidth:2,activeDot:this.renderActiveDot,dot:!1,stroke:re,fill:ne,fillOpacity:1,dataKey:"sellVolume",isAnimationActive:!1,type:"step",connectNulls:!0}),E.a.createElement(W.f,{content:this.renderTooltip,isAnimationActive:!1,cursor:!1}),E.a.createElement(W.h,{dataKey:"volume",axisLine:!1,mirror:!0,tickSize:4,minTickGap:10,yAxisId:0}),E.a.createElement(W.h,{dataKey:"volume",axisLine:!1,mirror:!0,tickSize:4,orientation:"right",minTickGap:10,yAxisId:1}),E.a.createElement(W.g,{dataKey:"price",axisLine:!1,tickFormatter:e=>e.toFixed(r),domain:[()=>a-i,()=>a+i],type:"number",tickSize:4,tickCount:20,interval:1})))}render(){const e=this.props.data;return E.a.createElement("div",{className:"component-depth-chart",ref:this.componentRef},e.length?this.renderChart():null)}}ie.propTypes={currentPair:f.a.object.isRequired,data:f.a.array.isRequired,midMarketPrice:f.a.number,pageViewport:f.a.object.isRequired,stringGetter:f.a.func.isRequired};var oe=Object(G.k)(Object(F.g)(Object(_.c)(e=>({currentPair:Object(V.e)(e),data:$(e),midMarketPrice:Object(K.h)(e),pageViewport:Object(X.d)(e)}))(ie))),se=a(230),le=a.n(se),ce=a(2199),de=a.n(ce);const ue=({label:e,value:t})=>E.a.createElement("div",{className:de.a.infoItem},E.a.createElement("div",{className:de.a.label},e),t);ue.propTypes={label:f.a.string.isRequired,value:f.a.oneOfType([f.a.arrayOf(f.a.node),f.a.node,f.a.string]).isRequired};var pe=ue,me=a(384),be=a(2123),he=a(626),ge=a(86),ye=a(209),Ee=a(26),Oe=a(296),fe=a(2137),_e=a(343),ke=a(2122),Te=a(194),ve=a(171),Re=a(24),Se=a(57),Pe=a(191),Ie=a(85);a(2200);const we=16,Ne=-32;class Ce extends y.Component{constructor(e){super(e),this.canZoomOut=(()=>{return this.props.zoom+10<=50}),this.canZoomIn=(()=>{return this.props.zoom-10>=10}),this.onClickZoomOut=(()=>{const e=this.props,t=e.zoom;(0,e.zoomDepthChart)(Math.min(50,t+10))}),this.onClickZoomIn=(()=>{const e=this.props,t=e.zoom;(0,e.zoomDepthChart)(Math.max(10,t-10))}),this.onChartReady=(()=>{this.setState({isPriceChartReady:!0})}),this.onClickResolution=(()=>{const e=this.props,t=e.allChartData,a=e.currentPair,r=e.setPriceChartResolution,n=Object(ye.f)({allChartData:t,pairKey:a.key});N.f[0]===n?r({pairKey:a.key,resolution:N.f[1]}):r({pairKey:a.key,resolution:N.f[0]})}),this.state={isPriceChartReady:!1}}renderHeader(){const e=this.props,t=e.allMarkets,a=e.currentPair,r=e.indexPriceNatural,n=e.marketStats,i=e.pageViewport,o=e.perpetualMarkets,s=e.price,l=e.setShowDepthChart,c=e.showDepthChart,d=e.stringGetter,u=a.baseSymbol,p=a.quoteSymbol,m=a.displayQuoteSymbol,b=a.displaySettlementSymbol,h=a.tickDecimals,O=a.type,f=a.isInversePerpetual,_=a.orderMarket,k=O===Re.d.PERPETUAL,T=Object(Ee.c)({allMarkets:t,symbol:u}),v=Object(Ee.c)({allMarkets:t,symbol:p}),P=Object(Ee.a)({allMarkets:t,perpetualMarkets:o,pair:a});let I;k&&(I=o[_]);const w=n&&n.baseVolume&&Object(Y.a)(n.baseVolume),N=f?m:u,A=w?Object(Pe.a)(w.toNumber(),2):{},j=A.num,L=A.suffix,M=w?j:"-",D=w?`${L} ${N}`:` ${N}`,x=[],q=i.width>J.f&&i.width<=J.c;if((k?i.width>J.e&&!q:!q)&&x.push({value:E.a.createElement(le.a,{thousandSeparator:!0,displayType:"text",value:P&&P.isFinite()?P.toFixed(h):"-",suffix:` ${m}`}),label:d({key:C.a.ORACLE_PRICE_ABBREVIATED}),tooltip:{key:"oracle-price",left:Ne,top:we}}),k&&q||x.push({value:E.a.createElement(le.a,{thousandSeparator:!0,displayType:"text",value:r?r.toFixed(h):"-",suffix:` ${m}`}),label:d({key:C.a.INDEX_PRICE_ABBREVIATED}),tooltip:{key:"index-price",left:Ne,top:we}}),(k?i.width>=J.a:i.width>J.e&&!q)&&x.push({value:k?E.a.createElement(le.a,{thousandSeparator:!0,displayType:"text",value:M,suffix:D}):E.a.createElement(y.Fragment,null,E.a.createElement("div",{className:"desktop"},E.a.createElement(le.a,{thousandSeparator:!0,displayType:"text",value:w?w.toFixed(ee.n):"-",suffix:` ${u}`})),E.a.createElement("div",{className:"tablet"},E.a.createElement(le.a,{thousandSeparator:!0,displayType:"text",value:M,suffix:D}))),label:d({key:C.a.CHARTS_24H_VOL})}),k&&(x.push({value:E.a.createElement("span",null,I?`${Object(Y.a)(I.fundingRate).times(100).times(ve.c).toFixed(ee.m)}%`:"-"),label:d({key:C.a.FUNDING_RATE_SHORT}),tooltip:{key:"perpetual-funding-rate",left:Ne,top:we,stringParams:{SYMBOL:b}}}),i.width>=J.b)){const e=I&&I.openInterest&&new Se.a(I.openInterest,f?v:T).getNaturalValue();if(e){const t=w?Object(Pe.a)(e.toNumber(),2):{},a=t.num,r=t.suffix,n=w?a:"-",i=w?`${r} ${N}`:` ${N}`;x.push({value:E.a.createElement(le.a,{thousandSeparator:!0,displayType:"text",value:n,suffix:i}),label:d({key:C.a.OPEN_INTEREST_SHORT})})}}return E.a.createElement("div",{className:"price-depth-header"},E.a.createElement("div",{className:"highlight-container"},E.a.createElement("div",{className:"highlight-wrapper"},`${s?s.toFixed(h):"-"} ${m}`,E.a.createElement("div",{className:"highlight-label"},d({key:C.a.MID_MARKET_PRICE}))),E.a.createElement("div",{className:"highlight-arrow"})),E.a.createElement("div",{className:"info-items-container"},g()(x,({value:e,label:t,tooltip:a})=>a?E.a.createElement(be.a,{key:t,className:"info-item-tooltip",tooltip:a.key,left:a.left,top:a.top,stringParams:a.stringParams,condition:i.width>J.f},E.a.createElement(pe,{key:t,value:e,label:t})):E.a.createElement(pe,{key:t,value:e,label:t}))),E.a.createElement("div",{className:"button-container"},E.a.createElement("div",{tabIndex:0,role:"button",onClick:()=>{Object(Ie.b)("price-depth-charts","click-depth"),l(!0)},className:R()("button","button__depth-chart",{button__selected:c})},E.a.createElement(S.w,null)),E.a.createElement("div",{tabIndex:0,role:"button",onClick:()=>{Object(Ie.b)("price-depth-charts","click-candle"),l(!1)},className:R()("button","button__candle-chart",{button__selected:!c})},E.a.createElement(S.l,null))))}render(){const e=this.props,t=e.allChartData,a=e.currentPair,r=e.hasFetchedDataAtLeastOnce,n=e.price,i=e.selectedLocale,o=e.showDepthChart,s=this.state.isPriceChartReady,l=Object(ye.f)({allChartData:t,pairKey:a.key}),c=Object(ye.e)({allChartData:t,pairKey:a.key}),u=Object(ye.b)({allChartData:t,pairKey:a.key});return E.a.createElement("div",{className:"price-depth-charts"},this.renderHeader(),!s&&E.a.createElement("div",{className:"loading-spinner"},E.a.createElement(me.a,null)),(!d()(u)||r)&&E.a.createElement(y.Fragment,null,o&&E.a.createElement("div",{className:"depth-chart-controls"},E.a.createElement("div",{className:R()("minus",{disabled:!this.canZoomOut()}),onClick:this.onClickZoomOut,role:"button",tabIndex:0},E.a.createElement(S.U,null)),E.a.createElement("div",{className:R()("plus",{disabled:!this.canZoomIn()}),onClick:this.onClickZoomIn,role:"button",tabIndex:0},E.a.createElement(S.db,null))),E.a.createElement("div",{className:R()("price-depth-content-container",{"price-depth-content-container__chart-ready":s})},o&&E.a.createElement("div",{className:"depth-chart-container"},E.a.createElement(oe,null)),E.a.createElement("div",{className:"price-chart-container"},E.a.createElement(B,{data:u,isDataLoading:c,price:n,onChartReady:this.onChartReady,onClickResolution:this.onClickResolution,pair:a,resolution:l,selectedLocale:i})))))}}Ce.propTypes={allChartData:f.a.object.isRequired,allMarkets:f.a.array.isRequired,currentPair:f.a.object.isRequired,hasFetchedDataAtLeastOnce:f.a.bool.isRequired,indexPriceNatural:f.a.object,marketStats:f.a.object,pageViewport:f.a.object.isRequired,perpetualMarkets:f.a.object.isRequired,price:f.a.number,selectedLocale:f.a.string.isRequired,setPriceChartResolution:f.a.func.isRequired,setShowDepthChart:f.a.func.isRequired,showDepthChart:f.a.bool.isRequired,stringGetter:f.a.func.isRequired,zoom:f.a.number.isRequired,zoomDepthChart:f.a.func.isRequired};var Ae=Object(G.k)(Object(_.c)(e=>({allChartData:Object(ye.g)(e),allMarkets:Object(Ee.d)(e),currentPair:Object(V.e)(e),hasFetchedDataAtLeastOnce:Object(ye.i)(e),indexPriceNatural:Object(ke.d)(e),marketStats:Object(fe.h)(e),pageViewport:Object(X.d)(e),perpetualMarkets:Object(Oe.g)(e),price:Object(K.h)(e),selectedLocale:Object(Te.c)(e),showDepthChart:Object(_e.g)(e),zoom:Object(K.k)(e)}),e=>({setPriceChartResolution:(t,a)=>e(Object(w.d)(t,a)),setShowDepthChart:t=>e(Object(ge.c)(t)),zoomDepthChart:t=>e(Object(he.a)(t))}))(Ce));a.d(t,"a",function(){return Ae})},2208:function(e,t,a){"use strict";var r=a(118),n=a.n(r),i=a(0),o=a.n(i),s=a(1),l=a.n(s),c=a(19),d=a.n(c),u=a(74),p=a(486),m=a.n(p),b=a(2126),h=a.n(b),g=a(489),y=a.n(g),E=a(113),O=a.n(E),f=a(234),_=a.n(f),k=a(6),T=a.n(k),v=a(37),R=a.n(v),S=a(17),P=a.n(S),I=a(67),w=a.n(I),N=a(135),C=a.n(N),A=a(39),j=a.n(A),L=a(90),M=a.n(L),D=a(52),x=a(60),q=a(9),B=a.n(q),F=a(230),W=a.n(F),G=a(384),U=a(86),V=a(132),K=a(44),H=a(249),Y=a(343),z=a(146),Z=a(11),$=a(5),Q=a(27),X=a(61),J=a(94),ee=a(57),te=a(46);a(2193);function ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(a,!0).forEach(function(t){_defineProperty(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const ae={updatedOrderIds:[],animatingRemovedOrders:[],hasCenteredOrderbook:!1},re=400,ne=24;class ie extends i.Component{constructor(){super(),this.centerOrderbook=(()=>{if(this.containerRef.current&&this.bookRef.current){const t=this.bookRef.current.clientHeight;if(t>0){this.setState({hasCenteredOrderbook:!0});try{const a=t/2-this.containerRef.current.clientHeight/2+ne/2;this.containerRef.current.scrollTo({top:a})}catch(e){}}}}),this.renderOrder=((e,t,a)=>{const r=this.props,n=r.baseMarket,i=r.quoteMarket,s=r.setTradeData,l=r.setTradeType,c=r.selectedTradeType,u=r.userOrders,p=r.currentPair,m=p.tickDecimals,b=p.largeOrderSize,h=p.isInversePerpetual,g=this.state.updatedOrderIds,y=t.id,E=t.price,O=t.amount,f=t.removed;if(t.isBlank)return o.a.createElement("div",{className:"order order__blank",key:a+e});const _=new ee.a(O,h?i:n).getNaturalValue(),k=new J.a(E,n,i).getNaturalValue().dp(X.n,a===Q.e.BUY?B.a.ROUND_DOWN:B.a.ROUND_UP);let v;const S=R()(u,e=>e.id===y);if(S){const e=S.baseAmount,t=S.filledAmount;v=Object(te.a)(new B.a(e).minus(t),(h?i:n).currency.decimals)}const P=d()("order",{order__updated:T()(g,y),order__removed:f});return o.a.createElement("div",{className:P,role:"button",tabIndex:0,key:a+e,onClick:()=>{c!==Z.v.CROSS&&l({tradeType:Z.v.CROSS,isLimitPricePrefill:!0}),s({tradeOrderType:Z.u.LIMIT,limitPrice:J.a.fromNaturalValue(k,n,i)})}},o.a.createElement("div",{className:"bar",style:{width:`${Math.min(Z.m,Math.max(1,Z.m*(_/b)))}px`}}),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col col__size"},o.a.createElement(W.a,{thousandSeparator:!0,displayType:"text",value:_.toFixed(h?X.p:X.n)})),o.a.createElement("div",{className:"col col__price"},k.toFixed(m)),o.a.createElement("div",{className:d()("col col__my-size",{col__grey:!v})},v?v.toFixed(X.n):"-")))}),this.state=_objectSpread({},ae),this.containerRef=o.a.createRef(),this.bookRef=o.a.createRef()}componentDidMount(){this.centerOrderbook()}componentDidUpdate(e){const t=this.state,a=t.updatedOrderIds,r=t.hasCenteredOrderbook,n=this.props,i=n.baseMarket,o=n.quoteMarket,s=n.buyOrders,l=n.sellOrders,c=n.orderbookVersion,d=n.recentlyRemovedOrders,u=n.currentPair,p=n.pageViewport,m=e.baseMarket,b=e.quoteMarket,h=e.orderbookVersion,g=e.pageViewport,y=e.buyOrders;if((m.id!==i.id||b.id!==o.id||!r||M()(y)&&j()(s)||p.height!==g.height||p.width!==g.width)&&this.centerOrderbook(),h!==c){0===c&&this.setState(_objectSpread({},ae));const e=C()([...s,...l],(e,{id:t,version:a})=>(0!==a&&a===c&&e.push(t),e),[]);if(d.length>0){const e=Date.now();this.setState(({animatingRemovedOrders:t})=>{const a=w()(t,({animatedAt:t})=>e-t<re);return P()(d,t=>{t.pairId===u.orderMarket&&a.push(_objectSpread({},t,{animatedAt:e}))}),{animatingRemovedOrders:a}}),setTimeout(()=>{this.containerRef&&this.setState(({animatingRemovedOrders:e})=>({animatingRemovedOrders:w()(e,e=>!R()(d,t=>e.id===t.id))}))},re)}e.length>0&&(this.setState({updatedOrderIds:[...a,...e]}),setTimeout(()=>{if(this.containerRef){const t=this.state.updatedOrderIds;this.setState({updatedOrderIds:w()(t,t=>!T()(e,t))})}},re))}}renderOrders(e,t){if(!e)return null;const a=[];return _()(e,(e,r)=>a.push(this.renderOrder(r,e,t))),a}renderBook(){const e=this.props,t=e.baseMarket,a=e.buyOrders,r=e.currentPair.displayQuoteSymbol,n=e.quoteMarket,s=e.sellOrders,l=e.spread,c=e.stringGetter,d=this.state.animatingRemovedOrders;let u,p=[...a],b=[...s];if(P()(d,e=>{e.side===Q.e.BUY?p.push(_objectSpread({},e,{removed:!0})):b.push(_objectSpread({},e,{removed:!0}))}),a.length!==p.length&&(p=O()(p,e=>parseFloat(e.price,10))),s.length!==b.length&&(b=O()(b,e=>parseFloat(e.price,10))),p.length>Z.n&&(p=y()(p,Math.max(p.length-Z.n,0),p.length)),b.length>Z.n)b=y()(b,0,Z.n);else{const e=Z.n-b.length;h()(e,()=>{b.push({isBlank:!0})})}if(!M()(a)&&!M()(s)){const e=new J.a(m()(a).price,t,n).getNaturalValue(),r=new J.a(s[0].price,t,n).getNaturalValue();u=e.minus(r).div(e)}return o.a.createElement(i.Fragment,null,o.a.createElement("div",{className:"orderbook-header"},o.a.createElement("div",{className:"col col__size"},c({key:$.a.ORDERBOOK_ORDER_SIZE})),o.a.createElement("div",{className:"col col__price"},`${c({key:$.a.PRICE})} (${r})`),o.a.createElement("div",{className:"col col__my-size"},c({key:$.a.ORDERBOOK_MY_ORDER_SIZE}))),o.a.createElement("div",{className:"book-scroll-container",ref:this.containerRef},o.a.createElement("div",{className:"book-scroll-dummy",ref:this.bookRef}),o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"orders sell"},this.renderOrders(b,Q.e.SELL)),o.a.createElement("div",{className:"spread"},o.a.createElement("div",{className:"col col__size"},c({key:$.a.ORDERBOOK_SPREAD})),o.a.createElement("div",{className:"col col__price"},l||"-"),o.a.createElement("div",{className:"col col__my-size"},u?`${u.times(100).abs().toFixed(X.k)}%`:"-")),o.a.createElement("div",{className:"orders buy"},this.renderOrders(p,Q.e.BUY)))))}render(){const e=this.props,t=e.buyOrders,a=e.isOrderbookLoaded;return o.a.createElement("div",{className:"component-orderbook"},a&&!M()(t)?this.renderBook():o.a.createElement(G.a,{className:"loading"}))}}ie.propTypes={baseMarket:l.a.object.isRequired,buyOrders:l.a.array,currentPair:l.a.object.isRequired,isOrderbookLoaded:l.a.bool.isRequired,orderbookVersion:l.a.number,pageViewport:l.a.object.isRequired,quoteMarket:l.a.object.isRequired,recentlyRemovedOrders:l.a.array.isRequired,selectedTradeType:l.a.string.isRequired,sellOrders:l.a.array,setTradeData:l.a.func.isRequired,setTradeType:l.a.func.isRequired,spread:l.a.string,stringGetter:l.a.func.isRequired,userOrders:l.a.array.isRequired},ie.defaultProps={buyOrders:[],sellOrders:[]};var oe=Object(u.k)(Object(D.c)(e=>({baseMarket:Object(K.d)(e),buyOrders:Object(V.f)(e),currentPair:Object(K.e)(e),isOrderbookLoaded:Object(V.l)(e),orderbookVersion:Object(V.n)(e),pageViewport:Object(z.d)(e),quoteMarket:Object(K.h)(e),recentlyRemovedOrders:Object(V.o)(e),selectedTradeType:Object(Y.f)(e),sellOrders:Object(V.i)(e),spread:Object(V.j)(e),userOrders:Object(H.e)(e)}),e=>Object(x.b)({setTradeData:U.e,setTradeType:U.f},e))(ie)),se=a(34),le=a(21);a(2194);const ce=400;class de extends i.Component{constructor(e){super(e),this.renderTrade=(e=>{const t=this.props,a=t.baseMarket,r=t.quoteMarket,n=t.currentPair,i=n.tickDecimals,s=n.largeTradeSize,l=n.isInversePerpetual,c=this.state.updatedTradeIds,u=e.uuid,p=e.price,m=e.side,b=e.amount,h=e.createdAt;if(!m)return null;const g=Object(te.a)(b,(l?r:a).currency.decimals),y=new J.a(p,a,r);return o.a.createElement("div",{key:u,className:d()("trade",{trade__buy:m===le.k.BUY,trade__sell:m===le.k.SELL,trade__updated:T()(c,u)})},o.a.createElement("div",{className:d()("bar",{bar__green:m===le.k.BUY,bar__red:m===le.k.SELL}),style:{width:`${Math.min(Z.m,Math.max(1,g/s*24))}px`}}),o.a.createElement("div",{className:"details"},o.a.createElement("div",{className:"detail size"},o.a.createElement(W.a,{thousandSeparator:!0,displayType:"text",value:g.toFixed(l?X.p:X.n)})),o.a.createElement("div",{className:d()("detail","price",{price__green:m===le.k.BUY,price__red:m===le.k.SELL})},y.getNaturalValue().toFixed(i)),o.a.createElement("div",{className:"detail time"},se.DateTime.fromISO(h).toFormat("HH:mm:ss"))))}),this.state={updatedTradeIds:[]}}componentDidUpdate(e){const t=e.liveTradesVersion,a=this.props,r=a.trades,n=a.liveTradesVersion,i=this.state.updatedTradeIds;if(0===n)i.length>0&&this.setState({updatedTradeIds:[]});else if(t!==n){const e=[];P()(r,({uuid:t,version:a})=>a===n&&(e.push(t),!0)),e.length>0&&(this.setState(t=>({updatedTradeIds:[...t.updatedTradeIds,...e]})),setTimeout(()=>{const t=this.state.updatedTradeIds;this.setState({updatedTradeIds:w()(t,t=>!T()(e,t))})},ce))}}renderTrades(e){return e?e.map(this.renderTrade):null}render(){const e=this.props,t=e.currentPair.displayQuoteSymbol,a=e.stringGetter,r=e.trades,n=w()(r,e=>se.DateTime.fromISO(e.createdAt).diffNow("hours").hours>-24);return o.a.createElement("div",{className:"component-live-trades"},o.a.createElement("div",{className:"header"},o.a.createElement("div",{className:"title"},a({key:$.a.ORDERBOOK_ORDER_SIZE})),o.a.createElement("div",{className:"title price"},`${a({key:$.a.PRICE})} (${t})`),o.a.createElement("div",{className:"title time"},a({key:$.a.TIME}))),j()(r)>0?o.a.createElement("div",{className:"trades"},this.renderTrades(n)):o.a.createElement(G.a,{className:"loading"}))}}de.propTypes={baseMarket:l.a.object.isRequired,currentPair:l.a.object.isRequired,liveTradesVersion:l.a.number,quoteMarket:l.a.object.isRequired,stringGetter:l.a.func.isRequired,trades:l.a.array};var ue=Object(u.k)(Object(D.c)(e=>({baseMarket:Object(K.d)(e),currentPair:Object(K.e)(e),liveTradesVersion:Object(H.h)(e),quoteMarket:Object(K.h)(e),trades:Object(H.g)(e)}))(de)),pe=a(85);a(2195);const me={ORDERS:"ORDERS",TRADES:"TRADES"};class be extends i.Component{constructor(e){super(e),this.state={selectedTab:me.ORDERS}}renderTabs(){const e=this.props.stringGetter,t=this.state.selectedTab,a=d()("orderbook-trades-header__button",{"orderbook-trades-header__button--selected":t===me.ORDERS}),r=d()("orderbook-trades-header__button",{"orderbook-trades-header__button--selected":t===me.TRADES});return o.a.createElement("div",{className:"orderbook-trades-header"},o.a.createElement("div",{tabIndex:0,role:"button",className:a,onClick:()=>{Object(pe.b)("orderbook-trades","click-orderbook"),this.setState({selectedTab:me.ORDERS})}},e({key:$.a.ORDERBOOK_SHORT})),o.a.createElement("div",{tabIndex:0,role:"button",className:r,onClick:()=>{Object(pe.b)("orderbook-trades","click-trades"),this.setState({selectedTab:me.TRADES})}},e({key:$.a.TRADE_HISTORY_SHORT})))}render(){const e=this.props,t=e.lockedTab,a=e.stringGetter,r=this.state.selectedTab,n=t||r;return o.a.createElement("div",{className:"component-orderbook-trades"},t?o.a.createElement("div",{className:"orderbook-trades-header orderbook-trades-header__locked-tab"},t===me.ORDERS?a({key:$.a.ORDERBOOK}):a({key:$.a.TRADE_HISTORY})):this.renderTabs(),o.a.createElement("div",{className:"content"},n===me.TRADES?o.a.createElement(ue,null):o.a.createElement(oe,null)))}}be.propTypes={lockedTab:l.a.oneOf(n()(me)),stringGetter:l.a.func.isRequired};var he=Object(u.k)(be);a.d(t,"d",function(){return he}),a.d(t,"c",function(){return me}),a.d(t,"b",function(){return oe}),a.d(t,"a",function(){return ue})},2220:function(e,t,a){"use strict";var r=a(55),n=a.n(r),i=a(118),o=a.n(i),s=a(231),l=a.n(s),c=a(4),d=a.n(c),u=a(37),p=a.n(u),m=a(39),b=a.n(m),h=a(0),g=a.n(h),y=a(1),E=a.n(y),O=a(52),f=a(60),_=a(19),k=a.n(_),T=a(34),v=a(302),R=a(384),S=a(2123),P=a(2136),I=a(2130),w=a(190),N=a(286),C=a(74),A=a(31),j=a(45),L=a(49),M=a(33),D=a(389),x=a(44),q=a(616),B=a(132),F=a(249),W=a(102),G=a(146),U=a(61),V=a(65),K=a(11),H=a(21),Y=a(5),z=a(298),Z=a(38),$=a(94),Q=a(614),X=a(191),J=a(170),ee=(a(2258),a(2134)),te=a.n(ee);function asyncGeneratorStep(e,t,a,r,n,i,o){try{var s=e[i](o),l=s.value}catch(c){return void a(c)}s.done?t(l):Promise.resolve(l).then(r,n)}const ae=e=>({MARKET_SIDE:{titleKey:Y.a.MARKET,titleBottomKey:Y.a.SIDE,width:"15%",tooltip:{name:"positions-market"},tooltipBottom:{name:"positions-side"}},PNL_LEVERAGE:{titleKey:Y.a.PNL,titleBottomKey:Y.a.LEVERAGE_ABBREVIATED,width:"10%",tooltip:{name:"positions-pnl"},tooltipBottom:{name:"positions-leverage"}},SIZE_EQUITY:{titleKey:Y.a.SIZE,titleBottomKey:Y.a.EQUITY,width:"18%",tooltip:{name:"positions-size"},tooltipBottom:{name:"positions-equity"}},LIQ_OPEN:{titleKey:Y.a.LIQUIDATION_PRICE_ABBREVIATED,titleBottomKey:Y.a.OPEN_PRICE_ABBREVIATED,width:"15%",tooltip:{name:"positions-liq-price"},tooltipBottom:{name:"positions-open-price"}},STOP_LOSS:{titleKey:Y.a.STOP_LOSS,width:"16%",tooltip:{name:"positions-stop-price-hover",stringParams:{SYMBOL:e&&e.symbol}}},TAKE_PROFIT:{titleKey:Y.a.TAKE_PROFIT,width:"16%",tooltip:{name:"positions-take-profit-price",stringParams:{SYMBOL:e&&e.symbol}}},EXPIRY:{titleKey:Y.a.EXPIRY,width:"10%",tooltip:{name:"positions-expiry",left:-120}}}),re=()=>({MARKET_SIDE:{titleKey:Y.a.MARKET,titleBottomKey:Y.a.SIDE,width:"26%"},SIZE_EQUITY:{titleKey:Y.a.SIZE,titleBottomKey:Y.a.EQUITY,width:"28%"},LIQ_OPEN:{titleKey:Y.a.LIQUIDATION_PRICE_ABBREVIATED,titleBottomKey:Y.a.OPEN_PRICE_ABBREVIATED,width:"28%"},PNL_LEV_EXP:{titleKey:Y.a.PNL,titleBottomKey:Y.a.LEVERAGE_EXPIRY_ABBREVIATED,width:"18%"}});class ne extends h.Component{constructor(e){var t;super(e),t=this,this.onClickRow=(e=>{this.state.expandedPositionAccount===e?this.setState({expandedPositionAccount:null}):this.setState({expandedPositionAccount:e})}),this.getSpecialOrderPrice=(({position:e,stopOrder:t})=>{const a=this.props.allOrders,r=e.accountNumber,n=e.baseMarket,i=e.quoteMarket,o=e.pair.tickDecimals,s=Object(F.b)(a,r);if(b()(s)>0){const e=p()(s,e=>e.orderType===(t?H.n.CANONICAL_ISOLATED_STOP_LIMIT:H.n.CANONICAL_ISOLATED_TAKE_PROFIT));if(e)return`${new $.a(e.triggerPrice,n,i).getNaturalValue().toFixed(o)} ${i.symbol}`}return null}),this.withdrawIsolated=function(){var e=function _asyncToGenerator(e){return function(){var t=this,a=arguments;return new Promise(function(r,n){var i=e.apply(t,a);function _next(e){asyncGeneratorStep(i,r,n,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(i,r,n,_next,_throw,"throw",e)}_next(void 0)})}}(function*(e){const a=t.props,r=a.walletAddress,n=a.withdrawIsolated,i=a.walletType,o=a.stringGetter,s=e.accountNumber,l=e.sizeMV,c=e.baseMarket,d=e.quoteMarket,u=e.type;try{yield n({walletAddress:r,accountNumber:s,marketId:u===V.b.ISOLATED_LONG?c.id:d.id,amount:l.baseAmount,market:c,type:u})}catch(p){const e=Object(J.j)({error:p,walletAddress:r,walletType:i,location:"open-positions:withdraw-position",stringGetter:o}).message;e&&Object(v.b)(({closeToast:t})=>Object(N.b)({toastType:N.a.FAILED,title:o({key:Y.a.WITHDRAW_POSITION_FAILED}),body:e,onClose:t}))}});return function(t){return e.apply(this,arguments)}}(),this.state={expandedPositionAccount:null}}renderSizeAndEquity(e){const t=e.equityMV,a=e.sizeMV,r=e.isExpired,n=e.isLiquidated,i=e.isClosed;let o;o=r||n||i?"-":`${a.getNaturalTokenString()} ${a.market.symbol}`;const s=t?`${t.getNaturalTokenString()} ${t.market.symbol}`:"-";return g.a.createElement(h.Fragment,null,g.a.createElement("div",null,o),g.a.createElement("div",null,s))}renderPnl(e){const t=e.pnl;return t?g.a.createElement("div",{className:k()({green:t.gt(0),red:t.lt(0)})},t.gt(0)?"+":"",t.times(100).toFixed(U.l),"%"):"-"}renderExpiration(e){const t=this.props,a=t.isMobile,r=t.stringGetter,n=e.isLiquidated,i=e.isExpired,o=e.isClosed,s=e.expiresAt;if(o)return r({key:Y.a.CLOSED});if(n)return a?"LIQ":r({key:Y.a.LIQUIDATED});if(i)return a?"EXP":r({key:Y.a.EXPIRED});if(!s)return r({key:Y.a.NONE});const l=T.DateTime.fromISO(s),c=Object(Q.c)({expiration:l,abbreviateUnits:a,stringGetter:r}),d=c.timeString,u=c.unitString,p=c.hasExpirationWarning;return g.a.createElement(S.a,{className:"cell-tooltip",top:-26,left:40,tooltip:"exact-expiration",stringParams:{EXPIRATION:l.toFormat("DD TTT")}},g.a.createElement("div",{className:p?"red":null},d,a?"":" ",u))}renderCloseButton(e){const t=this.props,a=t.openModal,r=t.stringGetter,n=e.isClosed,i=e.isLiquidated,o=e.isExpired,s=e.accountNumber;return n||i||o?g.a.createElement(w.g,{className:"close-withdraw-button",onClick:t=>{t.stopPropagation(),this.withdrawIsolated(e)}},r({key:Y.a.WITHDRAW})):g.a.createElement(w.g,{className:"close-withdraw-button",onClick:e=>{e.stopPropagation(),a({type:Z.a.CLOSE_POSITION,props:{accountNumber:s}})}},r({key:Y.a.CLOSE}))}renderLiqAndOpenPrice(e){const t=e.isLiquidated,a=e.isExpired,r=e.isClosed,n=e.liquidationPriceMP,i=e.openPriceMP,o=e.collateralization,s=e.pair.tickDecimals,l=o&&o.lte(K.a);let c;return c=!n||!n.baseAmount.isFinite()||t||a||r?"-":`${n.getNaturalValue().toFixed(s)} ${d()(n,"quoteMarket.symbol")}`,g.a.createElement(h.Fragment,null,g.a.createElement("div",{className:k()({orange:l})},c),g.a.createElement("div",null,i.getNaturalValue().toFixed(s)," ",i.quoteMarket.symbol))}renderStopCell(e){const t=this.props,a=t.openSidebarModal,r=t.stringGetter,n=ae().STOP_LOSS.width,i=e.isExpired,o=e.isLiquidated,s=e.isClosed;if(i||o||s)return g.a.createElement(I.a,{width:n},"-");const l=this.getSpecialOrderPrice({position:e,stopOrder:!0});return g.a.createElement(I.a,{width:n,className:"trigger-price-cell"},g.a.createElement("div",{className:"trigger-price-cell__price"},l?g.a.createElement("span",{className:"trigger-price-edit"},l,g.a.createElement(A.bb,null)):g.a.createElement(w.g,{onClick:t=>{t.stopPropagation(),a({modalType:z.a.POSITION_TRIGGERS_MODAL,modalProps:{position:e,preselectStop:!0}})}},r({key:Y.a.ADD_STOP}))),g.a.createElement(w.g,{role:"button",tabIndex:0,className:"trigger-price-cell__edit",onClick:t=>{t.stopPropagation(),a({modalType:z.a.POSITION_TRIGGERS_MODAL,modalProps:{position:e,preselectStop:!0}})}},r(l?{key:Y.a.EDIT_STOP}:{key:Y.a.ADD_STOP})))}renderTakeProfitCell(e){const t=this.props,a=t.openSidebarModal,r=t.stringGetter,n=ae().STOP_LOSS.width,i=e.isExpired,o=e.isLiquidated,s=e.isClosed;if(i||o||s)return g.a.createElement(I.a,{width:n},"-");const l=this.getSpecialOrderPrice({position:e,stopOrder:!1});return g.a.createElement(I.a,{width:n,className:"trigger-price-cell"},g.a.createElement("div",{className:"trigger-price-cell__price"},l?g.a.createElement("span",{className:"trigger-price-edit"},l,g.a.createElement(A.bb,null)):g.a.createElement(w.g,{onClick:t=>{t.stopPropagation(),a({modalType:z.a.POSITION_TRIGGERS_MODAL,modalProps:{position:e,preselectTakeProfit:!0}})}},r({key:Y.a.ADD_TRIGGER}))),g.a.createElement(w.g,{className:"trigger-price-cell__edit",onClick:t=>{t.stopPropagation(),a({modalType:z.a.POSITION_TRIGGERS_MODAL,modalProps:{position:e,preselectTakeProfit:!0}})}},r(l?{key:Y.a.EDIT_TRIGGER}:{key:Y.a.ADD_TRIGGER})))}renderInterest(e){const t=ae().INTEREST.width;return e.interest?g.a.createElement(I.a,{width:t},Object(X.e)(e.interest.baseAmount,e.interest.market.currency.decimals)," ",e.interest.market.symbol):g.a.createElement(I.a,{width:t},"\u2014")}renderMarketAndSide(e){const t=this.props.stringGetter,a=e.type,r=e.symbol;return g.a.createElement(h.Fragment,null,g.a.createElement("div",{className:"market-side-cell"},a===V.b.ISOLATED_LONG?g.a.createElement(A.d,null):g.a.createElement(A.c,null),g.a.createElement("div",{className:"market-side-cell__text"},g.a.createElement("div",null,r),g.a.createElement("div",{className:k()({long:a===V.b.ISOLATED_LONG,short:a===V.b.ISOLATED_SHORT})},a===V.b.ISOLATED_LONG?t({key:Y.a.LONG}):t({key:Y.a.SHORT})))))}renderLeverage(e){const t=e.isLiquidated,a=e.isExpired,r=e.isClosed,n=e.leverageBN;return t||a||r?"-":`${n.toFixed(U.e)}X`}renderTableRow(e){const t=this.props,a=t.isMobile,r=t.openSidebarModal,n=t.stringGetter,i=this.state.expandedPositionAccount,o=e.uuid,s=e.type,c=e.status,d=e.interestOwedMV,u=e.interestEarnedMV,p=e.stopClosePriceMP,m=e.isPending,b=e.isClosed,y=e.isLiquidated,E=e.isExpired,O=e.marginDepositMV,f=e.initialLeverageBN,_=e.interestRate;let T;if(a){const t=this.getSpecialOrderPrice({position:e,stopOrder:!0}),a=this.getSpecialOrderPrice({position:e,stopOrder:!1});T=g.a.createElement(I.a,{className:"mobile-button-container"},c===V.a.OPEN&&g.a.createElement(h.Fragment,null,g.a.createElement(w.g,{onClick:t=>{t.stopPropagation(),r({modalType:z.a.POSITION_TRIGGERS_MODAL,modalProps:{position:e,preselectStop:!0}})}},t||`+ ${n({key:Y.a.STOP_PRICE_ABBREVIATED})}`),g.a.createElement(w.g,{onClick:t=>{t.stopPropagation(),r({modalType:z.a.POSITION_TRIGGERS_MODAL,modalProps:{position:e,preselectTakeProfit:!0}})}},a||`+ ${n({key:Y.a.TRIGGER_PRICE_ABBREVIATED})}`)),this.renderCloseButton(e))}else if(!m){const e=d&&c===V.a.OPEN?`${d.getNaturalTokenString()} ${d.market.symbol}`:"_",t=u&&c===V.a.OPEN?`${u.getNaturalTokenString()} ${u.market.symbol}`:"_",a=O?`${O.getNaturalTokenString()} ${O.market.symbol}`:"-",r=`${f.toFixed(U.k)}X`;T=g.a.createElement(h.Fragment,null,g.a.createElement(I.a,{label:g.a.createElement(S.a,{top:-24,left:84,tooltip:"positions-interest-owed"},n({key:Y.a.INTEREST_OWED}))},e),g.a.createElement(I.a,{label:g.a.createElement(S.a,{top:-24,left:104,tooltip:"positions-interest-earned"},n({key:Y.a.INTEREST_EARNED}))},t),g.a.createElement(I.a,{label:g.a.createElement(S.a,{top:-24,left:104,tooltip:"positions-margin-deposit"},n({key:Y.a.MARGIN_DEPOSIT}))},a),g.a.createElement(I.a,{label:g.a.createElement(S.a,{top:-24,left:76,tooltip:"positions-interest-rate"},n({key:Y.a.INTEREST_APR}))},_&&_.isFinite()?`${_.lt(0)?"+":""}${_.negated().times(100).toFixed(U.k)}%`:"-"),g.a.createElement(I.a,{label:g.a.createElement(S.a,{top:-24,left:104,tooltip:"positions-initial-leverage"},n({key:Y.a.INITIAL_LEVERAGE}))},r),c===V.a.STOP_EXECUTED&&p&&g.a.createElement(I.a,{label:g.a.createElement(S.a,{top:-24,left:86,tooltip:"positions-stop-close-price"},n({key:Y.a.STOP_CLOSED_AT_PRICE}))},`${p.getNaturalTokenString()} ${p.market.symbol}`))}const v=this.getTableConfig();return g.a.createElement(I.b,{key:o,expandable:!0,isExpanded:i===o&&!m,onClick:m?l.a:()=>this.onClickRow(o),isLoading:m,expandableContent:T,hoverContent:g.a.createElement(I.a,null,this.renderCloseButton(e)),leftBorderRed:s===V.b.ISOLATED_SHORT,leftBorderGreen:s===V.b.ISOLATED_LONG},g.a.createElement(I.a,{width:v.MARKET_SIDE.width},this.renderMarketAndSide(e)),!a&&g.a.createElement(I.a,{stacked:!0,width:v.PNL_LEVERAGE.width},g.a.createElement("div",null,this.renderPnl(e)),g.a.createElement("div",null,this.renderLeverage(e))),g.a.createElement(I.a,{stacked:!0,width:v.SIZE_EQUITY.width},this.renderSizeAndEquity(e)),g.a.createElement(I.a,{stacked:!0,width:v.LIQ_OPEN.width},this.renderLiqAndOpenPrice(e)),!a&&this.renderStopCell(e),!a&&this.renderTakeProfitCell(e),!a&&g.a.createElement(I.a,{uppercase:!0,red:y||E,width:v.EXPIRY.width},this.renderExpiration(e)),a&&g.a.createElement(I.a,{uppercase:!0,stacked:!(y||E||b),width:v.PNL_LEV_EXP.width},y||E||b?g.a.createElement("div",{className:k()("pnl-lev-exp-cell",{red:y||E})},this.renderExpiration(e)):g.a.createElement(h.Fragment,null,g.a.createElement("div",null,this.renderPnl(e)),g.a.createElement("div",{className:k()("pnl-lev-exp-cell",{red:y||E})},this.renderLeverage(e),"\u2022",this.renderExpiration(e)))))}getTableConfig(){const e=this.props,t=e.baseMarket,a=e.quoteMarket;return e.isMobile?re():ae(t,a)}renderEmptyOrLoading(){const e=this.props,t=e.arePositionsLoaded,a=e.isWalletConnecting,r=e.isWalletInvalid,n=e.isWalletReady,i=e.isOrderbookLoaded,o=e.stringGetter,s=e.userHasNoAccounts;return!r&&!t||!s&&!i&&n||a?g.a.createElement("div",{className:te.a.loading},g.a.createElement(R.a,null)):g.a.createElement("div",{className:te.a.emptyState},o({key:Y.a.EMPTY_OPEN_POSITIONS}))}render(){const e=this.props,t=e.pendingPositions,a=e.parsedPositions,r=e.isOrderbookLoaded,i=[...t,...a];return g.a.createElement("div",{className:"component-open-positions"},g.a.createElement(I.c,null,g.a.createElement(P.a,{headerConfig:o()(this.getTableConfig())}),g.a.createElement("div",{className:te.a.content},i.length&&r?n()(i,e=>this.renderTableRow(e)):this.renderEmptyOrLoading())))}}ne.propTypes={allOrders:E.a.array.isRequired,arePositionsLoaded:E.a.bool.isRequired,baseMarket:E.a.object.isRequired,isMobile:E.a.bool.isRequired,isOrderbookLoaded:E.a.bool.isRequired,isWalletConnecting:E.a.bool.isRequired,isWalletInvalid:E.a.bool.isRequired,isWalletReady:E.a.bool.isRequired,openModal:E.a.func.isRequired,openSidebarModal:E.a.func.isRequired,parsedPositions:E.a.array,pendingPositions:E.a.array,quoteMarket:E.a.object.isRequired,stringGetter:E.a.func.isRequired,userHasNoAccounts:E.a.bool.isRequired,walletAddress:E.a.string,walletType:E.a.string,withdrawIsolated:E.a.func.isRequired};t.a=Object(C.k)(Object(O.c)(e=>({allOrders:Object(F.k)(e),arePositionsLoaded:Object(D.b)(e),baseMarket:Object(x.d)(e),isMobile:Object(G.d)(e).isMobile,isOrderbookLoaded:Object(B.l)(e),isWalletConnecting:Object(M.e)(e),isWalletInvalid:Object(M.g)(e),isWalletReady:Object(M.h)(e),parsedPositions:Object(D.d)(e),pendingPositions:Object(q.b)(e),quoteMarket:Object(x.h)(e),userHasNoAccounts:Object(W.y)(e),walletAddress:Object(M.m)(e),walletType:Object(M.q)(e)}),e=>Object(f.b)({openModal:j.c,openSidebarModal:j.d,withdrawIsolated:L.f},e))(ne))},2221:function(e,t,a){"use strict";var r=a(118),n=a.n(r),i=a(0),o=a.n(i),s=a(1),l=a.n(s),c=a(52),d=a(230),u=a.n(d),p=a(74),m=a(384),b=a(2123),h=a(2136),g=a(2130),y=a(617),E=a(102),O=a(33),f=a(343),_=a(250),k=a(26),T=a(146),v=a(44),R=a(297),S=a(5),P=a(61),I=a(57),w=a(10),N=a(191),C=a(614),A=a(2),j=(a(2259),a(2134)),L=a.n(j);const M={ASSET:{titleKey:S.a.ASSET,width:"12%"},BALANCE:{titleKey:S.a.BALANCE,width:"27%",tooltip:{name:"balances-asset-balance"}},INTEREST:{titleKey:S.a.INTEREST_APR,width:"24%",tooltip:{name:"balances-interest-rate"}},VALUE:{titleKey:S.a.VALUE,width:"27%",tooltip:{name:"balances-asset-value"}},EXPIRY:{titleKey:S.a.EXPIRY,width:"10%",tooltip:{name:"expiration",left:-120}}},D={ASSET:{titleKey:S.a.ASSET,width:"25%"},BALANCE:{titleKey:S.a.BALANCE,titleBottomKey:S.a.VALUE,width:"32%"},INTEREST:{titleKey:S.a.INTEREST,width:"35%"},EXPIRY:{titleKey:S.a.EXPIRY_ABBREVIATED,width:"8%"}};class x extends i.Component{constructor(e){super(e),this.onClickRow=(e=>{this.state.expandedAsset===e?this.setState({expandedAsset:null}):this.setState({expandedAsset:e})}),this.state={expandedAsset:null}}getBalanceData(e,t,a){const r=this.props,n=r.baseMarket,i=r.quoteMarket,o=r.currentTradeData,s=o.newBaseMarketAccountBalance,l=o.newQuoteMarketAccountBalance;let c;o.areNewBalancesValid&&(e.id===n.id?c=s:e.id===i.id&&(c=l));const d=Object(N.e)(t.wei,e.currency.decimals),u=Object(N.e)(a,e.currency.decimals);return{balanceString:d,newAccountBalanceWei:c,newBalanceString:c?Object(N.e)(c,e.currency.decimals):null,pendingBalanceString:u}}renderBalanceCell(e,t,a){const r=this.props.isMobile,n=this.getBalanceData(e,t,a),i=n.balanceString,s=n.newAccountBalanceWei,l=n.newBalanceString,c=n.pendingBalanceString;let d=i||"0.0000";return l&&!r?d=o.a.createElement("div",{className:"diff-container"},o.a.createElement("div",null,o.a.createElement(u.a,{thousandSeparator:!0,displayType:"text",value:i})),o.a.createElement(y.a,{arrow:s.gte(t.wei)?"green":"red"}),o.a.createElement("div",null,o.a.createElement(u.a,{thousandSeparator:!0,displayType:"text",value:l}))):a&&(d=o.a.createElement("div",{className:"diff-container"},o.a.createElement("div",null,o.a.createElement(u.a,{thousandSeparator:!0,displayType:"text",value:i})),o.a.createElement(y.a,{arrow:"grey"}),o.a.createElement("div",{className:"pending-balance"},o.a.createElement(u.a,{thousandSeparator:!0,displayType:"text",value:c})))),d}renderInterestCell(e,t={}){const a=!t.par||Object(w.a)(t.par).eq(0);let r,n;if(a&&(n=o.a.createElement("div",{className:"interest-rate-container"},o.a.createElement("div",{className:"green"},"+",Object(w.a)(e.totalSupplyAPR).times(100).toFixed(P.d),"%"),o.a.createElement("div",{className:"divider"},"/"),o.a.createElement("div",{className:"red"},"-",Object(w.a)(e.totalBorrowAPR).times(100).toFixed(P.d),"%"))),Object(w.a)(t.par).lt(0)&&(r=Object(w.a)(e.totalBorrowAPR).times(100),n=o.a.createElement("div",{className:"red"},"-",r.toFixed(P.d),"%")),Object(w.a)(t.par).gt(0)&&(r=Object(w.a)(e.totalSupplyAPR).times(100),n=o.a.createElement("div",{className:"green"},"+",r.toFixed(P.d),"%")),!n)return null;const s=this.props,l=s.baseMarket,c=s.quoteMarket,d=s.currentTradeData,u=d.newBaseMarketAccountBalance,p=d.newQuoteMarketAccountBalance;let m,b,h;return d.areNewBalancesValid&&(e.id===l.id?m=u:e.id===c.id&&(m=p)),m&&(m.lt(0)?(b=Object(w.a)(e.totalBorrowAPR).times(100)).eq(r)||(h=o.a.createElement("div",{className:"diff-container"},o.a.createElement(y.a,{arrow:"red"}),o.a.createElement("div",{className:"red"},"-",b.toFixed(P.d),"%"))):m.gt(0)?(b=Object(w.a)(e.totalSupplyAPR).times(100)).eq(r)||(h=o.a.createElement("div",{className:"diff-container"},o.a.createElement(y.a,{arrow:"green"}),o.a.createElement("div",{className:"green"},"+",b.toFixed(P.d),"%"))):h="-"),o.a.createElement(i.Fragment,null,h&&a?"-":n,h)}renderValueCell(e,t,a){const r=this.props,n=r.baseMarket,i=r.quoteMarket,s=r.currentTradeData,l=r.isMobile,c=s.newBaseMarketAccountBalance,d=s.newQuoteMarketAccountBalance,p=s.areNewBalancesValid,m=new I.a(t&&t.wei,e),b=m.getPriceValue(),h=m.getFormattedValueString();let g,E;if(p)if(e.id===n.id){const t=new I.a(c,e);g=t.getFormattedValueString(),E=t.getPriceValue()}else if(e.id===i.id){const t=new I.a(d,e);g=t.getFormattedValueString(),E=t.getPriceValue()}let O=o.a.createElement(u.a,{thousandSeparator:!0,displayType:"text",value:h||"0.00",prefix:"$"});if(g&&!l)O=o.a.createElement("div",{className:"diff-container"},o.a.createElement("div",null,h||"0.00"),o.a.createElement(y.a,{arrow:E.gte(b)?"green":"red"}),o.a.createElement("div",null,g));else if(a){const t=new I.a(a,e);O=o.a.createElement("div",{className:"diff-container"},o.a.createElement("div",null,h||"0.00"),o.a.createElement(y.a,{arrow:"grey"}),o.a.createElement("div",{className:"pending-balance"},t.getFormattedValueString()))}return O}renderExpirationCell(e,t,a){const r=this.props,n=r.quoteMarket,i=r.baseMarket,s=r.canBypass28DayRequirement,l=r.currentTradeData,c=r.isMobile,d=r.stringGetter,u=l.newBaseMarketAccountBalance,p=l.newQuoteMarketAccountBalance,m=l.areNewBalancesValid,h=Object(C.c)({expiration:a,abbreviateUnits:c,stringGetter:d}),g=h.timeString,E=h.unitString,O=h.hasExpirationWarning;let f="-";if(g&&Object(w.a)(t.par).lt(A.a.ZERO))f=o.a.createElement(b.a,{className:"cell-tooltip",top:-26,left:40,tooltip:"exact-expiration",stringParams:{EXPIRATION:a.toFormat("DD TTT")}},o.a.createElement("div",{className:O?"red":""},`${g}${c?"":" "}${E}`));else if(m&&u&&p){!s&&(e.id===i.id&&u.lt(0)||e.id===n.id&&p.lt(0))&&(f=o.a.createElement("div",{className:"diff-container"},o.a.createElement("div",null,"-"),o.a.createElement(y.a,{arrow:"red"}),o.a.createElement("div",null,"28 ",d({key:S.a.DAYS}))))}return f}renderTableRow({market:e,balance:t={},expiration:a,pendingBalance:r,isPending:n}){const s=this.props,l=s.isMobile,c=s.stringGetter,d=this.state.expandedAsset,p=Object(w.a)(e.oraclePrice).toFormat(P.p),m=o.a.createElement(i.Fragment,null,o.a.createElement(g.a,{label:o.a.createElement(b.a,{top:-24,left:28,tooltip:"balances-price"},c({key:S.a.PRICE}))},o.a.createElement(u.a,{thousandSeparator:!0,displayType:"text",value:p,prefix:"$"}))),h=l?D:M;return o.a.createElement(g.b,{key:e.id,expandable:!0,isLoading:n,isExpanded:d===e.symbol,onClick:()=>this.onClickRow(e.symbol),expandableContent:m},o.a.createElement(g.a,{width:h.ASSET.width,marketSymbol:e.symbol},e.symbol),o.a.createElement(g.a,{stacked:l,width:h.BALANCE.width},l?o.a.createElement(i.Fragment,null,o.a.createElement("div",null,this.renderBalanceCell(e,t,r)),o.a.createElement("div",null,this.renderValueCell(e,t,r))):this.renderBalanceCell(e,t,r)),o.a.createElement(g.a,{width:h.INTEREST.width},this.renderInterestCell(e,t)),!l&&o.a.createElement(g.a,{width:h.VALUE.width},this.renderValueCell(e,t,r)),o.a.createElement(g.a,{width:h.EXPIRY.width},this.renderExpirationCell(e,t,a)))}renderContent(){const e=this.props,t=e.markets,a=e.account;return R.c.map(e=>{const r=Object(k.c)({allMarkets:t,symbol:e});if(a){const e=Object(E.b)({account:a,market:r}),t=Object(E.c)({account:a,market:r}),n=Object(E.e)({account:a,market:r}),i=!n.isZero();return this.renderTableRow({market:r,balance:e,expiration:t,pendingBalance:i&&Object(w.a)(e.wei).plus(n),isPending:i})}return this.renderTableRow({market:r})})}render(){const e=this.props,t=e.areAccountsLoaded,a=e.areMarketsLoaded,r=e.isMobile,i=e.isWalletInvalid,s=e.isWalletConnecting,l=r?D:M,c=!a||s||!i&&!t;return o.a.createElement("div",{className:"account-balances-trade"},o.a.createElement(g.c,null,o.a.createElement(h.a,{headerConfig:n()(l)}),o.a.createElement("div",{className:L.a.content},c?o.a.createElement("div",{className:L.a.loading},o.a.createElement(m.a,null)):this.renderContent())))}}x.propTypes={areAccountsLoaded:l.a.bool.isRequired,areMarketsLoaded:l.a.bool.isRequired,account:l.a.object,baseMarket:l.a.object.isRequired,canBypass28DayRequirement:l.a.bool.isRequired,currentTradeData:l.a.object.isRequired,isMobile:l.a.bool.isRequired,isWalletConnecting:l.a.bool.isRequired,isWalletInvalid:l.a.bool.isRequired,markets:l.a.array,quoteMarket:l.a.object.isRequired,stringGetter:l.a.func.isRequired};t.a=Object(p.k)(Object(c.c)(e=>({areAccountsLoaded:Object(E.i)(e),areMarketsLoaded:Object(k.e)(e),account:Object(E.l)(e),baseMarket:Object(v.d)(e),canBypass28DayRequirement:Object(_.a)(e),currentTradeData:Object(f.b)(e),isMobile:Object(T.d)(e).isMobile,isWalletConnecting:Object(O.e)(e),isWalletInvalid:Object(O.g)(e),markets:Object(k.d)(e),quoteMarket:Object(v.h)(e)}))(x))},2222:function(e,t,a){"use strict";var r=a(0),n=a.n(r),i=a(1),o=a.n(i),s=a(52),l=a(60),c=a(19),d=a.n(c),u=a(74),p=a(55),m=a.n(p),b=a(90),h=a.n(b),g=a(37),y=a.n(g),E=a(2132),O=a(2144),f=a(2123),_=a(617),k=a(190),T=a(45),v=a(102),R=a(44),S=a(343),P=a(616),I=a(26),w=a(42),N=a(297),C=a(24),A=a(5),j=a(11),L=a(298),M=a(388),D=a(191),x=a(10),q=a(2255),B=a.n(q);const F=({isLoading:e,hasNewTradeDiff:t,isCollateralization:a,name:i,before:o,beforeString:s,after:l,afterString:c,afterWarning:u})=>{let p;return o&&l&&(e&&!t?p="grey":l.gt(o)?p="green":l.lt(o)&&(p="red")),n.a.createElement("div",{key:i,className:d()(B.a.balanceItem,{[B.a.balanceItemHighlight]:t&&l,[B.a.grey]:e&&!t&&!l})},n.a.createElement("div",{className:B.a.name},i),n.a.createElement("div",{className:d()({[B.a.balance]:!a,[B.a.collateralization]:a})},n.a.createElement("span",null,s),p&&n.a.createElement(r.Fragment,null,n.a.createElement(_.a,{narrowContainer:!0,arrow:p}),n.a.createElement("span",{className:d()(B.a.truncatedText,{[B.a.red]:u,[B.a.grey]:e&&!t})},c))))},W=({allMarkets:e,baseMarket:t,collateralization:a,currentPair:r,currentTradeData:{newBaseMarketAccountBalance:i,newQuoteMarketAccountBalance:o,areNewBalancesValid:s,marginDeposit:l,marginDepositMarket:c,newCollateralization:u},marginAccount:p,openSidebarModal:b,pendingMarketsByAccountNumber:g,quoteMarket:_,spotAccount:T,stringGetter:R})=>{const S=r.type===C.d.SPOT,P=S?T:p,q=Object(v.d)({account:P}),W=g[(S?w.c:w.b).toFixed()],G=!!y()(P.balances,({pendingWei:e})=>e&&"0"!==e),U=!h()(W)||G;return n.a.createElement("div",{className:d()(B.a.sidebarBalances,{[B.a.sidebarSpotBalances]:S})},n.a.createElement("div",{className:B.a.sidebarBalancesContent},n.a.createElement("div",{className:B.a.title},n.a.createElement(f.a,{top:16,left:-32,tooltip:S?"spot-account-balances":"margin-account-balances"},R({key:S?A.a.SPOT_ACCOUNT_BALANCES:A.a.MARGIN_ACCOUNT_BALANCES})),U&&n.a.createElement(E.b,null)),m()(N.c,a=>{const r=Object(I.c)({allMarkets:e,symbol:a}),n=r.currency.decimals,d=Object(x.a)(Object(v.b)({account:P,market:r}).wei),u=Object(v.e)({account:P,market:r});let p,m;s?_.symbol===r.symbol?p=o:t.symbol===r.symbol&&(p=i):u.isZero()||(p=d.plus(u)),p&&(m=Object(D.e)(p,n));const b=l&&c.symbol===r.symbol&&d.gt(0)&&p&&p.lt(0);return F({isSpot:S,isLoading:!!y()(W,e=>e.id===r.id)||!u.isZero(),hasNewTradeDiff:s,name:r.symbol,before:d,beforeString:Object(D.e)(d,n),after:p,afterString:m,afterWarning:b||S&&p&&p.lt(0)})}),!S&&F({isSpot:S,isCollateralization:!0,name:n.a.createElement(f.a,{top:16,left:-38,tooltip:"trade-sidebar-collateralization"},R({key:A.a.COLLATERALIZATION})),before:a,beforeString:n.a.createElement(O.b,{collateralization:a,size:O.a.SMALL}),after:u,afterString:n.a.createElement(O.b,{size:O.a.SMALL,collateralization:u,red:u&&u.lt(j.b)})}),n.a.createElement("div",{className:B.a.buttons},n.a.createElement(k.g,{type:q?k.a.SECONDARY:k.a.PRIMARY,blue:!q,onClick:()=>b({modalType:L.a.DEPOSIT,modalProps:{product:S?M.a.SPOT:M.a.MARGIN}})},R({key:A.a.DEPOSIT})),n.a.createElement(k.g,{type:k.a.SECONDARY,disabled:!q,onClick:()=>b({modalType:L.a.WITHDRAW})},R({key:A.a.WITHDRAW})))))};W.propTypes={allMarkets:o.a.array.isRequired,baseMarket:o.a.object.isRequired,collateralization:o.a.object.isRequired,currentPair:o.a.object.isRequired,currentTradeData:o.a.object.isRequired,marginAccount:o.a.object,openSidebarModal:o.a.func.isRequired,pendingMarketsByAccountNumber:o.a.object.isRequired,quoteMarket:o.a.object.isRequired,spotAccount:o.a.object,stringGetter:o.a.func.isRequired};var G=Object(u.k)(Object(s.c)(e=>({allMarkets:Object(I.d)(e),baseMarket:Object(R.d)(e),collateralization:Object(v.s)(e),currentPair:Object(R.e)(e),currentTradeData:Object(S.b)(e),marginAccount:Object(v.r)(e),pendingMarketsByAccountNumber:Object(P.d)(e),quoteMarket:Object(R.h)(e),spotAccount:Object(v.v)(e)}),e=>Object(l.b)({openSidebarModal:T.d},e))(W)),U=a(2172),V=a(2173),K=a(2152),H=a(31),Y=a(86),z=a(33);a(2256);class Z extends r.Component{renderTabs(){const e=this.props,t=e.selectedTradeType,a=e.setTradeType,r=e.stringGetter,i=t===j.v.ISOLATED,o=d()("trade-box-tabs__tab",{"trade-box-tabs__selected-tab":i}),s=d()("trade-box-tabs__tab",{"trade-box-tabs__selected-tab":!i});return n.a.createElement("div",{className:"trade-box-tabs"},n.a.createElement("div",{tabIndex:0,role:"button",className:o,onClick:()=>a({tradeType:j.v.ISOLATED})},n.a.createElement(H.h,null),n.a.createElement("div",{className:"trade-box-tabs__text-wrapper"},r({key:A.a.ISOLATED}),n.a.createElement(f.a,{shortDelay:!0,className:"trade-box-tabs__tooltip-icon",top:12,left:-120,tooltip:"isolated"},"?"))),n.a.createElement("div",{tabIndex:0,role:"button",className:s,onClick:()=>a({tradeType:j.v.CROSS})},n.a.createElement(H.fb,null),n.a.createElement("div",{className:"trade-box-tabs__text-wrapper"},r({key:A.a.CROSS}),n.a.createElement(f.a,{shortDelay:!0,className:"trade-box-tabs__tooltip-icon",top:12,left:-254,tooltip:"cross"},"?"))))}render(){const e=this.props,t=e.isWalletReady,a=e.areAccountsLoaded,r=e.currentPair.type;return n.a.createElement("div",{className:"trade-sidebar"},n.a.createElement(V.a,null),t&&a?n.a.createElement(G,null):n.a.createElement(K.a,{isTradePage:!0}),n.a.createElement("div",{className:d()("scroll-container",{"scroll-container-spot":r===C.d.SPOT})},r===C.d.MARGIN&&this.renderTabs(),n.a.createElement(U.a,null)))}}Z.propTypes={areAccountsLoaded:o.a.bool.isRequired,currentPair:o.a.object.isRequired,isWalletReady:o.a.bool.isRequired,selectedTradeType:o.a.oneOf(j.w).isRequired,setTradeType:o.a.func.isRequired,stringGetter:o.a.func.isRequired};t.a=Object(u.k)(Object(s.c)(e=>({areAccountsLoaded:Object(v.i)(e),currentPair:Object(R.e)(e),isWalletReady:Object(z.h)(e),selectedTradeType:Object(S.f)(e)}),e=>Object(l.b)({setTradeType:Y.f},e))(Z))},2254:function(e,t,a){e.exports={tradeLayoutMobile:"_13SQej1-yAwr1TNsyh-m6l",tradeLayoutMobileContent:"dQKW3i_alxdMJLnRRKxjJ",bottomMenu:"UkvkGbSlSxSbThRH7Fi3q",menuButtons:"_3ZBrmfngPcqYocO5m-kVyC",buttonClickContainer:"_3G62LdrSV98M18dRkR9Xuc",menuButton:"_6owPbLiWkjukSknZGCEdY",menuButtonSelected:"_2u6yiD6c88tHuD2C6lYGtZ"}},2255:function(e,t,a){e.exports={sidebarBalances:"_1rmRsMRffK0l4aq9hMuEqA",sidebarSpotBalances:"_3vafOuWFJonKdeEpHnXBva",sidebarBalancesContent:"_3t1ZW3YPBU_3lWNb36LUKm",title:"ijPZ3ALWFaYgihNeM5xjN",balanceItem:"_3aQ20_kCv5WwgTVifvASLw",red:"QxfDhvYtwsr4LTzW3inFT",balance:"_13ZakkaKwB5Her1yFU7kci",collateralization:"_3DQzsfLaouoP_9EOWwozqA",truncatedText:"_2xeo7ewIVHCrHpqfhz-skH",balanceItemHighlight:"NTkUoJ5gjTR8q0Xoe_WlI",grey:"ncrR9j5Cv8VI_NY6HdES0","cell-tooltip":"Cmsn1-pZvX7QPNgsEi3zM","content-tooltip":"s6MrMZnVVSUXiZqodI2zs",buttons:"_3FB6hUg5t-xtWWhk6rY6nq"}},2256:function(e,t,a){},2257:function(e,t,a){"use strict";a.r(t),a.d(t,"getTabConfig",function(){return M});var r=a(39),n=a.n(r),i=a(0),o=a.n(i),s=a(1),l=a.n(s),c=a(52),d=a(60),u=a(40),p=a(74),m=a(2220),b=a(2221),h=a(2155),g=a(2157),y=a(2156),E=a(2135),O=a(2177),f=a(2178),_=a(2179),k=a(2180),T=a(86),v=a(80),R=a(343),S=a(249),P=a(44),I=a(11),w=a(21),N=a(24),C=a(5),A=a(85),j=a(2260),L=a.n(j);function ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const M=({numOrders:e,hasNewOrders:t,hasNewFills:a,isSpot:r}={})=>{let n;e>0&&(n=e>99?"99+":e);let i=[{key:I.t.ORDERS,labelKey:C.a.ORDERS,badge:{label:n,hasAlert:t}},{key:I.t.FILLS,labelKey:C.a.FILLS,notification:a}];return r||(i=[{key:I.t.POSITIONS,labelKey:C.a.POSITIONS},{key:I.t.BALANCES,labelKey:C.a.BALANCES},...i]),i},D=[{key:w.i.ALL_ORDERS,Icon:O.a,labelKey:C.a.FILTER_ALL},{key:w.i.MARKET_ORDERS,Icon:f.a,labelKey:C.a.FILTER_MARKET},{key:w.i.LIMIT_ORDERS,Icon:_.a,labelKey:C.a.FILTER_LIMIT},{key:w.i.STOP_ORDERS,Icon:k.a,labelKey:C.a.FILTER_STOP}];class x extends i.Component{constructor(e){super(e),this.state={selectedOrderFilter:w.i.ALL_ORDERS}}componentDidUpdate(){const e=this.props,t=e.currentPair,a=e.hasNewOrders,r=e.hasNewFills,n=e.selectedTradeContent,i=e.clearHasNewOrders,o=e.clearHasNewFills;a&&n===I.t.ORDERS&&i(t.orderMarket),r&&n===I.t.FILLS&&o(t.orderMarket)}render(){const e=this.props,t=e.currentPair,a=t.type,r=t.orderMarket,s=e.currentTradeData.tradeOrderType,l=e.hasNewFills,c=e.hasNewOrders,d=e.orders,u=e.selectedTradeContent,p=e.selectedTradeType,O=e.setTradeContent,f=e.stringGetter,_=this.state.selectedOrderFilter,k=M({numOrders:n()(d),hasNewOrders:c,hasNewFills:l,isSpot:a===N.d.SPOT});return o.a.createElement(i.Fragment,null,o.a.createElement("div",{className:L.a.tradeInfoHeader},o.a.createElement(y.a,{className:L.a.tabbedHeader,config:k,selectedToggleKey:u,onClick:e=>{O(e),Object(A.b)("trade-info","set-trade-info",{currentTradeInfo:u,newTradeInfo:e,tradeOrderType:s,selectedTradeType:p,orderMarket:r})}}),u===I.t.ORDERS&&o.a.createElement(E.b,{compact:!0,black:!0,className:L.a.filterDropdown,selectedItemKey:_,onChangeSelection:e=>{this.setState({selectedOrderFilter:e}),Object(A.b)("trade-info","change-order-filter",{currentOrderFilter:_,newOrderFilter:e,orderMarket:r})},menuItems:D.map(({key:e,Icon:t,labelKey:a})=>({key:e,label:o.a.createElement("div",{className:L.a.filterDropdownLabel},o.a.createElement(t,null),f({key:a}))}))})),o.a.createElement("div",{className:L.a.selectedContent},u===I.t.POSITIONS&&o.a.createElement(m.a,null),u===I.t.BALANCES&&o.a.createElement(b.a,null),u===I.t.ORDERS&&o.a.createElement(h.a,{filter:_}),u===I.t.FILLS&&o.a.createElement(g.a,null)))}}x.propTypes={currentPair:l.a.object.isRequired,clearHasNewFills:l.a.func.isRequired,clearHasNewOrders:l.a.func.isRequired,currentTradeData:l.a.object.isRequired,hasNewFills:l.a.bool,hasNewOrders:l.a.bool,location:l.a.shape({pathname:l.a.string}),orders:l.a.array.isRequired,selectedTradeContent:l.a.string.isRequired,selectedTradeType:l.a.string.isRequired,setTradeContent:l.a.func.isRequired,stringGetter:l.a.func.isRequired};t.default=Object(p.k)(Object(u.g)(Object(c.c)(e=>({currentPair:Object(P.e)(e),currentTradeData:Object(R.b)(e),hasNewOrders:Object(S.n)(e),hasNewFills:Object(S.m)(e),orders:Object(S.e)(e),selectedTradeContent:Object(R.e)(e),selectedTradeType:Object(R.f)(e)}),e=>(function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(a,!0).forEach(function(t){_defineProperty(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e})({clearHasNewOrders:t=>e(Object(v.f)({market:t,hasNewOrders:!1})),clearHasNewFills:t=>e(Object(v.e)({market:t,hasNewFills:!1}))},Object(d.b)({setTradeContent:T.d},e)))(x)))},2258:function(e,t,a){},2259:function(e,t,a){},2260:function(e,t,a){e.exports={tradeInfoHeader:"_1xsCcrqEqzFymEczD4I3Ul",tabbedHeader:"_20JmgYawfWUmyH2YRCOumh",filterDropdown:"chfoKfDllPPgjN5NrZLt0",filterDropdownLabel:"_2rbYaQf3YFb8KM-EZQ15Pe",selectedContent:"D-Tm63QGMKE27hppxVb7O"}},2265:function(e,t,a){"use strict";var r=a(55),n=a.n(r),i=a(0),o=a.n(i),s=a(1),l=a.n(s),c=a(52),d=a(60),u=a(19),p=a.n(u),m=a(2156),b=a(2207),h=a(2208),g=a(74),y=a(86),E=a(343),O=a(11),f=a(2254),_=a.n(f);class k extends i.Component{renderHome(){const e=this.props,t=e.selectedTab,a=e.setSelectedTab,r=e.getHomeTabConfig,s=e.homeTabComponentMapping;return o.a.createElement(i.Fragment,null,o.a.createElement(b.a,null),o.a.createElement(m.a,{className:"tabbed-header",config:r(),selectedToggleKey:t,onClick:e=>a(e)}),n()(s,({tabKey:e,TabComponent:a})=>t===e&&o.a.createElement(a,{key:e})))}renderMenu(){const e=this.props,t=e.setMobileTradeTab,a=e.selectedMobileTradeTab;return o.a.createElement("div",{className:_.a.bottomMenu},o.a.createElement("div",{className:_.a.menuButtons},n()(O.p,e=>o.a.createElement("div",{key:e,role:"button",tabIndex:0,className:_.a.buttonClickContainer,onClick:()=>t(e)},o.a.createElement("div",{className:p()(_.a.menuButton,{[_.a.menuButtonSelected]:a===e})},e)))))}render(){const e=this.props,t=e.selectedMobileTradeTab,a=e.sidebar;let r;switch(t){case O.p.TRADE:r=a;break;case O.p.HOME:r=this.renderHome();break;case O.p.BOOK:r=o.a.createElement(g.i,{setHeight:!0,setMaxHeight:!0,heightOffset:-88},o.a.createElement("div",null,o.a.createElement(h.b,null)));break;case O.p.HISTORY:r=o.a.createElement(g.i,{setHeight:!0,setMaxHeight:!0,heightOffset:-88},o.a.createElement("div",null,o.a.createElement(h.a,null)))}return o.a.createElement(g.i,{setMinHeight:!0},o.a.createElement("div",{className:_.a.tradeLayoutMobile},o.a.createElement("div",{className:_.a.tradeLayoutMobileContent},r,this.renderMenu())))}}k.propTypes={getHomeTabConfig:l.a.func.isRequired,selectedMobileTradeTab:l.a.string.isRequired,selectedTab:l.a.string.isRequired,setMobileTradeTab:l.a.func.isRequired,setSelectedTab:l.a.func.isRequired,sidebar:l.a.oneOfType([l.a.arrayOf(l.a.node),l.a.node]).isRequired,homeTabComponentMapping:l.a.array.isRequired};var T=Object(c.c)(e=>({selectedMobileTradeTab:Object(E.c)(e)}),e=>Object(d.b)({setMobileTradeTab:y.a},e))(k);a.d(t,"a",function(){return T})},2479:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(1),o=a.n(i),s=a(52),l=a(60),c=a(2265),d=a(2222),u=a(2257),p=a(2155),m=a(2157),b=a(2220),h=a(2221),g=a(86),y=a(44),E=a(343),O=a(24),f=a(11);const _=[{tabKey:f.t.POSITIONS,TabComponent:b.a},{tabKey:f.t.BALANCES,TabComponent:h.a},{tabKey:f.t.ORDERS,TabComponent:p.a},{tabKey:f.t.FILLS,TabComponent:m.a}],k=({currentPair:{type:e},selectedTradeContent:t,setTradeContent:a})=>n.a.createElement(c.a,{getHomeTabConfig:()=>Object(u.getTabConfig)({isSpot:e===O.d.SPOT}),sidebar:n.a.createElement(d.a,null),selectedTab:t,setSelectedTab:a,homeTabComponentMapping:_});k.propTypes={currentPair:o.a.object.isRequired,selectedTradeContent:o.a.string.isRequired,setTradeContent:o.a.func.isRequired};t.default=Object(s.c)(e=>({currentPair:Object(y.e)(e),selectedTradeContent:Object(E.e)(e)}),e=>Object(l.b)({setTradeContent:g.d},e))(k)}}]);
