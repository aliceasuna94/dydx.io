(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{2139:function(e,t,a){"use strict";var n=a(2140).Collapse,r=a(2158).UnmountClosed;e.exports=r,r.Collapse=n,r.UnmountClosed=r},2140:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.Collapse=void 0;var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(a(0));function _typeof(e){return(_typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var r=function(t){function Collapse(t){var a;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Collapse),a=function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!==typeof t?_assertThisInitialized(e):t}(this,_getPrototypeOf(Collapse).call(this,t)),_defineProperty(_assertThisInitialized(a),"timeout",void 0),_defineProperty(_assertThisInitialized(a),"container",void 0),_defineProperty(_assertThisInitialized(a),"content",void 0),_defineProperty(_assertThisInitialized(a),"onResize",function(){if(e.clearTimeout(a.timeout),a.container&&a.content){var t=a.props,n=t.isOpened,r=t.checkTimeout,i=a.container.clientHeight,o=a.content.clientHeight,l=n&&o===i,s=!n&&0===i;l||s?a.onRest({isFullyOpened:l,isFullyClosed:s,isOpened:n,containerHeight:i,contentHeight:o}):(a.onWork({isFullyOpened:l,isFullyClosed:s,isOpened:n,containerHeight:i,contentHeight:o}),a.timeout=setTimeout(function(){return a.onResize()},r))}}),_defineProperty(_assertThisInitialized(a),"onRest",function(e){var t=e.isFullyOpened,n=e.isFullyClosed,r=e.isOpened,i=e.containerHeight,o=e.contentHeight;if(a.container&&a.content){var l=r&&a.container.style.height==="".concat(o,"px"),s=!r&&"0px"===a.container.style.height;if(l||s){a.container.style.overflow=r?"initial":"hidden",a.container.style.height=r?"auto":"0px";var c=a.props.onRest;c&&c({isFullyOpened:t,isFullyClosed:n,isOpened:r,containerHeight:i,contentHeight:o})}}}),_defineProperty(_assertThisInitialized(a),"onWork",function(e){var t=e.isFullyOpened,n=e.isFullyClosed,r=e.isOpened,i=e.containerHeight,o=e.contentHeight;if(a.container&&a.content){var l=r&&a.container.style.height==="".concat(o,"px"),s=!r&&"0px"===a.container.style.height;if(!l&&!s){a.container.style.overflow="hidden",a.container.style.height=r?"".concat(o,"px"):"0px";var c=a.props.onWork;c&&c({isFullyOpened:t,isFullyClosed:n,isOpened:r,containerHeight:i,contentHeight:o})}}}),_defineProperty(_assertThisInitialized(a),"onRefContainer",function(e){a.container=e}),_defineProperty(_assertThisInitialized(a),"onRefContent",function(e){a.content=e}),t.initialStyle?a.initialStyle=t.initialStyle:a.initialStyle=t.isOpened?{height:"auto",overflow:"initial"}:{height:"0px",overflow:"hidden"},a}return function _inherits(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Collapse,n["default"].Component),function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}(Collapse,[{key:"componentDidMount",value:function componentDidMount(){this.onResize()}},{key:"shouldComponentUpdate",value:function shouldComponentUpdate(e){var t=this.props,a=t.theme,n=t.isOpened;return t.children!==e.children||n!==e.isOpened||Object.keys(a).some(function(t){return a[t]!==e.theme[t]})}},{key:"getSnapshotBeforeUpdate",value:function getSnapshotBeforeUpdate(){if(!this.container||!this.content)return null;if("auto"===this.container.style.height){var e=this.content.clientHeight;this.container.style.height="".concat(e,"px")}return null}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.onResize()}},{key:"componentWillUnmount",value:function componentWillUnmount(){e.clearTimeout(this.timeout)}},{key:"render",value:function render(){var e=this.props,t=e.theme,a=e.children;return n.default.createElement("div",{ref:this.onRefContainer,className:t.collapse,style:this.initialStyle},n.default.createElement("div",{ref:this.onRefContent,className:t.content},a))}}]),Collapse}();t.Collapse=r,_defineProperty(r,"defaultProps",{theme:{collapse:"ReactCollapse--collapse",content:"ReactCollapse--content"},initialStyle:void 0,onRest:void 0,onWork:void 0,checkTimeout:50})}).call(this,a(36))},2158:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnmountClosed=void 0;var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(a(0)),r=a(2140);function _typeof(e){return(_typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(a,!0).forEach(function(t){_defineProperty(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function _objectWithoutProperties(e,t){if(null==e)return{};var a,n,r=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var i=function(e){function UnmountClosed(e){var t;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,UnmountClosed),t=function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!==typeof t?_assertThisInitialized(e):t}(this,_getPrototypeOf(UnmountClosed).call(this,e)),_defineProperty(_assertThisInitialized(t),"onWork",function(e){var a=e.isOpened,n=_objectWithoutProperties(e,["isOpened"]);t.setState({isResting:!1,isOpened:a});var r=t.props.onWork;r&&r(_objectSpread({isOpened:a},n))}),_defineProperty(_assertThisInitialized(t),"onRest",function(e){var a=e.isOpened,n=_objectWithoutProperties(e,["isOpened"]);t.setState({isResting:!0,isOpened:a,isInitialRender:!1});var r=t.props.onRest;r&&r(_objectSpread({isOpened:a},n))}),_defineProperty(_assertThisInitialized(t),"getInitialStyle",function(){var e=t.state,a=e.isOpened;return e.isInitialRender&&a?{height:"auto",overflow:"initial"}:{height:"0px",overflow:"hidden"}}),t.state={isResting:!0,isOpened:e.isOpened,isInitialRender:!0},t}return function _inherits(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(UnmountClosed,n["default"].PureComponent),function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}(UnmountClosed,[{key:"componentDidUpdate",value:function componentDidUpdate(e){var t=this.props.isOpened;e.isOpened!==t&&this.setState({isResting:!1,isOpened:t,isInitialRender:!1})}},{key:"render",value:function render(){var e=this.state,t=e.isResting,a=e.isOpened;return t&&!a?null:n.default.createElement(r.Collapse,_extends({},this.props,{initialStyle:this.getInitialStyle(),onWork:this.onWork,onRest:this.onRest}))}}]),UnmountClosed}();t.UnmountClosed=i,_defineProperty(i,"defaultProps",{onWork:void 0,onRest:void 0})},2220:function(e,t,a){"use strict";var n=a(55),r=a.n(n),i=a(118),o=a.n(i),l=a(231),s=a.n(l),c=a(4),d=a.n(c),p=a(37),u=a.n(p),m=a(39),E=a.n(m),y=a(0),b=a.n(y),f=a(1),O=a.n(f),h=a(52),g=a(60),P=a(19),_=a.n(P),T=a(34),S=a(302),w=a(384),R=a(2123),I=a(2136),k=a(2130),v=a(190),N=a(286),A=a(74),C=a(31),j=a(45),L=a(49),D=a(33),M=a(389),x=a(44),B=a(616),F=a(132),q=a(249),K=a(102),G=a(146),V=a(61),W=a(65),U=a(11),H=a(21),z=a(5),$=a(298),Y=a(38),Q=a(94),X=a(614),Z=a(191),J=a(170),ee=(a(2258),a(2134)),te=a.n(ee);function asyncGeneratorStep(e,t,a,n,r,i,o){try{var l=e[i](o),s=l.value}catch(c){return void a(c)}l.done?t(s):Promise.resolve(s).then(n,r)}const ae=e=>({MARKET_SIDE:{titleKey:z.a.MARKET,titleBottomKey:z.a.SIDE,width:"15%",tooltip:{name:"positions-market"},tooltipBottom:{name:"positions-side"}},PNL_LEVERAGE:{titleKey:z.a.PNL,titleBottomKey:z.a.LEVERAGE_ABBREVIATED,width:"10%",tooltip:{name:"positions-pnl"},tooltipBottom:{name:"positions-leverage"}},SIZE_EQUITY:{titleKey:z.a.SIZE,titleBottomKey:z.a.EQUITY,width:"18%",tooltip:{name:"positions-size"},tooltipBottom:{name:"positions-equity"}},LIQ_OPEN:{titleKey:z.a.LIQUIDATION_PRICE_ABBREVIATED,titleBottomKey:z.a.OPEN_PRICE_ABBREVIATED,width:"15%",tooltip:{name:"positions-liq-price"},tooltipBottom:{name:"positions-open-price"}},STOP_LOSS:{titleKey:z.a.STOP_LOSS,width:"16%",tooltip:{name:"positions-stop-price-hover",stringParams:{SYMBOL:e&&e.symbol}}},TAKE_PROFIT:{titleKey:z.a.TAKE_PROFIT,width:"16%",tooltip:{name:"positions-take-profit-price",stringParams:{SYMBOL:e&&e.symbol}}},EXPIRY:{titleKey:z.a.EXPIRY,width:"10%",tooltip:{name:"positions-expiry",left:-120}}}),ne=()=>({MARKET_SIDE:{titleKey:z.a.MARKET,titleBottomKey:z.a.SIDE,width:"26%"},SIZE_EQUITY:{titleKey:z.a.SIZE,titleBottomKey:z.a.EQUITY,width:"28%"},LIQ_OPEN:{titleKey:z.a.LIQUIDATION_PRICE_ABBREVIATED,titleBottomKey:z.a.OPEN_PRICE_ABBREVIATED,width:"28%"},PNL_LEV_EXP:{titleKey:z.a.PNL,titleBottomKey:z.a.LEVERAGE_EXPIRY_ABBREVIATED,width:"18%"}});class re extends y.Component{constructor(e){var t;super(e),t=this,this.onClickRow=(e=>{this.state.expandedPositionAccount===e?this.setState({expandedPositionAccount:null}):this.setState({expandedPositionAccount:e})}),this.getSpecialOrderPrice=(({position:e,stopOrder:t})=>{const a=this.props.allOrders,n=e.accountNumber,r=e.baseMarket,i=e.quoteMarket,o=e.pair.tickDecimals,l=Object(q.b)(a,n);if(E()(l)>0){const e=u()(l,e=>e.orderType===(t?H.n.CANONICAL_ISOLATED_STOP_LIMIT:H.n.CANONICAL_ISOLATED_TAKE_PROFIT));if(e)return`${new Q.a(e.triggerPrice,r,i).getNaturalValue().toFixed(o)} ${i.symbol}`}return null}),this.withdrawIsolated=function(){var e=function _asyncToGenerator(e){return function(){var t=this,a=arguments;return new Promise(function(n,r){var i=e.apply(t,a);function _next(e){asyncGeneratorStep(i,n,r,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(i,n,r,_next,_throw,"throw",e)}_next(void 0)})}}(function*(e){const a=t.props,n=a.walletAddress,r=a.withdrawIsolated,i=a.walletType,o=a.stringGetter,l=e.accountNumber,s=e.sizeMV,c=e.baseMarket,d=e.quoteMarket,p=e.type;try{yield r({walletAddress:n,accountNumber:l,marketId:p===W.b.ISOLATED_LONG?c.id:d.id,amount:s.baseAmount,market:c,type:p})}catch(u){const e=Object(J.j)({error:u,walletAddress:n,walletType:i,location:"open-positions:withdraw-position",stringGetter:o}).message;e&&Object(S.b)(({closeToast:t})=>Object(N.b)({toastType:N.a.FAILED,title:o({key:z.a.WITHDRAW_POSITION_FAILED}),body:e,onClose:t}))}});return function(t){return e.apply(this,arguments)}}(),this.state={expandedPositionAccount:null}}renderSizeAndEquity(e){const t=e.equityMV,a=e.sizeMV,n=e.isExpired,r=e.isLiquidated,i=e.isClosed;let o;o=n||r||i?"-":`${a.getNaturalTokenString()} ${a.market.symbol}`;const l=t?`${t.getNaturalTokenString()} ${t.market.symbol}`:"-";return b.a.createElement(y.Fragment,null,b.a.createElement("div",null,o),b.a.createElement("div",null,l))}renderPnl(e){const t=e.pnl;return t?b.a.createElement("div",{className:_()({green:t.gt(0),red:t.lt(0)})},t.gt(0)?"+":"",t.times(100).toFixed(V.l),"%"):"-"}renderExpiration(e){const t=this.props,a=t.isMobile,n=t.stringGetter,r=e.isLiquidated,i=e.isExpired,o=e.isClosed,l=e.expiresAt;if(o)return n({key:z.a.CLOSED});if(r)return a?"LIQ":n({key:z.a.LIQUIDATED});if(i)return a?"EXP":n({key:z.a.EXPIRED});if(!l)return n({key:z.a.NONE});const s=T.DateTime.fromISO(l),c=Object(X.c)({expiration:s,abbreviateUnits:a,stringGetter:n}),d=c.timeString,p=c.unitString,u=c.hasExpirationWarning;return b.a.createElement(R.a,{className:"cell-tooltip",top:-26,left:40,tooltip:"exact-expiration",stringParams:{EXPIRATION:s.toFormat("DD TTT")}},b.a.createElement("div",{className:u?"red":null},d,a?"":" ",p))}renderCloseButton(e){const t=this.props,a=t.openModal,n=t.stringGetter,r=e.isClosed,i=e.isLiquidated,o=e.isExpired,l=e.accountNumber;return r||i||o?b.a.createElement(v.g,{className:"close-withdraw-button",onClick:t=>{t.stopPropagation(),this.withdrawIsolated(e)}},n({key:z.a.WITHDRAW})):b.a.createElement(v.g,{className:"close-withdraw-button",onClick:e=>{e.stopPropagation(),a({type:Y.a.CLOSE_POSITION,props:{accountNumber:l}})}},n({key:z.a.CLOSE}))}renderLiqAndOpenPrice(e){const t=e.isLiquidated,a=e.isExpired,n=e.isClosed,r=e.liquidationPriceMP,i=e.openPriceMP,o=e.collateralization,l=e.pair.tickDecimals,s=o&&o.lte(U.a);let c;return c=!r||!r.baseAmount.isFinite()||t||a||n?"-":`${r.getNaturalValue().toFixed(l)} ${d()(r,"quoteMarket.symbol")}`,b.a.createElement(y.Fragment,null,b.a.createElement("div",{className:_()({orange:s})},c),b.a.createElement("div",null,i.getNaturalValue().toFixed(l)," ",i.quoteMarket.symbol))}renderStopCell(e){const t=this.props,a=t.openSidebarModal,n=t.stringGetter,r=ae().STOP_LOSS.width,i=e.isExpired,o=e.isLiquidated,l=e.isClosed;if(i||o||l)return b.a.createElement(k.a,{width:r},"-");const s=this.getSpecialOrderPrice({position:e,stopOrder:!0});return b.a.createElement(k.a,{width:r,className:"trigger-price-cell"},b.a.createElement("div",{className:"trigger-price-cell__price"},s?b.a.createElement("span",{className:"trigger-price-edit"},s,b.a.createElement(C.bb,null)):b.a.createElement(v.g,{onClick:t=>{t.stopPropagation(),a({modalType:$.a.POSITION_TRIGGERS_MODAL,modalProps:{position:e,preselectStop:!0}})}},n({key:z.a.ADD_STOP}))),b.a.createElement(v.g,{role:"button",tabIndex:0,className:"trigger-price-cell__edit",onClick:t=>{t.stopPropagation(),a({modalType:$.a.POSITION_TRIGGERS_MODAL,modalProps:{position:e,preselectStop:!0}})}},n(s?{key:z.a.EDIT_STOP}:{key:z.a.ADD_STOP})))}renderTakeProfitCell(e){const t=this.props,a=t.openSidebarModal,n=t.stringGetter,r=ae().STOP_LOSS.width,i=e.isExpired,o=e.isLiquidated,l=e.isClosed;if(i||o||l)return b.a.createElement(k.a,{width:r},"-");const s=this.getSpecialOrderPrice({position:e,stopOrder:!1});return b.a.createElement(k.a,{width:r,className:"trigger-price-cell"},b.a.createElement("div",{className:"trigger-price-cell__price"},s?b.a.createElement("span",{className:"trigger-price-edit"},s,b.a.createElement(C.bb,null)):b.a.createElement(v.g,{onClick:t=>{t.stopPropagation(),a({modalType:$.a.POSITION_TRIGGERS_MODAL,modalProps:{position:e,preselectTakeProfit:!0}})}},n({key:z.a.ADD_TRIGGER}))),b.a.createElement(v.g,{className:"trigger-price-cell__edit",onClick:t=>{t.stopPropagation(),a({modalType:$.a.POSITION_TRIGGERS_MODAL,modalProps:{position:e,preselectTakeProfit:!0}})}},n(s?{key:z.a.EDIT_TRIGGER}:{key:z.a.ADD_TRIGGER})))}renderInterest(e){const t=ae().INTEREST.width;return e.interest?b.a.createElement(k.a,{width:t},Object(Z.e)(e.interest.baseAmount,e.interest.market.currency.decimals)," ",e.interest.market.symbol):b.a.createElement(k.a,{width:t},"\u2014")}renderMarketAndSide(e){const t=this.props.stringGetter,a=e.type,n=e.symbol;return b.a.createElement(y.Fragment,null,b.a.createElement("div",{className:"market-side-cell"},a===W.b.ISOLATED_LONG?b.a.createElement(C.d,null):b.a.createElement(C.c,null),b.a.createElement("div",{className:"market-side-cell__text"},b.a.createElement("div",null,n),b.a.createElement("div",{className:_()({long:a===W.b.ISOLATED_LONG,short:a===W.b.ISOLATED_SHORT})},a===W.b.ISOLATED_LONG?t({key:z.a.LONG}):t({key:z.a.SHORT})))))}renderLeverage(e){const t=e.isLiquidated,a=e.isExpired,n=e.isClosed,r=e.leverageBN;return t||a||n?"-":`${r.toFixed(V.e)}X`}renderTableRow(e){const t=this.props,a=t.isMobile,n=t.openSidebarModal,r=t.stringGetter,i=this.state.expandedPositionAccount,o=e.uuid,l=e.type,c=e.status,d=e.interestOwedMV,p=e.interestEarnedMV,u=e.stopClosePriceMP,m=e.isPending,E=e.isClosed,f=e.isLiquidated,O=e.isExpired,h=e.marginDepositMV,g=e.initialLeverageBN,P=e.interestRate;let T;if(a){const t=this.getSpecialOrderPrice({position:e,stopOrder:!0}),a=this.getSpecialOrderPrice({position:e,stopOrder:!1});T=b.a.createElement(k.a,{className:"mobile-button-container"},c===W.a.OPEN&&b.a.createElement(y.Fragment,null,b.a.createElement(v.g,{onClick:t=>{t.stopPropagation(),n({modalType:$.a.POSITION_TRIGGERS_MODAL,modalProps:{position:e,preselectStop:!0}})}},t||`+ ${r({key:z.a.STOP_PRICE_ABBREVIATED})}`),b.a.createElement(v.g,{onClick:t=>{t.stopPropagation(),n({modalType:$.a.POSITION_TRIGGERS_MODAL,modalProps:{position:e,preselectTakeProfit:!0}})}},a||`+ ${r({key:z.a.TRIGGER_PRICE_ABBREVIATED})}`)),this.renderCloseButton(e))}else if(!m){const e=d&&c===W.a.OPEN?`${d.getNaturalTokenString()} ${d.market.symbol}`:"_",t=p&&c===W.a.OPEN?`${p.getNaturalTokenString()} ${p.market.symbol}`:"_",a=h?`${h.getNaturalTokenString()} ${h.market.symbol}`:"-",n=`${g.toFixed(V.k)}X`;T=b.a.createElement(y.Fragment,null,b.a.createElement(k.a,{label:b.a.createElement(R.a,{top:-24,left:84,tooltip:"positions-interest-owed"},r({key:z.a.INTEREST_OWED}))},e),b.a.createElement(k.a,{label:b.a.createElement(R.a,{top:-24,left:104,tooltip:"positions-interest-earned"},r({key:z.a.INTEREST_EARNED}))},t),b.a.createElement(k.a,{label:b.a.createElement(R.a,{top:-24,left:104,tooltip:"positions-margin-deposit"},r({key:z.a.MARGIN_DEPOSIT}))},a),b.a.createElement(k.a,{label:b.a.createElement(R.a,{top:-24,left:76,tooltip:"positions-interest-rate"},r({key:z.a.INTEREST_APR}))},P&&P.isFinite()?`${P.lt(0)?"+":""}${P.negated().times(100).toFixed(V.k)}%`:"-"),b.a.createElement(k.a,{label:b.a.createElement(R.a,{top:-24,left:104,tooltip:"positions-initial-leverage"},r({key:z.a.INITIAL_LEVERAGE}))},n),c===W.a.STOP_EXECUTED&&u&&b.a.createElement(k.a,{label:b.a.createElement(R.a,{top:-24,left:86,tooltip:"positions-stop-close-price"},r({key:z.a.STOP_CLOSED_AT_PRICE}))},`${u.getNaturalTokenString()} ${u.market.symbol}`))}const S=this.getTableConfig();return b.a.createElement(k.b,{key:o,expandable:!0,isExpanded:i===o&&!m,onClick:m?s.a:()=>this.onClickRow(o),isLoading:m,expandableContent:T,hoverContent:b.a.createElement(k.a,null,this.renderCloseButton(e)),leftBorderRed:l===W.b.ISOLATED_SHORT,leftBorderGreen:l===W.b.ISOLATED_LONG},b.a.createElement(k.a,{width:S.MARKET_SIDE.width},this.renderMarketAndSide(e)),!a&&b.a.createElement(k.a,{stacked:!0,width:S.PNL_LEVERAGE.width},b.a.createElement("div",null,this.renderPnl(e)),b.a.createElement("div",null,this.renderLeverage(e))),b.a.createElement(k.a,{stacked:!0,width:S.SIZE_EQUITY.width},this.renderSizeAndEquity(e)),b.a.createElement(k.a,{stacked:!0,width:S.LIQ_OPEN.width},this.renderLiqAndOpenPrice(e)),!a&&this.renderStopCell(e),!a&&this.renderTakeProfitCell(e),!a&&b.a.createElement(k.a,{uppercase:!0,red:f||O,width:S.EXPIRY.width},this.renderExpiration(e)),a&&b.a.createElement(k.a,{uppercase:!0,stacked:!(f||O||E),width:S.PNL_LEV_EXP.width},f||O||E?b.a.createElement("div",{className:_()("pnl-lev-exp-cell",{red:f||O})},this.renderExpiration(e)):b.a.createElement(y.Fragment,null,b.a.createElement("div",null,this.renderPnl(e)),b.a.createElement("div",{className:_()("pnl-lev-exp-cell",{red:f||O})},this.renderLeverage(e),"\u2022",this.renderExpiration(e)))))}getTableConfig(){const e=this.props,t=e.baseMarket,a=e.quoteMarket;return e.isMobile?ne():ae(t,a)}renderEmptyOrLoading(){const e=this.props,t=e.arePositionsLoaded,a=e.isWalletConnecting,n=e.isWalletInvalid,r=e.isWalletReady,i=e.isOrderbookLoaded,o=e.stringGetter,l=e.userHasNoAccounts;return!n&&!t||!l&&!i&&r||a?b.a.createElement("div",{className:te.a.loading},b.a.createElement(w.a,null)):b.a.createElement("div",{className:te.a.emptyState},o({key:z.a.EMPTY_OPEN_POSITIONS}))}render(){const e=this.props,t=e.pendingPositions,a=e.parsedPositions,n=e.isOrderbookLoaded,i=[...t,...a];return b.a.createElement("div",{className:"component-open-positions"},b.a.createElement(k.c,null,b.a.createElement(I.a,{headerConfig:o()(this.getTableConfig())}),b.a.createElement("div",{className:te.a.content},i.length&&n?r()(i,e=>this.renderTableRow(e)):this.renderEmptyOrLoading())))}}re.propTypes={allOrders:O.a.array.isRequired,arePositionsLoaded:O.a.bool.isRequired,baseMarket:O.a.object.isRequired,isMobile:O.a.bool.isRequired,isOrderbookLoaded:O.a.bool.isRequired,isWalletConnecting:O.a.bool.isRequired,isWalletInvalid:O.a.bool.isRequired,isWalletReady:O.a.bool.isRequired,openModal:O.a.func.isRequired,openSidebarModal:O.a.func.isRequired,parsedPositions:O.a.array,pendingPositions:O.a.array,quoteMarket:O.a.object.isRequired,stringGetter:O.a.func.isRequired,userHasNoAccounts:O.a.bool.isRequired,walletAddress:O.a.string,walletType:O.a.string,withdrawIsolated:O.a.func.isRequired};t.a=Object(A.k)(Object(h.c)(e=>({allOrders:Object(q.k)(e),arePositionsLoaded:Object(M.b)(e),baseMarket:Object(x.d)(e),isMobile:Object(G.d)(e).isMobile,isOrderbookLoaded:Object(F.l)(e),isWalletConnecting:Object(D.e)(e),isWalletInvalid:Object(D.g)(e),isWalletReady:Object(D.h)(e),parsedPositions:Object(M.d)(e),pendingPositions:Object(B.b)(e),quoteMarket:Object(x.h)(e),userHasNoAccounts:Object(K.y)(e),walletAddress:Object(D.m)(e),walletType:Object(D.q)(e)}),e=>Object(g.b)({openModal:j.c,openSidebarModal:j.d,withdrawIsolated:L.f},e))(re))},2221:function(e,t,a){"use strict";var n=a(118),r=a.n(n),i=a(0),o=a.n(i),l=a(1),s=a.n(l),c=a(52),d=a(230),p=a.n(d),u=a(74),m=a(384),E=a(2123),y=a(2136),b=a(2130),f=a(617),O=a(102),h=a(33),g=a(343),P=a(250),_=a(26),T=a(146),S=a(44),w=a(297),R=a(5),I=a(61),k=a(57),v=a(10),N=a(191),A=a(614),C=a(2),j=(a(2259),a(2134)),L=a.n(j);const D={ASSET:{titleKey:R.a.ASSET,width:"12%"},BALANCE:{titleKey:R.a.BALANCE,width:"27%",tooltip:{name:"balances-asset-balance"}},INTEREST:{titleKey:R.a.INTEREST_APR,width:"24%",tooltip:{name:"balances-interest-rate"}},VALUE:{titleKey:R.a.VALUE,width:"27%",tooltip:{name:"balances-asset-value"}},EXPIRY:{titleKey:R.a.EXPIRY,width:"10%",tooltip:{name:"expiration",left:-120}}},M={ASSET:{titleKey:R.a.ASSET,width:"25%"},BALANCE:{titleKey:R.a.BALANCE,titleBottomKey:R.a.VALUE,width:"32%"},INTEREST:{titleKey:R.a.INTEREST,width:"35%"},EXPIRY:{titleKey:R.a.EXPIRY_ABBREVIATED,width:"8%"}};class x extends i.Component{constructor(e){super(e),this.onClickRow=(e=>{this.state.expandedAsset===e?this.setState({expandedAsset:null}):this.setState({expandedAsset:e})}),this.state={expandedAsset:null}}getBalanceData(e,t,a){const n=this.props,r=n.baseMarket,i=n.quoteMarket,o=n.currentTradeData,l=o.newBaseMarketAccountBalance,s=o.newQuoteMarketAccountBalance;let c;o.areNewBalancesValid&&(e.id===r.id?c=l:e.id===i.id&&(c=s));const d=Object(N.e)(t.wei,e.currency.decimals),p=Object(N.e)(a,e.currency.decimals);return{balanceString:d,newAccountBalanceWei:c,newBalanceString:c?Object(N.e)(c,e.currency.decimals):null,pendingBalanceString:p}}renderBalanceCell(e,t,a){const n=this.props.isMobile,r=this.getBalanceData(e,t,a),i=r.balanceString,l=r.newAccountBalanceWei,s=r.newBalanceString,c=r.pendingBalanceString;let d=i||"0.0000";return s&&!n?d=o.a.createElement("div",{className:"diff-container"},o.a.createElement("div",null,o.a.createElement(p.a,{thousandSeparator:!0,displayType:"text",value:i})),o.a.createElement(f.a,{arrow:l.gte(t.wei)?"green":"red"}),o.a.createElement("div",null,o.a.createElement(p.a,{thousandSeparator:!0,displayType:"text",value:s}))):a&&(d=o.a.createElement("div",{className:"diff-container"},o.a.createElement("div",null,o.a.createElement(p.a,{thousandSeparator:!0,displayType:"text",value:i})),o.a.createElement(f.a,{arrow:"grey"}),o.a.createElement("div",{className:"pending-balance"},o.a.createElement(p.a,{thousandSeparator:!0,displayType:"text",value:c})))),d}renderInterestCell(e,t={}){const a=!t.par||Object(v.a)(t.par).eq(0);let n,r;if(a&&(r=o.a.createElement("div",{className:"interest-rate-container"},o.a.createElement("div",{className:"green"},"+",Object(v.a)(e.totalSupplyAPR).times(100).toFixed(I.d),"%"),o.a.createElement("div",{className:"divider"},"/"),o.a.createElement("div",{className:"red"},"-",Object(v.a)(e.totalBorrowAPR).times(100).toFixed(I.d),"%"))),Object(v.a)(t.par).lt(0)&&(n=Object(v.a)(e.totalBorrowAPR).times(100),r=o.a.createElement("div",{className:"red"},"-",n.toFixed(I.d),"%")),Object(v.a)(t.par).gt(0)&&(n=Object(v.a)(e.totalSupplyAPR).times(100),r=o.a.createElement("div",{className:"green"},"+",n.toFixed(I.d),"%")),!r)return null;const l=this.props,s=l.baseMarket,c=l.quoteMarket,d=l.currentTradeData,p=d.newBaseMarketAccountBalance,u=d.newQuoteMarketAccountBalance;let m,E,y;return d.areNewBalancesValid&&(e.id===s.id?m=p:e.id===c.id&&(m=u)),m&&(m.lt(0)?(E=Object(v.a)(e.totalBorrowAPR).times(100)).eq(n)||(y=o.a.createElement("div",{className:"diff-container"},o.a.createElement(f.a,{arrow:"red"}),o.a.createElement("div",{className:"red"},"-",E.toFixed(I.d),"%"))):m.gt(0)?(E=Object(v.a)(e.totalSupplyAPR).times(100)).eq(n)||(y=o.a.createElement("div",{className:"diff-container"},o.a.createElement(f.a,{arrow:"green"}),o.a.createElement("div",{className:"green"},"+",E.toFixed(I.d),"%"))):y="-"),o.a.createElement(i.Fragment,null,y&&a?"-":r,y)}renderValueCell(e,t,a){const n=this.props,r=n.baseMarket,i=n.quoteMarket,l=n.currentTradeData,s=n.isMobile,c=l.newBaseMarketAccountBalance,d=l.newQuoteMarketAccountBalance,u=l.areNewBalancesValid,m=new k.a(t&&t.wei,e),E=m.getPriceValue(),y=m.getFormattedValueString();let b,O;if(u)if(e.id===r.id){const t=new k.a(c,e);b=t.getFormattedValueString(),O=t.getPriceValue()}else if(e.id===i.id){const t=new k.a(d,e);b=t.getFormattedValueString(),O=t.getPriceValue()}let h=o.a.createElement(p.a,{thousandSeparator:!0,displayType:"text",value:y||"0.00",prefix:"$"});if(b&&!s)h=o.a.createElement("div",{className:"diff-container"},o.a.createElement("div",null,y||"0.00"),o.a.createElement(f.a,{arrow:O.gte(E)?"green":"red"}),o.a.createElement("div",null,b));else if(a){const t=new k.a(a,e);h=o.a.createElement("div",{className:"diff-container"},o.a.createElement("div",null,y||"0.00"),o.a.createElement(f.a,{arrow:"grey"}),o.a.createElement("div",{className:"pending-balance"},t.getFormattedValueString()))}return h}renderExpirationCell(e,t,a){const n=this.props,r=n.quoteMarket,i=n.baseMarket,l=n.canBypass28DayRequirement,s=n.currentTradeData,c=n.isMobile,d=n.stringGetter,p=s.newBaseMarketAccountBalance,u=s.newQuoteMarketAccountBalance,m=s.areNewBalancesValid,y=Object(A.c)({expiration:a,abbreviateUnits:c,stringGetter:d}),b=y.timeString,O=y.unitString,h=y.hasExpirationWarning;let g="-";if(b&&Object(v.a)(t.par).lt(C.a.ZERO))g=o.a.createElement(E.a,{className:"cell-tooltip",top:-26,left:40,tooltip:"exact-expiration",stringParams:{EXPIRATION:a.toFormat("DD TTT")}},o.a.createElement("div",{className:h?"red":""},`${b}${c?"":" "}${O}`));else if(m&&p&&u){!l&&(e.id===i.id&&p.lt(0)||e.id===r.id&&u.lt(0))&&(g=o.a.createElement("div",{className:"diff-container"},o.a.createElement("div",null,"-"),o.a.createElement(f.a,{arrow:"red"}),o.a.createElement("div",null,"28 ",d({key:R.a.DAYS}))))}return g}renderTableRow({market:e,balance:t={},expiration:a,pendingBalance:n,isPending:r}){const l=this.props,s=l.isMobile,c=l.stringGetter,d=this.state.expandedAsset,u=Object(v.a)(e.oraclePrice).toFormat(I.p),m=o.a.createElement(i.Fragment,null,o.a.createElement(b.a,{label:o.a.createElement(E.a,{top:-24,left:28,tooltip:"balances-price"},c({key:R.a.PRICE}))},o.a.createElement(p.a,{thousandSeparator:!0,displayType:"text",value:u,prefix:"$"}))),y=s?M:D;return o.a.createElement(b.b,{key:e.id,expandable:!0,isLoading:r,isExpanded:d===e.symbol,onClick:()=>this.onClickRow(e.symbol),expandableContent:m},o.a.createElement(b.a,{width:y.ASSET.width,marketSymbol:e.symbol},e.symbol),o.a.createElement(b.a,{stacked:s,width:y.BALANCE.width},s?o.a.createElement(i.Fragment,null,o.a.createElement("div",null,this.renderBalanceCell(e,t,n)),o.a.createElement("div",null,this.renderValueCell(e,t,n))):this.renderBalanceCell(e,t,n)),o.a.createElement(b.a,{width:y.INTEREST.width},this.renderInterestCell(e,t)),!s&&o.a.createElement(b.a,{width:y.VALUE.width},this.renderValueCell(e,t,n)),o.a.createElement(b.a,{width:y.EXPIRY.width},this.renderExpirationCell(e,t,a)))}renderContent(){const e=this.props,t=e.markets,a=e.account;return w.c.map(e=>{const n=Object(_.c)({allMarkets:t,symbol:e});if(a){const e=Object(O.b)({account:a,market:n}),t=Object(O.c)({account:a,market:n}),r=Object(O.e)({account:a,market:n}),i=!r.isZero();return this.renderTableRow({market:n,balance:e,expiration:t,pendingBalance:i&&Object(v.a)(e.wei).plus(r),isPending:i})}return this.renderTableRow({market:n})})}render(){const e=this.props,t=e.areAccountsLoaded,a=e.areMarketsLoaded,n=e.isMobile,i=e.isWalletInvalid,l=e.isWalletConnecting,s=n?M:D,c=!a||l||!i&&!t;return o.a.createElement("div",{className:"account-balances-trade"},o.a.createElement(b.c,null,o.a.createElement(y.a,{headerConfig:r()(s)}),o.a.createElement("div",{className:L.a.content},c?o.a.createElement("div",{className:L.a.loading},o.a.createElement(m.a,null)):this.renderContent())))}}x.propTypes={areAccountsLoaded:s.a.bool.isRequired,areMarketsLoaded:s.a.bool.isRequired,account:s.a.object,baseMarket:s.a.object.isRequired,canBypass28DayRequirement:s.a.bool.isRequired,currentTradeData:s.a.object.isRequired,isMobile:s.a.bool.isRequired,isWalletConnecting:s.a.bool.isRequired,isWalletInvalid:s.a.bool.isRequired,markets:s.a.array,quoteMarket:s.a.object.isRequired,stringGetter:s.a.func.isRequired};t.a=Object(u.k)(Object(c.c)(e=>({areAccountsLoaded:Object(O.i)(e),areMarketsLoaded:Object(_.e)(e),account:Object(O.l)(e),baseMarket:Object(S.d)(e),canBypass28DayRequirement:Object(P.a)(e),currentTradeData:Object(g.b)(e),isMobile:Object(T.d)(e).isMobile,isWalletConnecting:Object(h.e)(e),isWalletInvalid:Object(h.g)(e),markets:Object(_.d)(e),quoteMarket:Object(S.h)(e)}))(x))},2257:function(e,t,a){"use strict";a.r(t),a.d(t,"getTabConfig",function(){return D});var n=a(39),r=a.n(n),i=a(0),o=a.n(i),l=a(1),s=a.n(l),c=a(52),d=a(60),p=a(40),u=a(74),m=a(2220),E=a(2221),y=a(2155),b=a(2157),f=a(2156),O=a(2135),h=a(2177),g=a(2178),P=a(2179),_=a(2180),T=a(86),S=a(80),w=a(343),R=a(249),I=a(44),k=a(11),v=a(21),N=a(24),A=a(5),C=a(85),j=a(2260),L=a.n(j);function ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const D=({numOrders:e,hasNewOrders:t,hasNewFills:a,isSpot:n}={})=>{let r;e>0&&(r=e>99?"99+":e);let i=[{key:k.t.ORDERS,labelKey:A.a.ORDERS,badge:{label:r,hasAlert:t}},{key:k.t.FILLS,labelKey:A.a.FILLS,notification:a}];return n||(i=[{key:k.t.POSITIONS,labelKey:A.a.POSITIONS},{key:k.t.BALANCES,labelKey:A.a.BALANCES},...i]),i},M=[{key:v.i.ALL_ORDERS,Icon:h.a,labelKey:A.a.FILTER_ALL},{key:v.i.MARKET_ORDERS,Icon:g.a,labelKey:A.a.FILTER_MARKET},{key:v.i.LIMIT_ORDERS,Icon:P.a,labelKey:A.a.FILTER_LIMIT},{key:v.i.STOP_ORDERS,Icon:_.a,labelKey:A.a.FILTER_STOP}];class x extends i.Component{constructor(e){super(e),this.state={selectedOrderFilter:v.i.ALL_ORDERS}}componentDidUpdate(){const e=this.props,t=e.currentPair,a=e.hasNewOrders,n=e.hasNewFills,r=e.selectedTradeContent,i=e.clearHasNewOrders,o=e.clearHasNewFills;a&&r===k.t.ORDERS&&i(t.orderMarket),n&&r===k.t.FILLS&&o(t.orderMarket)}render(){const e=this.props,t=e.currentPair,a=t.type,n=t.orderMarket,l=e.currentTradeData.tradeOrderType,s=e.hasNewFills,c=e.hasNewOrders,d=e.orders,p=e.selectedTradeContent,u=e.selectedTradeType,h=e.setTradeContent,g=e.stringGetter,P=this.state.selectedOrderFilter,_=D({numOrders:r()(d),hasNewOrders:c,hasNewFills:s,isSpot:a===N.d.SPOT});return o.a.createElement(i.Fragment,null,o.a.createElement("div",{className:L.a.tradeInfoHeader},o.a.createElement(f.a,{className:L.a.tabbedHeader,config:_,selectedToggleKey:p,onClick:e=>{h(e),Object(C.b)("trade-info","set-trade-info",{currentTradeInfo:p,newTradeInfo:e,tradeOrderType:l,selectedTradeType:u,orderMarket:n})}}),p===k.t.ORDERS&&o.a.createElement(O.b,{compact:!0,black:!0,className:L.a.filterDropdown,selectedItemKey:P,onChangeSelection:e=>{this.setState({selectedOrderFilter:e}),Object(C.b)("trade-info","change-order-filter",{currentOrderFilter:P,newOrderFilter:e,orderMarket:n})},menuItems:M.map(({key:e,Icon:t,labelKey:a})=>({key:e,label:o.a.createElement("div",{className:L.a.filterDropdownLabel},o.a.createElement(t,null),g({key:a}))}))})),o.a.createElement("div",{className:L.a.selectedContent},p===k.t.POSITIONS&&o.a.createElement(m.a,null),p===k.t.BALANCES&&o.a.createElement(E.a,null),p===k.t.ORDERS&&o.a.createElement(y.a,{filter:P}),p===k.t.FILLS&&o.a.createElement(b.a,null)))}}x.propTypes={currentPair:s.a.object.isRequired,clearHasNewFills:s.a.func.isRequired,clearHasNewOrders:s.a.func.isRequired,currentTradeData:s.a.object.isRequired,hasNewFills:s.a.bool,hasNewOrders:s.a.bool,location:s.a.shape({pathname:s.a.string}),orders:s.a.array.isRequired,selectedTradeContent:s.a.string.isRequired,selectedTradeType:s.a.string.isRequired,setTradeContent:s.a.func.isRequired,stringGetter:s.a.func.isRequired};t.default=Object(u.k)(Object(p.g)(Object(c.c)(e=>({currentPair:Object(I.e)(e),currentTradeData:Object(w.b)(e),hasNewOrders:Object(R.n)(e),hasNewFills:Object(R.m)(e),orders:Object(R.e)(e),selectedTradeContent:Object(w.e)(e),selectedTradeType:Object(w.f)(e)}),e=>(function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(a,!0).forEach(function(t){_defineProperty(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e})({clearHasNewOrders:t=>e(Object(S.f)({market:t,hasNewOrders:!1})),clearHasNewFills:t=>e(Object(S.e)({market:t,hasNewFills:!1}))},Object(d.b)({setTradeContent:T.d},e)))(x)))},2258:function(e,t,a){},2259:function(e,t,a){},2260:function(e,t,a){e.exports={tradeInfoHeader:"_1xsCcrqEqzFymEczD4I3Ul",tabbedHeader:"_20JmgYawfWUmyH2YRCOumh",filterDropdown:"chfoKfDllPPgjN5NrZLt0",filterDropdownLabel:"_2rbYaQf3YFb8KM-EZQ15Pe",selectedContent:"D-Tm63QGMKE27hppxVb7O"}}}]);