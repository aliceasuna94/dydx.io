(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{2122:function(e,t,r){"use strict";r.d(t,"b",function(){return d}),r.d(t,"c",function(){return u}),r.d(t,"d",function(){return h}),r.d(t,"a",function(){return p});var a=r(4),o=r.n(a),i=r(41),n=r(44),s=r(26),c=r(94),l=r(10);const d=e=>o()(e,"indexPrices.indexPrices"),u=e=>o()(e,"indexPrices.areIndexPricesLoaded"),h=Object(i.a)([n.e,d,s.d],(e,t,r)=>p({pair:e,allIndexPrices:t,allMarkets:r})),p=({pair:e,allIndexPrices:t,allMarkets:r})=>{const a=e.orderMarket,o=e.baseSymbol,i=e.quoteSymbol,n=Object(s.c)({allMarkets:r,symbol:o}),d=Object(s.c)({allMarkets:r,symbol:i}),u=t[a];if(u)return new c.a(u,n,d).getNaturalValue();const h=Object(s.c)({allMarkets:r,symbol:"DAI"});if(h&&h.oraclePrice){if("WETH-DAI"===a){if(t["WETH-USDC"])return new c.a(t["WETH-USDC"],n,Object(s.c)({allMarkets:r,symbol:"USDC"})).getNaturalValue().div(h.oraclePrice)}if("DAI-USDC"===a)return Object(l.a)(h.oraclePrice)}return null}},2193:function(e,t,r){},2194:function(e,t,r){},2195:function(e,t,r){},2196:function(e,t,r){!function(a){"use strict";var i=function e(){return(i=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function o(e,t){var r=i({},e);for(var a in t)"object"!=typeof e[a]||null===e[a]||Array.isArray(e[a])?void 0!==t[a]&&(r[a]=t[a]):r[a]=o(e[a],t[a]);return r}var n={mobile:{disabled_features:["left_toolbar","header_widget","timeframes_toolbar","edit_buttons_in_legend","context_menus","control_bar","border_around_the_chart"],enabled_features:[]}},s={width:800,height:500,interval:"1D",timezone:"Etc/UTC",container_id:"",library_path:"",locale:"en",widgetbar:{details:!1,watchlist:!1,watchlist_settings:{default_symbols:[]}},overrides:{"mainSeriesProperties.showCountdown":!1},studies_overrides:{},trading_customization:{position:{},order:{}},brokerConfig:{configFlags:{}},fullscreen:!1,autosize:!1,disabled_features:[],enabled_features:[],debug:!1,logo:{},time_frames:[{text:"5y",resolution:"1W"},{text:"1y",resolution:"1W"},{text:"6m",resolution:"120"},{text:"3m",resolution:"60"},{text:"1m",resolution:"30"},{text:"5d",resolution:"5"},{text:"1d",resolution:"1"}],client_id:"0",user_id:"0",charts_storage_api_version:"1.0",favorites:{intervals:[],chartTypes:[]}};function r(){return"16.000 (internal id df1e6a68 @ 2020-07-17 13:51:54.948951)"}var c=function(){function t(e){if(this._id="tradingview_"+(1048576*(1+Math.random())|0).toString(16).substring(1),this._ready=!1,this._readyHandlers=[],this._onWindowResize=this._autoResizeChart.bind(this),!e.datafeed)throw new Error("Datafeed is not defined");if(this._options=o(s,e),e.preset){var t=n[e.preset];t?(void 0!==this._options.disabled_features?this._options.disabled_features=this._options.disabled_features.concat(t.disabled_features):this._options.disabled_features=t.disabled_features,void 0!==this._options.enabled_features?this._options.enabled_features=this._options.enabled_features.concat(t.enabled_features):this._options.enabled_features=t.enabled_features):console.warn("Unknown preset: `"+e.preset+"`")}"Dark"===this._options.theme&&void 0===this._options.loading_screen&&(this._options.loading_screen={backgroundColor:"#131722"}),this._create()}return t.prototype.onChartReady=function(e){this._ready?e.call(this):this._readyHandlers.push(e)},t.prototype.headerReady=function(){var e=this;return this._innerWindowLoaded.then(function(){return e._innerWindow().headerReady()})},t.prototype.onGrayedObjectClicked=function(e){this._innerAPI().onGrayedObjectClicked(e)},t.prototype.onShortcut=function(e,t){this._innerWindow().createShortcutAction(e,t)},t.prototype.subscribe=function(e,t){this._innerAPI().subscribe(e,t)},t.prototype.unsubscribe=function(e,t){this._innerAPI().unsubscribe(e,t)},t.prototype.chart=function(e){return this._innerAPI().chart(e)},t.prototype.setLanguage=function(e){this.remove(),this._options.locale=e,this._create()},t.prototype.setSymbol=function(e,t,r){this._innerAPI().changeSymbol(e,t,r)},t.prototype.remove=function(){window.removeEventListener("resize",this._onWindowResize),this._readyHandlers.splice(0,this._readyHandlers.length),delete window[this._id],this._iFrame.parentNode&&this._iFrame.parentNode.removeChild(this._iFrame)},t.prototype.closePopupsAndDialogs=function(){this._innerAPI().closePopupsAndDialogs()},t.prototype.selectLineTool=function(e){this._innerAPI().selectLineTool(e)},t.prototype.selectedLineTool=function(){return this._innerAPI().selectedLineTool()},t.prototype.save=function(e){this._innerAPI().saveChart(e)},t.prototype.load=function(e,t){this._innerAPI().loadChart({json:e,extendedData:t})},t.prototype.getSavedCharts=function(e){this._innerAPI().getSavedCharts(e)},t.prototype.loadChartFromServer=function(e){this._innerAPI().loadChartFromServer(e)},t.prototype.saveChartToServer=function(e,t,r){this._innerAPI().saveChartToServer(e,t,r)},t.prototype.removeChartFromServer=function(e,t){this._innerAPI().removeChartFromServer(e,t)},t.prototype.onContextMenu=function(e){this._innerAPI().onContextMenu(e)},t.prototype.createButton=function(e){return this._innerWindow().createButton(e)},t.prototype.showNoticeDialog=function(e){this._innerAPI().showNoticeDialog(e)},t.prototype.showConfirmDialog=function(e){this._innerAPI().showConfirmDialog(e)},t.prototype.showLoadChartDialog=function(){this._innerAPI().showLoadChartDialog()},t.prototype.showSaveAsChartDialog=function(){this._innerAPI().showSaveAsChartDialog()},t.prototype.symbolInterval=function(){return this._innerAPI().getSymbolInterval()},t.prototype.mainSeriesPriceFormatter=function(){return this._innerAPI().mainSeriesPriceFormatter()},t.prototype.getIntervals=function(){return this._innerAPI().getIntervals()},t.prototype.getStudiesList=function(){return this._innerAPI().getStudiesList()},t.prototype.addCustomCSSFile=function(e){this._innerWindow().addCustomCSSFile(e)},t.prototype.applyOverrides=function(e){this._options=o(this._options,{overrides:e}),this._innerWindow().applyOverrides(e)},t.prototype.applyStudiesOverrides=function(e){this._innerWindow().applyStudiesOverrides(e)},t.prototype.watchList=function(){return this._innerAPI().watchlist()},t.prototype.activeChart=function(){return this._innerAPI().activeChart()},t.prototype.chartsCount=function(){return this._innerAPI().chartsCount()},t.prototype.layout=function(){return this._innerAPI().layout()},t.prototype.setLayout=function(e){this._innerAPI().setLayout(e)},t.prototype.layoutName=function(){return this._innerAPI().layoutName()},t.prototype.changeTheme=function(e,t){this._innerWindow().changeTheme(e,t)},t.prototype.getTheme=function(){return this._innerWindow().getTheme()},t.prototype.takeScreenshot=function(){this._innerAPI().takeScreenshot()},t.prototype.lockAllDrawingTools=function(){return this._innerAPI().lockAllDrawingTools()},t.prototype.hideAllDrawingTools=function(){return this._innerAPI().hideAllDrawingTools()},t.prototype.drawOnAllCharts=function(e){this._innerAPI().drawOnAllCharts(e)},t.prototype.magnetEnabled=function(){return this._innerAPI().magnetEnabled()},t.prototype.magnetMode=function(){return this._innerAPI().magnetMode()},t.prototype.undoRedoState=function(){return this._innerAPI().undoRedoState()},t.prototype.setIntervalLinkingEnabled=function(e){this._innerAPI().setIntervalLinkingEnabled(e)},t.prototype.setTimeFrame=function(e){this._innerAPI().setTimeFrame(e)},t.prototype.symbolSync=function(){return this._innerAPI().symbolSync()},t.prototype.intervalSync=function(){return this._innerAPI().intervalSync()},t.prototype.crosshairSync=function(){return this._innerAPI().crosshairSync()},t.prototype.timeSync=function(){return this._innerAPI().timeSync()},t.prototype._innerAPI=function(){return this._innerWindow().tradingViewApi},t.prototype._innerWindow=function(){return this._iFrame.contentWindow},t.prototype._autoResizeChart=function(){this._options.fullscreen&&(this._iFrame.style.height=window.innerHeight+"px")},t.prototype._create=function(){var e=this,t=this._render(),r=document.getElementById(this._options.container_id);if(null===r)throw new Error("There is no such element - #"+this._options.container_id);r.innerHTML=t,this._iFrame=r.querySelector("#"+this._id);var a=this._iFrame;(this._options.autosize||this._options.fullscreen)&&(a.style.width="100%",this._options.fullscreen||(a.style.height="100%")),window.addEventListener("resize",this._onWindowResize),this._onWindowResize(),this._innerWindowLoaded=new Promise(function(e){!function retry(){a&&a.contentWindow&&void 0!==a.contentWindow.widgetReady?e():setTimeout(retry,100)}()}),this._innerWindowLoaded.then(function(){e._innerWindow().widgetReady(function(){e._ready=!0;for(var t=0,r=e._readyHandlers;t<r.length;t++){var a=r[t];try{a.call(e)}catch(e){console.error(e)}}e._innerWindow().initializationFinished()})})},t.prototype._render=function(){var e=window;if(e[this._id]={datafeed:this._options.datafeed,customFormatters:this._options.custom_formatters||this._options.customFormatters,brokerFactory:this._options.broker_factory||this._options.brokerFactory,overrides:this._options.overrides,studiesOverrides:this._options.studies_overrides,tradingCustomization:this._options.trading_customization,disabledFeatures:this._options.disabled_features,enabledFeatures:this._options.enabled_features,brokerConfig:this._options.broker_config||this._options.brokerConfig,restConfig:this._options.restConfig,favorites:this._options.favorites,logo:this._options.logo,numeric_formatting:this._options.numeric_formatting,rss_news_feed:this._options.rss_news_feed,newsProvider:this._options.news_provider,loadLastChart:this._options.load_last_chart,saveLoadAdapter:this._options.save_load_adapter,loading_screen:this._options.loading_screen,settingsAdapter:this._options.settings_adapter,getCustomIndicators:this._options.custom_indicators_getter},this._options.saved_data)e[this._id].chartContent={json:this._options.saved_data};else if(!Boolean(this._options.symbol))throw new Error("Symbol is not defined");var t=xyz+"static/"+encodeURIComponent(this._options.locale)+"-tv-chart.df1e6a6876536645d8cf.html#symbol="+encodeURIComponent(this._options.symbol||"")+"&interval="+encodeURIComponent(this._options.interval)+(this._options.timeframe?"&timeframe="+encodeURIComponent(this._options.timeframe):"")+(this._options.toolbar_bg?"&toolbarbg="+encodeURIComponent(this._options.toolbar_bg.replace("#","")):"")+(this._options.studies_access?"&studiesAccess="+encodeURIComponent(JSON.stringify(this._options.studies_access)):"")+"&widgetbar="+encodeURIComponent(JSON.stringify(this._options.widgetbar))+(this._options.drawings_access?"&drawingsAccess="+encodeURIComponent(JSON.stringify(this._options.drawings_access)):"")+"&timeFrames="+encodeURIComponent(JSON.stringify(this._options.time_frames))+"&locale="+encodeURIComponent(this._options.locale)+"&uid="+encodeURIComponent(this._id)+"&clientId="+encodeURIComponent(String(this._options.client_id))+"&userId="+encodeURIComponent(String(this._options.user_id))+(this._options.charts_storage_url?"&chartsStorageUrl="+encodeURIComponent(this._options.charts_storage_url):"")+(this._options.charts_storage_api_version?"&chartsStorageVer="+encodeURIComponent(this._options.charts_storage_api_version):"")+(this._options.custom_css_url?"&customCSS="+encodeURIComponent(this._options.custom_css_url):"")+(this._options.auto_save_delay?"&autoSaveDelay="+encodeURIComponent(String(this._options.auto_save_delay)):"")+"&debug="+encodeURIComponent(String(this._options.debug))+(this._options.snapshot_url?"&snapshotUrl="+encodeURIComponent(this._options.snapshot_url):"")+(this._options.timezone?"&timezone="+encodeURIComponent(this._options.timezone):"")+(this._options.study_count_limit?"&studyCountLimit="+encodeURIComponent(String(this._options.study_count_limit)):"")+(this._options.symbol_search_request_delay?"&ssreqdelay="+encodeURIComponent(String(this._options.symbol_search_request_delay)):"")+(this._options.theme?"&theme="+encodeURIComponent(String(this._options.theme)):"");return'<iframe id="'+this._id+'" name="'+this._id+'"  src="'+t+'"'+(this._options.autosize||this._options.fullscreen?"":' width="'+this._options.width+'" height="'+this._options.height+'"')+' frameborder="0" allowTransparency="true" scrolling="no" allowfullscreen style="display:block;"></iframe>'},t}();window.TradingView=window.TradingView||{},window.TradingView.version=r,a.version=r,a.widget=c,Object.defineProperty(a,"__esModule",{value:!0})}(t)},2197:function(e,t,r){e.exports={chartContainer:"sqGbqwSR6KCkYy07INYMD",chartSidebar:"_1wP87eq42J2Ebxq45nFORp",button:"_2ukXyebcoi-5EhBXbpGIzX",resolutionButton:"WKF63lX3KaIpoahiH_8X3"}},2198:function(e,t,r){},2199:function(e,t,r){e.exports={infoItem:"_2FeuvaksRu2m9vRudRQ0Fk",label:"_2T54nwj4rkOv4vybXbeldm"}},2200:function(e,t,r){},2207:function(e,t,r){"use strict";var a=r(118),o=r.n(a),i=r(486),n=r.n(i),s=r(39),c=r.n(s),l=r(90),d=r.n(l),u=r(4),h=r.n(u),p=r(17),m=r.n(p),b=r(55),_=r.n(b),y=r(0),f=r.n(y),v=r(1),g=r.n(v),O=r(52),k=r(60),C=r(34),R=r(19),E=r.n(R),w=r(31),S=r(2196),I=r(25),P=r(99),T=r(166),N=r(5),j=r(2197),D=r.n(j);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const A={[N.b.EN]:"en",[N.b.ZH_CN]:"zh",[N.b.JA]:"ja",[N.b.RU]:"ru"},x={container_id:"tv-price-chart",library_path:"/tv-charting-library/",custom_css_url:"/tv-charting-library/custom.css",locale:"en",autosize:!0,time_frames:[],disabled_features:["header_widget","compare_symbol","symbol_search_hot_key","left_toolbar","symbol_info","go_to_date","border_around_the_chart","timeframes_toolbar","edit_buttons_in_legend"],enabled_features:["remove_library_container_border","hide_last_na_study_output","dont_show_boolean_study_arguments"],overrides:{"paneProperties.background":"#1c1d23","paneProperties.horzGridProperties.color":"#272A31","paneProperties.vertGridProperties.color":"#272A31","paneProperties.crossHairProperties.style":1,"paneProperties.legendProperties.showBarChange":!1,"mainSeriesProperties.style":1,"mainSeriesProperties.candleStyle.upColor":"#29A935","mainSeriesProperties.candleStyle.borderUpColor":"#29A935","mainSeriesProperties.candleStyle.wickUpColor":"#29A935","mainSeriesProperties.candleStyle.downColor":"#ff5757","mainSeriesProperties.candleStyle.borderDownColor":"#ff5757","mainSeriesProperties.candleStyle.wickDownColor":"#ff5757","mainSeriesProperties.statusViewStyle.symbolTextSource":"ticker","mainSeriesProperties.showPriceLine":!1,"scalesProperties.textColor":"#ffffff","scalesProperties.backgroundColor":"#17181a","scalesProperties.showSeriesLastValue":!1},studies_overrides:{"volume.volume.color.0":"#ff5757","volume.volume.color.1":"#29a935","volume.volume ma.visible":!1,"relative strength index.plot.color":"#4280f9","relative strength index.plot.linewidth":2,"relative strength index.hlines background.color":"#134A9F"},loading_screen:{backgroundColor:"#17181a",foregroundColor:"#17181a"}},M=({startedAt:e,open:t,close:r,low:a,high:o,baseTokenVolume:i})=>({time:e,open:parseFloat(t,10),close:parseFloat(r,10),high:parseFloat(o,10),low:parseFloat(a,10),volume:Math.ceil(i)}),L=e=>_()(e,M);class F extends y.Component{constructor(e){super(e),this.onInsertIndicatorClick=(()=>{this.chartWidget&&this.chartWidgetReady&&this.chartWidget.activeChart().executeActionById("insertIndicator")}),this.getHistorySlice=((e,t,r)=>{const a=this.props.data,o=1e3*e,i=1e3*t,n=[];return!r&&!d()(a)&&i<a[0].startedAt?n:(m()(a,e=>{e.startedAt>=o&&n.push(M(e))}),n)}),this.chartWidget=null,this.chartWidgetReady=!1,this.chartLocale="en",this.oldResolution=null,this.subscriberCallback=null,this.resetCacheCallback=null,this.state={chartDataCallbacks:[]}}getSavedResolution(e){if(!e)return null;let t;return m()(e.charts,e=>{if(m()(e.panes,e=>{if(m()(e.sources,e=>{if("MainSeries"===e.type)return t=h()(e,"state.interval"),!1}),t)return!1}),t)return!1}),t}setVisibleRange(e){const t=T.b[e].defaultTimeframe;this.chartWidget.activeChart().setVisibleRange({from:C.DateTime.local().minus(t).toSeconds(),to:C.DateTime.local().toSeconds()},{percentRightMargin:10})}create(){const e=this.props,t=e.resolution,r=e.pair,a=e.onClickResolution,o=JSON.parse(Object(I.b)(I.a.TRADING_VIEW_CHART_CONFIG)),i=this.getSavedResolution(o);i&&i!==t&&a();const n=new S.widget(function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(r,!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({symbol:r.chartInfo.tradingViewSymbol,interval:i||t,datafeed:this.getDataFeed()},x,{saved_data:o}));n.onChartReady(()=>{const e=this.props.onChartReady;e&&e(),n.activeChart().setTimezone(C.DateTime.local().get("zoneName")),this.setVisibleRange(i||t),n.subscribe("onAutoSaveNeeded",()=>n.save(e=>Object(I.d)(I.a.TRADING_VIEW_CHART_CONFIG,JSON.stringify(e)))),this.chartWidgetReady=!0}),this.chartWidget=n}destroy(){this.chartWidget&&this.chartWidgetReady&&(this.chartWidget.remove(),this.chartWidget=null)}componentDidMount(){this.create()}componentWillUnmount(){this.destroy()}componentDidUpdate(e){const t=e.data,r=e.resolution,a=e.pair,o=this.props,i=o.data,n=o.resolution,s=o.pair,l=o.isDataLoading,u=o.selectedLocale,h=this.state.chartDataCallbacks;d()(h)||l||(m()(h,e=>e()),this.setState({chartDataCallbacks:[]})),this.chartWidget&&this.chartWidgetReady&&(a.key!==s.key&&(this.resetLocalChartData(),this.chartWidget.activeChart().setSymbol(s.chartInfo.tradingViewSymbol)),r!==n&&(this.resetLocalChartData(),this.oldResolution=r,this.chartWidget.activeChart().setResolution(n,()=>this.setVisibleRange(n))),this.chartLocale!==u&&(this.chartWidget.setLanguage(A[u]),this.chartLocale=u),d()(t)||d()(i)||c()(t)===c()(i)||!this.resetCacheCallback||(this.resetCacheCallback(),this.chartWidget.activeChart().resetData()),this.updateChartData())}resetLocalChartData(){this.oldResolution=null,this.subscriberCallback=null,this.resetCacheCallback=null,this.setState({chartDataCallbacks:[]})}updateChartData(){const e=this.props.data;this.subscriberCallback&&!d()(e)&&this.subscriberCallback(L([n()(e)])[0])}getPair(){return this.props.pair}getDataFeed(){const e=o()(this.getPair().chartInfo.supportedResolutions);return{onReady:t=>t({supports_search:!1,supports_time:!0,supports_marks:!1,supported_resolutions:e}),searchSymbols:(e,t,r,a)=>{a([])},resolveSymbol:(t,r)=>{const a=this.getPair().chartInfo,o=a.tradingViewName;r({name:o,ticker:o,description:o,type:"crypto",has_intraday:!0,has_daily:!0,minmov:1,pricescale:a.priceScale||100,session:"24x7",intraday_multipliers:["60"],supported_resolutions:e})},getBars:(e,t,r,a,o,i,n)=>{const s=this.props,c=s.pair,l=s.setEarliestRequestedCandle,u=()=>{const e=this.getHistorySlice(r,a,n);o(e,{noData:d()(e)})};if(!n){if(t===T.d["1H"])return void o([],{noData:!0});l({pairKey:c.key,time:r})}this.setState(e=>({chartDataCallbacks:[...e.chartDataCallbacks,u]}))},subscribeBars:(e,t,r,a,o)=>{this.subscriberCallback=r,this.resetCacheCallback=o},unsubscribeBars:()=>{this.subscriberCallback=null,this.resetCacheCallback=null}}}render(){const e=this.props,t=e.onClickResolution,r=e.resolution;return f.a.createElement("div",{className:D.a.chartContainer},f.a.createElement("div",{className:D.a.chartSidebar},f.a.createElement("div",{role:"button",tabIndex:0,className:E()(D.a.button,D.a.resolutionButton),onClick:t},T.c[r]),f.a.createElement("div",{role:"button",tabIndex:0,className:D.a.button,onClick:this.onInsertIndicatorClick},f.a.createElement(w.K,null))),f.a.createElement("div",{id:"tv-price-chart"}))}}F.propTypes={data:g.a.array,isDataLoading:g.a.bool,onChartReady:g.a.func,onClickResolution:g.a.func,pair:g.a.object.isRequired,resolution:g.a.string.isRequired,selectedLocale:g.a.string.isRequired,setEarliestRequestedCandle:g.a.func.isRequired};var V=Object(O.c)(null,e=>Object(k.b)({setEarliestRequestedCandle:P.b},e))(F),q=r(40),W=r(2205),U=r(74),z=r(41),B=r(44),H=r(132),K=r(94),G=r(10),Z=r(46),$=r(2);const Y=Object(z.a)([B.e,H.g,H.i,e=>e.depthChart.orderZoom,B.d,B.h],(e,t,r,a,o,i)=>{if(!t||!r)return[];const n=e.isInversePerpetual,s=[];t.slice(0,a).reduce((e,t)=>{const r=Object(Z.a)(t.amount,(n?i:o).currency.decimals),a=new K.a(t.price,o,i).getNaturalValue(),c=e.totalVolume.plus(n?r.div(a):r),l=e.totalCost.plus(n?r:r.times(a));return s.push({price:a.toNumber(),volume:c.toNumber(),cost:l.toNumber(),buyVolume:c.toNumber()}),{totalVolume:c,totalCost:l}},{totalVolume:$.a.ZERO,totalCost:$.a.ZERO});const c=[];r.slice(0,a).reduce((e,t)=>{const r=Object(Z.a)(t.amount,(n?i:o).currency.decimals),a=new K.a(t.price,o,i).getNaturalValue(),s=e.totalVolume.plus(n?r.div(a):r),l=e.totalCost.plus(n?r:r.times(a));return c.push({price:a.toNumber(),volume:s.toNumber(),cost:l.toNumber(),sellVolume:s.toNumber()}),{totalVolume:s,totalCost:l}},{totalVolume:$.a.ZERO,totalCost:$.a.ZERO});const l=J(s,(e,t)=>e>t,e=>e-.01,e=>e+.01),d=J(c,(e,t)=>e<t,e=>e+.01,e=>e-.01);return l.concat(d).sort((e,t)=>{if(Object(G.a)(e.price).eq(t.price)){if(e.buyVolume&&t.buyVolume)return Object(G.a)(e.volume).lt(t.volume)?1:-1;if(e.sellVolume&&t.sellVolume)return Object(G.a)(e.volume).lt(t.volume)?-1:1}return Object(G.a)(e.price).lt(t.price)?-1:1})}),J=(e,t,r,a)=>e;var X=r(146),Q=r(8),ee=r(61);r(2198);const te="#57FF5F",re="#2A5C2E",ae="#FF5757",oe="#5D2A2C";class ie extends y.Component{constructor(){super(),this.mouseMove=(e=>{this.lastEvent=e}),this.renderTooltip=(({payload:e,label:t})=>{const r=this.props.stringGetter;if(!e||!e[0])return null;let a,o;e[0].payload.buyVolume?(a=$.f.SELL,o=r({key:N.a.SELL})):(a=$.f.BUY,o=r({key:N.a.BUY}));const i=E()("depth-chart-tooltip",{buy:a===$.f.BUY,sell:a===$.f.SELL}),n=Object(G.a)(e[0].payload.volume),s=Object(G.a)(t).toFormat(ee.n),c=Object(G.a)(e[0].payload.cost).toFormat(ee.n);return f.a.createElement("div",{className:i},f.a.createElement("div",{className:"left-bar"}),f.a.createElement("div",{className:"data"},f.a.createElement("div",{className:"price"},s),f.a.createElement("div",{className:"line-item"},f.a.createElement("div",{className:"label"},o),f.a.createElement("div",{className:"value"},n.toFormat(ee.n))),f.a.createElement("div",{className:"line-item"},f.a.createElement("div",{className:"label"},r({key:N.a.CHARTS_COST})),f.a.createElement("div",{className:"value"},c))))}),this.renderActiveDot=(e=>{const t=e.cx,r=e.cy,a=e.dataKey;if(!r)return null;let o;return"buyVolume"===a?o="#57ff5f":"sellVolume"===a&&(o="#ff5757"),f.a.createElement("g",null,f.a.createElement("circle",{cx:t,cy:r,r:3,stroke:"white",strokeWidth:4}),f.a.createElement("circle",{cx:t,cy:r,r:2,stroke:o,strokeWidth:4}),f.a.createElement("line",{x1:t,x2:t,y1:r,y2:h()(this.componentRef,"current.clientHeight",0)-66,stroke:o,strokeWidth:1,strokeDasharray:"6 4"}))}),this.chartRef=f.a.createRef(),this.componentRef=f.a.createRef(),this.lastEvent=null}componentDidMount(){window.addEventListener("mousemove",this.mouseMove)}componentWillUnmount(){window.removeEventListener("mousemove",this.mouseMove)}componentDidUpdate(){this.chartRef.current&&this.lastEvent&&this.chartRef.current.handleMouseMove(this.lastEvent)}renderChart(){const e=this.props,t=e.data,r=e.midMarketPrice,a=e.currentPair.tickDecimals,o=e.pageViewport;let i;t.length>0&&(i=Math.min(r-t[0].price,t[t.length-1].price-r));const n=h()(this.componentRef,"current.clientHeight",.56*o.height-60)-32;let s;return s=o.isMobile?o.width:o.width>=Q.a?Math.max(o.width-3*$.e-32,Q.c-3*$.e-32):Math.max(o.width-2*$.e-16,Q.c-2*$.e-16),f.a.createElement("div",{className:"chart"},f.a.createElement(W.b,{ref:this.chartRef,width:s,height:n,data:t,onMouseMove:this.onMouseMove,margin:{top:0,right:0,bottom:0,left:0}},f.a.createElement("defs",null,f.a.createElement("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",gradientUnits:"userSpaceOnUse"},f.a.createElement("stop",{offset:"40%",stopColor:"#1c1d23"}),f.a.createElement("stop",{offset:"41%",stopColor:"#403f4c"}))),f.a.createElement(W.e,{x:r,stroke:"url(#gradient)",strokWidth:1,ifOverflow:"extendDomain",viewBox:{height:10}}),f.a.createElement(W.a,{strokeWidth:2,dot:!1,activeDot:this.renderActiveDot,stroke:te,fill:re,fillOpacity:1,dataKey:"buyVolume",isAnimationActive:!1,type:"step",connectNulls:!0}),f.a.createElement(W.a,{strokeWidth:2,activeDot:this.renderActiveDot,dot:!1,stroke:ae,fill:oe,fillOpacity:1,dataKey:"sellVolume",isAnimationActive:!1,type:"step",connectNulls:!0}),f.a.createElement(W.f,{content:this.renderTooltip,isAnimationActive:!1,cursor:!1}),f.a.createElement(W.h,{dataKey:"volume",axisLine:!1,mirror:!0,tickSize:4,minTickGap:10,yAxisId:0}),f.a.createElement(W.h,{dataKey:"volume",axisLine:!1,mirror:!0,tickSize:4,orientation:"right",minTickGap:10,yAxisId:1}),f.a.createElement(W.g,{dataKey:"price",axisLine:!1,tickFormatter:e=>e.toFixed(a),domain:[()=>r-i,()=>r+i],type:"number",tickSize:4,tickCount:20,interval:1})))}render(){const e=this.props.data;return f.a.createElement("div",{className:"component-depth-chart",ref:this.componentRef},e.length?this.renderChart():null)}}ie.propTypes={currentPair:g.a.object.isRequired,data:g.a.array.isRequired,midMarketPrice:g.a.number,pageViewport:g.a.object.isRequired,stringGetter:g.a.func.isRequired};var ne=Object(U.k)(Object(q.g)(Object(O.c)(e=>({currentPair:Object(B.e)(e),data:Y(e),midMarketPrice:Object(H.h)(e),pageViewport:Object(X.d)(e)}))(ie))),se=r(230),ce=r.n(se),le=r(2199),de=r.n(le);const ue=({label:e,value:t})=>f.a.createElement("div",{className:de.a.infoItem},f.a.createElement("div",{className:de.a.label},e),t);ue.propTypes={label:g.a.string.isRequired,value:g.a.oneOfType([g.a.arrayOf(g.a.node),g.a.node,g.a.string]).isRequired};var he=ue,pe=r(384),me=r(2123),be=r(626),_e=r(86),ye=r(209),fe=r(26),ve=r(296),ge=r(2137),Oe=r(343),ke=r(2122),Ce=r(194),Re=r(171),Ee=r(24),we=r(57),Se=r(191),Ie=r(85);r(2200);const Pe=16,Te=-32;class Ne extends y.Component{constructor(e){super(e),this.canZoomOut=(()=>{return this.props.zoom+10<=50}),this.canZoomIn=(()=>{return this.props.zoom-10>=10}),this.onClickZoomOut=(()=>{const e=this.props,t=e.zoom;(0,e.zoomDepthChart)(Math.min(50,t+10))}),this.onClickZoomIn=(()=>{const e=this.props,t=e.zoom;(0,e.zoomDepthChart)(Math.max(10,t-10))}),this.onChartReady=(()=>{this.setState({isPriceChartReady:!0})}),this.onClickResolution=(()=>{const e=this.props,t=e.allChartData,r=e.currentPair,a=e.setPriceChartResolution,o=Object(ye.f)({allChartData:t,pairKey:r.key});T.f[0]===o?a({pairKey:r.key,resolution:T.f[1]}):a({pairKey:r.key,resolution:T.f[0]})}),this.state={isPriceChartReady:!1}}renderHeader(){const e=this.props,t=e.allMarkets,r=e.currentPair,a=e.indexPriceNatural,o=e.marketStats,i=e.pageViewport,n=e.perpetualMarkets,s=e.price,c=e.setShowDepthChart,l=e.showDepthChart,d=e.stringGetter,u=r.baseSymbol,h=r.quoteSymbol,p=r.displayQuoteSymbol,m=r.displaySettlementSymbol,b=r.tickDecimals,v=r.type,g=r.isInversePerpetual,O=r.orderMarket,k=v===Ee.d.PERPETUAL,C=Object(fe.c)({allMarkets:t,symbol:u}),R=Object(fe.c)({allMarkets:t,symbol:h}),S=Object(fe.a)({allMarkets:t,perpetualMarkets:n,pair:r});let I;k&&(I=n[O]);const P=o&&o.baseVolume&&Object(G.a)(o.baseVolume),T=g?p:u,j=P?Object(Se.a)(P.toNumber(),2):{},D=j.num,A=j.suffix,x=P?D:"-",M=P?`${A} ${T}`:` ${T}`,L=[],F=i.width>Q.f&&i.width<=Q.c;if((k?i.width>Q.e&&!F:!F)&&L.push({value:f.a.createElement(ce.a,{thousandSeparator:!0,displayType:"text",value:S&&S.isFinite()?S.toFixed(b):"-",suffix:` ${p}`}),label:d({key:N.a.ORACLE_PRICE_ABBREVIATED}),tooltip:{key:"oracle-price",left:Te,top:Pe}}),k&&F||L.push({value:f.a.createElement(ce.a,{thousandSeparator:!0,displayType:"text",value:a?a.toFixed(b):"-",suffix:` ${p}`}),label:d({key:N.a.INDEX_PRICE_ABBREVIATED}),tooltip:{key:"index-price",left:Te,top:Pe}}),(k?i.width>=Q.a:i.width>Q.e&&!F)&&L.push({value:k?f.a.createElement(ce.a,{thousandSeparator:!0,displayType:"text",value:x,suffix:M}):f.a.createElement(y.Fragment,null,f.a.createElement("div",{className:"desktop"},f.a.createElement(ce.a,{thousandSeparator:!0,displayType:"text",value:P?P.toFixed(ee.n):"-",suffix:` ${u}`})),f.a.createElement("div",{className:"tablet"},f.a.createElement(ce.a,{thousandSeparator:!0,displayType:"text",value:x,suffix:M}))),label:d({key:N.a.CHARTS_24H_VOL})}),k&&(L.push({value:f.a.createElement("span",null,I?`${Object(G.a)(I.fundingRate).times(100).times(Re.c).toFixed(ee.m)}%`:"-"),label:d({key:N.a.FUNDING_RATE_SHORT}),tooltip:{key:"perpetual-funding-rate",left:Te,top:Pe,stringParams:{SYMBOL:m}}}),i.width>=Q.b)){const e=I&&I.openInterest&&new we.a(I.openInterest,g?R:C).getNaturalValue();if(e){const t=P?Object(Se.a)(e.toNumber(),2):{},r=t.num,a=t.suffix,o=P?r:"-",i=P?`${a} ${T}`:` ${T}`;L.push({value:f.a.createElement(ce.a,{thousandSeparator:!0,displayType:"text",value:o,suffix:i}),label:d({key:N.a.OPEN_INTEREST_SHORT})})}}return f.a.createElement("div",{className:"price-depth-header"},f.a.createElement("div",{className:"highlight-container"},f.a.createElement("div",{className:"highlight-wrapper"},`${s?s.toFixed(b):"-"} ${p}`,f.a.createElement("div",{className:"highlight-label"},d({key:N.a.MID_MARKET_PRICE}))),f.a.createElement("div",{className:"highlight-arrow"})),f.a.createElement("div",{className:"info-items-container"},_()(L,({value:e,label:t,tooltip:r})=>r?f.a.createElement(me.a,{key:t,className:"info-item-tooltip",tooltip:r.key,left:r.left,top:r.top,stringParams:r.stringParams,condition:i.width>Q.f},f.a.createElement(he,{key:t,value:e,label:t})):f.a.createElement(he,{key:t,value:e,label:t}))),f.a.createElement("div",{className:"button-container"},f.a.createElement("div",{tabIndex:0,role:"button",onClick:()=>{Object(Ie.b)("price-depth-charts","click-depth"),c(!0)},className:E()("button","button__depth-chart",{button__selected:l})},f.a.createElement(w.w,null)),f.a.createElement("div",{tabIndex:0,role:"button",onClick:()=>{Object(Ie.b)("price-depth-charts","click-candle"),c(!1)},className:E()("button","button__candle-chart",{button__selected:!l})},f.a.createElement(w.l,null))))}render(){const e=this.props,t=e.allChartData,r=e.currentPair,a=e.hasFetchedDataAtLeastOnce,o=e.price,i=e.selectedLocale,n=e.showDepthChart,s=this.state.isPriceChartReady,c=Object(ye.f)({allChartData:t,pairKey:r.key}),l=Object(ye.e)({allChartData:t,pairKey:r.key}),u=Object(ye.b)({allChartData:t,pairKey:r.key});return f.a.createElement("div",{className:"price-depth-charts"},this.renderHeader(),!s&&f.a.createElement("div",{className:"loading-spinner"},f.a.createElement(pe.a,null)),(!d()(u)||a)&&f.a.createElement(y.Fragment,null,n&&f.a.createElement("div",{className:"depth-chart-controls"},f.a.createElement("div",{className:E()("minus",{disabled:!this.canZoomOut()}),onClick:this.onClickZoomOut,role:"button",tabIndex:0},f.a.createElement(w.U,null)),f.a.createElement("div",{className:E()("plus",{disabled:!this.canZoomIn()}),onClick:this.onClickZoomIn,role:"button",tabIndex:0},f.a.createElement(w.db,null))),f.a.createElement("div",{className:E()("price-depth-content-container",{"price-depth-content-container__chart-ready":s})},n&&f.a.createElement("div",{className:"depth-chart-container"},f.a.createElement(ne,null)),f.a.createElement("div",{className:"price-chart-container"},f.a.createElement(V,{data:u,isDataLoading:l,price:o,onChartReady:this.onChartReady,onClickResolution:this.onClickResolution,pair:r,resolution:c,selectedLocale:i})))))}}Ne.propTypes={allChartData:g.a.object.isRequired,allMarkets:g.a.array.isRequired,currentPair:g.a.object.isRequired,hasFetchedDataAtLeastOnce:g.a.bool.isRequired,indexPriceNatural:g.a.object,marketStats:g.a.object,pageViewport:g.a.object.isRequired,perpetualMarkets:g.a.object.isRequired,price:g.a.number,selectedLocale:g.a.string.isRequired,setPriceChartResolution:g.a.func.isRequired,setShowDepthChart:g.a.func.isRequired,showDepthChart:g.a.bool.isRequired,stringGetter:g.a.func.isRequired,zoom:g.a.number.isRequired,zoomDepthChart:g.a.func.isRequired};var je=Object(U.k)(Object(O.c)(e=>({allChartData:Object(ye.g)(e),allMarkets:Object(fe.d)(e),currentPair:Object(B.e)(e),hasFetchedDataAtLeastOnce:Object(ye.i)(e),indexPriceNatural:Object(ke.d)(e),marketStats:Object(ge.h)(e),pageViewport:Object(X.d)(e),perpetualMarkets:Object(ve.g)(e),price:Object(H.h)(e),selectedLocale:Object(Ce.c)(e),showDepthChart:Object(Oe.g)(e),zoom:Object(H.k)(e)}),e=>({setPriceChartResolution:(t,r)=>e(Object(P.d)(t,r)),setShowDepthChart:t=>e(Object(_e.c)(t)),zoomDepthChart:t=>e(Object(be.a)(t))}))(Ne));r.d(t,"a",function(){return je})},2208:function(e,t,r){"use strict";var a=r(118),o=r.n(a),i=r(0),n=r.n(i),s=r(1),c=r.n(s),l=r(19),d=r.n(l),u=r(74),h=r(486),p=r.n(h),m=r(2126),b=r.n(m),_=r(489),y=r.n(_),f=r(113),v=r.n(f),g=r(234),O=r.n(g),k=r(6),C=r.n(k),R=r(37),E=r.n(R),w=r(17),S=r.n(w),I=r(67),P=r.n(I),T=r(135),N=r.n(T),j=r(39),D=r.n(j),A=r(90),x=r.n(A),M=r(52),L=r(60),F=r(9),V=r.n(F),q=r(230),W=r.n(q),U=r(384),z=r(86),B=r(132),H=r(44),K=r(249),G=r(343),Z=r(146),$=r(11),Y=r(5),J=r(27),X=r(61),Q=r(94),ee=r(57),te=r(46);r(2193);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(r,!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const re={updatedOrderIds:[],animatingRemovedOrders:[],hasCenteredOrderbook:!1},ae=400,oe=24;class ie extends i.Component{constructor(){super(),this.centerOrderbook=(()=>{if(this.containerRef.current&&this.bookRef.current){const t=this.bookRef.current.clientHeight;if(t>0){this.setState({hasCenteredOrderbook:!0});try{const r=t/2-this.containerRef.current.clientHeight/2+oe/2;this.containerRef.current.scrollTo({top:r})}catch(e){}}}}),this.renderOrder=((e,t,r)=>{const a=this.props,o=a.baseMarket,i=a.quoteMarket,s=a.setTradeData,c=a.setTradeType,l=a.selectedTradeType,u=a.userOrders,h=a.currentPair,p=h.tickDecimals,m=h.largeOrderSize,b=h.isInversePerpetual,_=this.state.updatedOrderIds,y=t.id,f=t.price,v=t.amount,g=t.removed;if(t.isBlank)return n.a.createElement("div",{className:"order order__blank",key:r+e});const O=new ee.a(v,b?i:o).getNaturalValue(),k=new Q.a(f,o,i).getNaturalValue().dp(X.n,r===J.e.BUY?V.a.ROUND_DOWN:V.a.ROUND_UP);let R;const w=E()(u,e=>e.id===y);if(w){const e=w.baseAmount,t=w.filledAmount;R=Object(te.a)(new V.a(e).minus(t),(b?i:o).currency.decimals)}const S=d()("order",{order__updated:C()(_,y),order__removed:g});return n.a.createElement("div",{className:S,role:"button",tabIndex:0,key:r+e,onClick:()=>{l!==$.v.CROSS&&c({tradeType:$.v.CROSS,isLimitPricePrefill:!0}),s({tradeOrderType:$.u.LIMIT,limitPrice:Q.a.fromNaturalValue(k,o,i)})}},n.a.createElement("div",{className:"bar",style:{width:`${Math.min($.m,Math.max(1,$.m*(O/m)))}px`}}),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col col__size"},n.a.createElement(W.a,{thousandSeparator:!0,displayType:"text",value:O.toFixed(b?X.p:X.n)})),n.a.createElement("div",{className:"col col__price"},k.toFixed(p)),n.a.createElement("div",{className:d()("col col__my-size",{col__grey:!R})},R?R.toFixed(X.n):"-")))}),this.state=_objectSpread({},re),this.containerRef=n.a.createRef(),this.bookRef=n.a.createRef()}componentDidMount(){this.centerOrderbook()}componentDidUpdate(e){const t=this.state,r=t.updatedOrderIds,a=t.hasCenteredOrderbook,o=this.props,i=o.baseMarket,n=o.quoteMarket,s=o.buyOrders,c=o.sellOrders,l=o.orderbookVersion,d=o.recentlyRemovedOrders,u=o.currentPair,h=o.pageViewport,p=e.baseMarket,m=e.quoteMarket,b=e.orderbookVersion,_=e.pageViewport,y=e.buyOrders;if((p.id!==i.id||m.id!==n.id||!a||x()(y)&&D()(s)||h.height!==_.height||h.width!==_.width)&&this.centerOrderbook(),b!==l){0===l&&this.setState(_objectSpread({},re));const e=N()([...s,...c],(e,{id:t,version:r})=>(0!==r&&r===l&&e.push(t),e),[]);if(d.length>0){const e=Date.now();this.setState(({animatingRemovedOrders:t})=>{const r=P()(t,({animatedAt:t})=>e-t<ae);return S()(d,t=>{t.pairId===u.orderMarket&&r.push(_objectSpread({},t,{animatedAt:e}))}),{animatingRemovedOrders:r}}),setTimeout(()=>{this.containerRef&&this.setState(({animatingRemovedOrders:e})=>({animatingRemovedOrders:P()(e,e=>!E()(d,t=>e.id===t.id))}))},ae)}e.length>0&&(this.setState({updatedOrderIds:[...r,...e]}),setTimeout(()=>{if(this.containerRef){const t=this.state.updatedOrderIds;this.setState({updatedOrderIds:P()(t,t=>!C()(e,t))})}},ae))}}renderOrders(e,t){if(!e)return null;const r=[];return O()(e,(e,a)=>r.push(this.renderOrder(a,e,t))),r}renderBook(){const e=this.props,t=e.baseMarket,r=e.buyOrders,a=e.currentPair.displayQuoteSymbol,o=e.quoteMarket,s=e.sellOrders,c=e.spread,l=e.stringGetter,d=this.state.animatingRemovedOrders;let u,h=[...r],m=[...s];if(S()(d,e=>{e.side===J.e.BUY?h.push(_objectSpread({},e,{removed:!0})):m.push(_objectSpread({},e,{removed:!0}))}),r.length!==h.length&&(h=v()(h,e=>parseFloat(e.price,10))),s.length!==m.length&&(m=v()(m,e=>parseFloat(e.price,10))),h.length>$.n&&(h=y()(h,Math.max(h.length-$.n,0),h.length)),m.length>$.n)m=y()(m,0,$.n);else{const e=$.n-m.length;b()(e,()=>{m.push({isBlank:!0})})}if(!x()(r)&&!x()(s)){const e=new Q.a(p()(r).price,t,o).getNaturalValue(),a=new Q.a(s[0].price,t,o).getNaturalValue();u=e.minus(a).div(e)}return n.a.createElement(i.Fragment,null,n.a.createElement("div",{className:"orderbook-header"},n.a.createElement("div",{className:"col col__size"},l({key:Y.a.ORDERBOOK_ORDER_SIZE})),n.a.createElement("div",{className:"col col__price"},`${l({key:Y.a.PRICE})} (${a})`),n.a.createElement("div",{className:"col col__my-size"},l({key:Y.a.ORDERBOOK_MY_ORDER_SIZE}))),n.a.createElement("div",{className:"book-scroll-container",ref:this.containerRef},n.a.createElement("div",{className:"book-scroll-dummy",ref:this.bookRef}),n.a.createElement("div",{className:"book"},n.a.createElement("div",{className:"orders sell"},this.renderOrders(m,J.e.SELL)),n.a.createElement("div",{className:"spread"},n.a.createElement("div",{className:"col col__size"},l({key:Y.a.ORDERBOOK_SPREAD})),n.a.createElement("div",{className:"col col__price"},c||"-"),n.a.createElement("div",{className:"col col__my-size"},u?`${u.times(100).abs().toFixed(X.k)}%`:"-")),n.a.createElement("div",{className:"orders buy"},this.renderOrders(h,J.e.BUY)))))}render(){const e=this.props,t=e.buyOrders,r=e.isOrderbookLoaded;return n.a.createElement("div",{className:"component-orderbook"},r&&!x()(t)?this.renderBook():n.a.createElement(U.a,{className:"loading"}))}}ie.propTypes={baseMarket:c.a.object.isRequired,buyOrders:c.a.array,currentPair:c.a.object.isRequired,isOrderbookLoaded:c.a.bool.isRequired,orderbookVersion:c.a.number,pageViewport:c.a.object.isRequired,quoteMarket:c.a.object.isRequired,recentlyRemovedOrders:c.a.array.isRequired,selectedTradeType:c.a.string.isRequired,sellOrders:c.a.array,setTradeData:c.a.func.isRequired,setTradeType:c.a.func.isRequired,spread:c.a.string,stringGetter:c.a.func.isRequired,userOrders:c.a.array.isRequired},ie.defaultProps={buyOrders:[],sellOrders:[]};var ne=Object(u.k)(Object(M.c)(e=>({baseMarket:Object(H.d)(e),buyOrders:Object(B.f)(e),currentPair:Object(H.e)(e),isOrderbookLoaded:Object(B.l)(e),orderbookVersion:Object(B.n)(e),pageViewport:Object(Z.d)(e),quoteMarket:Object(H.h)(e),recentlyRemovedOrders:Object(B.o)(e),selectedTradeType:Object(G.f)(e),sellOrders:Object(B.i)(e),spread:Object(B.j)(e),userOrders:Object(K.e)(e)}),e=>Object(L.b)({setTradeData:z.e,setTradeType:z.f},e))(ie)),se=r(34),ce=r(21);r(2194);const le=400;class de extends i.Component{constructor(e){super(e),this.renderTrade=(e=>{const t=this.props,r=t.baseMarket,a=t.quoteMarket,o=t.currentPair,i=o.tickDecimals,s=o.largeTradeSize,c=o.isInversePerpetual,l=this.state.updatedTradeIds,u=e.uuid,h=e.price,p=e.side,m=e.amount,b=e.createdAt;if(!p)return null;const _=Object(te.a)(m,(c?a:r).currency.decimals),y=new Q.a(h,r,a);return n.a.createElement("div",{key:u,className:d()("trade",{trade__buy:p===ce.k.BUY,trade__sell:p===ce.k.SELL,trade__updated:C()(l,u)})},n.a.createElement("div",{className:d()("bar",{bar__green:p===ce.k.BUY,bar__red:p===ce.k.SELL}),style:{width:`${Math.min($.m,Math.max(1,_/s*24))}px`}}),n.a.createElement("div",{className:"details"},n.a.createElement("div",{className:"detail size"},n.a.createElement(W.a,{thousandSeparator:!0,displayType:"text",value:_.toFixed(c?X.p:X.n)})),n.a.createElement("div",{className:d()("detail","price",{price__green:p===ce.k.BUY,price__red:p===ce.k.SELL})},y.getNaturalValue().toFixed(i)),n.a.createElement("div",{className:"detail time"},se.DateTime.fromISO(b).toFormat("HH:mm:ss"))))}),this.state={updatedTradeIds:[]}}componentDidUpdate(e){const t=e.liveTradesVersion,r=this.props,a=r.trades,o=r.liveTradesVersion,i=this.state.updatedTradeIds;if(0===o)i.length>0&&this.setState({updatedTradeIds:[]});else if(t!==o){const e=[];S()(a,({uuid:t,version:r})=>r===o&&(e.push(t),!0)),e.length>0&&(this.setState(t=>({updatedTradeIds:[...t.updatedTradeIds,...e]})),setTimeout(()=>{const t=this.state.updatedTradeIds;this.setState({updatedTradeIds:P()(t,t=>!C()(e,t))})},le))}}renderTrades(e){return e?e.map(this.renderTrade):null}render(){const e=this.props,t=e.currentPair.displayQuoteSymbol,r=e.stringGetter,a=e.trades,o=P()(a,e=>se.DateTime.fromISO(e.createdAt).diffNow("hours").hours>-24);return n.a.createElement("div",{className:"component-live-trades"},n.a.createElement("div",{className:"header"},n.a.createElement("div",{className:"title"},r({key:Y.a.ORDERBOOK_ORDER_SIZE})),n.a.createElement("div",{className:"title price"},`${r({key:Y.a.PRICE})} (${t})`),n.a.createElement("div",{className:"title time"},r({key:Y.a.TIME}))),D()(a)>0?n.a.createElement("div",{className:"trades"},this.renderTrades(o)):n.a.createElement(U.a,{className:"loading"}))}}de.propTypes={baseMarket:c.a.object.isRequired,currentPair:c.a.object.isRequired,liveTradesVersion:c.a.number,quoteMarket:c.a.object.isRequired,stringGetter:c.a.func.isRequired,trades:c.a.array};var ue=Object(u.k)(Object(M.c)(e=>({baseMarket:Object(H.d)(e),currentPair:Object(H.e)(e),liveTradesVersion:Object(K.h)(e),quoteMarket:Object(H.h)(e),trades:Object(K.g)(e)}))(de)),he=r(85);r(2195);const pe={ORDERS:"ORDERS",TRADES:"TRADES"};class me extends i.Component{constructor(e){super(e),this.state={selectedTab:pe.ORDERS}}renderTabs(){const e=this.props.stringGetter,t=this.state.selectedTab,r=d()("orderbook-trades-header__button",{"orderbook-trades-header__button--selected":t===pe.ORDERS}),a=d()("orderbook-trades-header__button",{"orderbook-trades-header__button--selected":t===pe.TRADES});return n.a.createElement("div",{className:"orderbook-trades-header"},n.a.createElement("div",{tabIndex:0,role:"button",className:r,onClick:()=>{Object(he.b)("orderbook-trades","click-orderbook"),this.setState({selectedTab:pe.ORDERS})}},e({key:Y.a.ORDERBOOK_SHORT})),n.a.createElement("div",{tabIndex:0,role:"button",className:a,onClick:()=>{Object(he.b)("orderbook-trades","click-trades"),this.setState({selectedTab:pe.TRADES})}},e({key:Y.a.TRADE_HISTORY_SHORT})))}render(){const e=this.props,t=e.lockedTab,r=e.stringGetter,a=this.state.selectedTab,o=t||a;return n.a.createElement("div",{className:"component-orderbook-trades"},t?n.a.createElement("div",{className:"orderbook-trades-header orderbook-trades-header__locked-tab"},t===pe.ORDERS?r({key:Y.a.ORDERBOOK}):r({key:Y.a.TRADE_HISTORY})):this.renderTabs(),n.a.createElement("div",{className:"content"},o===pe.TRADES?n.a.createElement(ue,null):n.a.createElement(ne,null)))}}me.propTypes={lockedTab:c.a.oneOf(o()(pe)),stringGetter:c.a.func.isRequired};var be=Object(u.k)(me);r.d(t,"d",function(){return be}),r.d(t,"c",function(){return pe}),r.d(t,"b",function(){return ne}),r.d(t,"a",function(){return ue})},2264:function(e,t,r){"use strict";r.r(t);var a=r(0),o=r.n(a),i=r(1),n=r.n(i),s=r(52),c=r(19),l=r.n(c),d=r(2208),u=r(2207),h=r(146),p=r(44),m=r(8),b=r(24),_=r(2475),y=r.n(_);const f=({currentPair:e,sidebar:t,infoSection:r,pageViewport:a})=>{const i=e.type,n=a.width,s=i===b.d.PERPETUAL;return o.a.createElement("div",{className:y.a.tradeLayout},t,o.a.createElement("div",{className:y.a.tradeContent},n>m.b&&o.a.createElement("div",{className:y.a.orderbookTradesContainer},o.a.createElement(d.d,{lockedTab:n>=m.a?d.c.ORDERS:null})),o.a.createElement("div",{className:y.a.chartInfoContainerColumn},o.a.createElement("div",{className:l()(y.a.chartContainer,{[y.a.perpetualChartContainer]:s})},n<=m.b&&o.a.createElement("div",{className:l()(y.a.orderbookTradesContainer,y.a.orderbookTradesWithChart,{[y.a.perpetualOrderbookTradesWithChart]:s})},o.a.createElement(d.d,null)),o.a.createElement(u.a,null)),o.a.createElement("div",{className:l()(y.a.infoContainer,{[y.a.perpetualInfoContainer]:s})},r)),n>=m.a&&o.a.createElement("div",{className:l()(y.a.orderbookTradesContainer,y.a.tradesOnlyContainer)},o.a.createElement(d.d,{lockedTab:d.c.TRADES}))))};f.propTypes={currentPair:n.a.object.isRequired,infoSection:n.a.oneOfType([n.a.arrayOf(n.a.node),n.a.node]).isRequired,pageViewport:n.a.object.isRequired,sidebar:n.a.oneOfType([n.a.arrayOf(n.a.node),n.a.node]).isRequired};var v=Object(s.c)(e=>({pageViewport:Object(h.d)(e),currentPair:Object(p.e)(e)}))(f);r.d(t,"default",function(){return v})},2475:function(e,t,r){e.exports={tradeLayout:"_1tnWa6F4KFfIXBw61tWpUI",tradeContent:"_2k5DpJx7MDorXkJq04T1e1",orderbookTradesContainer:"_18mY2M8wAtr9XM0x8OOLSP",orderbookTradesWithChart:"_3n5afcLK-LF0BFtE7RmzNi",perpetualOrderbookTradesWithChart:"_3JFS5fuikfVPcgzFTdCHR1",tradesOnlyContainer:"oB0HgP0WsMB415ziLvae-",chartInfoContainerColumn:"H89RUTeaGeLN-J7rqj7Lt",chartContainer:"_148ewnbluIYWMkx8DU6dHr",perpetualChartContainer:"ZuxBpWHUbEtSWbRKktfOf",infoContainer:"_377TB82pjkANyYiMiRG0U",perpetualInfoContainer:"IoD1nn8L6jP-d-ZMTAMgx"}}}]);
