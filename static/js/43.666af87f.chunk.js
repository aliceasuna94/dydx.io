(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{2122:function(e,t,a){"use strict";a.d(t,"b",function(){return d}),a.d(t,"c",function(){return u}),a.d(t,"d",function(){return p}),a.d(t,"a",function(){return g});var r=a(4),i=a.n(r),n=a(41),l=a(44),s=a(26),o=a(94),c=a(10);const d=e=>i()(e,"indexPrices.indexPrices"),u=e=>i()(e,"indexPrices.areIndexPricesLoaded"),p=Object(n.a)([l.e,d,s.d],(e,t,a)=>g({pair:e,allIndexPrices:t,allMarkets:a})),g=({pair:e,allIndexPrices:t,allMarkets:a})=>{const r=e.orderMarket,i=e.baseSymbol,n=e.quoteSymbol,l=Object(s.c)({allMarkets:a,symbol:i}),d=Object(s.c)({allMarkets:a,symbol:n}),u=t[r];if(u)return new o.a(u,l,d).getNaturalValue();const p=Object(s.c)({allMarkets:a,symbol:"DAI"});if(p&&p.oraclePrice){if("WETH-DAI"===r){if(t["WETH-USDC"])return new o.a(t["WETH-USDC"],l,Object(s.c)({allMarkets:a,symbol:"USDC"})).getNaturalValue().div(p.oraclePrice)}if("DAI-USDC"===r)return Object(c.a)(p.oraclePrice)}return null}},2190:function(e,t,a){e.exports={withReceipt:"_1XgtXOljETPmDV2RMD_zuD",container:"_1KSJY3ymebc_XX7esTa-Bv",row:"_3czUZmv5NRAhWXk7e4BeXt",label:"_3w9JeXQbjRWOihV4g0yLEx",value:"_1wdfbLcW3Y7NsjKZjiy9aD",regularFont:"_1rm9HlnGoqIMCwM7brFAWM",green:"_3R93GTFh8lN30elv0AYFzt",tag:"_14uhD-CacaKRqVnuzmNqNk"}},2191:function(e,t,a){e.exports={inputField:"_9jpup2dndkdIZHhKRKEgy",input:"WtsliSD4q1flPqAShEpRp",active:"_1Pne0H3t6xkuYMwEC-808a",centered:"_39ZsT6rbn0bgGV1IEh3Zbd",small:"AeUWp8wbdvK2oeHZURAZj",large:"JNAL3FY5IBs3E59ke9RFW",regularFont:"_3d1YYjk54xB1oLSG10EVSU",disabled:"VtnAMrgcEDQBv-MWgLQKI",tag:"Tmgg5zTEUcLdvJag3G71_",max:"_3GDGOwlV1g_T7_HOaGuLS2"}},2192:function(e,t,a){e.exports={message:"_1nDlju_OQsa7Fpu3i2cUQA",error:"_1lxrBdNKb7mbvm2e8yvi4D",title:"_2888coz9yxAoJQcmNng5rA",text:"_3j0TvNuUnrm1Q7lzyPr70J",info:"_1QXuXYTJVIjd_LypI75nfO",warning:"_3w6n7ECIC0jxPJd4vOPoaV"}},2209:function(e,t,a){"use strict";var r=a(118),i=a.n(r),n=a(0),l=a.n(n),s=a(1),o=a.n(s),c=a(19),d=a.n(c),u=a(2192),p=a.n(u);const g={ERROR:"ERROR",WARNING:"WARNING",INFO:"INFO"},P=({className:e,message:t,title:a,type:r=g.ERROR})=>l.a.createElement("div",{className:d()(p.a.message,{[p.a.error]:r===g.ERROR,[p.a.warning]:r===g.WARNING,[p.a.info]:r===g.INFO},e)},a&&l.a.createElement("div",{className:p.a.title},a),l.a.createElement("div",{className:p.a.text},t," "));P.propTypes={className:o.a.string,message:o.a.string.isRequired,title:o.a.string,type:o.a.oneOf(i()(g))};var O=P;a.d(t,"b",function(){return O}),a.d(t,"a",function(){return g})},2210:function(e,t,a){"use strict";var r=a(118),i=a.n(r),n=a(0),l=a.n(n),s=a(1),o=a.n(s),c=a(19),d=a.n(c),u=a(230),p=a.n(u),g=a(74),P=a(251),O=a(5),S=a(2191),E=a.n(S);const b={SMALL:"SMALL",LARGE:"LARGE"},T={PERCENT:"PERCENT",TEXT:"TEXT",NUMBER:"NUMBER"},f=({active:e,centered:t,disabled:a,max:r,onChange:i,onClickMax:n,placeholder:s,regularFont:o,size:c=b.LARGE,stringGetter:u,tag:g,type:S,value:f})=>{return l.a.createElement("div",{className:d()(E.a.inputField,{[E.a.active]:e,[E.a.centered]:t,[E.a.disabled]:a,[E.a.small]:c===b.SMALL,[E.a.large]:c===b.LARGE})},l.a.createElement(p.a,{className:d()(E.a.input,{[E.a.regularFont]:o}),onChange:e=>{const t=S===T.PERCENT?e.target.value.slice(0,-1):e.target.value;S!==T.TEXT&&S!==T.PERCENT&&Number.isNaN(Number(t))?f&&i(""):i(t)},placeholder:s,value:f,displayType:"input",allowNegative:!1,disabled:a,suffix:S===T.PERCENT?"%":"",isAllowed:e=>!r||e.floatValue<=r||!e.floatValue}),g&&l.a.createElement(P.a,{muted:!0,light:!0,className:E.a.tag},g),n&&l.a.createElement("div",{role:"button",tabIndex:0,className:E.a.max,onClick:n},u({key:O.a.MAX})))};f.propTypes={active:o.a.bool,centered:o.a.bool,disabled:o.a.bool,max:o.a.number,onChange:o.a.func.isRequired,onClickMax:o.a.func,placeholder:o.a.string,regularFont:o.a.bool,stringGetter:o.a.func,size:o.a.oneOf(i()(b)),tag:o.a.string,type:o.a.oneOf(i()(T)),value:o.a.string.isRequired},f.defaultProps={placeholder:"0.0000",type:T.NUMBER};var k=Object(g.k)(f);a.d(t,"c",function(){return k}),a.d(t,"a",function(){return b}),a.d(t,"b",function(){return T})},2211:function(e,t,a){"use strict";var r=a(0),i=a.n(r),n=a(1),l=a.n(n),s=a(19),o=a.n(s),c=a(251),d=a(2190),u=a.n(d);const p=({children:e,receiptConfig:t,receiptOnTop:a})=>i.a.createElement("div",{className:u.a.withReceipt},!a&&e,i.a.createElement("div",{className:u.a.container},t.map(({key:e,label:t,currency:a,value:r,regularFont:n,green:l})=>i.a.createElement("div",{key:e,className:u.a.row},i.a.createElement("div",{className:u.a.label},t),a&&i.a.createElement(c.a,{muted:!0,className:u.a.tag},a),i.a.createElement("span",{className:o()(u.a.value,{[u.a.regularFont]:n,[u.a.green]:l})},r)))),a&&e);p.propTypes={children:l.a.oneOfType([l.a.arrayOf(l.a.node),l.a.node]).isRequired,receiptConfig:l.a.arrayOf(l.a.shape({label:l.a.oneOfType([l.a.string,l.a.node]).isRequired,currency:l.a.string,value:l.a.oneOfType([l.a.string,l.a.node])})).isRequired,receiptOnTop:l.a.bool};var g=p;a.d(t,"a",function(){return g})},2471:function(e,t,a){e.exports={triggerModal:"_2ZYPPenJw86EMxvnAAxlwG",form:"_2S5R5fjGrOkun6GwYsV41W",footer:"_3NbuOV2CxgWP7BULxLiJNd",buttonContainer:"_2Zb9VAIUYkL_YDXoOd5FgY"}},2510:function(e,t,a){"use strict";a.r(t);var r=a(37),i=a.n(r),n=a(39),l=a.n(n),s=a(0),o=a.n(s),c=a(1),d=a.n(c),u=a(52),p=a(60),g=a(34),P=a(9),O=a(387),S=a(190),E=a(2127),b=a(2211),T=a(2210),f=a(2209),k=a(74),m=a(83),y=a(26),_=a(33),N=a(249),h=a(250),I=a(2122),R=a(44),L=a(11),M=a(21),A=a(65),D=a(61),C=a(5),v=a(94),j=a(170),F=a(103),G=a(2),x=a(10),w=a(2471),B=a.n(w);function asyncGeneratorStep(e,t,a,r,i,n,l){try{var s=e[n](l),o=s.value}catch(c){return void a(c)}s.done?t(o):Promise.resolve(o).then(r,i)}function _asyncToGenerator(e){return function(){var t=this,a=arguments;return new Promise(function(r,i){var n=e.apply(t,a);function _next(e){asyncGeneratorStep(n,r,i,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(n,r,i,_next,_throw,"throw",e)}_next(void 0)})}}function ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(a,!0).forEach(function(t){_defineProperty(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const q=new P.BigNumber(.05),V={stopPriceNatural:"",stopPriceMP:null,stopTrailingPercent:null},U={takeProfitPriceNatural:"",takeProfitPriceMP:null};class W extends s.Component{constructor(e){var t;super(e),t=this,this.onClickStop=(()=>{const e=this.state.userSelectedTakeProfit;this.setState({userSelectedStop:!0,userSelectedTakeProfit:!1},()=>{e&&this.resetInputs()})}),this.onClickTakeProfit=(()=>{const e=this.state.userSelectedStop;this.setState({userSelectedTrailingStop:!1,userSelectedStandardStop:!1,userSelectedStop:!1,userSelectedTakeProfit:!0},()=>{e&&this.resetInputs()})}),this.onClickTrailing=(()=>{this.state.userSelectedStandardStop&&this.resetInputs(),this.setState({userSelectedStandardStop:!1,userSelectedTrailingStop:!0})}),this.onClickStandardStop=(()=>{this.state.userSelectedTrailingStop&&this.resetInputs({fromTrailingStop:!0}),this.setState({userSelectedTrailingStop:!1,userSelectedStandardStop:!0})}),this.onChangeTrailingPercentInput=(e=>{const t=Object(x.a)(e),a=this.props,r=a.allIndexPrices,i=a.allMarkets,n=a.position,l=n.type,s=n.pair,o=n.liquidationPriceMP,c=n.baseMarket,d=n.quoteMarket,u=a.stringGetter,p=this.state.stopFields,g=Object(I.a)({pair:s,allMarkets:i,allIndexPrices:r}),P=l===A.b.ISOLATED_LONG?t.negated():t,O=g.times(P.shiftedBy(-2).plus(1)),S=v.a.fromNaturalValue(O,c,d),E=o.getMarketPriceWithSlippage(q,l===A.b.ISOLATED_LONG?G.f.BUY:G.f.SELL).getNaturalValue();let b;l===A.b.ISOLATED_LONG?(O.gt(g)||O.lt(E))&&(b=u({key:C.a.TRAILING_STOP_CLOSE_TO_LIQ,params:{PERCENT:E.div(g).minus(1).abs().times(100).toFixed(D.k)}})):l===A.b.ISOLATED_SHORT&&(O.lt(g)||O.gt(E))&&(b=u({key:C.a.TRAILING_STOP_CLOSE_TO_LIQ,params:{PERCENT:E.div(g).minus(1).abs().times(100).toFixed(D.k)}})),this.setState({error:b,stopFields:_objectSpread({},p,{stopTrailingPercent:t.isZero()?null:t,stopPriceMP:S})})}),this.onChangeStopPriceInput=(e=>{const t=this.props,a=t.allIndexPrices,r=t.allMarkets,i=t.position,n=i.type,l=i.pair,s=i.liquidationPriceMP,o=i.baseMarket,c=i.quoteMarket,d=t.stringGetter,u=this.state.stopFields,p=s.getMarketPriceWithSlippage(q,n===A.b.ISOLATED_LONG?G.f.BUY:G.f.SELL),g=Object(x.a)(e).dp(l.tickDecimals),P=v.a.fromNaturalValue(g,o,c),O=Object(I.a)({pair:l,allMarkets:r,allIndexPrices:a}),S=p.getNaturalValue(),E=S.toFixed(l.tickDecimals),b=O.toFixed(l.tickDecimals);let T;n===A.b.ISOLATED_LONG?(g.gt(O)||g.lt(S))&&(T=d({key:C.a.STOP_CLOSE_TO_LIQ,params:{STOP_LOWER_BOUND:E,STOP_UPPER_BOUND:b}})):n===A.b.ISOLATED_SHORT&&(g.lt(O)||g.gt(S))&&(T=d({key:C.a.STOP_CLOSE_TO_LIQ,params:{STOP_LOWER_BOUND:b,STOP_UPPER_BOUND:E}})),this.setState({error:T,stopFields:_objectSpread({},u,{stopPriceNatural:Object(x.a)(e).isZero()?e:g.toFixed(l.tickDecimals),stopPriceMP:P})})}),this.onChangeTakeProfitPriceInput=(e=>{const t=this.props,a=t.allIndexPrices,r=t.allMarkets,i=t.position,n=i.type,l=i.pair,s=i.baseMarket,o=i.quoteMarket,c=t.stringGetter,d=this.state.takeProfitFields,u=d.initialTakeProfitPriceMP;if(Object(x.a)(e).isZero()){let t;return u&&(t=c({key:n===A.b.ISOLATED_LONG?C.a.TAKE_PROFIT_MUST_ABOVE_INDEX:C.a.TAKE_PROFIT_MUST_BELOW_INDEX})),void this.setState({error:t,takeProfitFields:_objectSpread({},d,{},U,{takeProfitPriceNatural:e})})}const p=Object(x.a)(e).dp(l.tickDecimals),g=v.a.fromNaturalValue(p.dp(l.tickDecimals),s,o),P=Object(I.a)({pair:l,allMarkets:r,allIndexPrices:a});let O;n===A.b.ISOLATED_LONG?p.lte(P)&&(O=c({key:C.a.TAKE_PROFIT_MUST_ABOVE_INDEX})):n===A.b.ISOLATED_SHORT&&p.gte(P)&&(O=c({key:C.a.TAKE_PROFIT_MUST_BELOW_INDEX})),this.setState({error:O,takeProfitFields:_objectSpread({},d,{takeProfitPriceNatural:p.toFixed(l.tickDecimals),takeProfitPriceMP:g})})}),this.cancelStopOrTakeProfit=function(){var e=_asyncToGenerator(function*({isStopOrder:e}){const a=t.props,r=a.cancelOrder,i=a.closeSidebarModal,n=a.legacySigning,l=a.walletAddress,s=a.walletType,o=a.position.pair,c=a.stringGetter,d=t.getPositionTriggerOrder({isStopOrder:e});if(d)try{t.setState({isRemoveLoading:!0}),yield r({pair:o,walletAddress:l,walletType:s,legacySigning:n,orderHash:d.id,orderType:d.orderType}),i()}catch(u){let e;const a=Object(j.j)({error:u,walletAddress:l,walletType:s,location:"trigger-modal:cancel-order",notifyBugsnag:!e,stringGetter:c}).message;t.setState({isRemoveLoading:!1,error:e||a})}});return function(t){return e.apply(this,arguments)}}(),this.onClickAddEdit=_asyncToGenerator(function*(){const e=t.props,a=e.allPairOrderData,r=e.position,i=e.canBypass28DayRequirement,n=e.closeSidebarModal,l=e.legacySigning,s=e.placeOrder,o=e.stringGetter,c=e.walletAddress,d=e.walletType,u=t.state,p=u.userSelectedTakeProfit,O=u.userSelectedTrailingStop,S=u.stopFields,E=S.stopPriceMP,b=S.stopTrailingPercent,T=u.takeProfitFields.takeProfitPriceMP;try{t.setState({isAddEditLoading:!0});const e=r.type,n=r.sizeMV,u=r.pair,S=r.accountNumber,k=r.baseMarket,m=r.quoteMarket,y=(a[u.orderMarket]||{}).minimumTickSize,_=e===A.b.ISOLATED_LONG?G.f.SELL:G.f.BUY,N=t.getPositionTriggerOrder({isStopOrder:!p}),h=n.baseAmount.times(2),I=(p?T:E).getMarketPriceWithSlippage(L.e,_),R=Object(F.a)({allPairOrderData:a,pair:u,baseMarket:k,quoteMarket:m,amount:h.integerValue(P.BigNumber.ROUND_CEIL),side:_,priceMP:I.getMarketPriceRoundedToTickSize(y),triggerPriceMP:p?T:E,walletAddress:c,tradeOrderType:L.u.STOP,goodTilDate:new P.BigNumber(g.DateTime.local().plus({years:10}).toSeconds()).integerValue(P.BigNumber.ROUND_CEIL),timeInForceOption:M.p.FILL_OR_KILL,postOnly:!1,decreaseOnly:!0,accountNumber:Object(x.a)(S),isTrailingStopOrder:O,isTakeProfitOrder:p,isIsolatedOrder:!0}),D=R.order,v=R.fillOrKill,w=R.postOnly;yield s({allPairOrderData:a,pair:u,walletType:d,legacySigning:l,order:D,fillOrKill:v,postOnly:w,setExpirationOnFill:!i,isStopOrder:!O,isTrailingStopOrder:O,triggerPriceMP:p?T:E,trailingPercent:O&&(e===A.b.ISOLATED_LONG?b.negated():b),cancelOrderId:N&&N.id})}catch(f){let e;Object(j.e)(f)&&(e=o({key:C.a.CLOSE_COLLATERALIZATION}));const a=Object(j.j)({error:f,walletAddress:c,walletType:d,location:"edit-stop-modal",notifyBugsnag:!e,stringGetter:o}).message;return void t.setState({isAddEditLoading:!1,error:e||a})}n()});const a=e.allIndexPrices,r=e.allMarkets,i=e.position,n=i.type,l=i.pair,s=i.liquidationPriceMP,o=i.baseMarket,c=i.quoteMarket,d=e.preselectStop,u=e.preselectTakeProfit,p=e.stringGetter,O=Object(I.a)({pair:l,allMarkets:r,allIndexPrices:a});let S=!1,E=!1;const b=_objectSpread({stopDisabledErrorMessage:null,initialStopPriceMP:null,initialStopTrailingPercent:null},V),T=_objectSpread({initialTakeProfitPriceMP:null},U),f=this.getPositionTriggerOrder({isStopOrder:!1});if(f){const e=new v.a(new P.BigNumber(f.triggerPrice),o,c);T.takeProfitPriceMP=e,T.takeProfitPriceNatural=e.getNaturalValue().toFixed(l.tickDecimals),T.initialTakeProfitPriceMP=e}const k=this.getPositionTriggerOrder({isStopOrder:!0});if(k){const e=k.triggerPrice,t=k.trailingPercent,a=new v.a(new P.BigNumber(e),o,c);if(b.stopPriceMP=a,b.initialStopPriceMP=a,t){const e=Object(x.a)(t).abs();E=!0,b.stopTrailingPercent=e,b.initialStopTrailingPercent=e}else S=!0,b.stopPriceNatural=a.getNaturalValue().toFixed(l.tickDecimals)}const m=s.getMarketPriceWithSlippage(q,n===A.b.ISOLATED_LONG?G.f.BUY:G.f.SELL);n===A.b.ISOLATED_LONG?m.getNaturalValue().gt(O)&&(b.stopDisabledErrorMessage=p({key:C.a.LIQ_CLOSE_TO_ORACLE})):n===A.b.ISOLATED_SHORT&&m.getNaturalValue().lt(O)&&(b.stopDisabledErrorMessage=p({key:C.a.LIQ_CLOSE_TO_ORACLE})),this.state={error:null,isAddEditLoading:!1,isRemoveLoading:!1,userSelectedStop:d,userSelectedTakeProfit:u,userSelectedStandardStop:S,userSelectedTrailingStop:E,stopFields:b,takeProfitFields:T}}getPositionTriggerOrder({isStopOrder:e}){const t=this.props,a=t.position.accountNumber,r=t.allOrders,n=Object(N.b)(r,a);return l()(n)>0?i()(n,t=>t.orderType===(e?M.n.CANONICAL_ISOLATED_STOP_LIMIT:M.n.CANONICAL_ISOLATED_TAKE_PROFIT)):null}resetInputs({fromTrailingStop:e}={}){const t=this.state,a=t.stopFields,r=t.takeProfitFields,i=a.initialStopPriceMP,n=a.initialStopTrailingPercent,l=r.initialTakeProfitPriceMP,s=this.props.position.pair,o=_objectSpread({},r,{},U);l&&(o.takeProfitPriceMP=l,o.takeProfitPriceNatural=l.getNaturalValue().toFixed(s.tickDecimals));const c=_objectSpread({},a,{},V);e&&n||i&&(c.stopPriceMP=i,c.stopPriceNatural=i.getNaturalValue().toFixed(s.tickDecimals),!e&&n&&(c.stopTrailingPercent=n)),this.setState({error:null,stopFields:c,takeProfitFields:o})}getReceiptConfig(){const e=this.props,t=e.allIndexPrices,a=e.allMarkets,r=e.position,i=r.liquidationPriceMP,n=r.openPriceMP,l=r.pair,s=r.quoteMarket,o=e.stringGetter,c=this.state,d=c.userSelectedStop,u=c.userSelectedTrailingStop,p=c.stopFields,g=p.stopPriceMP,P=p.stopTrailingPercent,O=l.tickDecimals,S=l.baseSymbol,E=i.getNaturalValue().toFixed(O),b=Object(I.a)({pair:l,allMarkets:a,allIndexPrices:t}),T=[{key:C.a.LIQUIDATION,label:o({key:C.a.LIQUIDATION}),currency:S,value:`${E} ${s.symbol}`},{key:C.a.INDEX_PRICE_ABBREVIATED,label:o({key:C.a.INDEX_PRICE_ABBREVIATED}),currency:S,value:`${b.toFixed(O)} ${s.symbol}`},{key:C.a.OPEN_PRICE_ABBREVIATED,label:o({key:C.a.OPEN_PRICE_ABBREVIATED}),currency:S,value:`${n.getNaturalValue().toFixed(O)} ${s.symbol}`}];return d&&u?[{key:C.a.TRIGGER_PRICE,label:o({key:C.a.TRIGGER_PRICE}),currency:S,value:g&&P?`${g.getNaturalValue().toFixed(O)} ${s.symbol}`:"-"},...T]:T}renderStopLoss(){const e=this.props,t=e.isPairOrderDataLoaded,a=e.position.quoteMarket,r=e.stringGetter,i=this.state,n=i.isAddEditLoading,l=i.userSelectedStandardStop,s=i.userSelectedTrailingStop,c=i.stopFields,d=c.stopDisabledErrorMessage,u=c.stopPriceNatural,p=c.stopTrailingPercent;return o.a.createElement(o.a.Fragment,null,o.a.createElement(E.b,{label:r({key:C.a.BEHAVIOR})},o.a.createElement("div",{className:B.a.buttonContainer},o.a.createElement(S.f,{fullWidth:!0,active:l,inactive:s&&!l,onClick:this.onClickStandardStop},r({key:C.a.STANDARD})),o.a.createElement(S.f,{fullWidth:!0,active:s,inactive:l&&!s,onClick:this.onClickTrailing},r({key:C.a.TRAILING_STOP_ABBREVIATED})))),l&&o.a.createElement(E.b,{label:r({key:C.a.PRICE})},o.a.createElement(b.a,{receiptConfig:this.getReceiptConfig()},o.a.createElement(T.c,{disabled:n||d||!t,market:a,value:u,onChange:this.onChangeStopPriceInput}))),s&&o.a.createElement(E.b,{label:r({key:C.a.TRAILING_PERCENT})},o.a.createElement(b.a,{receiptConfig:this.getReceiptConfig()},o.a.createElement(T.c,{type:T.b.PERCENT,disabled:n||d||!t,value:p?p.toFixed(D.k):"",placeholder:"0.00%",onChange:this.onChangeTrailingPercentInput}))))}renderTakeProfit(){const e=this.props,t=e.isPairOrderDataLoaded,a=e.position.quoteMarket,r=e.stringGetter,i=this.state,n=i.isAddEditLoading,l=i.takeProfitFields.takeProfitPriceNatural;return o.a.createElement(E.b,{label:r({key:C.a.PRICE})},o.a.createElement(b.a,{receiptConfig:this.getReceiptConfig()},o.a.createElement(T.c,{disabled:n||!t,onChange:this.onChangeTakeProfitPriceInput,tag:a.symbol,value:l})))}renderError(){const e=this.state,t=e.error,a=e.userSelectedStop,r=e.stopFields.stopDisabledErrorMessage,i=a&&r||t;return i?o.a.createElement(f.b,{type:f.a.ERROR,message:i}):null}renderCtaButtons(){const e=this.props.stringGetter,t=this.state,a=t.error,r=t.isAddEditLoading,i=t.isRemoveLoading,n=t.userSelectedStop,l=t.userSelectedTakeProfit,s=t.userSelectedTrailingStop,c=t.stopFields,d=c.stopDisabledErrorMessage,u=c.stopPriceMP,p=c.stopTrailingPercent,g=c.initialStopTrailingPercent,P=c.initialStopPriceMP,O=t.takeProfitFields,E=O.takeProfitPriceMP,b=O.initialTakeProfitPriceMP;if(!n&&!l)return null;if(n){return!!P?o.a.createElement("div",{className:B.a.buttonContainer},o.a.createElement(S.f,{fullWidth:!0,isLoading:i,onClick:()=>this.cancelStopOrTakeProfit({isStopOrder:!0})},e({key:C.a.REMOVE})),o.a.createElement(S.f,{fullWidth:!0,purple:!0,isLoading:r,disabled:!!a||s&&!p||(s?p&&p.eq(g):u&&P.baseAmount.eq(u.baseAmount)),onClick:this.onClickAddEdit},e({key:C.a.EDIT_STOP}))):o.a.createElement(S.f,{fullWidth:!0,purple:!0,isLoading:r,disabled:!!a||!!d||!u,onClick:this.onClickAddEdit},e({key:C.a.ADD_STOP}))}return!!b?o.a.createElement("div",{className:B.a.buttonContainer},o.a.createElement(S.f,{fullWidth:!0,isLoading:i,onClick:()=>this.cancelStopOrTakeProfit({isStopOrder:!1})},e({key:C.a.REMOVE})),o.a.createElement(S.f,{fullWidth:!0,purple:!0,isLoading:r,disabled:!!a||E&&b.baseAmount.eq(E.baseAmount),onClick:this.onClickAddEdit},e({key:C.a.EDIT_TRIGGER}))):o.a.createElement(S.f,{fullWidth:!0,purple:!0,isLoading:r,disabled:!!a||!E,onClick:this.onClickAddEdit},e({key:C.a.ADD_TRIGGER}))}render(){const e=this.props,t=e.closeSidebarModal,a=e.stringGetter,r=this.state,i=r.userSelectedTakeProfit,n=r.userSelectedStop;return o.a.createElement("div",{className:B.a.triggerModal},o.a.createElement(O.a,{noBorder:!0,title:a({key:C.a.TRIGGER_MODAL_TITLE}),closeModal:t}),o.a.createElement("div",{className:B.a.form},o.a.createElement(E.b,{label:a({key:C.a.TYPE})},o.a.createElement("div",{className:B.a.buttonContainer},o.a.createElement(S.f,{fullWidth:!0,active:n,inactive:i&&!n,onClick:this.onClickStop},a({key:C.a.STOP_LOSS})),o.a.createElement(S.f,{fullWidth:!0,active:i,inactive:n&&!i,onClick:this.onClickTakeProfit},a({key:C.a.TAKE_PROFIT})))),n&&this.renderStopLoss(),i&&this.renderTakeProfit(),this.renderError(),o.a.createElement("div",{className:B.a.footer},this.renderCtaButtons())))}}W.propTypes={allMarkets:d.a.array.isRequired,allIndexPrices:d.a.object.isRequired,allOrders:d.a.array.isRequired,allPairOrderData:d.a.object.isRequired,canBypass28DayRequirement:d.a.bool.isRequired,cancelOrder:d.a.func.isRequired,closeSidebarModal:d.a.func.isRequired,isPairOrderDataLoaded:d.a.bool.isRequired,legacySigning:d.a.bool,placeOrder:d.a.func.isRequired,position:d.a.object.isRequired,preselectStop:d.a.bool,preselectTakeProfit:d.a.bool,stringGetter:d.a.func.isRequired,walletAddress:d.a.string,walletType:d.a.string};var K=Object(k.k)(Object(u.c)(e=>({allIndexPrices:Object(I.b)(e),allMarkets:Object(y.d)(e),allOrders:Object(N.k)(e),allPairOrderData:Object(R.c)(e),canBypass28DayRequirement:Object(h.a)(e),isPairOrderDataLoaded:Object(R.f)(e),legacySigning:Object(_.i)(e),walletAddress:Object(_.m)(e),walletType:Object(_.q)(e)}),e=>Object(p.b)({placeOrder:m.c,cancelOrder:m.a},e))(W));a.d(t,"default",function(){return K})}}]);