(window.webpackJsonp=window.webpackJsonp||[]).push([[34,2,12,15],{2122:function(e,t,a){"use strict";a.d(t,"b",function(){return d}),a.d(t,"c",function(){return u}),a.d(t,"d",function(){return p}),a.d(t,"a",function(){return m});var r=a(4),n=a.n(r),i=a(41),o=a(44),s=a(26),l=a(94),c=a(10);const d=e=>n()(e,"indexPrices.indexPrices"),u=e=>n()(e,"indexPrices.areIndexPricesLoaded"),p=Object(i.a)([o.e,d,s.d],(e,t,a)=>m({pair:e,allIndexPrices:t,allMarkets:a})),m=({pair:e,allIndexPrices:t,allMarkets:a})=>{const r=e.orderMarket,n=e.baseSymbol,i=e.quoteSymbol,o=Object(s.c)({allMarkets:a,symbol:n}),d=Object(s.c)({allMarkets:a,symbol:i}),u=t[r];if(u)return new l.a(u,o,d).getNaturalValue();const p=Object(s.c)({allMarkets:a,symbol:"DAI"});if(p&&p.oraclePrice){if("WETH-DAI"===r){if(t["WETH-USDC"])return new l.a(t["WETH-USDC"],o,Object(s.c)({allMarkets:a,symbol:"USDC"})).getNaturalValue().div(p.oraclePrice)}if("DAI-USDC"===r)return Object(c.a)(p.oraclePrice)}return null}},2125:function(e,t,a){e.exports={loadingDots:"_3jMPchhhIOb4dZOy6GLdPk",dot:"_2f58i9-DZX4n6MkcSDUG0","dot-keyframes":"j0RjL1ZlcGTCa4Xjy9tyY",newLoadingDots:"oppLNwiDeV9-rzLw4k37w","dot-animation":"_15KINsZKdzjYj3pK_pSvRH",compact:"_1WWoQQoq0KrhJIG9Mb9dfZ"}},2130:function(e,t,a){"use strict";var r=a(0),n=a.n(r),i=a(1),o=a.n(i),s=a(19),l=a.n(s),c=a(2139),d=a.n(c),u=a(384),p=a(2128),m=a(620);a(2159);const b=({className:e,children:t})=>n.a.createElement("div",{className:l()("new-table",e)},t);b.propTypes={className:o.a.string,children:o.a.oneOfType([o.a.arrayOf(o.a.node),o.a.node]).isRequired};const h=({children:e,className:t,expandable:a,expandableContent:r,highlighted:i,hoverContent:o,isExpanded:s,isGreyedOut:c,isLoading:p,leftBorderGreen:b,leftBorderRed:h,noLoadingCell:y,onClick:O,useLegacyStyles:f=!1,useModuleStyles:E=!1})=>n.a.createElement("div",{tabIndex:0,role:"button",className:l()("row-container",t,{"row-container__highlight":i,"row-container__hover":a,"row-container__expanded":s,"row-container__loading":p,"row-container__greyed-out":c,"row-container__left-border-red":h,"row-container__left-border-green":b,"row-container__module-styles":E,"row-container__legacy-styles":f}),onClick:O},n.a.createElement("div",{className:l()("row",{"row__module-styles":E})},n.a.createElement("div",{className:l()("row-content",{"row-content__loading":p,"row-content__greyed-out":c})},e),!y&&n.a.createElement(g,{className:"loading-cell"},p&&n.a.createElement(u.a,null))),a&&n.a.createElement(d.a,{isOpened:s},n.a.createElement("div",{className:"expandable-row"},r)),!p&&(o||a)&&n.a.createElement("div",{className:l()("hover-content-container",{"hover-content-container__with-gradient":!!o})},n.a.createElement("div",{className:"hover-content"},o,a&&n.a.createElement("div",{className:"expandable-row-icon-container"},n.a.createElement("div",{className:l()("expandable-row-icon",{"expandable-row-icon__expanded":s})},n.a.createElement(m.a,null)))))," ");h.propTypes={children:o.a.oneOfType([o.a.arrayOf(o.a.node),o.a.node]).isRequired,className:o.a.string,expandable:o.a.bool,expandableContent:o.a.oneOfType([o.a.arrayOf(o.a.node),o.a.node]),highlighted:o.a.bool,hoverContent:o.a.oneOfType([o.a.arrayOf(o.a.node),o.a.node]),isExpanded:o.a.bool,isGreyedOut:o.a.bool,isLoading:o.a.bool,leftBorderGreen:o.a.bool,leftBorderRed:o.a.bool,noLoadingCell:o.a.bool,onClick:o.a.func,useLegacyStyles:o.a.bool,useModuleStyles:o.a.bool};const g=({children:e,className:t,marketSymbol:a,isTitle:r,label:i,green:o,red:s,orange:c,grey:d,stacked:u,uppercase:m,width:b})=>n.a.createElement("div",{className:l()("cell",t,{cell__title:r,cell__stacked:u,"cell__with-label":i,cell__uppercase:m,red:s,green:o,orange:c,grey:d}),style:{flexBasis:b}},i&&n.a.createElement("div",{className:"label"},i),a&&n.a.createElement("div",{className:"currency-icon-container"},n.a.createElement("div",{className:`currency-icon-${a.toLowerCase()}`},n.a.createElement(p.a,{symbol:a}))),e);g.propTypes={children:o.a.oneOfType([o.a.arrayOf(o.a.node),o.a.node]),className:o.a.string,marketSymbol:o.a.string,isTitle:o.a.bool,label:o.a.oneOfType([o.a.string,o.a.node]),green:o.a.bool,red:o.a.bool,orange:o.a.bool,grey:o.a.bool,stacked:o.a.bool,uppercase:o.a.bool,width:o.a.string},a.d(t,"c",function(){return b}),a.d(t,"b",function(){return h}),a.d(t,"a",function(){return g})},2132:function(e,t,a){"use strict";var r=a(2126),n=a.n(r),i=a(0),o=a.n(i),s=a(1),l=a.n(s),c=a(2125),d=a.n(c);const u=({size:e=2})=>o.a.createElement("div",{className:d.a.loadingDots,style:{width:3*e+8}},n()(3,t=>o.a.createElement("div",{key:t,className:d.a.dot,style:{height:e,width:e}})));u.propTypes={size:l.a.number};var p=u,m=a(19),b=a.n(m);const h=({compact:e})=>o.a.createElement("div",{className:b()(d.a.newLoadingDots,{[d.a.compact]:e})});h.propTypes={compact:l.a.bool};var g=h;a.d(t,"b",function(){return p}),a.d(t,"a",function(){return g})},2134:function(e,t,a){e.exports={emptyState:"_1zSGkn9574CJw_zgFytURn",loading:"_1SVbZA8N8vyAQWeViUq5VG",content:"_1u3pYOs23j8ttVBpg9qBdW",contentPerpetual:"_3yWRuRvOs55FQVlNcjIpe1"}},2135:function(e,t,a){"use strict";var r=a(37),n=a.n(r),i=a(55),o=a.n(i),s=a(4),l=a.n(s),c=a(0),d=a.n(c),u=a(1),p=a.n(u),m=a(19),b=a.n(m),h=a(31);a(2185);class g extends c.Component{constructor(e){super(e),this.onClickOutside=(e=>{this.dropdownMenuRef.current&&this.dropdownMenuRef.current.contains(e.target)||this.closeMenu()}),this.onChangeSelection=(e=>{(0,this.props.onChangeSelection)(e)}),this.closeMenu=(()=>this.setState({isMenuOpen:!1})),this.toggleMenuOpen=(()=>this.setState(({isMenuOpen:e})=>({isMenuOpen:!e}))),this.state={isMenuOpen:!1},this.dropdownMenuRef=Object(c.createRef)()}componentWillMount(){window.addEventListener("click",this.onClickOutside)}componentWillUnmount(){window.removeEventListener("click",this.onClickOutside)}render(){const e=this.state.isMenuOpen,t=this.props,a=t.className,r=t.menuItems,i=t.selectedItemKey,s=t.disabled,c=t.compact,u=t.hoverable,p=t.black;return d.a.createElement("div",{ref:this.dropdownMenuRef,role:"button",tabIndex:0,onClick:this.toggleMenuOpen,className:b()("component-dropdown-menu",{"component-dropdown-menu__open":e,"component-dropdown-menu__disabled":s,"component-dropdown-menu__compact":c,"component-dropdown-menu__hoverable":u,"component-dropdown-menu__black":p},a)},l()(n()(r,({key:e})=>e===i),"label"),!s&&d.a.createElement(h.m,null),d.a.createElement("div",{className:b()("menu",{menu__open:e})},o()(r,({key:e,label:t,disabled:a})=>d.a.createElement("div",{key:e,role:"button",tabIndex:0,className:b()("menu-item",{"menu-item__disabled":a,menu__black:p}),onClick:()=>this.onChangeSelection(e)},t,e===i&&d.a.createElement("div",{className:"selected-check"},d.a.createElement(h.p,null))))))}}g.propTypes={className:p.a.string,selectedItemKey:p.a.string.isRequired,menuItems:p.a.arrayOf(p.a.shape({key:p.a.string.isRequired,label:p.a.oneOfType([p.a.string,p.a.node]).isRequired,disabled:p.a.bool})).isRequired,onChangeSelection:p.a.func.isRequired,disabled:p.a.bool,compact:p.a.bool,hoverable:p.a.bool,black:p.a.bool};var y=a(251),O=a(2186),f=a.n(O);function _slicedToArray(e,t){return function _arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function _iterableToArrayLimit(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var a=[],r=!0,n=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(l){n=!0,i=l}finally{try{r||null==s.return||s.return()}finally{if(n)throw i}}return a}(e,t)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}const E=({className:e,dropdownMenuItems:t,onChangeSelection:a,selectedItemKey:r})=>{const i=Object(c.useRef)(null),s=_slicedToArray(Object(c.useState)(!1),2),l=s[0],u=s[1];Object(c.useEffect)(()=>{const e=e=>{i.current&&i.current.contains(e.target)||u(!1)};return window.addEventListener("click",e),()=>window.removeEventListener("click",e)},[]);const p=n()(t,({key:e})=>e===r);return d.a.createElement("div",{ref:i,className:b()(f.a.dropdownMenuWrapper,{[f.a.menuOpen]:l})},d.a.createElement("button",{type:"button",onClick:()=>u(!l),className:b()(f.a.dropdownMenuButton,{[f.a.menuOpen]:l},e)},p&&d.a.createElement("div",{className:f.a.selectedItem},p.icon&&d.a.createElement("div",{className:b()(f.a.menuItemIcon,{[f.a.iconUsesFill]:p.iconUsesFill,[f.a.iconUsesStroke]:p.iconUsesStroke})},p.icon),p.label,p.tag&&d.a.createElement(y.a,{light:!0,marginLeft:!0},p.tag)),d.a.createElement(h.m,null)),d.a.createElement("div",{className:b()(f.a.menu,{[f.a.menuOpen]:l})},o()(t,({key:e,label:t,icon:r,iconUsesFill:n,iconUsesStroke:i,tag:o,menuOnlyDetail:s})=>d.a.createElement("div",{key:e,role:"button",tabIndex:0,className:f.a.menuItem,onClick:()=>{a(e),u(!1)}},r&&d.a.createElement("div",{className:b()(f.a.menuItemIcon,{[f.a.iconUsesFill]:n,[f.a.iconUsesStroke]:i})},r),t,o&&d.a.createElement(y.a,{marginLeft:!0,className:f.a.menuItemTag},o),s&&d.a.createElement("div",{className:f.a.menuOnlyDetail},s)))))};E.propTypes={className:p.a.string,dropdownMenuItems:p.a.arrayOf(p.a.shape({key:p.a.string.isRequired,label:p.a.oneOfType([p.a.string,p.a.node]).isRequired,icon:p.a.node,iconUsesStroke:p.a.bool,iconUsesFill:p.a.bool,disabled:p.a.bool,tag:p.a.string})).isRequired,onChangeSelection:p.a.func.isRequired,selectedItemKey:p.a.string.isRequired};var v=E;a.d(t,"b",function(){return g}),a.d(t,"a",function(){return v})},2136:function(e,t,a){"use strict";var r=a(55),n=a.n(r),i=a(0),o=a.n(i),s=a(1),l=a.n(s),c=a(19),d=a.n(c),u=a(74),p=a(2138),m=a(2123),b=a(2130),h=a(2160),g=a.n(h);const y=({headerConfig:e,useModuleStyles:t,stringGetter:a})=>o.a.createElement(b.b,{useModuleStyles:t},n()(e,({titleKey:e,titleBottomKey:t,width:r,tooltip:n,tooltipBottom:i,tag:s})=>{const l=a({key:e}),c=t?a({key:t}):void 0;if(!c&&!n)return o.a.createElement(b.a,{isTitle:!0,key:l,width:r},s?o.a.createElement(p.a,{tag:s},l):l);const u=n?o.a.createElement(m.a,{className:d()({[g.a.doubleTooltip]:!!c}),top:n.top||8,left:n.left||-36,tooltip:n.name,stringParams:n.stringParams},l):o.a.createElement("div",{className:g.a.doubleTooltip},l);let h;c&&(h=i?o.a.createElement(m.a,{className:g.a.doubleTooltip,top:i.top||8,left:i.left||-36,tooltip:i.name,stringParams:n.stringParams},c):o.a.createElement("div",{className:g.a.doubleTooltip},c));const y=o.a.createElement("div",{className:d()(g.a.title,{[g.a.doubleTitle]:!!c})},u,c?o.a.createElement("span",null,"/"):null,h);return o.a.createElement(b.a,{isTitle:!0,key:l,width:r},s?o.a.createElement(p.a,{tag:s},y):y)}));y.propTypes={headerConfig:l.a.arrayOf(l.a.shape({titleKey:l.a.string.isRequired,titleBottomKey:l.a.string,width:l.a.string.isRequired,tag:l.a.oneOfType([l.a.string,l.a.node]),tooltip:l.a.shape({top:l.a.number,left:l.a.number,name:l.a.string.isRequired,stringParams:l.a.object}),tooltipBottom:l.a.shape({top:l.a.number,left:l.a.number,name:l.a.string.isRequired,stringParams:l.a.object})})).isRequired,stringGetter:l.a.func,useModuleStyles:l.a.bool};var O=Object(u.k)(y);a.d(t,"a",function(){return O})},2138:function(e,t,a){"use strict";var r=a(0),n=a.n(r),i=a(1),o=a.n(i),s=a(19),l=a.n(s),c=a(2145),d=a.n(c);const u=({tag:e,children:t,extraSpacing:a})=>n.a.createElement(r.Fragment,null,t,e&&n.a.createElement("div",{className:l()(d.a.tag,{[d.a.extraSpacing]:a})},e));u.propTypes={children:o.a.oneOfType([o.a.arrayOf(o.a.node),o.a.node]).isRequired,extraSpacing:o.a.bool,tag:o.a.oneOfType([o.a.string,o.a.node])};var p=u;a.d(t,"a",function(){return p})},2143:function(e,t,a){"use strict";var r=a(231),n=a.n(r),i=a(0),o=a.n(i),s=a(1),l=a.n(s),c=a(19),d=a.n(c),u=a(2149),p=a.n(u);const m=({className:e,label:t,labelClassName:a,checked:r,onClick:i,topAlignedCheckbox:s})=>o.a.createElement("div",{className:d()(p.a.checkboxWrapper,e)},o.a.createElement("div",{className:p.a.checkbox,role:"button",tabIndex:0,onClick:i},o.a.createElement("input",{type:"checkbox",checked:r,onChange:n.a}),o.a.createElement("span",{className:d()(p.a.custom,{[p.a.topAligned]:s})}),t&&o.a.createElement("div",{className:d()(p.a.label,a)},t)));m.propTypes={checked:l.a.bool,className:l.a.string,label:l.a.oneOfType([l.a.arrayOf(l.a.node),l.a.node,l.a.string]),labelClassName:l.a.string,onClick:l.a.func.isRequired,topAlignedCheckbox:l.a.bool};var b=m;a.d(t,"a",function(){return b})},2145:function(e,t,a){e.exports={tag:"_2ukp2icrWLdgvD3odSm2Hm",extraSpacing:"_18tcZvIMJWLJT8DSy4PNW3"}},2146:function(e,t,a){},2149:function(e,t,a){e.exports={checkboxWrapper:"vNRaxmHo46U6RappONKFH",checkbox:"_19RMSXPBlUqYk12l-xPHYr",custom:"_2kl9Enu9XNPp7I5yxjjUlj",topAligned:"_3mLmd2r1moWl1-lllnQKfj",label:"_2h1JC1J1RFcB8X-C9rrGQk"}},2150:function(e,t,a){e.exports={animatedToggle:"_2uX6PC8cA8YPCtdcDGUDVn",toggled:"_3NWbtL9arP0Eum-jEVhUtn",grayscale:"_4TrMjUnhys9QgRpb_qejA",label:"_3pd4To_unYOQ9_wOU2cXJO",compact:"_2cnM-EVr5tBuRyrxovo9uS"}},2152:function(e,t,a){"use strict";var r=a(0),n=a.n(r),i=a(1),o=a.n(i),s=a(52),l=a(60),c=a(19),d=a.n(c),u=a(74),p=a(384),m=a(190),b=a(45),h=a(33),g=a(44),y=a(296),O=a(102),f=a(24),E=a(5),v=a(38);a(2146);const _=({areAccountsLoaded:e,arePerpBalancesLoaded:t,arePerpMarketsLoaded:a,currentPair:{type:r},isBorrowPage:i,isPerpPage:o,isTradePage:s,isWalletConnecting:l,isWalletIncorrectNetwork:c,isWalletInvalid:u,isWalletReady:b,openModal:h,stringGetter:g,withBorder:y})=>{const O=d()("component-sidebar-wallet-ctas",{"component-sidebar-wallet-ctas__with-border":y,"component-sidebar-wallet-ctas__trade":s,"component-sidebar-wallet-ctas__perp":o,"component-sidebar-wallet-ctas__spot":!i&&r===f.d.SPOT});return c?n.a.createElement("div",{className:O},n.a.createElement("div",{className:"cta-content"},g({key:E.a.CHANGE_NETWORK_REQUEST}))):!l&&u?n.a.createElement("div",{className:O},n.a.createElement("div",{className:"cta-content"},g({key:E.a.GET_STARTED_DESCRIPTION})),n.a.createElement("div",null,n.a.createElement(m.g,{blue:!0,className:"connect-wallet-button",onClick:()=>h({type:v.a.CONNECT_WALLET})},g({key:E.a.CONNECT_WALLET})))):!l&&b&&(o?a&&t:e)?null:n.a.createElement("div",{className:O},n.a.createElement("div",{className:"cta-content"},n.a.createElement(p.a,null)))};_.defaultProps={withBorder:!0},_.propTypes={areAccountsLoaded:o.a.bool.isRequired,arePerpBalancesLoaded:o.a.bool.isRequired,arePerpMarketsLoaded:o.a.bool.isRequired,currentPair:o.a.object.isRequired,isBorrowPage:o.a.bool,isPerpPage:o.a.bool,isTradePage:o.a.bool,isWalletConnecting:o.a.bool.isRequired,isWalletIncorrectNetwork:o.a.bool.isRequired,isWalletInvalid:o.a.bool.isRequired,isWalletReady:o.a.bool.isRequired,openModal:o.a.func.isRequired,stringGetter:o.a.func.isRequired,withBorder:o.a.bool};var k=Object(u.k)(Object(s.c)(e=>({areAccountsLoaded:Object(O.i)(e),arePerpBalancesLoaded:Object(y.c)(e),arePerpMarketsLoaded:Object(y.d)(e),currentPair:Object(g.e)(e),isWalletConnecting:Object(h.e)(e),isWalletIncorrectNetwork:Object(h.f)(e),isWalletInvalid:Object(h.g)(e),isWalletReady:Object(h.h)(e)}),e=>Object(l.b)({openModal:b.c},e))(_));a.d(t,"a",function(){return k})},2153:function(e,t,a){"use strict";var r=a(0),n=a.n(r),i=a(1),o=a.n(i),s=a(19),l=a.n(s),c=a(2150),d=a.n(c);const u=({className:e,compact:t,grayscale:a,isToggledRight:r,leftLabel:i,onClickLeft:o,onClickRight:s,rightLabel:c})=>n.a.createElement("div",{className:l()(d.a.animatedToggle,{[d.a.toggled]:r,[d.a.grayscale]:a,[d.a.compact]:t},e)},n.a.createElement("div",{role:"button",tabIndex:0,className:d.a.label,onClick:o},i),n.a.createElement("div",{role:"button",tabIndex:0,className:d.a.label,onClick:s},c));u.propTypes={className:o.a.string,compact:o.a.bool,grayscale:o.a.bool,isToggledRight:o.a.bool,leftLabel:o.a.oneOfType([o.a.string,o.a.node]).isRequired,onClickLeft:o.a.func.isRequired,onClickRight:o.a.func.isRequired,rightLabel:o.a.oneOfType([o.a.string,o.a.node]).isRequired};var p=u;a.d(t,"a",function(){return p})},2155:function(e,t,a){"use strict";var r=a(55),n=a.n(r),i=a(90),o=a.n(i),s=a(67),l=a.n(s),c=a(231),d=a.n(c),u=a(6),p=a.n(u),m=a(0),b=a.n(m),h=a(1),g=a.n(h),y=a(52),O=a(34),f=a(60),E=a(19),v=a.n(E),_=a(74),k=a(384),T=a(2136),R=a(2130),P=a(190);function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var a,r,n=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var a,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var S=b.a.createElement("path",{d:"M12 13.3333V6.66663",stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),w=b.a.createElement("path",{d:"M8 13.3333V2.66663",stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),N=b.a.createElement("path",{d:"M4 13.3334V9.33337",stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),I=function SvgMarketOrderOutline(e){var t=e.svgRef,a=_objectWithoutProperties(e,["svgRef"]);return b.a.createElement("svg",_extends({width:16,height:16,viewBox:"0 0 16 16",fill:"none",ref:t},a),S,w,N)},C=b.a.forwardRef(function(e,t){return b.a.createElement(I,_extends({svgRef:t},e))});a.p;function limit_order_outline_extends(){return(limit_order_outline_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function limit_order_outline_objectWithoutProperties(e,t){if(null==e)return{};var a,r,n=function limit_order_outline_objectWithoutPropertiesLoose(e,t){if(null==e)return{};var a,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var A=b.a.createElement("path",{d:"M12 12L8 8L4 12",stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),L=b.a.createElement("line",{x1:4.75,y1:3.25,x2:11.25,y2:3.25,stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),j=function SvgLimitOrderOutline(e){var t=e.svgRef,a=limit_order_outline_objectWithoutProperties(e,["svgRef"]);return b.a.createElement("svg",limit_order_outline_extends({width:16,height:16,viewBox:"0 0 16 16",fill:"none",ref:t},a),A,L)},D=b.a.forwardRef(function(e,t){return b.a.createElement(j,limit_order_outline_extends({svgRef:t},e))}),M=(a.p,a(83)),x=a(80),q=a(33),B=a(102),F=a(44),U=a(146),W=a(2122),V=a(249),G=a(21),K=a(5),H=a(24),Y=a(61),z=a(94),Z=a(10),Q=a(191),$=a(614),X=a(103),J=a(2),ee=a(2203),te=a.n(ee),ae=a(2134),re=a.n(ae);const ne=(e,t,a)=>({TYPE:{titleKey:K.a.TYPE,width:"15%"},AMOUNT:{titleKey:K.a.AMOUNT,tag:a?t:e,width:"15%"},FILLED:{titleKey:K.a.AMOUNT_FILLED,tag:a?t:e,width:"15%"},PRICE:{titleKey:K.a.PRICE,tag:t,width:"15%"},STOP_INDEX:{titleKey:K.a.STOP_PRICE_ABBREVIATED,titleBottomKey:K.a.INDEX_PRICE_ABBREVIATED,tag:t,width:"20%",tooltip:{name:"stop-price",stringParams:{SYMBOL:e}},tooltipBottom:{name:"index-price"}},STATUS:{titleKey:K.a.STATUS,width:"10%"},GOOD_TIL:{titleKey:K.a.GOOD_TIL_DATE_ABBREVIATED,width:"10%"}}),ie=()=>({TYPE:{titleKey:K.a.TYPE,width:"24%"},AMOUNT:{titleKey:K.a.AMOUNT,titleBottomKey:K.a.AMOUNT_FILLED,width:"29%"},PRICE:{titleKey:K.a.PRICE,titleBottomKey:K.a.STOP_PRICE,width:"29%"},STATUS_GOOD_TIL:{titleKey:K.a.STATUS,titleBottomKey:K.a.GOOD_TIL_DATE_ABBREVIATED,width:"18%"}});class oe extends m.Component{constructor(e){super(e),this.onClickRow=(e=>{this.state.expandedOrder===e?this.setState({expandedOrder:null}):this.setState({expandedOrder:e})}),this.state={expandedOrder:null}}getTableConfig(){const e=this.props,t=e.currentPair,a=t.baseSymbol,r=t.displayQuoteSymbol,n=t.isInversePerpetual;return e.isMobile?ie():ne(a,r,n)}renderStopAndIndex(e){const t=this.props,a=t.baseMarket,r=t.currentPair,n=t.quoteMarket,i=t.indexPriceNatural,o=e.orderType,s=e.triggerPrice,l=r.tickDecimals,c=this.getTableConfig();if(!p()([G.n.PERPETUAL_STOP_LIMIT,G.n.CANONICAL_STOP_LIMIT,G.n.CANONICAL_SPOT_STOP_LIMIT],o))return b.a.createElement(R.a,{width:c.STOP_INDEX.width},"-");const d=new z.a(Object(Z.a)(s),a,n).getNaturalValue().toFixed(l);return b.a.createElement(R.a,{stacked:!0,width:c.STOP_INDEX.width},b.a.createElement("div",null,d),b.a.createElement("div",null,i?i.toFixed(l):"-"))}renderCancelButton(e){const t=e.id,a=e.orderType,r=e.status,n=this.props,i=n.currentPair,o=n.cancelLimitOrder,s=n.clearDexOrder,l=n.legacySigning,c=n.stringGetter,d=n.walletAddress,u=n.walletType;return b.a.createElement(R.a,{className:te.a.mobileFullWidth},r===G.l.CANCELED||r===G.l.FILLED?b.a.createElement(P.g,{className:te.a.mobileFullWidth,onClick:e=>{e.stopPropagation(),s(t)}},c({key:K.a.CLEAR})):b.a.createElement(P.g,{className:te.a.mobileFullWidth,onClick:e=>{e.stopPropagation(),o({pair:i,walletAddress:d,walletType:u,legacySigning:l,orderHash:t,tradeOrderType:a})}},c({key:K.a.CANCEL})))}renderTableRow(e){const t=e.id,a=e.baseAmount,r=e.filledAmount,n=e.orderType,i=e.price,o=e.triggerPrice,s=e.side,l=e.createdAt,c=e.updatedAt,u=e.expiresAt,h=e.status,g=e.cancelReason,y=e.fillOrKill,f=e.trailingPercent,E=this.props,_=E.baseMarket,k=E.currentPair,T=k.tickDecimals,P=k.isInversePerpetual,S=E.isMobile,w=E.quoteMarket,N=E.stringGetter,I=this.state.expandedOrder,A=P?w:_,L=new z.a(Object(Z.a)(i),_,w).getNaturalValue().toFixed(T),j=o?`${new z.a(Object(Z.a)(o),_,w).getNaturalValue().toFixed(T)} ${w.symbol}`:"-",M=Object(Q.e)(a,A.currency.decimals),x=Object(Q.e)(r,A.currency.decimals),q=Object($.c)({expiration:O.DateTime.fromISO(u).minus({minutes:G.j}),abbreviateUnits:S,stringGetter:N}),B=q.timeString,F=q.unitString,U=q.hasExpirationWarning,W=`${Object(Z.a)(r).div(a).times(100).toFixed(2)}%`,V=h===G.l.PENDING,H=h===G.l.CANCELED,ee=h===G.l.FILLED,ae=V?"-":x,re=p()([G.n.PERPETUAL_STOP_LIMIT,G.n.CANONICAL_STOP_LIMIT,G.n.CANONICAL_SPOT_STOP_LIMIT],n),ne=Object(X.e)(h,g),ie=ne?N({key:ne}):"-",oe=G.b[g]||"-",se=B&&!H&&h!==G.l.FILLED&&(re||!y),le=se?`${B}${S?"":" "}${F}`:"-",ce=S?this.renderCancelButton(e):b.a.createElement(m.Fragment,null,b.a.createElement(R.a,{label:N({key:K.a.FILLED_PERCENT})},V||H?"-":W),f&&b.a.createElement(R.a,{label:N({key:K.a.TRAILING_PERCENT})},Object(Z.a)(f).toFixed(Y.k),"%"),b.a.createElement(R.a,{label:N({key:K.a.CREATED_AT})},O.DateTime.fromISO(l).toFormat("MM/dd/yyyy hh:mm ZZZZ")),b.a.createElement(R.a,{label:N({key:K.a.UPDATED_AT})},O.DateTime.fromISO(c).toFormat("MM/dd/yyyy hh:mm ZZZZ")),H&&b.a.createElement(R.a,{label:N({key:K.a.CANCEL_REASON})},b.a.createElement("span",{className:te.a.uppercase},oe))),de=this.getTableConfig();return b.a.createElement(R.b,{key:t,expandable:!0,expandableContent:ce,hoverContent:this.renderCancelButton(e),isGreyedOut:H||ee,isLoading:V,isExpanded:I===t,onClick:V?d.a:()=>this.onClickRow(t),leftBorderRed:s===J.f.SELL,leftBorderGreen:s===J.f.BUY},b.a.createElement(R.a,{width:de.TYPE.width},b.a.createElement("div",{className:te.a.typeCell},y?b.a.createElement(C,null):b.a.createElement(D,null),b.a.createElement("div",{className:te.a.typeCellText},b.a.createElement("div",null,re&&`${N({key:K.a.ORDER_TYPES_STOP})} `,(!S||!re)&&N(y?{key:K.a.ORDER_TYPES_MARKET}:{key:K.a.ORDER_TYPES_LIMIT})),b.a.createElement("div",{className:v()(te.a.direction,{[te.a.red]:s===J.f.SELL})},s===J.f.BUY?N({key:K.a.BUY}):N({key:K.a.SELL}))))),b.a.createElement(R.a,{stacked:S,width:de.AMOUNT.width},S?b.a.createElement(m.Fragment,null,b.a.createElement("div",null,M," ",_.symbol),b.a.createElement("div",null,ae," ",_.symbol)):M),!S&&b.a.createElement(R.a,{width:de.FILLED.width},ae),!S&&b.a.createElement(R.a,{uppercase:!0,width:de.PRICE.width},re&&y?N({key:K.a.MARKET_PRICE_SHORT}):`${L}`),S?b.a.createElement(R.a,{stacked:!0,uppercase:!0,width:de.PRICE.width},b.a.createElement("div",null,re&&y?N({key:K.a.MARKET_PRICE_ABBREVIATED}):`${L} ${w.symbol}`),b.a.createElement("div",null,j)):this.renderStopAndIndex(e),S?b.a.createElement(R.a,{stacked:!0,uppercase:!0,width:de.STATUS_GOOD_TIL.width},b.a.createElement("div",null,ie),b.a.createElement("div",{className:v()({[te.a.red]:se&&U})},le)):b.a.createElement(m.Fragment,null,b.a.createElement(R.a,{uppercase:!0,width:de.STATUS.width},ie),b.a.createElement(R.a,{uppercase:!0,width:de.GOOD_TIL.width,red:se&&U},le)))}renderContent(){const e=this.props,t=e.orders,a=e.filter,r=e.currentPair,i=e.stringGetter,s=r.marketName;let c,d=i({key:K.a.EMPTY_ALL_ORDERS,params:{MARKET:s}});switch(a){case G.i.ALL_ORDERS:c=t;break;case G.i.MARKET_ORDERS:c=l()(t,e=>p()([G.n.LIMIT,G.n.CANONICAL_CROSS,G.n.PERPETUAL_CROSS],e.orderType)&&e.fillOrKill),d=i({key:K.a.EMPTY_MARKET_ORDERS,params:{MARKET:s}});break;case G.i.LIMIT_ORDERS:c=l()(t,e=>p()([G.n.LIMIT,G.n.CANONICAL_CROSS,G.n.PERPETUAL_CROSS],e.orderType)&&!e.fillOrKill),d=i({key:K.a.EMPTY_LIMIT_ORDERS,params:{MARKET:s}});break;case G.i.STOP_ORDERS:c=l()(t,e=>p()([G.n.PERPETUAL_STOP_LIMIT,G.n.CANONICAL_STOP_LIMIT,G.n.CANONICAL_SPOT_STOP_LIMIT],e.orderType)),d=i({key:K.a.EMPTY_STOP_ORDERS,params:{MARKET:s}});break;default:c=t}return b.a.createElement(m.Fragment,null,o()(c)?b.a.createElement("div",{className:re.a.emptyState},d):b.a.createElement(m.Fragment,null,n()(c,e=>this.renderTableRow(e))))}render(){const e=this.props,t=e.currentPair,a=e.isWalletConnecting,r=e.isWalletReady,i=e.ordersLoaded,o=e.userHasNoAccounts;return b.a.createElement("div",{className:"component-cross-limit-orders"},b.a.createElement(R.c,null,b.a.createElement(T.a,{headerConfig:n()(this.getTableConfig(),e=>e)}),b.a.createElement("div",{className:v()(re.a.content,{[re.a.contentPerpetual]:t&&t.type===H.d.PERPETUAL})},a||!o&&!i&&r?b.a.createElement("div",{className:re.a.loading},b.a.createElement(k.a,null)):this.renderContent())))}}oe.propTypes={baseMarket:g.a.object.isRequired,cancelLimitOrder:g.a.func.isRequired,clearDexOrder:g.a.func.isRequired,currentPair:g.a.object.isRequired,filter:g.a.oneOf(n()(G.i,e=>e)),indexPriceNatural:g.a.object,isMobile:g.a.bool.isRequired,isWalletConnecting:g.a.bool.isRequired,isWalletReady:g.a.bool.isRequired,legacySigning:g.a.bool.isRequired,orders:g.a.array.isRequired,ordersLoaded:g.a.bool.isRequired,quoteMarket:g.a.object.isRequired,stringGetter:g.a.func.isRequired,userHasNoAccounts:g.a.bool.isRequired,walletAddress:g.a.string,walletType:g.a.string};var se=Object(_.k)(Object(y.c)(e=>({baseMarket:Object(F.d)(e),currentPair:Object(F.e)(e),indexPriceNatural:Object(W.d)(e),isMobile:Object(U.d)(e).isMobile,isWalletConnecting:Object(q.e)(e),isWalletReady:Object(q.w)(e),orders:Object(V.e)(e),ordersLoaded:Object(V.l)(e),quoteMarket:Object(F.h)(e),userHasNoAccounts:Object(B.y)(e),walletAddress:Object(q.m)(e),walletType:Object(q.q)(e),legacySigning:Object(q.i)(e)}),e=>Object(f.b)({cancelLimitOrder:M.a,clearDexOrder:x.a},e))(oe));a.d(t,"a",function(){return se})},2156:function(e,t,a){"use strict";var r=a(55),n=a.n(r),i=a(0),o=a.n(i),s=a(1),l=a.n(s),c=a(19),d=a.n(c),u=a(74),p=a(2123);a(2204);function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}const m=({config:e,onClick:t,selectedToggleKey:a,className:r,stringGetter:s})=>o.a.createElement("div",{className:d()("component-tabbed-header",r)},o.a.createElement("div",{className:"buttons"},n()(e,({key:e,labelKey:r,badge:n,notification:l,tooltip:c})=>{const u=s({key:r}),m=c?p.a:i.Fragment,b=c?{top:c.top,left:c.left,tooltip:c.name}:{};return o.a.createElement(m,_extends({key:e},b),o.a.createElement("div",{role:"button",tabIndex:0,className:d()("tab",{tab__selected:a===e}),onClick:()=>t(e)},u,n&&n.label&&o.a.createElement("div",{className:d()("badge",{badge__alert:n.hasAlert})},n.label),l&&o.a.createElement("div",{className:"notification-dot"})))})));m.propTypes={className:l.a.string,config:l.a.arrayOf(l.a.shape({key:l.a.string.isRequired,labelKey:l.a.string.isRequired,notification:l.a.bool,tooltip:l.a.shape({top:l.a.number.isRequired,left:l.a.number.isRequired,name:l.a.string.isRequired}),badge:l.a.shape({label:l.a.number,hasAlert:l.a.bool})})).isRequired,onClick:l.a.func.isRequired,selectedToggleKey:l.a.string,stringGetter:l.a.func.isRequired};var b=Object(u.k)(m);a.d(t,"a",function(){return b})},2157:function(e,t,a){"use strict";var r=a(113),n=a.n(r),i=a(116),o=a.n(i),s=a(55),l=a.n(s),c=a(90),d=a.n(c),u=a(0),p=a.n(u),m=a(1),b=a.n(m),h=a(9),g=a.n(h),y=a(52),O=a(34),f=a(19),E=a.n(f),v=a(74),_=a(31),k=a(384),T=a(2130),R=a(2136),P=a(33),S=a(102),w=a(44),N=a(26),I=a(249),C=a(146),A=a(5),L=a(21),j=a(24),D=a(61),M=a(94),x=a(10),q=a(2),B=a(191),F=a(46),U=a(614),W=a(2202),V=a.n(W),G=a(2134),K=a.n(G);const H=(e,t,a)=>({TYPE:{titleKey:A.a.TYPE,width:"12%"},AMOUNT:{titleKey:A.a.AMOUNT,width:"16%",tag:a?t:e},PRICE:{titleKey:A.a.PRICE,width:"15%",tag:t},FEE:{titleKey:A.a.FEE,width:"15%",tag:a?e:t},STATUS:{titleKey:A.a.STATUS,width:"15%"},TIME:{titleKey:A.a.TIME,width:"15%"},TRANSACTION:{titleKey:A.a.TRANSACTION,width:"12%"}}),Y=()=>({TYPE:{titleKey:A.a.TYPE,titleBottomKey:A.a.AMOUNT,width:"36%"},PRICE:{titleKey:A.a.PRICE,titleBottomKey:A.a.FEE,width:"29%"},STATUS:{titleKey:A.a.STATUS,titleBottomKey:A.a.TIME,width:"24%"},TRANSACTION:{titleKey:A.a.TRANSACTION_ABBREVIATED,width:"11%"}});class z extends u.Component{constructor(...e){super(...e),this.getTableConfig=(()=>{const e=this.props,t=e.currentPair,a=t.baseSymbol,r=t.displayQuoteSymbol,n=t.isInversePerpetual;return e.isMobile?Y():H(a,r,n)})}renderTableRow(e){const t=e.uuid,a=e.amount,r=e.createdAt,n=e.price,i=e.transactionHash,o=e.status,s=e.side,l=e.feeAmount,c=this.props,d=c.allMarkets,m=c.currentPair,b=m.baseSymbol,h=m.quoteSymbol,y=m.tickDecimals,f=m.isInversePerpetual,E=c.isMobile,v=c.stringGetter,k=Object(N.c)({allMarkets:d,symbol:b}),R=Object(N.c)({allMarkets:d,symbol:h}),P=f?R:k,S=f?k:R,w=new M.a(n,k,R).getNaturalValue().toFixed(y),I=Object(F.a)(Object(x.a)(a),P.currency.decimals).toFixed(D.n,g.a.ROUND_HALF_UP),C=l?Object(F.a)(Object(x.a)(l),S.currency.decimals).toFixed(D.n):q.a.ZERO.toFixed(D.n),j=Object(U.b)({datetime:O.DateTime.fromISO(r),abbreviateUnits:E,stringGetter:v}),W=j.timeString,G=j.unitString;let K="-";o===L.d.CONFIRMED?K=v({key:A.a.CONFIRMED}):o===L.d.PENDING?K=v({key:A.a.PENDING}):o===L.d.REVERTED&&(K=v({key:A.a.REVERTED}));const H=s===q.f.BUY?v({key:A.a.BUY}):v({key:A.a.SELL}),Y=this.getTableConfig();return p.a.createElement(T.b,{key:t,leftBorderRed:s===q.f.SELL,leftBorderGreen:s===q.f.BUY},p.a.createElement(T.a,{uppercase:!0,className:V.a.typeCell,width:Y.TYPE.width},s===q.f.BUY?p.a.createElement(_.d,null):p.a.createElement(_.c,null),E?p.a.createElement("div",{className:V.a.typeCellText},p.a.createElement("div",null,H),p.a.createElement("div",null,I," ",P.symbol)):H),!E&&p.a.createElement(T.a,{width:Y.AMOUNT.width},I),p.a.createElement(T.a,{stacked:E,width:Y.PRICE.width},E?p.a.createElement(u.Fragment,null,p.a.createElement("div",null,w," ",R.symbol),p.a.createElement("div",null,C," ",R.symbol)):w),!E&&p.a.createElement(T.a,{width:Y.FEE.width},C),p.a.createElement(T.a,{uppercase:!0,stacked:E,width:Y.STATUS.width},E?p.a.createElement(u.Fragment,null,p.a.createElement("div",null,K),p.a.createElement("div",{className:V.a.uppercaseMobile},`${W}${G}`)):K),!E&&p.a.createElement(T.a,{uppercase:!0,width:Y.TIME.width},`${W} ${G}`),p.a.createElement(T.a,{width:Y.TRANSACTION.width,grey:!0,className:V.a.etherscanLink},p.a.createElement("a",{target:"blank",href:`https://etherscan.io/tx/${i}`},Object(B.f)(i,E)),!E&&p.a.createElement(_.ub,null)))}renderContent(){const e=this.props.fills;return p.a.createElement(u.Fragment,null,d()(e)?p.a.createElement("div",{className:K.a.emptyState},"You have no past order fills."):p.a.createElement(u.Fragment,null,l()(o()(n()(e,"createdAt")),e=>this.renderTableRow(e))))}render(){const e=this.props,t=e.currentPair,a=e.fillsLoaded,r=e.isWalletConnecting,n=e.isWalletInvalid,i=e.userHasNoAccounts;return p.a.createElement("div",{className:V.a.crossFills},p.a.createElement(T.c,null,p.a.createElement(R.a,{headerConfig:l()(this.getTableConfig(),e=>e)}),p.a.createElement("div",{className:E()(K.a.content,{[K.a.contentPerpetual]:t&&t.type===j.d.PERPETUAL})},r||!a&&!i&&!n?p.a.createElement("div",{className:K.a.loading},p.a.createElement(k.a,null)):this.renderContent())))}}z.propTypes={allMarkets:b.a.array.isRequired,currentPair:b.a.object.isRequired,fills:b.a.array.isRequired,fillsLoaded:b.a.bool.isRequired,isMobile:b.a.bool.isRequired,isWalletConnecting:b.a.bool.isRequired,isWalletInvalid:b.a.bool.isRequired,stringGetter:b.a.func.isRequired,userHasNoAccounts:b.a.bool.isRequired};var Z=Object(v.k)(Object(y.c)(e=>({allMarkets:Object(N.d)(e),currentPair:Object(w.e)(e),fills:Object(I.i)(e),fillsLoaded:Object(I.j)(e),isMobile:Object(C.d)(e).isMobile,isWalletConnecting:Object(P.e)(e),isWalletInvalid:Object(P.v)(e),userHasNoAccounts:Object(S.y)(e)}))(z));a.d(t,"a",function(){return Z})},2159:function(e,t,a){},2160:function(e,t,a){e.exports={title:"_1PdUqVekrSRpvnWjZzeVrE",doubleTitle:"wSdqhEheF-kdmofL9_n5G",doubleTooltip:"_1t07aupEV6Hw8ag1Rwh-TC"}},2162:function(e,t,a){"use strict";a.d(t,"g",function(){return D}),a.d(t,"a",function(){return M}),a.d(t,"b",function(){return x}),a.d(t,"c",function(){return q}),a.d(t,"d",function(){return B}),a.d(t,"e",function(){return F}),a.d(t,"f",function(){return U});var r=a(234),n=a.n(r),i=a(17),o=a.n(i),s=a(90),l=a.n(s),c=a(922),d=a.n(c),u=a(326),p=a.n(u),m=a(55),b=a.n(m),h=a(6),g=a.n(h),y=a(67),O=a.n(y),f=a(39),E=a.n(f),v=a(4),_=a.n(v),k=a(41),T=a(44),R=a(26),P=a(296),S=a(235),w=a(42),N=a(50),I=a(94),C=a(57),A=a(10),L=a(2);function ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const j=e=>_()(e,"standardActions.standardActions"),D=e=>_()(e,"standardActions.standardActionsVersion"),M=e=>_()(e,"standardActions.areStandardActionsLoaded"),x=e=>_()(e,"standardActions.hasRemainingActionsToFetch"),q=e=>{const t=j(e);return _()(t,`[${E()(t)-1}].confirmedAt`)},B=d()(e=>{const t=j(e),a=Object(R.d)(e),r=O()(t,({type:e,number:t,product:a})=>g()([S.d.DEPOSIT,S.d.WITHDRAW,S.d.BORROW,S.d.REPAY],e)&&(w.c.eq(t)||w.b.eq(t)||a===S.b.PERPETUAL));return b()(r,({asset:e,confirmedAt:t,market:r,number:n,product:i,transactionHash:o,transferAmount:s,type:l,uuid:c})=>{const d=Object(T.b)(r);let u;return i===S.b.PERPETUAL&&(u=d.marketName),{accountNumber:n,amountMV:new C.a(s,Object(R.c)({allMarkets:a,symbol:"SAI"===e?"DAI":e})),confirmedAt:t,marketName:u,pair:d,product:i,transactionHash:o,type:l,uuid:c}})},e=>D(e)),F=d()(e=>{const t=j(e),a=O()(t,({type:e})=>!g()([S.d.DEPOSIT,S.d.WITHDRAW,S.d.BORROW,S.d.REPAY,S.d.ACCOUNT_SETTLE],e)),r=b()(a,({uuid:t,type:a,side:r,market:n,price:i,pnl:o,tradeAmount:s,feeAmount:l,transferAmount:c,transactionHash:d,confirmedAt:u})=>{let p=n;"WETH-SAI"===n&&(p="WETH-DAI"),"SAI-USDC"===n&&(p="DAI-USDC");const m=Object(T.b)(p);if(!m)return"SAI-DAI"!==n&&N.a.notify(new Error(`Unknown market while parsing standard actions: ${n}`)),null;const b=m.baseSymbol,h=m.displayQuoteSymbol,y=m.quoteSymbol,O=m.isInversePerpetual,f=Object(R.d)(e),E=Object(R.c)({allMarkets:f,symbol:b}),v=Object(R.c)({allMarkets:f,symbol:y}),_=Object(A.a)(s),k=Object(A.a)(c),P=g()([S.d.ISOLATED_OPEN,S.d.ISOLATED_PARTIAL_CLOSE,S.d.ISOLATED_FULL_CLOSE],a),w=r===S.c.LONG;let L,j,D,M,x;switch(a){case S.d.ISOLATED_OPEN:L=S.a.OPEN;break;case S.d.ISOLATED_PARTIAL_CLOSE:case S.d.ISOLATED_FULL_CLOSE:L=S.a.CLOSE;break;case S.d.EXPIRED:L=S.a.EXP;break;case S.d.LIQUIDATED:L=S.a.LIQ;break;case S.d.OPEN:L=S.a.OPEN;break;case S.d.CLOSE:L=S.a.CLOSE;break;case S.d.INCREASE:L=S.a.INCREASE;break;case S.d.DECREASE:L=S.a.DECREASE;break;default:L=S.a.TRADE}if(j=P?w?new C.a(k.plus(s),E):new C.a(_,E):new C.a(_,O?function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(a,!0).forEach(function(t){_defineProperty(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},v,{symbol:h}):E),P&&c){const e=_.times(i);let t;t=w?k.times(i).plus(e):k.plus(e);const a=e;D=a.div(t.minus(a)),w&&(D=D.plus(1))}return a===S.d.ISOLATED_OPEN&&(M=new C.a(k,w?E:v)),P&&a!==S.d.ISOLATED_OPEN&&(x=new C.a(k,w?E:v)),{uuid:t,pair:m,side:r,leverageBN:D,amountMV:j,payoutMV:x,pnl:o?Object(A.a)(o):null,marginDepositMV:M,feeAmountMV:new C.a(l,O?E:v),priceMP:new I.a(i,E,v),type:L,transactionHash:d,confirmedAt:u}});return p()(r)},e=>D(e)),U=Object(k.a)([j,T.e,P.e],(e,t,a)=>{const r=t.orderMarket,i=t.settlementSymbol,s=t.isInversePerpetual,c=a[r];if(!c||l()(e))return{};const d=Object(A.a)(c.position),u=s?d.lt(0):d.gt(0);if(d.isZero())return{};let p=!1;const m=[];if(o()(e,e=>{const t=e.type,a=e.side,n=e.market,o=e.product,s=e.asset;if(n===r&&(g()([S.d.INCREASE,S.d.DECREASE],t)||t===S.d.ACCOUNT_SETTLE&&s===i))m.push(e);else if(t===S.d.OPEN&&n===r&&o===S.b.PERPETUAL&&(u?a===S.c.LONG:a===S.c.SHORT))return m.push(e),p=!0,!1;return!0}),l()(m)||!p)return{};let b=L.a.ZERO,h=L.a.ZERO,y=L.a.ZERO,O=L.a.ZERO,f=L.a.ZERO,E=L.a.ZERO,v=L.a.ZERO;const _=[];n()(m,({type:e,tradeAmount:t,transferAmount:a,feeAmount:r,price:n})=>{switch(e){case S.d.ACCOUNT_SETTLE:b=b.plus(a);break;case S.d.OPEN:case S.d.INCREASE:{h=h.plus(r);const e=Object(A.a)(t),a=t,i=s?e.div(n):e.times(n);y=y.plus(a),O=O.plus(i),_.push({remainingAmount:e,price:n});break}case S.d.DECREASE:{const e=Object(A.a)(t);h=h.plus(r),f=f.plus(t),v=v.plus(s?e.div(n):e.times(n));let a=e;o()(_,({remainingAmount:e,price:t},r)=>{if(!e.isZero()){if(!a.gt(e))return E=E.plus(s?a.div(t):a.times(t)),_[r].remainingAmount=e.minus(a),!1;E=E.plus(s?a.div(t):e.times(t)),a=a.minus(e),_[r].remainingAmount=L.a.ZERO}return!0});break}}});let k=L.a.ZERO;return o()(_,({remainingAmount:e,price:t})=>{e.isZero()||(k=k.plus(s?e.div(t):e.times(t)))}),{netFunding:b,netFees:h,totalOpenBaseAmount:y,totalOpenQuoteAmount:O,totalRemainingOpenQuoteAmount:k,totalCloseBaseAmount:f,totalClosedOpenQuoteAmount:E,totalCloseQuoteAmount:v}})},2163:function(e,t,a){e.exports={dropdown:"_1bDdh5nYnDoQPasNegtesO",pairEntry:"MlQzEhmgD54Z_7Vjdkg4v",marketNameIcon:"_2CGihejg78xcuReXJ-I4A-",marketIcon:"_1PT28MDH5ajkWUdca3wUDH",marketIconPerp:"_3jFoxkwsboUZdn84dSmw9N",priceContainer:"_3thVNRhdg-9vUsxPkS5Sr5",changeContainer:"_3KJb-Ugk3JWSc16uCwq8pt",percentChange:"_20wHTcDc9-9tMSTIZRhukZ",green:"_1ofSXY8MpqyE8wBB-Bf0qf",red:"_3mgukL4c2j2iQUlH7zk3gT",selectedEntryCheck:"NriznvnNx5anjGeVLd89P"}},2164:function(e,t,a){e.exports={selectMarket:"_3VTmhdaPb6jsKr_xWs7O4s",selectMarketButtonDropdown:"_2c9nPvfS0xREcVBT0UV0Th",selectMarketButton:"_3otHCMFe5i-y9MuVHLnwDT",buttonDropdownOpen:"_2ukGPwyHMU-X7PDKk9KVqn",symbol:"_1KyaoMW9ey14gBxUpsnhIP",symbolLeft:"lKQgak8Xz8OZwGwLy9zAk",marketIcon:"a02BZ1WRbWeqd9OIqZGPr",marketIconPerp:"_2Y49FczbTgR88wNJXMmWr2"}},2165:function(e,t,a){e.exports={productUnavailable:"_1CMeWrBVL3aPcbGjV1gSxC",text:"_2SOpRg2GW_SfGzHF_c4h-A"}},2166:function(e,t,a){e.exports={perpetualLeverageSlider:"_1U7TbKmmnqSpgqUSMzMGnl",leverageLabel:"_3SS4uL0oiVJ95ZZpN8c2MH",leverageBadge:"_24lBUpwb_4ulI1dQjyW5FW",leverageBadgeLong:"_1mSLMt9CMuA--sISM8xxbk",leverageBadgeShort:"_2DCxw1Av9qUfcCIT2PF7US",labels:"_2qMVcLKoCXviMD57PW0hHI",label:"aHAZB2Puou6lpxYWCzUnX",dots:"_3Exz7KbogeEsI9jsg4IV2y",dot:"_3hSuMH5NWlLCVFvsIPBpJ-"}},2167:function(e,t,a){e.exports={tradeReceipt:"_2yaua8HwORaH7jJ7NwfOj1",row:"VECzWHOu1NYOqt4QMDpJL",title:"_2yqVWTegM_6-T7pfXfUzhe",value:"lL-Ev8uaBnxL2usqFe_xi",red:"_V15lf8hBhJzUQHozGZEV",badge:"_1WITnQD-qzACgA3Tyha60u",badgeGradient:"QKC-IeLKiz2ZeiO1dkMvH"}},2168:function(e,t,a){},2169:function(e,t,a){e.exports={slidingTabs:"tlLiCocP8Y6yD1BqIOJOd",twoTabs:"_2AB8qMvzSs9mlUfRd9oyim",threeTabs:"_2r_2I2ObnCAflzw6yh_6uJ","selectedIndex--1":"_2YCmapsZytOs1cDrNdC9IW","selectedIndex--2":"_2OgA-aYVumFpXox1o6dCc8",tab:"_3YmH3d966IPzt4Sy5Nb5hD",selected:"_3Iu8gYmW-eRtXTaTMQkyMz"}},2170:function(e,t,a){e.exports={leverageGrid:"_1fb1gpofDClK2ZVyTFjtDH"}},2171:function(e,t,a){},2172:function(e,t,a){"use strict";var r=a(231),n=a.n(r),i=a(112),o=a.n(i),s=a(4),l=a.n(s),c=a(0),d=a.n(c),u=a(1),p=a.n(u),m=a(52),b=a(60),h=a(19),g=a.n(h),y=a(9),O=a.n(y),f=a(74),E=a(31),v=a(250),_=a(44),k=a(5),T=a(24),R=a(2165),P=a.n(R);const S=({currentPair:e,isUserInUsa:t,stringGetter:a})=>e.type===T.d.PERPETUAL&&t?d.a.createElement("div",{className:P.a.productUnavailable},d.a.createElement(E.a,null),d.a.createElement("div",{className:P.a.text},a({key:k.a.PERPETUAL_NOT_AVAILABLE})," ",a({key:k.a.MORE_DETAILS_TOS}),d.a.createElement("a",{href:"https://dydx.exchange/terms-of-use/",target:"_blank",rel:"noopener noreferrer"},d.a.createElement(E.ub,null)))):null;S.propTypes={currentPair:p.a.object.isRequired,isUserInUsa:p.a.bool.isRequired,stringGetter:p.a.func.isRequired};var w=Object(f.k)(Object(m.c)(e=>({currentPair:Object(_.e)(e),isUserInUsa:Object(v.c)(e)}))(S)),N=a(2126),I=a.n(N),C=a(621),A=a.n(C),L=a(2501),j=a(2500),D=a(2261),M=a(2123),x=a(2127),q=a(86),B=a(296),F=a(26),U=a(2122),W=a(343),V=a(132),G=a(171),K=a(61),H=a(2),Y=a(615),z=a(10),Z=a(46),Q=a(2166),$=a.n(Q);const X=Object(D.a)({rail:{height:6,background:"linear-gradient(90deg, #ff5757, #616774, #57ff5f)",opacity:1,borderRadius:4},thumb:{zIndex:1,marginTop:-3,backgroundColor:"#ffffff","&:hover":{boxShadow:"0 0 5px #959eb1"},"&:active":{boxShadow:"none"}},valueLabel:{top:8,fontSize:11,left:"calc(-50% - 12px)"}})(L.a),J=Object(D.a)({tooltip:{backgroundColor:"#17181a",margin:"8px 0",fontSize:11,fontFamily:"Roboto Mono"}})(j.a),ee=({children:e,open:t,value:a})=>d.a.createElement(J,{open:t,enterTouchDelay:0,placement:"bottom",title:a},e);class te extends c.Component{constructor(e){super(e),this.getPositionLeverage=(({amount:e,price:t,side:a}={})=>{const r=this.props,n=r.allIndexPrices,i=r.arePerpetualBalancesLoaded,o=r.currentPair,s=o.orderMarket,l=o.isInversePerpetual,c=r.perpetualBalances;if(!i)return H.a.ZERO;const d=c[s],u=d.margin,p=d.position,m=n[s];let b=Object(z.a)(p),h=Object(z.a)(u);if(e&&t&&a){const r=l?e.div(t.baseAmount):e.times(t.baseAmount);b=a===H.f.SELL?b.minus(e):b.plus(e),h=a===H.f.SELL?h.plus(r):h.minus(r)}const g=Object(Y.c)({positionBN:b,marginBN:h,indexPrice:m,isInversePerpetual:l});return g||H.a.ZERO}),this.onChangeLeverage=((e,t)=>{const a=this.props,r=a.allIndexPrices,n=a.allMarkets,i=a.allOrderbookOrders,o=a.perpetualBalances,s=a.currentPair,l=a.setTradeData,c=s.orderMarket,d=s.isInversePerpetual,u=s.baseSymbol,p=s.quoteSymbol,m=o[c]||{},b=m.margin,h=m.position,g=r[c],y=Object(F.c)({allMarkets:n,symbol:d?p:u}),O=Object(z.a)(h),f=Object(z.a)(b);let E,v;d?(E=O,v=f.times(g)):(E=O.times(g),v=f);const _=Object(z.a)(t),k=this.getPositionLeverage();let T,R;T=_.gt(k)?_.times(E.plus(v)).minus(E):E.minus(_.times(E.plus(v))),d||(T=T.div(g)),R=d?_.gt(O.lt(0)?k:-1*k)?H.f.BUY:H.f.SELL:_.gt(O.gte(0)?k:-1*k)?H.f.BUY:H.f.SELL;let P=Object(V.a)({allOrderbookOrders:i,allMarkets:n,pair:s,side:R,amount:T});const S=this.getPositionLeverage({amount:T,price:P,side:R});P&&S&&!S.dp(K.e).eq(_.abs())&&(T=d?P.baseAmount.times(_.times(v).plus(_.times(E)).plus(E)).div(_.times(P.baseAmount).plus(P.baseAmount).minus(_.times(g))):_.gt(k)?_.times(v.plus(E)).minus(E).div(P.baseAmount.times(_).minus(_.times(g)).plus(g)):_.abs().times(v.plus(E)).minus(E).div(_.minus(1).times(g).minus(P.baseAmount.times(_))),P=Object(V.a)({allOrderbookOrders:i,allMarkets:n,pair:s,side:R,amount:T.abs()})),l({amount:T.abs(),amountDisplayValue:Object(Z.a)(T,y.currency.decimals).toFixed(K.n),selectedPerpetualLeverage:_,side:R,price:P})}),this.onChangeLeverage=A()(this.onChangeLeverage,100)}render(){const e=this.props,t=e.allIndexPrices,a=e.allMarkets,r=e.arePerpetualBalancesLoaded,n=e.arePerpetualMarketsLoaded,i=e.currentPair,s=e.currentTradeData,l=e.perpetualBalances,c=e.perpetualMarkets,u=e.stringGetter,p=i.maxLeverage,m=s.selectedPerpetualLeverage;let b=m;if(o()(b)&&r&&n){const e=Object(Y.h)({allIndexPrices:t,allMarkets:a,currentPair:i,perpetualBalances:l,perpetualMarkets:c,currentTradeData:s}),r=e.positionLeverage,n=e.positionSide,o=e.newPositionLeverage,d=e.newPositionSide;b=e.hasOrderDiff?d===G.d.SHORT?o.negated():o:n===G.d.SHORT?r.negated():r}const h=[];return I()(11,e=>h.push(d.a.createElement("div",{key:e,className:$.a.dot}))),d.a.createElement(x.c,{label:d.a.createElement(M.a,{className:$.a.leverageLabel,top:8,left:-48,tooltip:"perpetual-leverage-slider"},u({key:k.a.LEVERAGE}),m&&!m.isZero()&&d.a.createElement("div",{className:g()($.a.leverageBadge,{[$.a.leverageBadgeShort]:m.lt(0),[$.a.leverageBadgeLong]:m.gt(0)})},u({key:m.lt(0)?k.a.SHORT:k.a.LONG})))},d.a.createElement("div",{className:$.a.perpetualLeverageSlider},d.a.createElement(X,{track:!1,ValueLabelComponent:ee,min:p.negated().toNumber(),max:p.toNumber(),step:.1,valueLabelFormat:e=>`${Math.abs(e).toFixed(K.e)}\xd7`,value:b?b.toNumber():0,onChange:this.onChangeLeverage,valueLabelDisplay:"auto"}),d.a.createElement("div",{className:$.a.dots},h)),d.a.createElement("div",{className:$.a.labels},d.a.createElement("div",{className:$.a.label},p.toFixed(0),"\xd7"),d.a.createElement("div",{className:$.a.label},"0\xd7"),d.a.createElement("div",{className:$.a.label},p.toFixed(0),"\xd7")))}}te.propTypes={allIndexPrices:p.a.object.isRequired,allMarkets:p.a.array.isRequired,allOrderbookOrders:p.a.object.isRequired,arePerpetualBalancesLoaded:p.a.bool.isRequired,arePerpetualMarketsLoaded:p.a.bool.isRequired,currentPair:p.a.object.isRequired,currentTradeData:p.a.object.isRequired,perpetualBalances:p.a.object.isRequired,perpetualMarkets:p.a.object.isRequired,setTradeData:p.a.func.isRequired,stringGetter:p.a.func.isRequired};var ae=Object(f.k)(Object(m.c)(e=>({allIndexPrices:Object(U.b)(e),allMarkets:Object(F.d)(e),allOrderbookOrders:Object(V.d)(e),arePerpetualBalancesLoaded:Object(B.c)(e),arePerpetualMarketsLoaded:Object(B.d)(e),currentPair:Object(_.e)(e),currentTradeData:Object(W.b)(e),perpetualBalances:Object(B.e)(e),perpetualMarkets:Object(B.g)(e)}),e=>Object(b.b)({setTradeData:q.e},e))(te)),re=a(34),ne=a(232),ie=a(33),oe=a(11),se=a(150),le=a(57),ce=a(94),de=a(386),ue=a(614),pe=a(301),me=a(2167),be=a.n(me);const he=({allPairOrderData:e,orderMarket:t,isPerpetual:a=!1})=>{const r=e[t]||{};return Object(Z.a)(r.smallOrderThreshold||0,a?r.decimals:l()(r,"baseCurrency.decimals",0))};class ge extends c.Component{renderRow({title:e,value:t,tooltipConfig:{tooltip:a,top:r,left:n,stringParams:i,learnMoreLink:o}={}}){return t?d.a.createElement("div",{className:be.a.row},d.a.createElement("div",{className:be.a.title},a?d.a.createElement(M.a,{top:r,left:n,tooltip:a,stringParams:i,learnMoreLink:o},e):e),d.a.createElement("div",{className:be.a.value},t)):null}renderMarginDeposit(){const e=this.props,t=e.currentTradeData.marginDeposit,a=e.stringGetter;return t?this.renderRow({title:a({key:k.a.MARGIN_DEPOSIT}),value:`${t.getNaturalValue().toFixed(K.n)} ${t.market.symbol}`,tooltipConfig:{tooltip:"margin-deposit",top:8,left:-48}}):null}renderTradeAmount(){const e=this.props,t=e.allPairOrderData,a=e.baseMarket,r=e.currentPair.orderMarket,n=e.currentTradeData.amount,i=e.selectedTradeType,o=e.stringGetter,s=e.tradeAmount,l=(t[r]||{}).minimumOrderSize,c=i===oe.v.ISOLATED&&n&&!n.isZero()&&new le.a(s,a);return c&&this.renderRow({title:o({key:k.a.TRADE_AMOUNT}),value:d.a.createElement("div",{className:g()({[be.a.red]:c.baseAmount.lt(l)})},c.getNaturalValue().toFixed(K.n)," ",c.market.symbol),tooltipConfig:{tooltip:"isolated-trade-amount",top:8,left:-48}})}renderExpectedPrice(){const e=this.props,t=e.currentPair,a=t.type,r=t.tickDecimals,n=t.displayQuoteSymbol,i=e.currentTradeData,o=i.tradeOrderType,s=i.price,l=e.selectedTradeType,c=e.stringGetter,d=(l===oe.v.ISOLATED||a===T.d.PERPETUAL&&o===oe.u.MARKET)&&s;return d&&d.baseAmount.isFinite()&&this.renderRow({title:c({key:k.a.EXPECTED_PRICE}),value:`${d.getNaturalValue().toFixed(r)} ${n}`,tooltipConfig:{tooltip:"slippage-expected-price",top:8,left:-48,learnMoreLink:"https://help.dydx.exchange/trading-faq/spread-price-impact-and-slippage"}})}renderIndexPrice(){const e=this.props,t=e.baseMarket,a=e.quoteMarket,r=e.currentPair,n=r.displayQuoteSymbol,i=r.tickDecimals,o=e.currentTradeData.tradeOrderType,s=e.indexPriceNatural,l=e.stringGetter,c=o===oe.u.STOP&&ce.a.fromNaturalValue(s,t,a);return c&&c.baseAmount.isFinite()&&this.renderRow({title:l({key:k.a.INDEX_PRICE}),value:`${c.getNaturalValue().toFixed(i)} ${n}`,tooltipConfig:{tooltip:"index-price",top:8,left:-48}})}renderInitialStopPrice(){const e=this.props,t=e.currentPair,a=t.displayQuoteSymbol,r=t.tickDecimals,n=e.currentTradeData,i=n.triggerPriceMP,o=n.trailingPercent,s=e.stringGetter;return o&&!o.isZero()&&i&&this.renderRow({title:s({key:k.a.INITIAL_STOP_PRICE}),value:`${i.getNaturalValue().toFixed(r)} ${a}`,tooltipConfig:{tooltip:"initial-stop-price",top:8,left:-48}})}renderWorstPrice(){const e=this.props,t=e.currentPair,a=t.displayQuoteSymbol,r=t.tickDecimals,n=e.currentTradeData,i=n.side,o=n.price,s=n.tradeOrderType,l=n.triggerPriceMP,c=e.slippage,d=e.stopSlippage,u=e.stringGetter;let p=null;return s===oe.u.MARKET&&o?p=o.getMarketPriceWithSlippage(c,i):s===oe.u.STOP&&l&&(p=l.getMarketPriceWithSlippage(d,i)),p&&p.baseAmount.isFinite()&&this.renderRow({title:u({key:k.a.WORST_PRICE}),value:`${p.getNaturalValue().toFixed(r)} ${a}`,tooltipConfig:{tooltip:"slippage-worst-price",top:8,left:-48,learnMoreLink:"https://help.dydx.exchange/trading-faq/spread-price-impact-and-slippage"}})}renderTotal({feeAmount:e,isTaker:t}){const a=this.props,r=a.baseMarket,n=a.currentPair,i=n.displayQuoteSymbol,o=n.tickDecimals,s=n.isInversePerpetual,l=a.currentTradeData,c=l.side,d=l.price,u=l.amount,p=l.tradeOrderType,m=l.limitPrice,b=l.triggerPriceMP,h=a.quoteMarket,g=a.selectedTradeType,y=a.stringGetter;let O,f,E;return g===oe.v.CROSS&&u&&(p===oe.u.MARKET&&d?f=d.baseAmount:p===oe.u.LIMIT&&m?f=m.baseAmount:p===oe.u.STOP&&b&&(f=b.baseAmount),f&&(O=s?u.div(f):u.times(f))),O&&(E=s?new le.a(O,r):new le.a(c===H.f.BUY?O.plus(e?e.baseAmount:0):O.minus(e?e.baseAmount:0),h)),E&&this.renderRow({title:y({key:k.a.TOTAL}),value:`${p!==oe.u.LIMIT||t?"\u2248 ":""}${E.getNaturalValue().toFixed(Math.max(o,K.f))} ${s?E.market.symbol:i}`})}renderLiquidationPrice(){const e=this.props,t=e.currentPair,a=t.baseSymbol,r=t.displayQuoteSymbol,n=t.tickDecimals,i=e.currentTradeData.side,o=e.liquidationPrice,s=e.stringGetter;return o&&o.baseAmount.isFinite()&&this.renderRow({title:s({key:k.a.LIQUIDATION_PRICE}),value:`${o.getNaturalValue().toFixed(n)} ${r}`,tooltipConfig:{tooltip:i===H.f.BUY?"liquidation-price-long":"liquidation-price-short",top:8,left:-48,stringParams:{SYMBOL:a}}})}renderPriceImpact(){const e=this.props,t=e.priceImpact,a=e.stringGetter;return t&&this.renderRow({title:a({key:k.a.PRICE_IMPACT}),value:d.a.createElement("div",{className:g()({[be.a.red]:t.abs().gt(oe.r)})},t.abs().times(100).toFixed(K.k),"%"),tooltipConfig:{tooltip:"price-impact",top:8,left:-48}})}renderInterest(){const e=this.props,t=e.baseMarket,a=e.quoteMarket,r=e.selectedTradeType,n=e.currentTradeData,i=n.side,o=n.amount,s=n.price,l=n.marginDeposit,c=e.stringGetter,d=Object(de.a)({tradeType:r,price:s,side:i,amount:o,marginDepositMV:l}),u=d.debtWei,p=d.collateralWei;let m,b;i===H.f.SELL?(m=t,b=a):i===H.f.BUY&&(m=a,b=t);const h=Object(de.d)({borrowMarket:m,supplyMarket:b,debtWei:u,collateralWei:p});return r===oe.v.ISOLATED&&h&&!h.isZero()&&this.renderRow({title:c({key:k.a.INTEREST_RATE_APR}),value:`${h.lt(0)?"+":""}${h.negated().times(100).toFixed(K.k)}%`,tooltipConfig:{tooltip:"interest-rate",top:-148,left:-48,stringParams:{SUPPLY_SYMBOL:b.symbol,BORROW_SYMBOL:m.symbol}}})}renderFeesFields({feeAmount:e,feePercentage:t,isTaker:a,isSmallOrder:r}){const n=this.props,i=n.allPairOrderData,o=n.currentPair,s=o.orderMarket,l=o.displayQuoteSymbol,u=o.tickDecimals,p=o.type,m=o.isInversePerpetual,b=n.stringGetter,h=n.walletData,y=p===T.d.PERPETUAL;let O,f,E,v="";t&&(y&&!a?(O=b({key:k.a.MAKER}),v="fee-maker-rebate",f=-96):r?(O=b({key:k.a.SMALL_ORDER}),v="fee-small-order",f=-148,E={ETH_THRESHOLD:he({allPairOrderData:i,orderMarket:"WETH-DAI"}),DAI_THRESHOLD:he({allPairOrderData:i,orderMarket:"DAI-USDC"}),USD_THRESHOLD:he({allPairOrderData:i,orderMarket:"WETH-PUSD",isPerpetual:!0}),BTC_THRESHOLD:he({allPairOrderData:i,orderMarket:"PBTC-USDC",isPerpetual:!0})}):(O=b(a?{key:k.a.TAKER}:{key:k.a.MAKER}),v=a?"fee-taker":"fee-maker",f=a?-96:-84));const _=K.m,R=Math.max(u,_),P=h[se.e.HAS_SET_REFERRER];return d.a.createElement(c.Fragment,null,t&&this.renderRow({title:d.a.createElement(c.Fragment,null,b({key:k.a.FEE})," ",d.a.createElement("div",{className:be.a.badge},O),"WETH-PUSD"!==s&&P&&a&&d.a.createElement("div",{className:g()(be.a.badge,be.a.badgeGradient)},"10% OFF"),"PLINK-USDC"===s&&a&&d.a.createElement("div",{className:g()(be.a.badge,be.a.badgeGradient)},"50% OFF")),value:t.isZero()?b({key:k.a.FREE}):d.a.createElement("div",{className:g()({[be.a.red]:t.gte(oe.h)})},t.times(100).toFixed(R),"%"),tooltipConfig:{tooltip:v,top:f,left:-48,stringParams:E}}),e&&this.renderRow({title:b({key:k.a.FEE_AMOUNT}),value:`\u2248 ${e.getNaturalValue().toFixed(R)} ${m?e.market.symbol:l}`}))}renderExpiration(){const e=this.props,t=e.canBypass28DayRequirement,a=e.selectedTradeType,r=e.stringGetter;let n;if(a===oe.v.ISOLATED){const e=re.DateTime.local().plus({days:H.b}),a=Object(ue.c)({expiration:e,stringGetter:r}),i=a.timeString,o=a.unitString;n=t?r({key:k.a.NONE}):`${i} ${o}`}return n&&this.renderRow({title:r({key:k.a.EXPIRY}),value:n,tooltipConfig:{tooltip:"expiration",top:-108,left:-48}})}render(){const e=this.props,t=e.allOrderbookOrders,a=e.allPairOrderData,r=e.baseMarket,n=e.currentPair,i=e.currentTradeData,o=e.isLeverageValid,s=e.quoteMarket,l=e.selectedTradeType,c=e.tradeAmount,u=e.walletData,p=e.walletAddress;if(!o)return d.a.createElement("div",{className:be.a.tradeReceipt},this.renderExpiration());const m=Object(pe.a)({allOrderbookOrders:t,allPairOrderData:a,baseMarket:r,currentPair:n,currentTradeData:i,quoteMarket:s,selectedTradeType:l,tradeAmount:c,walletData:u,walletAddress:p}),b=m.feeAmount,h=m.feePercentage,g=m.isTaker,y=m.isSmallOrder;return d.a.createElement("div",{className:be.a.tradeReceipt},this.renderMarginDeposit(),this.renderTradeAmount(),this.renderExpectedPrice(),this.renderIndexPrice(),this.renderInitialStopPrice(),this.renderWorstPrice(),this.renderLiquidationPrice(),this.renderPriceImpact(),this.renderInterest(),this.renderFeesFields({feeAmount:b,feePercentage:h,isTaker:g,isSmallOrder:y}),this.renderTotal({feeAmount:b,isTaker:g}),this.renderExpiration())}}ge.propTypes={allOrderbookOrders:p.a.object.isRequired,allPairOrderData:p.a.object.isRequired,baseMarket:p.a.object.isRequired,canBypass28DayRequirement:p.a.bool.isRequired,currentPair:p.a.object.isRequired,currentTradeData:p.a.object.isRequired,isLeverageValid:p.a.bool.isRequired,liquidationPrice:p.a.object,indexPriceNatural:p.a.object,priceImpact:p.a.object,quoteMarket:p.a.object.isRequired,selectedTradeType:p.a.string.isRequired,slippage:p.a.object.isRequired,stopSlippage:p.a.object.isRequired,stringGetter:p.a.func.isRequired,tradeAmount:p.a.object,walletData:p.a.object,walletAddress:p.a.string};var ye=Object(f.k)(Object(m.c)(e=>({allOrderbookOrders:Object(V.d)(e),allPairOrderData:Object(_.c)(e),baseMarket:Object(_.d)(e),canBypass28DayRequirement:Object(v.a)(e),currentPair:Object(_.e)(e),currentTradeData:Object(W.b)(e),indexPriceNatural:Object(U.d)(e),quoteMarket:Object(_.h)(e),selectedTradeType:Object(W.f)(e),walletData:Object(ne.b)(e),walletAddress:Object(ie.m)(e)}))(ge)),Oe=a(2153),fe=a(2143),Ee=a(2135),ve=a(2139),_e=a.n(ve);a(2168);function _slicedToArray(e,t){return function _arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function _iterableToArrayLimit(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var a=[],r=!0,n=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(l){n=!0,i=l}finally{try{r||null==s.return||s.return()}finally{if(n)throw i}}return a}(e,t)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}const ke=({label:e,badge:t,children:a,largeText:r,onClick:n})=>{const i=_slicedToArray(Object(c.useState)(!1),2),o=i[0],s=i[1];return d.a.createElement("div",{className:"component-expandable-menu"},d.a.createElement("div",{role:"button",tabIndex:0,className:g()("label",{label__expanded:o,"label__large-text":r}),onClick:()=>{n&&n(),s(!o)}},e,d.a.createElement("div",{className:"right-container"},t&&d.a.createElement("div",{className:g()("badge",{badge__activated:t.isActive})},t.label),d.a.createElement(E.m,null))),d.a.createElement(_e.a,{isOpened:o},d.a.createElement("div",{className:"menu-content"},a)))};ke.propTypes={badge:p.a.shape({label:p.a.string.isRequired,isActive:p.a.bool}),children:p.a.oneOfType([p.a.arrayOf(p.a.node),p.a.node]).isRequired,label:p.a.string.isRequired,largeText:p.a.bool,onClick:p.a.func};var Te=ke,Re=a(55),Pe=a.n(Re),Se=a(97),we=a.n(Se),Ne=a(39),Ie=a.n(Ne),Ce=a(2169),Ae=a.n(Ce);const Le=({className:e,tabConfig:t,selectedTabKey:a,onClick:r})=>d.a.createElement("div",{className:g()(Ae.a.slidingTabs,{[Ae.a.twoTabs]:2===Ie()(t),[Ae.a.threeTabs]:3===Ie()(t)},Ae.a[`selectedIndex--${we()(t,({key:e})=>e===a)}`],e)},Pe()(t,({key:e,label:t})=>d.a.createElement("div",{key:e,role:"button",tabIndex:0,className:g()(Ae.a.tab,{[Ae.a.selected]:a===e}),onClick:()=>r(e)},t)));Le.propTypes={className:p.a.string,tabConfig:p.a.arrayOf(p.a.shape({key:p.a.string.isRequired,label:p.a.string.isRequired})).isRequired,selectedTabKey:p.a.string.isRequired,onClick:p.a.func.isRequired};var je=Le,De=a(190),Me=a(2170),xe=a.n(Me);const qe=({buttonConfig:e,largeText:t,maxSlippage:a,onChangeInput:r,onClickButton:n,slippage:i,slippageInput:o,stringGetter:s,tooltip:l="max-slippage"})=>d.a.createElement(x.c,{grey:t,label:d.a.createElement(M.a,{top:8,left:-48,tooltip:l},s({key:k.a.MAXIMUM_SLIPPAGE})),size:t?x.a.MEDIUM:x.a.SMALL},d.a.createElement("div",{className:xe.a.leverageGrid},Pe()(e,({label:e,value:t})=>d.a.createElement(De.g,{key:t,type:De.a.SECONDARY,selected:""===o&&i.eq(t),onClick:()=>n(t)},e)),d.a.createElement(De.h,{type:De.a.SECONDARY,onChange:e=>{const t=e.slice(0,-1);r(t)},placeholder:s({key:k.a.CUSTOM_INPUT}),selected:""!==o,max:a,value:o,suffix:"%"})));qe.propTypes={buttonConfig:p.a.arrayOf(p.a.shape({label:p.a.string,value:p.a.number})).isRequired,largeText:p.a.bool,maxSlippage:p.a.number,onChangeInput:p.a.func.isRequired,onClickButton:p.a.func.isRequired,slippage:p.a.object,slippageInput:p.a.string,stringGetter:p.a.func.isRequired,tooltip:p.a.string};var Be=Object(f.k)(qe),Fe=a(618),Ue=a(79);function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var a,r,n=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var a,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var We=d.a.createElement("rect",{width:16,height:16,rx:4,fill:"#4280F9"}),Ve=d.a.createElement("path",{d:"M8 13C10.7614 13 13 10.7614 13 8C13 5.23858 10.7614 3 8 3C5.23858 3 3 5.23858 3 8C3 10.7614 5.23858 13 8 13Z",stroke:"white",strokeLinecap:"round",strokeLinejoin:"round"}),Ge=d.a.createElement("path",{d:"M8 5V8L10 9",stroke:"white",strokeLinecap:"round",strokeLinejoin:"round"}),Ke=function SvgGoodTil(e){var t=e.svgRef,a=_objectWithoutProperties(e,["svgRef"]);return d.a.createElement("svg",_extends({width:16,height:16,viewBox:"0 0 16 16",fill:"none",ref:t},a),We,Ve,Ge)},He=d.a.forwardRef(function(e,t){return d.a.createElement(Ke,_extends({svgRef:t},e))});a.p;function fill_or_kill_extends(){return(fill_or_kill_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function fill_or_kill_objectWithoutProperties(e,t){if(null==e)return{};var a,r,n=function fill_or_kill_objectWithoutPropertiesLoose(e,t){if(null==e)return{};var a,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var Ye=d.a.createElement("rect",{width:16,height:16,rx:4,fill:"#FF5757"}),ze=d.a.createElement("path",{d:"M4 9H7V12",stroke:"white",strokeLinecap:"round",strokeLinejoin:"round"}),Ze=d.a.createElement("path",{d:"M12 7H9V4",stroke:"white",strokeLinecap:"round",strokeLinejoin:"round"}),Qe=d.a.createElement("path",{d:"M9 7L12.5 3.5",stroke:"white",strokeLinecap:"round",strokeLinejoin:"round"}),$e=d.a.createElement("path",{d:"M3.5 12.5L7 9",stroke:"white",strokeLinecap:"round",strokeLinejoin:"round"}),Xe=function SvgFillOrKill(e){var t=e.svgRef,a=fill_or_kill_objectWithoutProperties(e,["svgRef"]);return d.a.createElement("svg",fill_or_kill_extends({width:16,height:16,viewBox:"0 0 16 16",fill:"none",ref:t},a),Ye,ze,Ze,Qe,$e)},Je=d.a.forwardRef(function(e,t){return d.a.createElement(Xe,fill_or_kill_extends({svgRef:t},e))}),et=(a.p,a(83)),tt=a(49),at=a(45),rt=a(102),nt=a(249),it=a(21),ot=a(38),st=a(279),lt=a(32);const ct=window.crypto||window.msCrypto;var dt=a(85),ut=a(103),pt=a(25),mt=a(170);a(2171);function trade_box_objectWithoutProperties(e,t){if(null==e)return{};var a,r,n=function trade_box_objectWithoutPropertiesLoose(e,t){if(null==e)return{};var a,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function asyncGeneratorStep(e,t,a,r,n,i,o){try{var s=e[i](o),l=s.value}catch(c){return void a(c)}s.done?t(l):Promise.resolve(l).then(r,n)}function _asyncToGenerator(e){return function(){var t=this,a=arguments;return new Promise(function(r,n){var i=e.apply(t,a);function _next(e){asyncGeneratorStep(i,r,n,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(i,r,n,_next,_throw,"throw",e)}_next(void 0)})}}function ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(a,!0).forEach(function(t){_defineProperty(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const bt=[{labelKey:k.a.DAYS_ABBREVIATED,value:it.g.DAYS},{labelKey:k.a.HOURS_ABBREVIATED,value:it.g.HOURS},{labelKey:k.a.MINS_ABBREVIATED,value:it.g.MINUTES}],ht={leverageInput:"",leverage:new O.a(2),slippageInput:"",slippage:oe.d,stopSlippageInput:"",stopSlippage:oe.e,error:null,loading:!1,didSetExpirationApproval:!1},gt=_objectSpread({},ht,{goodTilDateInput:null,isTrailingStopOrder:!1});class yt extends c.Component{constructor(e){var t;super(e),t=this,this.componentDidUpdate=(e=>{const t=this.props,a=t.selectedTradeType,r=t.currentPair,n=t.currentTradeData,i=n.price,o=n.side,s=n.amount,c=t.setTradeData,d=this.state.leverage,u=e.currentPair,p=e.selectedTradeType;if(r.key!==u.key||r.type!==u.type)this.resetTradeBox();else if(a!==p)this.resetTradeBox({resetTradeData:!1});else{const e=this.getMarketPrice(o,s,d);l()(e,"baseAmount","").toString()!==l()(i,"baseAmount","").toString()&&c({price:this.getMarketPrice(o,s,d)})}}),this.resetTradeBox=(({resetTradeData:e=!0,resetIsTrailing:t=!0}={})=>{const a=this.props.setTradeData;e&&a(oe.c);const r=_objectSpread({},ht);t&&(r.isTrailingStopOrder=!1),this.setState(r)}),this.getMarginAccountBalanceBN=(e=>{const t=this.props.marginAccount;if(!e)return null;const a=Object(rt.b)({account:t,market:e});return a?Object(z.a)(a.wei):null}),this.onClickCta=_asyncToGenerator(function*(){const e=t.props,a=e.allPairOrderData,r=e.baseMarket,n=e.canBypass28DayRequirement,i=e.currentPair,o=e.currentTradeData,s=o.amount,l=o.price,c=o.side,u=o.marginDeposit,p=o.tradeOrderType,m=o.triggerPriceMP,b=o.trailingPercent,h=e.legacySigning,g=e.marginAccount,y=e.openModal,f=e.placeCrossOrder,E=e.placeMarketIsolatedOrder,v=e.quoteMarket,_=e.selectedTradeType,R=e.stringGetter,P=e.walletAddress,S=e.walletType,w=i.type,N=t.state,I=N.leverage,C=N.slippage,A=N.isTrailingStopOrder;t.setState({loading:!0});const L=t.getIsolatedTradeAmount(s,I,c),j=function(){var e=_asyncToGenerator(function*(){try{if(_===oe.v.CROSS){const e=t.getSoloLimitOrderData(),r=e.order,n=e.fillOrKill,o=e.postOnly,s=e.setExpirationOnFill,l=p===oe.u.STOP;yield f({allPairOrderData:a,pair:i,walletType:S,legacySigning:h,order:r,fillOrKill:n,postOnly:o,setExpirationOnFill:s,isStopOrder:l,isTrailingStopOrder:l&&A,triggerPriceMP:(l||A)&&m,trailingPercent:l&&A&&(c===H.f.BUY?b:b.negated())})}else{const e=function getRandomHex(e){const t=ct.getRandomValues(new Uint8Array(e));let a="0x";for(let r=0;r<=t.length-1;r+=1){let e=t[r].toString(16);1===e.length&&(e=`0${e}`),a+=e}return a}(32),o=new O.a(e),d=l.getMarketPriceWithSlippage(C,c),p=Object(ut.a)({allPairOrderData:a,pair:i,baseMarket:r,quoteMarket:v,amount:L,side:c,priceMP:d,walletAddress:P,accountNumber:o,tradeOrderType:oe.u.MARKET,isIsolatedOrder:!0}).order;yield E({order:p,marginDeposit:u,positionSize:s,leverage:I,liquidationPrice:t.getLiquidationPrice(),openPriceMP:d,side:c,baseMarket:r,quoteMarket:v,pair:i,accountNumberBN:o,walletAddress:P,walletType:S,legacySigning:h,setExpiration:!n})}t.resetTradeBox({resetIsTrailing:!1})}catch(e){let a;Object(mt.d)(e)?w===T.d.SPOT?(a=R({key:k.a.SPOT_LOW_COLL_TRY_POST_ONLY}),Object(dt.b)("trade-box","spot-collateralization-threshold-error")):(a=R({key:k.a.LOW_COLL_ORDER_TRY_AGAIN}),Object(dt.b)("trade-box","collateralization-threshold-error")):Object(mt.a)(e)?(a=R({key:k.a.PENDING_FILLS_TRY_AGAIN}),Object(dt.b)("trade-box","pending-fills-error")):Object(mt.f)(e)&&(a=R({key:k.a.SPOT_BALANCE_BELOW_ZERO}),Object(dt.b)("trade-box","spot-balance-below-zero-error"));const r=Object(mt.j)({error:e,walletAddress:P,walletType:S,location:"trade-box:place-order",notifyBugsnag:!a,stringGetter:R}).message;t.setState({loading:!1,error:a||r})}});return function executeOrder(){return e.apply(this,arguments)}}(),D=Object(z.a)(t.getPriceImpact()),M=D.abs().gt(oe.r),x=t.getMarginAccountBalanceBN(r),q=t.getMarginAccountBalanceBN(v);let B=!1;_===oe.v.ISOLATED&&(B=c===H.f.BUY?x.gte(0)&&x.minus(u.baseAmount).lt(0):q.gte(0)&&q.minus(u.baseAmount).lt(0));const F=Object(rt.c)({account:g,market:r}),U=Object(rt.c)({account:g,market:v});let W;_===oe.v.ISOLATED&&(c===H.f.BUY&&x.lt(0)&&(F||n||(W=!0)),c===H.f.SELL&&q.lt(0)&&(U||n||(W=!0)));const V={onClickCta:j,onClickCancel:()=>t.setState({loading:!1}),onClickOutside:()=>t.setState({loading:!1})};if(B){let e="";n||(e=R({key:k.a.EXPIRATION_WARNING})),yield y({type:ot.a.WARNING,props:_objectSpread({title:R({key:k.a.NEGATIVE_BALANCE_WARNING_TITLE}),body:d.a.createElement("span",null,R({key:k.a.NEGATIVE_BALANCE_WARNING_BODY,params:{SYMBOL:c===H.f.BUY?r.symbol:v.symbol}})," ",e," ",R({key:k.a.WARNING_CONFIRM_TRADE})),ctaLabel:R({key:k.a.YES_CONTINUE})},V)})}else if(W){const e=c===H.f.BUY?r.symbol:v.symbol;yield y({type:ot.a.WARNING,props:_objectSpread({title:R({key:k.a.NEW_EXPIRY_WARNING_TITLE}),body:d.a.createElement("span",null,R({key:k.a.NEW_EXPIRY_WARNING_BODY,params:{SYMBOL:e}})," ",R({key:k.a.WARNING_CONFIRM_TRADE})),ctaLabel:R({key:k.a.YES_CONTINUE})},V)})}else M?yield y({type:ot.a.WARNING,props:_objectSpread({title:R({key:k.a.HIGH_PRICE_IMPACT_WARNING_TITLE}),body:d.a.createElement("span",null,R({key:k.a.HIGH_PRICE_IMPACT_WARNING_BODY,params:{PRICE_IMPACT:`${D.times(100).toFixed(2)}%`}})," ",R({key:k.a.WARNING_CONFIRM_TRADE})),ctaLabel:R({key:k.a.YES_CONTINUE})},V)}):yield j();t.setState({loading:!1})}),this.setDydexExpirationApproval=_asyncToGenerator(function*(){const e=t.props,a=e.setExpiryApproval,r=e.stringGetter,n=e.walletAddress,i=e.walletType;t.setState({loading:!0,didSetExpirationApproval:!0});try{yield a({walletAddress:n})}catch(o){const e=Object(mt.j)({error:o,walletAddress:n,walletType:i,location:"trade-box:set-approval",stringGetter:r}).message;t.setState({loading:!1,error:e,didSetExpirationApproval:!1})}t.setState({loading:!1})}),this.getSoloLimitOrderData=(()=>{const e=this.props,t=e.allPairOrderData,a=e.baseMarket,r=e.canBypass28DayRequirement,n=e.currentPair,i=e.currentTradeData,o=i.amount,s=i.price,l=i.side,c=i.tradeOrderType,d=i.limitPrice,u=i.triggerPriceMP,p=i.postOnlyChecked,m=i.timeInForceOption,b=i.trailingPercent,h=e.selectedTradeType,g=e.quoteMarket,y=e.spotAccount,f=e.walletAddress,E=this.state,v=E.leverage,_=E.slippage,k=E.stopSlippage,R=E.goodTilDateInput,P=E.goodTilDateTimescale,S=E.isTrailingStopOrder;if(!o||o.lt(0)||c===oe.u.LIMIT&&!d||c===oe.u.MARKET&&!s||c===oe.u.STOP&&(S?!b||b.isZero():!u))return{};const w=n.type;let N;if(c===oe.u.LIMIT)N=d;else if(c===oe.u.MARKET){const e=s.getMarketPriceWithSlippage(_,l);if(w===T.d.SPOT&&l===H.f.BUY){const t=lt.a.canonicalOrders.getFeeForOrder(Object(z.a)(a.id),o),r=Object(z.a)(Object(rt.b)({account:y,market:g}).wei).div(o.times(t.plus(1)));N=new ce.a(O.a.min(r,e.baseAmount),a,g)}else N=e}else c===oe.u.STOP&&(N=u.getMarketPriceWithSlippage(k,l));const I=h===oe.v.ISOLATED,C=Object(ut.a)({allPairOrderData:t,pair:n,baseMarket:a,quoteMarket:g,amount:I?this.getIsolatedTradeAmount(o,v,l):o,side:l,priceMP:N,triggerPriceMP:u,walletAddress:f,tradeOrderType:c,goodTilDate:new O.a(Object(ut.d)(R,P.value).toSeconds()).integerValue(O.a.ROUND_CEIL),timeInForceOption:m,postOnly:p,decreaseOnly:!1,isTrailingStopOrder:S,isIsolatedOrder:I});return{order:C.order,fillOrKill:C.fillOrKill,postOnly:C.postOnly,setExpirationOnFill:!r}}),this.onChangeCustomLeverage=(e=>{const t=this.props.currentTradeData.side,a=e.slice(0,-1);this.setState({leverageInput:a}),Object(dt.b)("trade-box","change-custom-leverage-button",{leverage:a}),(t===H.f.SELL&&a>0&&a<=4||t===H.f.BUY&&a>1&&a<=5)&&this.updateOrder({leverage:new O.a(e.slice(0,-1))})}),this.onUpdateLeverage=(e=>{this.setState({leverageInput:""}),Object(dt.b)("trade-box","click-leverage-button",{leverage:e}),this.updateOrder({leverage:new O.a(e)})}),this.onUpdateAmountInput=((e,t)=>{const a=this.state.leverage;this.updateOrder({newAmount:e,newAmountDisplayValue:t,leverage:a})}),this.onUpdateLimitPriceInput=((e,t)=>{const a=this.props,r=a.allPairOrderData,n=a.currentPair.orderMarket,i=a.setTradeData,o=a.baseMarket,s=a.quoteMarket,l=a.currentTradeData.tradeOrderType,c=(r[n]||{}).minimumTickSize,d=H.a.ONE.shiftedBy(o.currency.decimals);let u=l;t&&(u=oe.u.LIMIT),i({tradeOrderType:u,limitPrice:t?new ce.a(e.div(d),o,s).getMarketPriceRoundedToTickSize(c):null}),this.setState({error:null})}),this.onUpdateStopPriceInput=((e,t)=>{const a=this.props,r=a.allPairOrderData,n=a.currentPair.orderMarket,i=a.setTradeData,o=a.baseMarket,s=a.quoteMarket,l=(r[n]||{}).minimumTickSize,c=H.a.ONE.shiftedBy(o.currency.decimals);i({triggerPriceMP:t?new ce.a(e.div(c),o,s).getMarketPriceRoundedToTickSize(l):null}),this.setState({error:null})}),this.onUpdateTrailingPercentInput=(e=>{const t=this.props,a=t.allIndexPrices,r=t.allMarkets,n=t.baseMarket,i=t.currentPair,o=t.currentTradeData.side,s=t.quoteMarket,l=t.setTradeData;let c=null;if(e&&!e.isZero()){const t=Object(U.a)({pair:i,allIndexPrices:a,allMarkets:r});c=ce.a.fromNaturalValue(Object(z.a)(t).times(o===H.f.BUY?H.a.ONE.plus(e.shiftedBy(-2)):H.a.ONE.minus(e.shiftedBy(-2))),n,s)}l({trailingPercent:e,triggerPriceMP:c}),this.setState({error:null})}),this.onUpdateGoodTilDate=((e,t)=>{let a=parseInt(e,10);a>it.e&&(a=it.e),this.setState({error:null,goodTilDateInput:a,goodTilDateTimescale:t})}),this.onClickMax=(()=>{const e=this.props,t=e.allMarkets,a=e.allOrderbookOrders,r=e.currentPair,n=e.baseMarket,i=e.quoteMarket,o=e.currentTradeData.side,s=e.selectedTradeType,l=this.state.leverage,c=this.getMarginAccountBalanceBN(n),d=this.getMarginAccountBalanceBN(i);if(n&&i&&c&&d&&s===oe.v.ISOLATED){const e=Object(de.c)({allMarkets:t,allOrderbookOrders:a,currentPair:r,baseMarket:n,quoteMarket:i,side:o,leverage:l,baseMarketBalanceBN:c,quoteMarketBalanceBN:d,collateralization:this.getCollateralization(l,o)});if(e){const t=e.amount,a=e.amountNatural;this.updateOrder({newAmount:t,newAmountDisplayValue:a,leverage:l})}}}),this.onClickBuy=(()=>{const e=this.props.selectedTradeType,t=this.state.leverage;let a=t;e!==oe.v.ISOLATED||!t.lte(1)&&this.getIsLeverageValid()||(a=new O.a(2),this.setState({leverageInput:""})),Object(dt.b)("trade-box","click-long"),this.updateOrder({newSide:H.f.BUY,leverage:a})}),this.onClickSell=(()=>{const e=this.state.leverage;let t=e;!e.gte(3)&&this.getIsLeverageValid()||(t=new O.a(3),this.setState({leverageInput:""})),Object(dt.b)("trade-box","click-short"),this.updateOrder({newSide:H.f.SELL,leverage:t})}),this.updateOrder=(({newAmount:e,newAmountDisplayValue:t,newSide:a,leverage:r})=>{const n=this.props,i=n.baseMarket,s=n.currentTradeData,l=s.amount,c=s.side,d=n.quoteMarket,u=n.selectedTradeType,p=n.setTradeData,m=this.state.amountDisplayValue,b=e||l,h=a||c,g=this.getMarketPrice(h,b,r);if(u===oe.v.CROSS)return p({amount:b,amountDisplayValue:o()(t)?m:t,side:h,price:g,selectedPerpetualLeverage:null}),void this.setState({error:null,leverage:r});const y=h===H.f.SELL?d:i;let O=null;g&&b.gt(H.a.ZERO)&&(O=Object(de.b)({positionCollateralization:this.getCollateralization(r,h),tradeAmount:this.getIsolatedTradeAmount(b,r,h),orderSide:h,orderAmount:b,price:g,marginDepositMarket:y,quoteMarket:d})),p({amount:b,amountDisplayValue:o()(t)?m:t,side:h,price:g,marginDeposit:O,marginDepositMarket:y}),this.setState({error:null,leverage:r})}),this.getIsLeverageValid=(()=>{const e=this.state,t=e.leverageInput,a=e.leverage;return!(""!==t&&!new O.a(t).eq(a))}),this.renderSubmitButton=(e=>{const t=this.props,a=t.areDydexOrdersEnabled,r=t.canBypass28DayRequirement,i=t.currentPair.type,o=t.currentTradeData,s=o.amount,l=o.side,c=o.tradeOrderType,u=o.limitPrice,p=o.triggerPriceMP,m=o.trailingPercent,b=t.isPairOrderDataLoaded,h=t.isUserInUsa,g=t.isWalletReady,y=t.selectedTradeType,O=t.stringGetter,f=t.walletAddress,E=this.state,v=E.loading,_=E.didSetExpirationApproval,R=E.isTrailingStopOrder,P=i===T.d.PERPETUAL,S=i===T.d.MARGIN;let w,N,I=!1;S&&g&&(!1!==a||r||(I=!0));const C=P&&h&&!Object(Y.d)(f);C?(w=n.a,N=O({key:k.a.UNAVAILABLE})):I?(w=this.setDydexExpirationApproval,N=O({key:k.a.ENABLE_DYDX_ORDERS})):(w=this.onClickCta,y===oe.v.ISOLATED?N=l===H.f.BUY?O({key:k.a.OPEN_LONG_POSITION}):O({key:k.a.OPEN_SHORT_POSITION}):c===oe.u.MARKET?N=O({key:k.a.PLACE_MARKET_ORDER}):c===oe.u.LIMIT?N=O({key:k.a.PLACE_LIMIT_ORDER}):c===oe.u.STOP&&(N=O({key:k.a.PLACE_STOP_ORDER})));const A=h&&S&&g&&null===a,L=_&&!a,j=!!e||!s||s.eq(H.a.ZERO)||c===oe.u.LIMIT&&(!u||u.baseAmount.isZero())||c===oe.u.STOP&&(R?!m||m.isZero():!p)||!this.getIsLeverageValid(),D=!g||!I&&j||P&&C;return d.a.createElement(De.c,{className:"cta-button",onClick:w,disabled:!st.a.enablealways&&(D||A||!b),green:l===H.f.BUY,red:l===H.f.SELL,loading:v||A||L||!b},N)}),this.getError=(()=>{const e=this.props,t=e.allIndexPrices,a=e.allMarkets,r=e.allOrderbookOrders,n=e.allOrders,i=e.allPairOrderData,o=e.baseMarket,s=e.currentPair,l=e.currentTradeData,c=e.marginAccount,d=e.perpetualBalances,u=e.perpetualMarkets,p=e.quoteMarket,m=e.selectedTradeType,b=e.spotAccount,h=e.stringGetter,g=this.state,y=g.leverage,O=g.goodTilDateInput,f=g.goodTilDateTimescale,E=l.side,v=l.amount;return Object(mt.i)({account:s.type===T.d.SPOT?b:c,allIndexPrices:t,allMarkets:a,allOrders:n,allPairOrderData:i,baseMarket:o,currentPair:s,currentTradeData:l,goodTilDateInput:O,goodTilDateTimescale:f,oraclePriceNatural:Object(F.a)({allMarkets:a,perpetualMarkets:u,pair:s}),perpetualBalances:d,perpetualMarkets:u,quoteMarket:p,selectedTradeType:m,soloLimitOrderData:this.getSoloLimitOrderData(),stringGetter:h,tradeAmount:m===oe.v.CROSS?v:this.getIsolatedTradeAmount(v,y,E),worstPrice:Object(V.b)({allOrderbookOrders:r,allMarkets:a,pair:s,side:E,amount:v})})});const a=e.stringGetter;this.state=_objectSpread({},gt,{goodTilDateTimescale:{label:a({key:bt[0].labelKey}),value:bt[0].value}})}getIsolatedTradeAmount(e,t,a){return a===H.f.SELL?e:e.times(H.a.ONE.minus(H.a.ONE.div(t)))}getCollateralization(e,t){if(t===H.f.SELL){if(e.lte(H.a.ZERO))throw new Error(`Leverage <= 0 : ${e.toFixed()}`);return e.plus(1).div(e)}if(e.lte(1))throw new Error(`Leverage <= 1 : ${e.toFixed()}`);return e.div(e.minus(1))}getMarketPrice(e,t,a){const r=this.props,n=r.allOrderbookOrders,i=r.allMarkets,o=r.currentPair;let s=t;return r.selectedTradeType===oe.v.ISOLATED&&(s=this.getIsolatedTradeAmount(t,a,e)),Object(V.a)({allOrderbookOrders:n,allMarkets:i,pair:o,side:e,amount:s})}getPriceImpact(){const e=this.props,t=e.currentPair,a=e.allOrderbookOrders,r=e.currentTradeData,n=r.price,i=r.side,o=r.amount,s=r.tradeOrderType,l=Object(V.c)({allOrderbookOrders:a,pair:t,side:i});let c;return s===oe.u.MARKET&&l&&o.gt(H.a.ZERO)&&n&&(c=new O.a(n.baseAmount).minus(l).div(l)),c}getLiquidationPrice(){const e=this.props,t=e.baseMarket,a=e.quoteMarket,r=e.selectedTradeType,n=e.currentTradeData,i=n.price,o=n.side,s=n.amount,l=n.marginDeposit;let c;if(!i||!s.gt(H.a.ZERO))return c;const d=Object(de.a)({tradeType:r,price:i,side:o,amount:s,marginDepositMV:l}),u=d.debtWei,p=d.collateralWei;if(r===oe.v.ISOLATED){let e;o===H.f.BUY?e=u.times(oe.k).div(p).abs():o===H.f.SELL&&(e=p.div(oe.k).div(u).abs()),c=new ce.a(e,t,a)}return c}renderInputs(){const e=this.props,t=e.currentPair,a=t.type,r=t.displayQuoteSymbol,n=t.tickDecimals,i=t.isInversePerpetual,o=e.baseMarket,s=e.quoteMarket,l=e.currentTradeData,u=l.amount,p=l.amountDisplayValue,m=l.side,b=l.tradeOrderType,h=l.limitPrice,g=l.triggerPriceMP,y=l.trailingPercent,f=e.selectedTradeType,E=e.setTradeData,v=e.stringGetter,_=this.state,R=_.leverage,P=_.isTrailingStopOrder,S=this.getMarketPrice(m,u.gt(0)?u:new O.a(.1),R),w=S?`~${S.getNaturalValue().toFixed(n)}`:"-",N=a===T.d.PERPETUAL,I=f===oe.v.ISOLATED,C=f===oe.v.CROSS,A=b===oe.u.MARKET,L=b===oe.u.LIMIT,j=b===oe.u.STOP,D=[{key:oe.u.MARKET,label:v({key:k.a.ORDER_TYPES_MARKET})},{key:oe.u.LIMIT,label:v({key:k.a.ORDER_TYPES_LIMIT})},{key:oe.u.STOP,label:v({key:k.a.ORDER_TYPES_STOP})}];let q;q=I?"position-size":m===H.f.BUY?"amount-buy":"amount-sell";const B=N?L:C&&!j;return d.a.createElement(c.Fragment,null,C&&d.a.createElement(je,{className:"order-type-tabs",tabConfig:D,selectedTabKey:b,onClick:e=>{this.setState({isTrailingStopOrder:!1}),E({tradeOrderType:e,limitPrice:null,triggerPriceMP:null,trailingPercent:null})}}),j&&d.a.createElement(Oe.a,{className:"toggle",leftLabel:v({key:k.a.STANDARD}),rightLabel:d.a.createElement("div",{className:"trailing-stop-toggle"},d.a.createElement("div",{className:"trailing-label"},v({key:k.a.TRAILING_STOP_ABBREVIATED}),d.a.createElement(M.a,{shortDelay:!0,className:"help-icon",top:12,left:-228,tooltip:"trailing-stop"},"?"))),onClickLeft:()=>{this.setState({isTrailingStopOrder:!1}),E({triggerPriceMP:null,trailingPercent:null})},onClickRight:()=>{this.setState({isTrailingStopOrder:!0}),E({triggerPriceMP:null,trailingPercent:null})},isToggledRight:P,grayscale:!0,compact:!0}),d.a.createElement(x.c,{label:d.a.createElement(M.a,{top:8,left:-48,tooltip:q,stringParams:{SYMBOL:o.symbol}},v(I?{key:k.a.POSITION_SIZE}:{key:k.a.AMOUNT}))},d.a.createElement(Fe.b,{autoFillZero:!0,value:p,market:i?_objectSpread({},s,{symbol:r}):o,onChange:this.onUpdateAmountInput,onClickMax:I?this.onClickMax:null})),B&&d.a.createElement(x.c,{label:v({key:k.a.PRICE})},d.a.createElement(Fe.b,{value:h&&h.getNaturalValue().toFixed(n),market:_objectSpread({},s,{symbol:r}),whitePlaceholder:b===oe.u.MARKET,placeholder:b===oe.u.MARKET?w:v({key:k.a.ENTER_PRICE}),onChange:this.onUpdateLimitPriceInput})),N&&A&&d.a.createElement(c.Fragment,null,d.a.createElement("div",{className:"perpetual-slider-divider"},d.a.createElement("div",{className:"perpetual-slider-divider__line"}),d.a.createElement("div",{className:"perpetual-slider-divider__text"},v({key:k.a.OR})),d.a.createElement("div",{className:"perpetual-slider-divider__line"})),d.a.createElement(ae,null)),j&&(P?d.a.createElement(x.c,{label:d.a.createElement(M.a,{top:8,left:-48,tooltip:"trailing-stop"},v({key:k.a.TRAILING_PERCENT}))},d.a.createElement(Fe.b,{suffix:"%",value:y?y.toFixed(K.k):"",placeholder:v({key:k.a.ENTER_PERCENT}),onChange:this.onUpdateTrailingPercentInput})):d.a.createElement(x.c,{label:d.a.createElement(M.a,{top:8,left:-48,tooltip:"stop-price",stringParams:{SYMBOL:o.symbol}},v({key:k.a.STOP_PRICE}))},d.a.createElement(Fe.b,{value:g&&g.getNaturalValue().toFixed(n),market:_objectSpread({},s,{symbol:r}),placeholder:v({key:k.a.ENTER_PRICE}),onChange:this.onUpdateStopPriceInput}))),I&&this.renderLeverageGrid())}renderLeverageGrid(){const e=this.props,t=e.currentTradeData.side,a=e.stringGetter,r=this.state,n=r.leverage,i=r.leverageInput,o=""!==i;return d.a.createElement(x.c,{label:d.a.createElement(M.a,{top:6,left:-48,tooltip:"leverage"},a({key:k.a.LEVERAGE}))},d.a.createElement("div",{className:"leverage-grid"},d.a.createElement(De.g,{type:De.a.SECONDARY,disabled:t===H.f.BUY,selected:!o&&n.eq(1),onClick:()=>this.onUpdateLeverage(1)},"1x"),d.a.createElement(De.g,{type:De.a.SECONDARY,selected:!o&&n.eq(2),onClick:()=>this.onUpdateLeverage(2)},"2x"),d.a.createElement(De.g,{type:De.a.SECONDARY,selected:!o&&n.eq(3),onClick:()=>this.onUpdateLeverage(3)},"3x"),d.a.createElement(De.g,{type:De.a.SECONDARY,selected:!o&&n.eq(4),onClick:()=>this.onUpdateLeverage(4)},"4x"),d.a.createElement(De.g,{type:De.a.SECONDARY,disabled:t===H.f.SELL,selected:!o&&n.eq(5),onClick:()=>this.onUpdateLeverage(5)},"5x"),d.a.createElement(De.h,{type:De.a.SECONDARY,onChange:this.onChangeCustomLeverage,placeholder:a({key:k.a.CUSTOM_INPUT}),selected:o,max:t===H.f.SELL?4:5,value:i,suffix:"X"})))}renderSlippageGrid(){let e,t,a,r,n;this.props.currentTradeData.tradeOrderType===oe.u.STOP?(e="stopSlippage",t="stopSlippageInput",a=oe.e,r=oe.o,n=[{value:.02,label:"2.0%"},{value:.05,label:"5.0%"}]):(e="slippage",t="slippageInput",a=oe.d,r=oe.l,n=[{value:.005,label:"0.5%"},{value:.01,label:"1.0%"}]);const i=this.state,o=i[e],s=i[t];return d.a.createElement(Be,{slippage:o,slippageInput:s,buttonConfig:n,onClickButton:a=>this.setState({[e]:new O.a(a),[t]:""}),onChangeInput:r=>this.setState({[e]:r?new O.a(r).div(100):a,[t]:r}),maxSlippage:r.times(100).toNumber()})}getTimeInForceConfig(){const e=this.props.stringGetter;return[{key:it.p.GOOD_TIL,label:d.a.createElement("div",{className:"time-in-force-option"},d.a.createElement(He,null),e({key:k.a.GOOD_TIL_DATE_ABBREVIATED}))},{key:it.p.FILL_OR_KILL,label:d.a.createElement("div",{className:"time-in-force-option"},d.a.createElement(Je,null),e({key:k.a.FILL_OR_KILL}))}]}renderGoodTilDate(){const e=this.props.stringGetter,t=this.state,a=t.goodTilDateInput,r=t.goodTilDateTimescale;return d.a.createElement(x.c,{label:d.a.createElement(M.a,{top:8,left:-48,tooltip:"good-til-date"},e({key:k.a.GOOD_TIL_DATE}))},d.a.createElement(Fe.c,{inputValue:a,dropdownValue:r,placeholder:H.b,onChange:this.onUpdateGoodTilDate,dropdownConfig:bt.map(t=>{let a=t.labelKey;return _objectSpread({},trade_box_objectWithoutProperties(t,["labelKey"]),{label:e({key:a})})}),max:1e3}))}renderLimitOrderOptions(){const e=this.props,t=e.currentTradeData,a=t.postOnlyChecked,r=t.timeInForceOption,n=e.setTradeData,i=e.stringGetter;return d.a.createElement(c.Fragment,null,d.a.createElement(x.c,{label:d.a.createElement(M.a,{top:8,left:-48,tooltip:"time-in-force"},i({key:k.a.TIME_IN_FORCE}))},d.a.createElement(Ee.b,{compact:!0,selectedItemKey:r,onChangeSelection:e=>n({timeInForceOption:e}),menuItems:this.getTimeInForceConfig()})),r===it.p.GOOD_TIL&&d.a.createElement(c.Fragment,null,this.renderGoodTilDate(),d.a.createElement(x.c,{label:i({key:k.a.TRADE_EXECUTION})},d.a.createElement(fe.a,{className:"post-only-checkbox",checked:a,label:d.a.createElement(c.Fragment,null,d.a.createElement("div",{className:"post-only-checkbox__label"},i({key:k.a.POST_ONLY}),d.a.createElement(M.a,{className:"post-only-checkbox__tooltip",top:8,left:-144,tooltip:"post-only"},"?"))),onClick:()=>n({postOnlyChecked:!a})}))))}renderAdvancedOptions(){const e=this.props,t=e.baseMarket,a=e.currentPair.type,r=e.currentTradeData,n=r.tradeOrderType,i=r.newBaseMarketAccountBalance,o=r.newQuoteMarketAccountBalance,s=e.quoteMarket,l=e.selectedTradeType,u=e.stringGetter,p=this.state.isTrailingStopOrder;let m;switch(n){case oe.u.MARKET:m=this.renderSlippageGrid();break;case oe.u.LIMIT:m=this.renderLimitOrderOptions();break;case oe.u.STOP:m=d.a.createElement(c.Fragment,null,this.renderGoodTilDate(),this.renderSlippageGrid());break;default:m=d.a.createElement("div",null)}const b=this.getMarginAccountBalanceBN(t),h=this.getMarginAccountBalanceBN(s),g=a===T.d.MARGIN;let y;l===oe.v.CROSS&&g&&(y={label:u({key:k.a.MARGIN}),isActive:b.lt(0)||h.lt(0)||i&&i.lt(0)||o&&o.lt(0)});const O=Object(pt.b)(pt.a.HIDE_MARGIN_TRADING_INFO)||!g;return d.a.createElement(Te,{label:u({key:k.a.ADVANCED_OPTIONS}),badge:y,onClick:()=>Object(dt.b)("trade-box","toggle-advanced-options",{selectedTradeType:l,tradeOrderType:n,isTrailingStopOrder:p})},m,l===oe.v.CROSS&&!O&&d.a.createElement(x.c,{label:d.a.createElement("div",{className:"margin-trading-info"},u({key:k.a.MARGIN_TRADING}),d.a.createElement("div",{role:"button",tabIndex:0,className:"dismiss-button",onClick:()=>{Object(pt.d)(pt.a.HIDE_MARGIN_TRADING_INFO,!0)}},u({key:k.a.DISMISS})))},d.a.createElement("div",{className:"info-subsection"},u({key:k.a.MARGIN_TRADING_DESCRIPTION}))))}renderReceipt(){const e=this.props,t=e.currentTradeData,a=t.side,r=t.amount,n=e.selectedTradeType,i=this.state,o=i.leverage,s=i.slippage,l=i.stopSlippage,c=n===oe.v.CROSS?r:this.getIsolatedTradeAmount(r,o,a);return d.a.createElement(ye,{priceImpact:this.getPriceImpact(),tradeAmount:c,isLeverageValid:this.getIsLeverageValid(),liquidationPrice:this.getLiquidationPrice(),slippage:s,stopSlippage:l})}render(){const e=this.props,t=e.currentPair.type,a=e.currentTradeData.side,r=e.selectedTradeType,n=e.stringGetter,i=e.walletAddress,o=this.state.error;let s=n({key:k.a.LONG}),l=n({key:k.a.SHORT});r===oe.v.CROSS&&(s=n({key:k.a.BUY}),l=n({key:k.a.SELL}));const c=o||this.getError();return d.a.createElement("div",{className:g()("component-trade-box",{"component-trade-box__top-border-radius":t!==T.d.MARGIN})},d.a.createElement("div",{className:"order-section"},!Object(Y.d)(i)&&d.a.createElement(w,null),d.a.createElement(Oe.a,{className:"toggle",leftLabel:s,rightLabel:l,onClickLeft:this.onClickBuy,onClickRight:this.onClickSell,isToggledRight:a===H.f.SELL}),this.renderInputs(),this.renderAdvancedOptions(),this.renderReceipt(),this.renderSubmitButton(c)),d.a.createElement("div",{className:"error-section"},c?d.a.createElement(Ue.c,null,c):null))}}yt.propTypes={allIndexPrices:p.a.object.isRequired,allMarkets:p.a.array.isRequired,allOrderbookOrders:p.a.object.isRequired,allOrders:p.a.array.isRequired,allPairOrderData:p.a.object.isRequired,areDydexOrdersEnabled:p.a.bool,baseMarket:p.a.object.isRequired,canBypass28DayRequirement:p.a.bool.isRequired,currentPair:p.a.object.isRequired,currentTradeData:p.a.object.isRequired,isPairOrderDataLoaded:p.a.bool.isRequired,isUserInUsa:p.a.bool.isRequired,isWalletReady:p.a.bool.isRequired,legacySigning:p.a.bool,marginAccount:p.a.object,openModal:p.a.func.isRequired,perpetualBalances:p.a.object.isRequired,perpetualMarkets:p.a.object.isRequired,placeCrossOrder:p.a.func.isRequired,placeMarketIsolatedOrder:p.a.func.isRequired,quoteMarket:p.a.object.isRequired,selectedTradeType:p.a.string.isRequired,setExpiryApproval:p.a.func.isRequired,setTradeData:p.a.func.isRequired,spotAccount:p.a.object,stringGetter:p.a.func.isRequired,walletAddress:p.a.string,walletType:p.a.string};var Ot=Object(f.k)(Object(m.c)(e=>({allIndexPrices:Object(U.b)(e),allMarkets:Object(F.d)(e),allOrderbookOrders:Object(V.d)(e),allOrders:Object(nt.k)(e),allPairOrderData:Object(_.c)(e),areDydexOrdersEnabled:Object(nt.f)(e),baseMarket:Object(_.d)(e),canBypass28DayRequirement:Object(v.a)(e),currentPair:Object(_.e)(e),currentTradeData:Object(W.b)(e),isPairOrderDataLoaded:Object(_.f)(e),isUserInUsa:Object(v.c)(e),isWalletReady:Object(ie.w)(e),legacySigning:Object(ie.i)(e),marginAccount:Object(rt.r)(e),perpetualBalances:Object(B.e)(e),perpetualMarkets:Object(B.g)(e),quoteMarket:Object(_.h)(e),selectedTradeType:Object(W.f)(e),spotAccount:Object(rt.v)(e),walletAddress:Object(ie.m)(e),walletType:Object(ie.q)(e)}),e=>Object(b.b)({placeMarketIsolatedOrder:et.d,openModal:at.c,setExpiryApproval:tt.d,setTradeData:q.e,placeCrossOrder:et.c},e))(yt));a.d(t,"a",function(){return Ot})},2173:function(e,t,a){"use strict";var r=a(0),n=a.n(r),i=a(1),o=a.n(i),s=a(52),l=a(19),c=a.n(l),d=a(2128),u=a(55),p=a.n(u),m=a(148),b=a(31),h=a(44),g=a(2137),y=a(24),O=a(61),f=a(2),E=a(10),v=a(2163),_=a.n(v);const k=({currentPair:{key:e,type:t},marketStats:a,onClick:r})=>{let i;return t===y.d.SPOT?i=y.g:t===y.d.MARGIN?i=y.e:t===y.d.PERPETUAL&&(i=y.f),n.a.createElement("div",{className:_.a.dropdown},p()(i,i=>{const o=i.key,s=i.path,l=i.marketName,u=i.baseSymbol,p=i.quoteSymbol,h=i.tickDecimals,v=Object(g.b)({allMarketStats:a,pair:i}),k=v&&v.open&&v.last&&"0"!==v.open?Object(E.a)(v.last).minus(v.open).div(v.open).times(100):f.a.ZERO;return n.a.createElement(m.a,{key:o,to:s,onClick:r},n.a.createElement("div",{className:_.a.pairEntry},n.a.createElement("div",{className:_.a.marketNameIcon},n.a.createElement("div",{className:c()(_.a.marketIcon,{[_.a.marketIconPerp]:t===y.d.PERPETUAL})},n.a.createElement(d.a,{symbol:u})),l),n.a.createElement("div",{className:_.a.priceContainer},v&&v.last&&`${Object(E.a)(v.last).toFixed(h)} ${p}`),n.a.createElement("div",{className:_.a.changeContainer},k?n.a.createElement("div",{className:c()(_.a.percentChange,{[_.a.green]:k.gte(0),[_.a.red]:k.lt(0)})},`${k.gte(0)?"+":""}${k.toFixed(O.k)}%`):n.a.createElement("div",null),e===o?n.a.createElement("div",{className:_.a.selectedEntryCheck},n.a.createElement(b.p,null)):n.a.createElement("div",null))))}))};k.propTypes={currentPair:o.a.object.isRequired,marketStats:o.a.array,onClick:o.a.func};var T=Object(s.c)(e=>({currentPair:Object(h.e)(e),marketStats:Object(g.i)(e)}))(k),R=a(2164),P=a.n(R);class S extends r.Component{constructor(e){super(e),this.onClickOutside=(e=>{this.marketDropdownRef.current.contains(e.target)||this.setState({showMarketDropdown:!1})}),this.toggleMarketDropdown=(()=>this.setState(({showMarketDropdown:e})=>({showMarketDropdown:!e}))),this.state={showMarketDropdown:!1},this.marketDropdownRef=Object(r.createRef)()}componentWillMount(){window.addEventListener("click",this.onClickOutside)}componentWillUnmount(){window.removeEventListener("click",this.onClickOutside)}render(){const e=this.props.currentPair,t=e.key,a=e.type,r=this.state.showMarketDropdown,i=y.b[t],o=i.baseSymbol,s=i.displayQuoteSymbol;return n.a.createElement("div",{className:P.a.selectMarket},n.a.createElement("div",{className:P.a.selectMarketButtonDropdown},n.a.createElement("div",{role:"button",tabIndex:0,className:c()(P.a.selectMarketButton,{[P.a.buttonDropdownOpen]:r}),ref:this.marketDropdownRef,onClick:this.toggleMarketDropdown},o,n.a.createElement("div",{className:c()(P.a.marketIcon,{[P.a.marketIconPerp]:a===y.d.PERPETUAL})},n.a.createElement(d.a,{symbol:o})),s),r&&n.a.createElement(T,null)))}}S.propTypes={currentPair:o.a.object.isRequired};var w=Object(s.c)(e=>({currentPair:Object(h.e)(e)}))(S);a.d(t,"a",function(){return w})},2177:function(e,t,a){"use strict";a.d(t,"a",function(){return m});var r=a(0),n=a.n(r);function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var a,r,n=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var a,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var i=n.a.createElement("path",{d:"M0 4C0 1.79086 1.79086 0 4 0H12C14.2091 0 16 1.79086 16 4V12C16 14.2091 14.2091 16 12 16H4C1.79086 16 0 14.2091 0 12V4Z",fill:"#4280F9"}),o=n.a.createElement("path",{d:"M6.5 5H11.5",stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),s=n.a.createElement("path",{d:"M6.5 8H11.5",stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),l=n.a.createElement("path",{d:"M6.5 11H11.5",stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),c=n.a.createElement("path",{d:"M4 5H4.00556",stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),d=n.a.createElement("path",{d:"M4 8H4.00556",stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),u=n.a.createElement("path",{d:"M4 11H4.00556",stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),p=function SvgList(e){var t=e.svgRef,a=_objectWithoutProperties(e,["svgRef"]);return n.a.createElement("svg",_extends({width:16,height:16,viewBox:"0 0 16 16",fill:"none",ref:t},a),i,o,s,l,c,d,u)},m=n.a.forwardRef(function(e,t){return n.a.createElement(p,_extends({svgRef:t},e))});a.p},2178:function(e,t,a){"use strict";a.d(t,"a",function(){return d});var r=a(0),n=a.n(r);function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var a,r,n=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var a,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var i=n.a.createElement("path",{d:"M0 4C0 1.79086 1.79086 0 4 0H12C14.2091 0 16 1.79086 16 4V12C16 14.2091 14.2091 16 12 16H4C1.79086 16 0 14.2091 0 12V4Z",fill:"#4280F9"}),o=n.a.createElement("path",{d:"M12 13.3334V6.66669",stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),s=n.a.createElement("path",{d:"M8 13.3334V2.66669",stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),l=n.a.createElement("path",{d:"M4 13.3333V9.33331",stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),c=function SvgMarketOrder(e){var t=e.svgRef,a=_objectWithoutProperties(e,["svgRef"]);return n.a.createElement("svg",_extends({width:16,height:16,viewBox:"0 0 16 16",fill:"none",ref:t},a),i,o,s,l)},d=n.a.forwardRef(function(e,t){return n.a.createElement(c,_extends({svgRef:t},e))});a.p},2179:function(e,t,a){"use strict";a.d(t,"a",function(){return c});var r=a(0),n=a.n(r);function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var a,r,n=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var a,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var i=n.a.createElement("path",{d:"M0 4C0 1.79086 1.79086 0 4 0H12C14.2091 0 16 1.79086 16 4V12C16 14.2091 14.2091 16 12 16H4C1.79086 16 0 14.2091 0 12V4Z",fill:"#4280F9"}),o=n.a.createElement("path",{d:"M12 12L8 8L4 12",stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),s=n.a.createElement("line",{x1:4.75,y1:4.25,x2:11.25,y2:4.25,stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),l=function SvgLimitOrder(e){var t=e.svgRef,a=_objectWithoutProperties(e,["svgRef"]);return n.a.createElement("svg",_extends({width:16,height:16,viewBox:"0 0 16 16",fill:"none",ref:t},a),i,o,s)},c=n.a.forwardRef(function(e,t){return n.a.createElement(l,_extends({svgRef:t},e))});a.p},2180:function(e,t,a){"use strict";a.d(t,"a",function(){return c});var r=a(0),n=a.n(r);function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var a,r,n=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var a,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var i=n.a.createElement("path",{d:"M0 4C0 1.79086 1.79086 0 4 0H12C14.2091 0 16 1.79086 16 4V12C16 14.2091 14.2091 16 12 16H4C1.79086 16 0 14.2091 0 12V4Z",fill:"#4280F9"}),o=n.a.createElement("path",{d:"M8 13C10.7614 13 13 10.7614 13 8C13 5.23858 10.7614 3 8 3C5.23858 3 3 5.23858 3 8C3 10.7614 5.23858 13 8 13Z",stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),s=n.a.createElement("path",{d:"M10 6H6V10H10V6Z",stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),l=function SvgStopOrder(e){var t=e.svgRef,a=_objectWithoutProperties(e,["svgRef"]);return n.a.createElement("svg",_extends({width:16,height:16,viewBox:"0 0 16 16",fill:"none",ref:t},a),i,o,s)},c=n.a.forwardRef(function(e,t){return n.a.createElement(l,_extends({svgRef:t},e))});a.p},2185:function(e,t,a){},2186:function(e,t,a){e.exports={dropdownMenuWrapper:"_3y66tpIF12GHRR2mN0Xqna",menuOpen:"_27QFgE5ivnJPJ79QD0t3hi",dropdownMenuButton:"AWIpunDrAzBSDnXwzR9pW",menu:"_1Xc6tvQPITyIvr0Mw6IL-X",menuItem:"_1SbvxWwyvOWN0vtGlf2vo9",menuItemTag:"DOrtEXR8tIosJRIAamV9W",selectedItem:"_28N0AA2L5JMZO1a4Gl0WqQ",menuItemIcon:"_3rSc_a18XzDxuQcaLPcJiq",iconUsesStroke:"_16ycs9_msbXY7N7igyYL4W",iconUsesFill:"AbIn0-VhlDPXlMt7aJYcP",menuOnlyDetail:"_3hP6DJCkzruwWMsFEJxYCM"}},2193:function(e,t,a){},2194:function(e,t,a){},2195:function(e,t,a){},2196:function(e,t,a){!function(a){"use strict";var n=function e(){return(n=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function o(e,t){var a=n({},e);for(var r in t)"object"!=typeof e[r]||null===e[r]||Array.isArray(e[r])?void 0!==t[r]&&(a[r]=t[r]):a[r]=o(e[r],t[r]);return a}var i={mobile:{disabled_features:["left_toolbar","header_widget","timeframes_toolbar","edit_buttons_in_legend","context_menus","control_bar","border_around_the_chart"],enabled_features:[]}},s={width:800,height:500,interval:"1D",timezone:"Etc/UTC",container_id:"",library_path:"",locale:"en",widgetbar:{details:!1,watchlist:!1,watchlist_settings:{default_symbols:[]}},overrides:{"mainSeriesProperties.showCountdown":!1},studies_overrides:{},trading_customization:{position:{},order:{}},brokerConfig:{configFlags:{}},fullscreen:!1,autosize:!1,disabled_features:[],enabled_features:[],debug:!1,logo:{},time_frames:[{text:"5y",resolution:"1W"},{text:"1y",resolution:"1W"},{text:"6m",resolution:"120"},{text:"3m",resolution:"60"},{text:"1m",resolution:"30"},{text:"5d",resolution:"5"},{text:"1d",resolution:"1"}],client_id:"0",user_id:"0",charts_storage_api_version:"1.0",favorites:{intervals:[],chartTypes:[]}};function r(){return"16.000 (internal id df1e6a68 @ 2020-07-17 13:51:54.948951)"}var l=function(){function t(e){if(this._id="tradingview_"+(1048576*(1+Math.random())|0).toString(16).substring(1),this._ready=!1,this._readyHandlers=[],this._onWindowResize=this._autoResizeChart.bind(this),!e.datafeed)throw new Error("Datafeed is not defined");if(this._options=o(s,e),e.preset){var t=i[e.preset];t?(void 0!==this._options.disabled_features?this._options.disabled_features=this._options.disabled_features.concat(t.disabled_features):this._options.disabled_features=t.disabled_features,void 0!==this._options.enabled_features?this._options.enabled_features=this._options.enabled_features.concat(t.enabled_features):this._options.enabled_features=t.enabled_features):console.warn("Unknown preset: `"+e.preset+"`")}"Dark"===this._options.theme&&void 0===this._options.loading_screen&&(this._options.loading_screen={backgroundColor:"#131722"}),this._create()}return t.prototype.onChartReady=function(e){this._ready?e.call(this):this._readyHandlers.push(e)},t.prototype.headerReady=function(){var e=this;return this._innerWindowLoaded.then(function(){return e._innerWindow().headerReady()})},t.prototype.onGrayedObjectClicked=function(e){this._innerAPI().onGrayedObjectClicked(e)},t.prototype.onShortcut=function(e,t){this._innerWindow().createShortcutAction(e,t)},t.prototype.subscribe=function(e,t){this._innerAPI().subscribe(e,t)},t.prototype.unsubscribe=function(e,t){this._innerAPI().unsubscribe(e,t)},t.prototype.chart=function(e){return this._innerAPI().chart(e)},t.prototype.setLanguage=function(e){this.remove(),this._options.locale=e,this._create()},t.prototype.setSymbol=function(e,t,a){this._innerAPI().changeSymbol(e,t,a)},t.prototype.remove=function(){window.removeEventListener("resize",this._onWindowResize),this._readyHandlers.splice(0,this._readyHandlers.length),delete window[this._id],this._iFrame.parentNode&&this._iFrame.parentNode.removeChild(this._iFrame)},t.prototype.closePopupsAndDialogs=function(){this._innerAPI().closePopupsAndDialogs()},t.prototype.selectLineTool=function(e){this._innerAPI().selectLineTool(e)},t.prototype.selectedLineTool=function(){return this._innerAPI().selectedLineTool()},t.prototype.save=function(e){this._innerAPI().saveChart(e)},t.prototype.load=function(e,t){this._innerAPI().loadChart({json:e,extendedData:t})},t.prototype.getSavedCharts=function(e){this._innerAPI().getSavedCharts(e)},t.prototype.loadChartFromServer=function(e){this._innerAPI().loadChartFromServer(e)},t.prototype.saveChartToServer=function(e,t,a){this._innerAPI().saveChartToServer(e,t,a)},t.prototype.removeChartFromServer=function(e,t){this._innerAPI().removeChartFromServer(e,t)},t.prototype.onContextMenu=function(e){this._innerAPI().onContextMenu(e)},t.prototype.createButton=function(e){return this._innerWindow().createButton(e)},t.prototype.showNoticeDialog=function(e){this._innerAPI().showNoticeDialog(e)},t.prototype.showConfirmDialog=function(e){this._innerAPI().showConfirmDialog(e)},t.prototype.showLoadChartDialog=function(){this._innerAPI().showLoadChartDialog()},t.prototype.showSaveAsChartDialog=function(){this._innerAPI().showSaveAsChartDialog()},t.prototype.symbolInterval=function(){return this._innerAPI().getSymbolInterval()},t.prototype.mainSeriesPriceFormatter=function(){return this._innerAPI().mainSeriesPriceFormatter()},t.prototype.getIntervals=function(){return this._innerAPI().getIntervals()},t.prototype.getStudiesList=function(){return this._innerAPI().getStudiesList()},t.prototype.addCustomCSSFile=function(e){this._innerWindow().addCustomCSSFile(e)},t.prototype.applyOverrides=function(e){this._options=o(this._options,{overrides:e}),this._innerWindow().applyOverrides(e)},t.prototype.applyStudiesOverrides=function(e){this._innerWindow().applyStudiesOverrides(e)},t.prototype.watchList=function(){return this._innerAPI().watchlist()},t.prototype.activeChart=function(){return this._innerAPI().activeChart()},t.prototype.chartsCount=function(){return this._innerAPI().chartsCount()},t.prototype.layout=function(){return this._innerAPI().layout()},t.prototype.setLayout=function(e){this._innerAPI().setLayout(e)},t.prototype.layoutName=function(){return this._innerAPI().layoutName()},t.prototype.changeTheme=function(e,t){this._innerWindow().changeTheme(e,t)},t.prototype.getTheme=function(){return this._innerWindow().getTheme()},t.prototype.takeScreenshot=function(){this._innerAPI().takeScreenshot()},t.prototype.lockAllDrawingTools=function(){return this._innerAPI().lockAllDrawingTools()},t.prototype.hideAllDrawingTools=function(){return this._innerAPI().hideAllDrawingTools()},t.prototype.drawOnAllCharts=function(e){this._innerAPI().drawOnAllCharts(e)},t.prototype.magnetEnabled=function(){return this._innerAPI().magnetEnabled()},t.prototype.magnetMode=function(){return this._innerAPI().magnetMode()},t.prototype.undoRedoState=function(){return this._innerAPI().undoRedoState()},t.prototype.setIntervalLinkingEnabled=function(e){this._innerAPI().setIntervalLinkingEnabled(e)},t.prototype.setTimeFrame=function(e){this._innerAPI().setTimeFrame(e)},t.prototype.symbolSync=function(){return this._innerAPI().symbolSync()},t.prototype.intervalSync=function(){return this._innerAPI().intervalSync()},t.prototype.crosshairSync=function(){return this._innerAPI().crosshairSync()},t.prototype.timeSync=function(){return this._innerAPI().timeSync()},t.prototype._innerAPI=function(){return this._innerWindow().tradingViewApi},t.prototype._innerWindow=function(){return this._iFrame.contentWindow},t.prototype._autoResizeChart=function(){this._options.fullscreen&&(this._iFrame.style.height=window.innerHeight+"px")},t.prototype._create=function(){var e=this,t=this._render(),a=document.getElementById(this._options.container_id);if(null===a)throw new Error("There is no such element - #"+this._options.container_id);a.innerHTML=t,this._iFrame=a.querySelector("#"+this._id);var r=this._iFrame;(this._options.autosize||this._options.fullscreen)&&(r.style.width="100%",this._options.fullscreen||(r.style.height="100%")),window.addEventListener("resize",this._onWindowResize),this._onWindowResize(),this._innerWindowLoaded=new Promise(function(e){!function retry(){r&&r.contentWindow&&void 0!==r.contentWindow.widgetReady?e():setTimeout(retry,100)}()}),this._innerWindowLoaded.then(function(){e._innerWindow().widgetReady(function(){e._ready=!0;for(var t=0,a=e._readyHandlers;t<a.length;t++){var r=a[t];try{r.call(e)}catch(e){console.error(e)}}e._innerWindow().initializationFinished()})})},t.prototype._render=function(){var e=window;if(e[this._id]={datafeed:this._options.datafeed,customFormatters:this._options.custom_formatters||this._options.customFormatters,brokerFactory:this._options.broker_factory||this._options.brokerFactory,overrides:this._options.overrides,studiesOverrides:this._options.studies_overrides,tradingCustomization:this._options.trading_customization,disabledFeatures:this._options.disabled_features,enabledFeatures:this._options.enabled_features,brokerConfig:this._options.broker_config||this._options.brokerConfig,restConfig:this._options.restConfig,favorites:this._options.favorites,logo:this._options.logo,numeric_formatting:this._options.numeric_formatting,rss_news_feed:this._options.rss_news_feed,newsProvider:this._options.news_provider,loadLastChart:this._options.load_last_chart,saveLoadAdapter:this._options.save_load_adapter,loading_screen:this._options.loading_screen,settingsAdapter:this._options.settings_adapter,getCustomIndicators:this._options.custom_indicators_getter},this._options.saved_data)e[this._id].chartContent={json:this._options.saved_data};else if(!Boolean(this._options.symbol))throw new Error("Symbol is not defined");var t=(this._options.library_path||"")+"static/"+encodeURIComponent(this._options.locale)+"-tv-chart.df1e6a6876536645d8cf.html#symbol="+encodeURIComponent(this._options.symbol||"")+"&interval="+encodeURIComponent(this._options.interval)+(this._options.timeframe?"&timeframe="+encodeURIComponent(this._options.timeframe):"")+(this._options.toolbar_bg?"&toolbarbg="+encodeURIComponent(this._options.toolbar_bg.replace("#","")):"")+(this._options.studies_access?"&studiesAccess="+encodeURIComponent(JSON.stringify(this._options.studies_access)):"")+"&widgetbar="+encodeURIComponent(JSON.stringify(this._options.widgetbar))+(this._options.drawings_access?"&drawingsAccess="+encodeURIComponent(JSON.stringify(this._options.drawings_access)):"")+"&timeFrames="+encodeURIComponent(JSON.stringify(this._options.time_frames))+"&locale="+encodeURIComponent(this._options.locale)+"&uid="+encodeURIComponent(this._id)+"&clientId="+encodeURIComponent(String(this._options.client_id))+"&userId="+encodeURIComponent(String(this._options.user_id))+(this._options.charts_storage_url?"&chartsStorageUrl="+encodeURIComponent(this._options.charts_storage_url):"")+(this._options.charts_storage_api_version?"&chartsStorageVer="+encodeURIComponent(this._options.charts_storage_api_version):"")+(this._options.custom_css_url?"&customCSS="+encodeURIComponent(this._options.custom_css_url):"")+(this._options.auto_save_delay?"&autoSaveDelay="+encodeURIComponent(String(this._options.auto_save_delay)):"")+"&debug="+encodeURIComponent(String(this._options.debug))+(this._options.snapshot_url?"&snapshotUrl="+encodeURIComponent(this._options.snapshot_url):"")+(this._options.timezone?"&timezone="+encodeURIComponent(this._options.timezone):"")+(this._options.study_count_limit?"&studyCountLimit="+encodeURIComponent(String(this._options.study_count_limit)):"")+(this._options.symbol_search_request_delay?"&ssreqdelay="+encodeURIComponent(String(this._options.symbol_search_request_delay)):"")+(this._options.theme?"&theme="+encodeURIComponent(String(this._options.theme)):"");return'<iframe id="'+this._id+'" name="'+this._id+'"  src="'+t+'"'+(this._options.autosize||this._options.fullscreen?"":' width="'+this._options.width+'" height="'+this._options.height+'"')+' frameborder="0" allowTransparency="true" scrolling="no" allowfullscreen style="display:block;"></iframe>'},t}();window.TradingView=window.TradingView||{},window.TradingView.version=r,a.version=r,a.widget=l,Object.defineProperty(a,"__esModule",{value:!0})}(t)},2197:function(e,t,a){e.exports={chartContainer:"sqGbqwSR6KCkYy07INYMD",chartSidebar:"_1wP87eq42J2Ebxq45nFORp",button:"_2ukXyebcoi-5EhBXbpGIzX",resolutionButton:"WKF63lX3KaIpoahiH_8X3"}},2198:function(e,t,a){},2199:function(e,t,a){e.exports={infoItem:"_2FeuvaksRu2m9vRudRQ0Fk",label:"_2T54nwj4rkOv4vybXbeldm"}},2200:function(e,t,a){},2202:function(e,t,a){e.exports={typeCell:"_2avqTeEtkQ60SmQ0f_A__z",typeCellText:"_38JJZl0YRm80WFvV7l0_9u",uppercaseMobile:"_2efOsCFF3WCjxy8VnGhtFE",etherscanLink:"_3T-bDfemeooLD3FO2SSCQN"}},2203:function(e,t,a){e.exports={headerTooltip:"JzTU_56Z8O75-AzNqkZmT",typeCell:"_3x5ahjnac_-Z3NlNQr_tzH",typeCellText:"XKt5CopXogD3bPle1nDxB",direction:"KMcauQm_7xLQGOFRkprh_",red:"_2Wt2drTgFePNslGFCqasqL",mobileFullWidth:"_3R0TaDRjPWQz9nj0rzsgGG",uppercase:"_3gQhn0WAddJG8sd3596Rmd"}},2204:function(e,t,a){},2207:function(e,t,a){"use strict";var r=a(118),n=a.n(r),i=a(486),o=a.n(i),s=a(39),l=a.n(s),c=a(90),d=a.n(c),u=a(4),p=a.n(u),m=a(17),b=a.n(m),h=a(55),g=a.n(h),y=a(0),O=a.n(y),f=a(1),E=a.n(f),v=a(52),_=a(60),k=a(34),T=a(19),R=a.n(T),P=a(31),S=a(2196),w=a(25),N=a(99),I=a(166),C=a(5),A=a(2197),L=a.n(A);function ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const j={[C.b.EN]:"en",[C.b.ZH_CN]:"zh",[C.b.JA]:"ja",[C.b.RU]:"ru"},D={container_id:"tv-price-chart",library_path:"/tv-charting-library/",custom_css_url:"/tv-charting-library/custom.css",locale:"en",autosize:!0,time_frames:[],disabled_features:["header_widget","compare_symbol","symbol_search_hot_key","left_toolbar","symbol_info","go_to_date","border_around_the_chart","timeframes_toolbar","edit_buttons_in_legend"],enabled_features:["remove_library_container_border","hide_last_na_study_output","dont_show_boolean_study_arguments"],overrides:{"paneProperties.background":"#1c1d23","paneProperties.horzGridProperties.color":"#272A31","paneProperties.vertGridProperties.color":"#272A31","paneProperties.crossHairProperties.style":1,"paneProperties.legendProperties.showBarChange":!1,"mainSeriesProperties.style":1,"mainSeriesProperties.candleStyle.upColor":"#29A935","mainSeriesProperties.candleStyle.borderUpColor":"#29A935","mainSeriesProperties.candleStyle.wickUpColor":"#29A935","mainSeriesProperties.candleStyle.downColor":"#ff5757","mainSeriesProperties.candleStyle.borderDownColor":"#ff5757","mainSeriesProperties.candleStyle.wickDownColor":"#ff5757","mainSeriesProperties.statusViewStyle.symbolTextSource":"ticker","mainSeriesProperties.showPriceLine":!1,"scalesProperties.textColor":"#ffffff","scalesProperties.backgroundColor":"#17181a","scalesProperties.showSeriesLastValue":!1},studies_overrides:{"volume.volume.color.0":"#ff5757","volume.volume.color.1":"#29a935","volume.volume ma.visible":!1,"relative strength index.plot.color":"#4280f9","relative strength index.plot.linewidth":2,"relative strength index.hlines background.color":"#134A9F"},loading_screen:{backgroundColor:"#17181a",foregroundColor:"#17181a"}},M=({startedAt:e,open:t,close:a,low:r,high:n,baseTokenVolume:i})=>({time:e,open:parseFloat(t,10),close:parseFloat(a,10),high:parseFloat(n,10),low:parseFloat(r,10),volume:Math.ceil(i)}),x=e=>g()(e,M);class q extends y.Component{constructor(e){super(e),this.onInsertIndicatorClick=(()=>{this.chartWidget&&this.chartWidgetReady&&this.chartWidget.activeChart().executeActionById("insertIndicator")}),this.getHistorySlice=((e,t,a)=>{const r=this.props.data,n=1e3*e,i=1e3*t,o=[];return!a&&!d()(r)&&i<r[0].startedAt?o:(b()(r,e=>{e.startedAt>=n&&o.push(M(e))}),o)}),this.chartWidget=null,this.chartWidgetReady=!1,this.chartLocale="en",this.oldResolution=null,this.subscriberCallback=null,this.resetCacheCallback=null,this.state={chartDataCallbacks:[]}}getSavedResolution(e){if(!e)return null;let t;return b()(e.charts,e=>{if(b()(e.panes,e=>{if(b()(e.sources,e=>{if("MainSeries"===e.type)return t=p()(e,"state.interval"),!1}),t)return!1}),t)return!1}),t}setVisibleRange(e){const t=I.b[e].defaultTimeframe;this.chartWidget.activeChart().setVisibleRange({from:k.DateTime.local().minus(t).toSeconds(),to:k.DateTime.local().toSeconds()},{percentRightMargin:10})}create(){const e=this.props,t=e.resolution,a=e.pair,r=e.onClickResolution,n=JSON.parse(Object(w.b)(w.a.TRADING_VIEW_CHART_CONFIG)),i=this.getSavedResolution(n);i&&i!==t&&r();const o=new S.widget(function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(a,!0).forEach(function(t){_defineProperty(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({symbol:a.chartInfo.tradingViewSymbol,interval:i||t,datafeed:this.getDataFeed()},D,{saved_data:n}));o.onChartReady(()=>{const e=this.props.onChartReady;e&&e(),o.activeChart().setTimezone(k.DateTime.local().get("zoneName")),this.setVisibleRange(i||t),o.subscribe("onAutoSaveNeeded",()=>o.save(e=>Object(w.d)(w.a.TRADING_VIEW_CHART_CONFIG,JSON.stringify(e)))),this.chartWidgetReady=!0}),this.chartWidget=o}destroy(){this.chartWidget&&this.chartWidgetReady&&(this.chartWidget.remove(),this.chartWidget=null)}componentDidMount(){this.create()}componentWillUnmount(){this.destroy()}componentDidUpdate(e){const t=e.data,a=e.resolution,r=e.pair,n=this.props,i=n.data,o=n.resolution,s=n.pair,c=n.isDataLoading,u=n.selectedLocale,p=this.state.chartDataCallbacks;d()(p)||c||(b()(p,e=>e()),this.setState({chartDataCallbacks:[]})),this.chartWidget&&this.chartWidgetReady&&(r.key!==s.key&&(this.resetLocalChartData(),this.chartWidget.activeChart().setSymbol(s.chartInfo.tradingViewSymbol)),a!==o&&(this.resetLocalChartData(),this.oldResolution=a,this.chartWidget.activeChart().setResolution(o,()=>this.setVisibleRange(o))),this.chartLocale!==u&&(this.chartWidget.setLanguage(j[u]),this.chartLocale=u),d()(t)||d()(i)||l()(t)===l()(i)||!this.resetCacheCallback||(this.resetCacheCallback(),this.chartWidget.activeChart().resetData()),this.updateChartData())}resetLocalChartData(){this.oldResolution=null,this.subscriberCallback=null,this.resetCacheCallback=null,this.setState({chartDataCallbacks:[]})}updateChartData(){const e=this.props.data;this.subscriberCallback&&!d()(e)&&this.subscriberCallback(x([o()(e)])[0])}getPair(){return this.props.pair}getDataFeed(){const e=n()(this.getPair().chartInfo.supportedResolutions);return{onReady:t=>t({supports_search:!1,supports_time:!0,supports_marks:!1,supported_resolutions:e}),searchSymbols:(e,t,a,r)=>{r([])},resolveSymbol:(t,a)=>{const r=this.getPair().chartInfo,n=r.tradingViewName;a({name:n,ticker:n,description:n,type:"crypto",has_intraday:!0,has_daily:!0,minmov:1,pricescale:r.priceScale||100,session:"24x7",intraday_multipliers:["60"],supported_resolutions:e})},getBars:(e,t,a,r,n,i,o)=>{const s=this.props,l=s.pair,c=s.setEarliestRequestedCandle,u=()=>{const e=this.getHistorySlice(a,r,o);n(e,{noData:d()(e)})};if(!o){if(t===I.d["1H"])return void n([],{noData:!0});c({pairKey:l.key,time:a})}this.setState(e=>({chartDataCallbacks:[...e.chartDataCallbacks,u]}))},subscribeBars:(e,t,a,r,n)=>{this.subscriberCallback=a,this.resetCacheCallback=n},unsubscribeBars:()=>{this.subscriberCallback=null,this.resetCacheCallback=null}}}render(){const e=this.props,t=e.onClickResolution,a=e.resolution;return O.a.createElement("div",{className:L.a.chartContainer},O.a.createElement("div",{className:L.a.chartSidebar},O.a.createElement("div",{role:"button",tabIndex:0,className:R()(L.a.button,L.a.resolutionButton),onClick:t},I.c[a]),O.a.createElement("div",{role:"button",tabIndex:0,className:L.a.button,onClick:this.onInsertIndicatorClick},O.a.createElement(P.K,null))),O.a.createElement("div",{id:"tv-price-chart"}))}}q.propTypes={data:E.a.array,isDataLoading:E.a.bool,onChartReady:E.a.func,onClickResolution:E.a.func,pair:E.a.object.isRequired,resolution:E.a.string.isRequired,selectedLocale:E.a.string.isRequired,setEarliestRequestedCandle:E.a.func.isRequired};var B=Object(v.c)(null,e=>Object(_.b)({setEarliestRequestedCandle:N.b},e))(q),F=a(40),U=a(2205),W=a(74),V=a(41),G=a(44),K=a(132),H=a(94),Y=a(10),z=a(46),Z=a(2);const Q=Object(V.a)([G.e,K.g,K.i,e=>e.depthChart.orderZoom,G.d,G.h],(e,t,a,r,n,i)=>{if(!t||!a)return[];const o=e.isInversePerpetual,s=[];t.slice(0,r).reduce((e,t)=>{const a=Object(z.a)(t.amount,(o?i:n).currency.decimals),r=new H.a(t.price,n,i).getNaturalValue(),l=e.totalVolume.plus(o?a.div(r):a),c=e.totalCost.plus(o?a:a.times(r));return s.push({price:r.toNumber(),volume:l.toNumber(),cost:c.toNumber(),buyVolume:l.toNumber()}),{totalVolume:l,totalCost:c}},{totalVolume:Z.a.ZERO,totalCost:Z.a.ZERO});const l=[];a.slice(0,r).reduce((e,t)=>{const a=Object(z.a)(t.amount,(o?i:n).currency.decimals),r=new H.a(t.price,n,i).getNaturalValue(),s=e.totalVolume.plus(o?a.div(r):a),c=e.totalCost.plus(o?a:a.times(r));return l.push({price:r.toNumber(),volume:s.toNumber(),cost:c.toNumber(),sellVolume:s.toNumber()}),{totalVolume:s,totalCost:c}},{totalVolume:Z.a.ZERO,totalCost:Z.a.ZERO});const c=$(s,(e,t)=>e>t,e=>e-.01,e=>e+.01),d=$(l,(e,t)=>e<t,e=>e+.01,e=>e-.01);return c.concat(d).sort((e,t)=>{if(Object(Y.a)(e.price).eq(t.price)){if(e.buyVolume&&t.buyVolume)return Object(Y.a)(e.volume).lt(t.volume)?1:-1;if(e.sellVolume&&t.sellVolume)return Object(Y.a)(e.volume).lt(t.volume)?-1:1}return Object(Y.a)(e.price).lt(t.price)?-1:1})}),$=(e,t,a,r)=>e;var X=a(146),J=a(8),ee=a(61);a(2198);const te="#57FF5F",ae="#2A5C2E",re="#FF5757",ne="#5D2A2C";class ie extends y.Component{constructor(){super(),this.mouseMove=(e=>{this.lastEvent=e}),this.renderTooltip=(({payload:e,label:t})=>{const a=this.props.stringGetter;if(!e||!e[0])return null;let r,n;e[0].payload.buyVolume?(r=Z.f.SELL,n=a({key:C.a.SELL})):(r=Z.f.BUY,n=a({key:C.a.BUY}));const i=R()("depth-chart-tooltip",{buy:r===Z.f.BUY,sell:r===Z.f.SELL}),o=Object(Y.a)(e[0].payload.volume),s=Object(Y.a)(t).toFormat(ee.n),l=Object(Y.a)(e[0].payload.cost).toFormat(ee.n);return O.a.createElement("div",{className:i},O.a.createElement("div",{className:"left-bar"}),O.a.createElement("div",{className:"data"},O.a.createElement("div",{className:"price"},s),O.a.createElement("div",{className:"line-item"},O.a.createElement("div",{className:"label"},n),O.a.createElement("div",{className:"value"},o.toFormat(ee.n))),O.a.createElement("div",{className:"line-item"},O.a.createElement("div",{className:"label"},a({key:C.a.CHARTS_COST})),O.a.createElement("div",{className:"value"},l))))}),this.renderActiveDot=(e=>{const t=e.cx,a=e.cy,r=e.dataKey;if(!a)return null;let n;return"buyVolume"===r?n="#57ff5f":"sellVolume"===r&&(n="#ff5757"),O.a.createElement("g",null,O.a.createElement("circle",{cx:t,cy:a,r:3,stroke:"white",strokeWidth:4}),O.a.createElement("circle",{cx:t,cy:a,r:2,stroke:n,strokeWidth:4}),O.a.createElement("line",{x1:t,x2:t,y1:a,y2:p()(this.componentRef,"current.clientHeight",0)-66,stroke:n,strokeWidth:1,strokeDasharray:"6 4"}))}),this.chartRef=O.a.createRef(),this.componentRef=O.a.createRef(),this.lastEvent=null}componentDidMount(){window.addEventListener("mousemove",this.mouseMove)}componentWillUnmount(){window.removeEventListener("mousemove",this.mouseMove)}componentDidUpdate(){this.chartRef.current&&this.lastEvent&&this.chartRef.current.handleMouseMove(this.lastEvent)}renderChart(){const e=this.props,t=e.data,a=e.midMarketPrice,r=e.currentPair.tickDecimals,n=e.pageViewport;let i;t.length>0&&(i=Math.min(a-t[0].price,t[t.length-1].price-a));const o=p()(this.componentRef,"current.clientHeight",.56*n.height-60)-32;let s;return s=n.isMobile?n.width:n.width>=J.a?Math.max(n.width-3*Z.e-32,J.c-3*Z.e-32):Math.max(n.width-2*Z.e-16,J.c-2*Z.e-16),O.a.createElement("div",{className:"chart"},O.a.createElement(U.b,{ref:this.chartRef,width:s,height:o,data:t,onMouseMove:this.onMouseMove,margin:{top:0,right:0,bottom:0,left:0}},O.a.createElement("defs",null,O.a.createElement("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",gradientUnits:"userSpaceOnUse"},O.a.createElement("stop",{offset:"40%",stopColor:"#1c1d23"}),O.a.createElement("stop",{offset:"41%",stopColor:"#403f4c"}))),O.a.createElement(U.e,{x:a,stroke:"url(#gradient)",strokWidth:1,ifOverflow:"extendDomain",viewBox:{height:10}}),O.a.createElement(U.a,{strokeWidth:2,dot:!1,activeDot:this.renderActiveDot,stroke:te,fill:ae,fillOpacity:1,dataKey:"buyVolume",isAnimationActive:!1,type:"step",connectNulls:!0}),O.a.createElement(U.a,{strokeWidth:2,activeDot:this.renderActiveDot,dot:!1,stroke:re,fill:ne,fillOpacity:1,dataKey:"sellVolume",isAnimationActive:!1,type:"step",connectNulls:!0}),O.a.createElement(U.f,{content:this.renderTooltip,isAnimationActive:!1,cursor:!1}),O.a.createElement(U.h,{dataKey:"volume",axisLine:!1,mirror:!0,tickSize:4,minTickGap:10,yAxisId:0}),O.a.createElement(U.h,{dataKey:"volume",axisLine:!1,mirror:!0,tickSize:4,orientation:"right",minTickGap:10,yAxisId:1}),O.a.createElement(U.g,{dataKey:"price",axisLine:!1,tickFormatter:e=>e.toFixed(r),domain:[()=>a-i,()=>a+i],type:"number",tickSize:4,tickCount:20,interval:1})))}render(){const e=this.props.data;return O.a.createElement("div",{className:"component-depth-chart",ref:this.componentRef},e.length?this.renderChart():null)}}ie.propTypes={currentPair:E.a.object.isRequired,data:E.a.array.isRequired,midMarketPrice:E.a.number,pageViewport:E.a.object.isRequired,stringGetter:E.a.func.isRequired};var oe=Object(W.k)(Object(F.g)(Object(v.c)(e=>({currentPair:Object(G.e)(e),data:Q(e),midMarketPrice:Object(K.h)(e),pageViewport:Object(X.d)(e)}))(ie))),se=a(230),le=a.n(se),ce=a(2199),de=a.n(ce);const ue=({label:e,value:t})=>O.a.createElement("div",{className:de.a.infoItem},O.a.createElement("div",{className:de.a.label},e),t);ue.propTypes={label:E.a.string.isRequired,value:E.a.oneOfType([E.a.arrayOf(E.a.node),E.a.node,E.a.string]).isRequired};var pe=ue,me=a(384),be=a(2123),he=a(626),ge=a(86),ye=a(209),Oe=a(26),fe=a(296),Ee=a(2137),ve=a(343),_e=a(2122),ke=a(194),Te=a(171),Re=a(24),Pe=a(57),Se=a(191),we=a(85);a(2200);const Ne=16,Ie=-32;class Ce extends y.Component{constructor(e){super(e),this.canZoomOut=(()=>{return this.props.zoom+10<=50}),this.canZoomIn=(()=>{return this.props.zoom-10>=10}),this.onClickZoomOut=(()=>{const e=this.props,t=e.zoom;(0,e.zoomDepthChart)(Math.min(50,t+10))}),this.onClickZoomIn=(()=>{const e=this.props,t=e.zoom;(0,e.zoomDepthChart)(Math.max(10,t-10))}),this.onChartReady=(()=>{this.setState({isPriceChartReady:!0})}),this.onClickResolution=(()=>{const e=this.props,t=e.allChartData,a=e.currentPair,r=e.setPriceChartResolution,n=Object(ye.f)({allChartData:t,pairKey:a.key});I.f[0]===n?r({pairKey:a.key,resolution:I.f[1]}):r({pairKey:a.key,resolution:I.f[0]})}),this.state={isPriceChartReady:!1}}renderHeader(){const e=this.props,t=e.allMarkets,a=e.currentPair,r=e.indexPriceNatural,n=e.marketStats,i=e.pageViewport,o=e.perpetualMarkets,s=e.price,l=e.setShowDepthChart,c=e.showDepthChart,d=e.stringGetter,u=a.baseSymbol,p=a.quoteSymbol,m=a.displayQuoteSymbol,b=a.displaySettlementSymbol,h=a.tickDecimals,f=a.type,E=a.isInversePerpetual,v=a.orderMarket,_=f===Re.d.PERPETUAL,k=Object(Oe.c)({allMarkets:t,symbol:u}),T=Object(Oe.c)({allMarkets:t,symbol:p}),S=Object(Oe.a)({allMarkets:t,perpetualMarkets:o,pair:a});let w;_&&(w=o[v]);const N=n&&n.baseVolume&&Object(Y.a)(n.baseVolume),I=E?m:u,A=N?Object(Se.a)(N.toNumber(),2):{},L=A.num,j=A.suffix,D=N?L:"-",M=N?`${j} ${I}`:` ${I}`,x=[],q=i.width>J.f&&i.width<=J.c;if((_?i.width>J.e&&!q:!q)&&x.push({value:O.a.createElement(le.a,{thousandSeparator:!0,displayType:"text",value:S&&S.isFinite()?S.toFixed(h):"-",suffix:` ${m}`}),label:d({key:C.a.ORACLE_PRICE_ABBREVIATED}),tooltip:{key:"oracle-price",left:Ie,top:Ne}}),_&&q||x.push({value:O.a.createElement(le.a,{thousandSeparator:!0,displayType:"text",value:r?r.toFixed(h):"-",suffix:` ${m}`}),label:d({key:C.a.INDEX_PRICE_ABBREVIATED}),tooltip:{key:"index-price",left:Ie,top:Ne}}),(_?i.width>=J.a:i.width>J.e&&!q)&&x.push({value:_?O.a.createElement(le.a,{thousandSeparator:!0,displayType:"text",value:D,suffix:M}):O.a.createElement(y.Fragment,null,O.a.createElement("div",{className:"desktop"},O.a.createElement(le.a,{thousandSeparator:!0,displayType:"text",value:N?N.toFixed(ee.n):"-",suffix:` ${u}`})),O.a.createElement("div",{className:"tablet"},O.a.createElement(le.a,{thousandSeparator:!0,displayType:"text",value:D,suffix:M}))),label:d({key:C.a.CHARTS_24H_VOL})}),_&&(x.push({value:O.a.createElement("span",null,w?`${Object(Y.a)(w.fundingRate).times(100).times(Te.c).toFixed(ee.m)}%`:"-"),label:d({key:C.a.FUNDING_RATE_SHORT}),tooltip:{key:"perpetual-funding-rate",left:Ie,top:Ne,stringParams:{SYMBOL:b}}}),i.width>=J.b)){const e=w&&w.openInterest&&new Pe.a(w.openInterest,E?T:k).getNaturalValue();if(e){const t=N?Object(Se.a)(e.toNumber(),2):{},a=t.num,r=t.suffix,n=N?a:"-",i=N?`${r} ${I}`:` ${I}`;x.push({value:O.a.createElement(le.a,{thousandSeparator:!0,displayType:"text",value:n,suffix:i}),label:d({key:C.a.OPEN_INTEREST_SHORT})})}}return O.a.createElement("div",{className:"price-depth-header"},O.a.createElement("div",{className:"highlight-container"},O.a.createElement("div",{className:"highlight-wrapper"},`${s?s.toFixed(h):"-"} ${m}`,O.a.createElement("div",{className:"highlight-label"},d({key:C.a.MID_MARKET_PRICE}))),O.a.createElement("div",{className:"highlight-arrow"})),O.a.createElement("div",{className:"info-items-container"},g()(x,({value:e,label:t,tooltip:a})=>a?O.a.createElement(be.a,{key:t,className:"info-item-tooltip",tooltip:a.key,left:a.left,top:a.top,stringParams:a.stringParams,condition:i.width>J.f},O.a.createElement(pe,{key:t,value:e,label:t})):O.a.createElement(pe,{key:t,value:e,label:t}))),O.a.createElement("div",{className:"button-container"},O.a.createElement("div",{tabIndex:0,role:"button",onClick:()=>{Object(we.b)("price-depth-charts","click-depth"),l(!0)},className:R()("button","button__depth-chart",{button__selected:c})},O.a.createElement(P.w,null)),O.a.createElement("div",{tabIndex:0,role:"button",onClick:()=>{Object(we.b)("price-depth-charts","click-candle"),l(!1)},className:R()("button","button__candle-chart",{button__selected:!c})},O.a.createElement(P.l,null))))}render(){const e=this.props,t=e.allChartData,a=e.currentPair,r=e.hasFetchedDataAtLeastOnce,n=e.price,i=e.selectedLocale,o=e.showDepthChart,s=this.state.isPriceChartReady,l=Object(ye.f)({allChartData:t,pairKey:a.key}),c=Object(ye.e)({allChartData:t,pairKey:a.key}),u=Object(ye.b)({allChartData:t,pairKey:a.key});return O.a.createElement("div",{className:"price-depth-charts"},this.renderHeader(),!s&&O.a.createElement("div",{className:"loading-spinner"},O.a.createElement(me.a,null)),(!d()(u)||r)&&O.a.createElement(y.Fragment,null,o&&O.a.createElement("div",{className:"depth-chart-controls"},O.a.createElement("div",{className:R()("minus",{disabled:!this.canZoomOut()}),onClick:this.onClickZoomOut,role:"button",tabIndex:0},O.a.createElement(P.U,null)),O.a.createElement("div",{className:R()("plus",{disabled:!this.canZoomIn()}),onClick:this.onClickZoomIn,role:"button",tabIndex:0},O.a.createElement(P.db,null))),O.a.createElement("div",{className:R()("price-depth-content-container",{"price-depth-content-container__chart-ready":s})},o&&O.a.createElement("div",{className:"depth-chart-container"},O.a.createElement(oe,null)),O.a.createElement("div",{className:"price-chart-container"},O.a.createElement(B,{data:u,isDataLoading:c,price:n,onChartReady:this.onChartReady,onClickResolution:this.onClickResolution,pair:a,resolution:l,selectedLocale:i})))))}}Ce.propTypes={allChartData:E.a.object.isRequired,allMarkets:E.a.array.isRequired,currentPair:E.a.object.isRequired,hasFetchedDataAtLeastOnce:E.a.bool.isRequired,indexPriceNatural:E.a.object,marketStats:E.a.object,pageViewport:E.a.object.isRequired,perpetualMarkets:E.a.object.isRequired,price:E.a.number,selectedLocale:E.a.string.isRequired,setPriceChartResolution:E.a.func.isRequired,setShowDepthChart:E.a.func.isRequired,showDepthChart:E.a.bool.isRequired,stringGetter:E.a.func.isRequired,zoom:E.a.number.isRequired,zoomDepthChart:E.a.func.isRequired};var Ae=Object(W.k)(Object(v.c)(e=>({allChartData:Object(ye.g)(e),allMarkets:Object(Oe.d)(e),currentPair:Object(G.e)(e),hasFetchedDataAtLeastOnce:Object(ye.i)(e),indexPriceNatural:Object(_e.d)(e),marketStats:Object(Ee.h)(e),pageViewport:Object(X.d)(e),perpetualMarkets:Object(fe.g)(e),price:Object(K.h)(e),selectedLocale:Object(ke.c)(e),showDepthChart:Object(ve.g)(e),zoom:Object(K.k)(e)}),e=>({setPriceChartResolution:(t,a)=>e(Object(N.d)(t,a)),setShowDepthChart:t=>e(Object(ge.c)(t)),zoomDepthChart:t=>e(Object(he.a)(t))}))(Ce));a.d(t,"a",function(){return Ae})},2208:function(e,t,a){"use strict";var r=a(118),n=a.n(r),i=a(0),o=a.n(i),s=a(1),l=a.n(s),c=a(19),d=a.n(c),u=a(74),p=a(486),m=a.n(p),b=a(2126),h=a.n(b),g=a(489),y=a.n(g),O=a(113),f=a.n(O),E=a(234),v=a.n(E),_=a(6),k=a.n(_),T=a(37),R=a.n(T),P=a(17),S=a.n(P),w=a(67),N=a.n(w),I=a(135),C=a.n(I),A=a(39),L=a.n(A),j=a(90),D=a.n(j),M=a(52),x=a(60),q=a(9),B=a.n(q),F=a(230),U=a.n(F),W=a(384),V=a(86),G=a(132),K=a(44),H=a(249),Y=a(343),z=a(146),Z=a(11),Q=a(5),$=a(27),X=a(61),J=a(94),ee=a(57),te=a(46);a(2193);function ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(a,!0).forEach(function(t){_defineProperty(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const ae={updatedOrderIds:[],animatingRemovedOrders:[],hasCenteredOrderbook:!1},re=400,ne=24;class ie extends i.Component{constructor(){super(),this.centerOrderbook=(()=>{if(this.containerRef.current&&this.bookRef.current){const t=this.bookRef.current.clientHeight;if(t>0){this.setState({hasCenteredOrderbook:!0});try{const a=t/2-this.containerRef.current.clientHeight/2+ne/2;this.containerRef.current.scrollTo({top:a})}catch(e){}}}}),this.renderOrder=((e,t,a)=>{const r=this.props,n=r.baseMarket,i=r.quoteMarket,s=r.setTradeData,l=r.setTradeType,c=r.selectedTradeType,u=r.userOrders,p=r.currentPair,m=p.tickDecimals,b=p.largeOrderSize,h=p.isInversePerpetual,g=this.state.updatedOrderIds,y=t.id,O=t.price,f=t.amount,E=t.removed;if(t.isBlank)return o.a.createElement("div",{className:"order order__blank",key:a+e});const v=new ee.a(f,h?i:n).getNaturalValue(),_=new J.a(O,n,i).getNaturalValue().dp(X.n,a===$.e.BUY?B.a.ROUND_DOWN:B.a.ROUND_UP);let T;const P=R()(u,e=>e.id===y);if(P){const e=P.baseAmount,t=P.filledAmount;T=Object(te.a)(new B.a(e).minus(t),(h?i:n).currency.decimals)}const S=d()("order",{order__updated:k()(g,y),order__removed:E});return o.a.createElement("div",{className:S,role:"button",tabIndex:0,key:a+e,onClick:()=>{c!==Z.v.CROSS&&l({tradeType:Z.v.CROSS,isLimitPricePrefill:!0}),s({tradeOrderType:Z.u.LIMIT,limitPrice:J.a.fromNaturalValue(_,n,i)})}},o.a.createElement("div",{className:"bar",style:{width:`${Math.min(Z.m,Math.max(1,Z.m*(v/b)))}px`}}),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col col__size"},o.a.createElement(U.a,{thousandSeparator:!0,displayType:"text",value:v.toFixed(h?X.p:X.n)})),o.a.createElement("div",{className:"col col__price"},_.toFixed(m)),o.a.createElement("div",{className:d()("col col__my-size",{col__grey:!T})},T?T.toFixed(X.n):"-")))}),this.state=_objectSpread({},ae),this.containerRef=o.a.createRef(),this.bookRef=o.a.createRef()}componentDidMount(){this.centerOrderbook()}componentDidUpdate(e){const t=this.state,a=t.updatedOrderIds,r=t.hasCenteredOrderbook,n=this.props,i=n.baseMarket,o=n.quoteMarket,s=n.buyOrders,l=n.sellOrders,c=n.orderbookVersion,d=n.recentlyRemovedOrders,u=n.currentPair,p=n.pageViewport,m=e.baseMarket,b=e.quoteMarket,h=e.orderbookVersion,g=e.pageViewport,y=e.buyOrders;if((m.id!==i.id||b.id!==o.id||!r||D()(y)&&L()(s)||p.height!==g.height||p.width!==g.width)&&this.centerOrderbook(),h!==c){0===c&&this.setState(_objectSpread({},ae));const e=C()([...s,...l],(e,{id:t,version:a})=>(0!==a&&a===c&&e.push(t),e),[]);if(d.length>0){const e=Date.now();this.setState(({animatingRemovedOrders:t})=>{const a=N()(t,({animatedAt:t})=>e-t<re);return S()(d,t=>{t.pairId===u.orderMarket&&a.push(_objectSpread({},t,{animatedAt:e}))}),{animatingRemovedOrders:a}}),setTimeout(()=>{this.containerRef&&this.setState(({animatingRemovedOrders:e})=>({animatingRemovedOrders:N()(e,e=>!R()(d,t=>e.id===t.id))}))},re)}e.length>0&&(this.setState({updatedOrderIds:[...a,...e]}),setTimeout(()=>{if(this.containerRef){const t=this.state.updatedOrderIds;this.setState({updatedOrderIds:N()(t,t=>!k()(e,t))})}},re))}}renderOrders(e,t){if(!e)return null;const a=[];return v()(e,(e,r)=>a.push(this.renderOrder(r,e,t))),a}renderBook(){const e=this.props,t=e.baseMarket,a=e.buyOrders,r=e.currentPair.displayQuoteSymbol,n=e.quoteMarket,s=e.sellOrders,l=e.spread,c=e.stringGetter,d=this.state.animatingRemovedOrders;let u,p=[...a],b=[...s];if(S()(d,e=>{e.side===$.e.BUY?p.push(_objectSpread({},e,{removed:!0})):b.push(_objectSpread({},e,{removed:!0}))}),a.length!==p.length&&(p=f()(p,e=>parseFloat(e.price,10))),s.length!==b.length&&(b=f()(b,e=>parseFloat(e.price,10))),p.length>Z.n&&(p=y()(p,Math.max(p.length-Z.n,0),p.length)),b.length>Z.n)b=y()(b,0,Z.n);else{const e=Z.n-b.length;h()(e,()=>{b.push({isBlank:!0})})}if(!D()(a)&&!D()(s)){const e=new J.a(m()(a).price,t,n).getNaturalValue(),r=new J.a(s[0].price,t,n).getNaturalValue();u=e.minus(r).div(e)}return o.a.createElement(i.Fragment,null,o.a.createElement("div",{className:"orderbook-header"},o.a.createElement("div",{className:"col col__size"},c({key:Q.a.ORDERBOOK_ORDER_SIZE})),o.a.createElement("div",{className:"col col__price"},`${c({key:Q.a.PRICE})} (${r})`),o.a.createElement("div",{className:"col col__my-size"},c({key:Q.a.ORDERBOOK_MY_ORDER_SIZE}))),o.a.createElement("div",{className:"book-scroll-container",ref:this.containerRef},o.a.createElement("div",{className:"book-scroll-dummy",ref:this.bookRef}),o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"orders sell"},this.renderOrders(b,$.e.SELL)),o.a.createElement("div",{className:"spread"},o.a.createElement("div",{className:"col col__size"},c({key:Q.a.ORDERBOOK_SPREAD})),o.a.createElement("div",{className:"col col__price"},l||"-"),o.a.createElement("div",{className:"col col__my-size"},u?`${u.times(100).abs().toFixed(X.k)}%`:"-")),o.a.createElement("div",{className:"orders buy"},this.renderOrders(p,$.e.BUY)))))}render(){const e=this.props,t=e.buyOrders,a=e.isOrderbookLoaded;return o.a.createElement("div",{className:"component-orderbook"},a&&!D()(t)?this.renderBook():o.a.createElement(W.a,{className:"loading"}))}}ie.propTypes={baseMarket:l.a.object.isRequired,buyOrders:l.a.array,currentPair:l.a.object.isRequired,isOrderbookLoaded:l.a.bool.isRequired,orderbookVersion:l.a.number,pageViewport:l.a.object.isRequired,quoteMarket:l.a.object.isRequired,recentlyRemovedOrders:l.a.array.isRequired,selectedTradeType:l.a.string.isRequired,sellOrders:l.a.array,setTradeData:l.a.func.isRequired,setTradeType:l.a.func.isRequired,spread:l.a.string,stringGetter:l.a.func.isRequired,userOrders:l.a.array.isRequired},ie.defaultProps={buyOrders:[],sellOrders:[]};var oe=Object(u.k)(Object(M.c)(e=>({baseMarket:Object(K.d)(e),buyOrders:Object(G.f)(e),currentPair:Object(K.e)(e),isOrderbookLoaded:Object(G.l)(e),orderbookVersion:Object(G.n)(e),pageViewport:Object(z.d)(e),quoteMarket:Object(K.h)(e),recentlyRemovedOrders:Object(G.o)(e),selectedTradeType:Object(Y.f)(e),sellOrders:Object(G.i)(e),spread:Object(G.j)(e),userOrders:Object(H.e)(e)}),e=>Object(x.b)({setTradeData:V.e,setTradeType:V.f},e))(ie)),se=a(34),le=a(21);a(2194);const ce=400;class de extends i.Component{constructor(e){super(e),this.renderTrade=(e=>{const t=this.props,a=t.baseMarket,r=t.quoteMarket,n=t.currentPair,i=n.tickDecimals,s=n.largeTradeSize,l=n.isInversePerpetual,c=this.state.updatedTradeIds,u=e.uuid,p=e.price,m=e.side,b=e.amount,h=e.createdAt;if(!m)return null;const g=Object(te.a)(b,(l?r:a).currency.decimals),y=new J.a(p,a,r);return o.a.createElement("div",{key:u,className:d()("trade",{trade__buy:m===le.k.BUY,trade__sell:m===le.k.SELL,trade__updated:k()(c,u)})},o.a.createElement("div",{className:d()("bar",{bar__green:m===le.k.BUY,bar__red:m===le.k.SELL}),style:{width:`${Math.min(Z.m,Math.max(1,g/s*24))}px`}}),o.a.createElement("div",{className:"details"},o.a.createElement("div",{className:"detail size"},o.a.createElement(U.a,{thousandSeparator:!0,displayType:"text",value:g.toFixed(l?X.p:X.n)})),o.a.createElement("div",{className:d()("detail","price",{price__green:m===le.k.BUY,price__red:m===le.k.SELL})},y.getNaturalValue().toFixed(i)),o.a.createElement("div",{className:"detail time"},se.DateTime.fromISO(h).toFormat("HH:mm:ss"))))}),this.state={updatedTradeIds:[]}}componentDidUpdate(e){const t=e.liveTradesVersion,a=this.props,r=a.trades,n=a.liveTradesVersion,i=this.state.updatedTradeIds;if(0===n)i.length>0&&this.setState({updatedTradeIds:[]});else if(t!==n){const e=[];S()(r,({uuid:t,version:a})=>a===n&&(e.push(t),!0)),e.length>0&&(this.setState(t=>({updatedTradeIds:[...t.updatedTradeIds,...e]})),setTimeout(()=>{const t=this.state.updatedTradeIds;this.setState({updatedTradeIds:N()(t,t=>!k()(e,t))})},ce))}}renderTrades(e){return e?e.map(this.renderTrade):null}render(){const e=this.props,t=e.currentPair.displayQuoteSymbol,a=e.stringGetter,r=e.trades,n=N()(r,e=>se.DateTime.fromISO(e.createdAt).diffNow("hours").hours>-24);return o.a.createElement("div",{className:"component-live-trades"},o.a.createElement("div",{className:"header"},o.a.createElement("div",{className:"title"},a({key:Q.a.ORDERBOOK_ORDER_SIZE})),o.a.createElement("div",{className:"title price"},`${a({key:Q.a.PRICE})} (${t})`),o.a.createElement("div",{className:"title time"},a({key:Q.a.TIME}))),L()(r)>0?o.a.createElement("div",{className:"trades"},this.renderTrades(n)):o.a.createElement(W.a,{className:"loading"}))}}de.propTypes={baseMarket:l.a.object.isRequired,currentPair:l.a.object.isRequired,liveTradesVersion:l.a.number,quoteMarket:l.a.object.isRequired,stringGetter:l.a.func.isRequired,trades:l.a.array};var ue=Object(u.k)(Object(M.c)(e=>({baseMarket:Object(K.d)(e),currentPair:Object(K.e)(e),liveTradesVersion:Object(H.h)(e),quoteMarket:Object(K.h)(e),trades:Object(H.g)(e)}))(de)),pe=a(85);a(2195);const me={ORDERS:"ORDERS",TRADES:"TRADES"};class be extends i.Component{constructor(e){super(e),this.state={selectedTab:me.ORDERS}}renderTabs(){const e=this.props.stringGetter,t=this.state.selectedTab,a=d()("orderbook-trades-header__button",{"orderbook-trades-header__button--selected":t===me.ORDERS}),r=d()("orderbook-trades-header__button",{"orderbook-trades-header__button--selected":t===me.TRADES});return o.a.createElement("div",{className:"orderbook-trades-header"},o.a.createElement("div",{tabIndex:0,role:"button",className:a,onClick:()=>{Object(pe.b)("orderbook-trades","click-orderbook"),this.setState({selectedTab:me.ORDERS})}},e({key:Q.a.ORDERBOOK_SHORT})),o.a.createElement("div",{tabIndex:0,role:"button",className:r,onClick:()=>{Object(pe.b)("orderbook-trades","click-trades"),this.setState({selectedTab:me.TRADES})}},e({key:Q.a.TRADE_HISTORY_SHORT})))}render(){const e=this.props,t=e.lockedTab,a=e.stringGetter,r=this.state.selectedTab,n=t||r;return o.a.createElement("div",{className:"component-orderbook-trades"},t?o.a.createElement("div",{className:"orderbook-trades-header orderbook-trades-header__locked-tab"},t===me.ORDERS?a({key:Q.a.ORDERBOOK}):a({key:Q.a.TRADE_HISTORY})):this.renderTabs(),o.a.createElement("div",{className:"content"},n===me.TRADES?o.a.createElement(ue,null):o.a.createElement(oe,null)))}}be.propTypes={lockedTab:l.a.oneOf(n()(me)),stringGetter:l.a.func.isRequired};var he=Object(u.k)(be);a.d(t,"d",function(){return he}),a.d(t,"c",function(){return me}),a.d(t,"b",function(){return oe}),a.d(t,"a",function(){return ue})},2216:function(e,t,a){"use strict";a.r(t);var r=a(231),n=a.n(r),i=a(37),o=a.n(i),s=a(0),l=a.n(s),c=a(1),d=a.n(c),u=a(52),p=a(60),m=a(230),b=a.n(m),h=a(19),g=a.n(h),y=a(74),O=a(2132),f=a(2173),E=a(2152),v=a(2172),_=a(2123),k=a(2138),T=a(617),R=a(190),P=a(45),S=a(44),w=a(250),N=a(33),I=a(26),C=a(616),A=a(296),L=a(2122),j=a(5),D=a(298),M=a(388),x=a(191),q=a(615),B=a(2251),F=a.n(B);class U extends s.Component{constructor(...e){super(...e),this.renderBalancesRow=(({key:e,name:t,beforeString:a,afterString:r,arrowColor:n,isLoading:i})=>l.a.createElement("div",{key:e,className:g()(F.a.balanceItem,{[F.a.balanceItemHighlight]:n})},l.a.createElement("div",null,t),l.a.createElement("div",{className:g()({[F.a.balanceLoading]:i})},l.a.createElement(T.a,{narrowContainer:!0,afterText:n&&r,arrow:n},a))))}renderPerpBalances(){const e=this.props,t=e.allIndexPrices,a=e.allMarkets,r=e.currentPair,i=e.isUserInUsa,s=e.openSidebarModal,c=e.pendingDepositsWithdrawals,d=e.perpetualBalances,u=e.stringGetter,p=e.walletAddress,m=r.marketName,h=r.orderMarket,g=r.settlementSymbol,y=r.displaySettlementSymbol,f=r.maxLeverage,E=r.isInversePerpetual,v=Object(I.c)({allMarkets:a,symbol:g}),T=t[h],P=d[h];if(!P||!T)return null;const S=Object(q.a)({balances:P,indexPrice:T,maxLeverage:f,isInversePerpetual:E}),w=S.equity,N=S.freeCollateral,C=P.pendingMargin,A=P.pendingPosition,L="0"!==C||"0"!==A||!!o()(c,({orderMarket:e})=>e===h),B=!w.isZero(),U=i&&!Object(q.d)(p);return l.a.createElement("div",{className:F.a.sidebarBalances},l.a.createElement("div",{className:F.a.sidebarBalancesContent},l.a.createElement("div",{className:F.a.title},l.a.createElement(_.a,{top:16,left:-32,tooltip:"perpetual-account",stringParams:{MARKET:m}},m," ",u({key:j.a.PERPETUAL_CONTRACT_SHORT})),L&&l.a.createElement(O.b,null)),this.renderBalancesRow({key:"equity",name:l.a.createElement(_.a,{className:F.a.tooltipWithTag,top:16,left:-32,tooltip:"perpetual-equity"},l.a.createElement(k.a,{tag:y},u({key:j.a.EQUITY}))),beforeString:l.a.createElement(b.a,{thousandSeparator:!0,displayType:"text",value:`${Object(x.e)(w,v.currency.decimals)} ${v.symbol}`}),isLoading:L}),this.renderBalancesRow({key:"free collateral",name:l.a.createElement(_.a,{className:F.a.tooltipWithTag,top:16,left:-32,tooltip:"perpetual-free-collateral"},l.a.createElement(k.a,{tag:y},u({key:j.a.FREE_COLLATERAL}))),beforeString:l.a.createElement(b.a,{thousandSeparator:!0,displayType:"text",value:`${Object(x.e)(N,v.currency.decimals)} ${v.symbol}`}),isLoading:L}),l.a.createElement("div",{className:F.a.buttons},l.a.createElement(R.g,{type:B||U?R.a.SECONDARY:R.a.PRIMARY,blue:!B&&!U,disabled:U,onClick:U?n.a:()=>s({modalType:D.a.DEPOSIT,modalProps:{product:M.a.PERPETUALS}})},u({key:j.a.DEPOSIT})),l.a.createElement(R.g,{type:R.a.SECONDARY,disabled:!B,onClick:()=>s({modalType:D.a.WITHDRAW})},u({key:j.a.WITHDRAW})))))}render(){const e=this.props,t=e.isWalletReady,a=e.arePerpBalancesLoaded,r=e.areIndexPricesLoaded;return l.a.createElement("div",{className:F.a.perpSidebar},l.a.createElement(f.a,null),t&&a&&r?this.renderPerpBalances():l.a.createElement(E.a,{isPerpPage:!0}),l.a.createElement("div",{className:F.a.scrollContainer},l.a.createElement(v.a,null)))}}U.propTypes={allIndexPrices:d.a.object.isRequired,allMarkets:d.a.array.isRequired,areIndexPricesLoaded:d.a.bool.isRequired,arePerpBalancesLoaded:d.a.bool.isRequired,currentPair:d.a.object.isRequired,isUserInUsa:d.a.bool.isRequired,isWalletReady:d.a.bool.isRequired,openSidebarModal:d.a.func.isRequired,pendingDepositsWithdrawals:d.a.array.isRequired,perpetualBalances:d.a.object.isRequired,stringGetter:d.a.func.isRequired,walletAddress:d.a.string};t.default=Object(y.k)(Object(u.c)(e=>({allIndexPrices:Object(L.b)(e),allMarkets:Object(I.d)(e),areIndexPricesLoaded:Object(L.c)(e),arePerpBalancesLoaded:Object(A.c)(e),currentPair:Object(S.e)(e),isUserInUsa:Object(w.c)(e),isWalletReady:Object(N.w)(e),pendingDepositsWithdrawals:Object(C.e)(e),perpetualBalances:Object(A.e)(e),walletAddress:Object(N.m)(e)}),e=>Object(p.b)({openSidebarModal:P.d},e))(U))},2218:function(e,t,a){"use strict";a.r(t),a.d(t,"getTabConfig",function(){return L});var r=a(39),n=a.n(r),i=a(0),o=a.n(i),s=a(1),l=a.n(s),c=a(52),d=a(60),u=a(40),p=a(74),m=a(2157),b=a(2155),h=a(2219),g=a(2156),y=a(2135),O=a(2177),f=a(2178),E=a(2179),v=a(2180),_=a(86),k=a(80),T=a(343),R=a(44),P=a(249),S=a(11),w=a(21),N=a(5),I=a(85),C=a(2253),A=a.n(C);function ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const L=({numOrders:e,hasNewOrders:t,hasNewFills:a}={})=>{let r;return e>0&&(r=e>99?"99+":e),[{key:S.q.POSITION,labelKey:N.a.POSITION},{key:S.q.ORDERS,labelKey:N.a.ORDERS,badge:{label:r,hasAlert:t}},{key:S.q.FILLS,labelKey:N.a.FILLS,notification:a}]},j=[{key:w.i.ALL_ORDERS,Icon:O.a,labelKey:N.a.FILTER_ALL},{key:w.i.MARKET_ORDERS,Icon:f.a,labelKey:N.a.FILTER_MARKET},{key:w.i.LIMIT_ORDERS,Icon:E.a,labelKey:N.a.FILTER_LIMIT},{key:w.i.STOP_ORDERS,Icon:v.a,labelKey:N.a.FILTER_STOP}];class D extends i.Component{constructor(e){super(e),this.state={selectedOrderFilter:w.i.ALL_ORDERS}}componentDidUpdate(){const e=this.props,t=e.currentPair,a=e.hasNewOrders,r=e.hasNewFills,n=e.selectedPerpContent,i=e.clearHasNewOrders,o=e.clearHasNewFills;a&&n===S.q.ORDERS&&i(t.orderMarket),r&&n===S.q.FILLS&&o(t.orderMarket)}render(){const e=this.props,t=e.currentPair.orderMarket,a=e.currentTradeData.tradeOrderType,r=e.hasNewOrders,s=e.hasNewFills,l=e.orders,c=e.selectedPerpContent,d=e.setPerpContent,u=e.stringGetter,p=this.state.selectedOrderFilter,O=L({numOrders:n()(l),hasNewOrders:r,hasNewFills:s});return o.a.createElement(i.Fragment,null,o.a.createElement("div",{className:A.a.tradeInfoHeader},o.a.createElement(g.a,{className:A.a.tabbedHeader,config:O,selectedToggleKey:c,onClick:e=>{d(e),Object(I.b)("trade-info","set-trade-info",{currentTradeInfo:c,newTradeInfo:e,tradeOrderType:a,orderMarket:t})}}),c===S.q.ORDERS&&o.a.createElement(y.b,{compact:!0,black:!0,className:A.a.filterDropdown,selectedItemKey:p,onChangeSelection:e=>{this.setState({selectedOrderFilter:e}),Object(I.b)("trade-info","change-order-filter",{currentOrderFilter:p,newOrderFilter:e,orderMarket:t})},menuItems:j.map(({key:e,Icon:t,labelKey:a})=>({key:e,label:o.a.createElement("div",{className:A.a.filterDropdownLabel},o.a.createElement(t,null),u({key:a}))}))})),o.a.createElement("div",{className:A.a.selectedContent},c===S.q.POSITION&&o.a.createElement(h.a,null),c===S.q.ORDERS&&o.a.createElement(b.a,{filter:p}),c===S.q.FILLS&&o.a.createElement(m.a,null)))}}D.propTypes={currentPair:l.a.object.isRequired,clearHasNewFills:l.a.func.isRequired,clearHasNewOrders:l.a.func.isRequired,currentTradeData:l.a.object.isRequired,hasNewFills:l.a.bool,hasNewOrders:l.a.bool,location:l.a.shape({pathname:l.a.string}),orders:l.a.array.isRequired,selectedPerpContent:l.a.string.isRequired,setPerpContent:l.a.func.isRequired,stringGetter:l.a.func.isRequired};t.default=Object(p.k)(Object(u.g)(Object(c.c)(e=>({currentPair:Object(R.e)(e),currentTradeData:Object(T.b)(e),hasNewOrders:Object(P.n)(e),hasNewFills:Object(P.m)(e),orders:Object(P.e)(e),selectedPerpContent:Object(T.d)(e)}),e=>(function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(a,!0).forEach(function(t){_defineProperty(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e})({clearHasNewOrders:t=>e(Object(k.f)({market:t,hasNewOrders:!1})),clearHasNewFills:t=>e(Object(k.e)({market:t,hasNewFills:!1}))},Object(d.b)({setPerpContent:_.b},e)))(D)))},2219:function(e,t,a){"use strict";var r=a(90),n=a.n(r),i=a(37),o=a.n(i),s=a(0),l=a.n(s),c=a(1),d=a.n(c),u=a(52),p=a(60),m=a(9),b=a.n(m),h=a(230),g=a.n(h),y=a(19),O=a.n(y),f=a(74),E=a(2132),v=a(2138),_=a(384),k=a(2123),T=a(190),R=a(617),P=a(45),S=a(296),w=a(33),N=a(132),I=a(44),C=a(26),A=a(343),L=a(616),j=a(2162),D=a(2122),M=a(171),x=a(61),q=a(5),B=a(615),F=a(38),U=a(57),W=a(94),V=a(10),G=a(85),K=a(2),H=a(2252),Y=a.n(H),z=a(2134),Z=a.n(z);const Q=12,$=-36;class X extends s.Component{getDiffValueClasses({isLoading:e,hasOrderDiff:t}){return{currentDiffValueClasses:O()(Y.a.diffValue,{[Y.a.white]:e&&!t,[Y.a.grey]:t}),newDiffValueClasses:O()(Y.a.diffValue,{[Y.a.white]:t,[Y.a.grey]:e&&!t})}}getCurrentNetFunding(e,t){const a=e.positionAmount,r=e.perpetualBalances,n=e.perpetualMarket,i=t.netFunding,o=Object(B.b)({perpetualBalances:r,perpetualMarket:n,positionAmount:a});let s;return i&&(s=i.plus(o)),s}renderLiquidationPriceRow(e){const t=this.props,a=t.currentPair,r=a.orderMarket,n=a.displayQuoteSymbol,i=a.liquidationCollateralization,c=a.isInversePerpetual,d=t.pendingDepositsWithdrawals,u=t.stringGetter,p=e.positionAmount,m=e.marginAmount,b=e.areAllNewBalancesPositive,h=e.hasOrderDiff,y=e.isPositionLeverageLoading,O=Object(B.f)({positionData:e,liquidationCollateralization:i,isInversePerpetual:c}),f=O.liquidationPrice,E=O.newLiquidationPrice,_=O.diffArrowColor,T=y||!!o()(d,({orderMarket:e})=>e===r),P=this.getDiffValueClasses({isLoading:T,hasOrderDiff:h}),S=P.currentDiffValueClasses,w=P.newDiffValueClasses,N=p&&p.gte(0)&&m&&m.gte(0),I=E||!N&&b;return l.a.createElement("div",{className:Y.a.row},l.a.createElement("div",{className:Y.a.rowLabel},l.a.createElement(k.a,{className:Y.a.tooltipWithTag,top:Q,left:$,tooltip:"positions-liq-price"},l.a.createElement(v.a,{extraSpacing:!0,tag:n},u({key:q.a.LIQUIDATION_PRICE_SHORT})))),l.a.createElement("div",{className:Y.a.rowValue},l.a.createElement("div",{className:Y.a.diffContainer},l.a.createElement("div",{className:S},l.a.createElement(g.a,{thousandSeparator:!0,displayType:"text",value:f?f.getNaturalValue().toFixed(x.f):"-"})),I&&l.a.createElement(s.Fragment,null,l.a.createElement(R.a,{arrow:T&&!h?"grey":_}),l.a.createElement("div",{className:w},l.a.createElement(g.a,{thousandSeparator:!0,displayType:"text",value:E?E.getNaturalValue().toFixed(x.f):"-"}))))))}renderAverageOpenRow(e,t){const a=this.props,r=a.currentPair,n=r.displayQuoteSymbol,i=r.isInversePerpetual,o=a.currentTradeData,c=a.stringGetter,d=e.hasOrderDiff,u=e.baseMarket,p=e.quoteMarket,m=Object(B.i)({currentTradeData:o,positionData:e,perpetualAggregateData:t,isInversePerpetual:i}),b=m.averageOpen,h=m.newAverageOpen,y=m.newPendingAverageOpen,O=m.averageOpenDiffArrow,f=this.getDiffValueClasses({isLoading:!!y&&!d,hasOrderDiff:h&&d}),E=f.currentDiffValueClasses,_=f.newDiffValueClasses;return l.a.createElement("div",{className:Y.a.row},l.a.createElement("div",{className:Y.a.rowLabel},l.a.createElement(k.a,{className:Y.a.tooltipWithTag,top:Q,left:$,tooltip:"perpetual-average-open"},l.a.createElement(v.a,{extraSpacing:!0,tag:n},c({key:q.a.AVERAGE_OPEN_PRICE_SHORT})))),l.a.createElement("div",{className:Y.a.rowValue},l.a.createElement("div",{className:Y.a.diffContainer},l.a.createElement("div",{className:E},l.a.createElement(g.a,{thousandSeparator:!0,displayType:"text",value:b?new W.a(b,u,p).getNaturalValue().toFixed(x.f):"-"})),h&&l.a.createElement(s.Fragment,null,l.a.createElement(R.a,{arrow:O}),l.a.createElement("div",{className:_},l.a.createElement(g.a,{thousandSeparator:!0,displayType:"text",value:new W.a(h,u,p).getNaturalValue().toFixed(x.f)}))),y&&!d&&l.a.createElement(s.Fragment,null,l.a.createElement(R.a,{arrow:O}),l.a.createElement("div",{className:_},l.a.createElement(g.a,{thousandSeparator:!0,displayType:"text",value:new W.a(y,u,p).getNaturalValue().toFixed(x.f)}))))))}renderAverageCloseRow(e,t){const a=this.props,r=a.currentPair,n=r.displayQuoteSymbol,i=r.isInversePerpetual,o=a.currentTradeData,c=a.stringGetter,d=e.hasOrderDiff,u=e.baseMarket,p=e.quoteMarket,m=Object(B.g)({currentTradeData:o,positionData:e,perpetualAggregateData:t,isInversePerpetual:i}),b=m.averageClose,h=m.newAverageClose,y=m.newPendingAverageClose,O=m.averageCloseDiffArrow,f=this.getDiffValueClasses({isLoading:!!y&&!d,hasOrderDiff:h&&d}),E=f.currentDiffValueClasses,_=f.newDiffValueClasses;return l.a.createElement("div",{className:Y.a.row},l.a.createElement("div",{className:Y.a.rowLabel},l.a.createElement(k.a,{className:Y.a.tooltipWithTag,top:Q,left:$,tooltip:"perpetual-average-close"},l.a.createElement(v.a,{extraSpacing:!0,tag:n},c({key:q.a.AVERAGE_CLOSE_PRICE_SHORT})))),l.a.createElement("div",{className:Y.a.rowValue},l.a.createElement("div",{className:Y.a.diffContainer},l.a.createElement("div",{className:E},l.a.createElement(g.a,{thousandSeparator:!0,displayType:"text",value:b?new W.a(b,u,p).getNaturalValue().toFixed(x.f):"-"})),h&&l.a.createElement(s.Fragment,null,l.a.createElement(R.a,{arrow:O}),l.a.createElement("div",{className:_},l.a.createElement(g.a,{thousandSeparator:!0,displayType:"text",value:new W.a(h,u,p).getNaturalValue().toFixed(x.f)}))),y&&!d&&l.a.createElement(s.Fragment,null,l.a.createElement(R.a,{arrow:O}),l.a.createElement("div",{className:_},l.a.createElement(g.a,{thousandSeparator:!0,displayType:"text",value:new W.a(y,u,p).getNaturalValue().toFixed(x.f)}))))))}renderRealizedPnlRow(e,t){const a=this.props,r=a.currentPair,n=r.displaySettlementSymbol,i=r.isInversePerpetual,o=a.stringGetter,s=e.settlementMarket,c=e.positionSide,d=t.netFees,u=t.totalClosedOpenQuoteAmount,p=t.totalCloseQuoteAmount;let m=d&&d.negated();if(m){u.gt(0)&&(m=m.plus((i&&c===M.d.LONG||!i&&M.d.SHORT,p.minus(u))));const a=this.getCurrentNetFunding(e,t);a&&(m=m.plus(a))}return l.a.createElement("div",{className:Y.a.row},l.a.createElement("div",{className:Y.a.rowLabel},l.a.createElement(k.a,{className:Y.a.tooltipWithTag,top:-120,left:$,tooltip:"perpetual-realized-pnl"},l.a.createElement(v.a,{extraSpacing:!0,tag:n},o({key:q.a.REALIZED_PNL})))),l.a.createElement("div",{className:Y.a.rowValue},l.a.createElement("div",{className:Y.a.diffContainer},l.a.createElement("div",{className:O()({[Y.a.green]:m&&m.gte(0),[Y.a.red]:m&&m.lt(0)})},l.a.createElement(g.a,{thousandSeparator:!0,displayType:"text",prefix:m&&m.gte(0)?"+":"",value:m?new U.a(m,s).getNaturalTokenString():"-"})))))}renderUnrealizedPnlRow(e,t){const a=this.props,r=a.allOrderbookOrders,n=a.allMarkets,i=a.currentPair,o=a.stringGetter,s=i.displaySettlementSymbol,c=i.isInversePerpetual,d=e.positionAmount,u=e.settlementMarket,p=t.totalOpenBaseAmount,m=t.totalRemainingOpenQuoteAmount,b=t.totalCloseBaseAmount;let h;if(p){const e=p.minus(b);let t;t=c?d.lt(0)?K.f.SELL:K.f.BUY:d.gt(0)?K.f.SELL:K.f.BUY;const a=Object(N.a)({allOrderbookOrders:r,allMarkets:n,pair:i,side:t,amount:e});if(a){const t=c?e.div(a.baseAmount):e.times(a.baseAmount);h=d.gt(0)?t.minus(m):m.minus(t)}}return l.a.createElement("div",{className:Y.a.row},l.a.createElement("div",{className:Y.a.rowLabel},l.a.createElement(k.a,{className:Y.a.tooltipWithTag,top:-120,left:$,tooltip:"perpetual-unrealized-pnl"},l.a.createElement(v.a,{extraSpacing:!0,tag:s},o({key:q.a.UNREALIZED_PNL})))),l.a.createElement("div",{className:Y.a.rowValue},l.a.createElement("div",{className:Y.a.diffContainer},l.a.createElement("div",{className:O()({[Y.a.green]:h&&h.gte(0),[Y.a.red]:h&&h.lt(0)})},l.a.createElement(g.a,{thousandSeparator:!0,displayType:"text",prefix:h&&h.gte(0)?"+":"",value:h?new U.a(h,u).getNaturalTokenString():"-"})))))}renderFundingRateRow(e){const t=this.props,a=t.currentPair.displaySettlementSymbol,r=t.stringGetter,n=e.perpetualMarket,i=e.positionSide,o=e.newPositionSide,c=e.positionAmount,d=e.newPositionAmount,u=e.hasOrderDiff,p=e.isPositionAmountLoading,m=n?Object(V.a)(n.fundingRate).times(M.c):K.a.ZERO,b=`${m.times(100).abs().toFixed(x.m)}%`;let h,g,y,f,E;i===M.d.LONG?(h=m.lt(0)?r({key:q.a.EARNING}):r({key:q.a.PAYING}),g=m.lt(0)?Y.a.green:Y.a.red):(h=m.lt(0)?r({key:q.a.PAYING}):r({key:q.a.EARNING}),g=m.lt(0)?Y.a.red:Y.a.green),c.isZero()&&(g=null),o&&i!==o&&(o===M.d.LONG?(y=m.lt(0)?r({key:q.a.EARN}):r({key:q.a.PAY}),f=m.lt(0)?"green":"red",E=m.lt(0)?Y.a.green:Y.a.red):(y=m.lt(0)?r({key:q.a.PAY}):r({key:q.a.EARN}),f=m.lt(0)?"red":"green",E=m.lt(0)?Y.a.red:Y.a.green)),d&&d.isZero()&&(E=null);const v=p&&!u;return l.a.createElement("div",{className:Y.a.row},l.a.createElement("div",{className:Y.a.rowLabel},l.a.createElement(k.a,{top:Q,left:$,tooltip:"perpetual-funding-rate",stringParams:{SYMBOL:a}},r({key:q.a.FUNDING_RATE_SHORT}))),l.a.createElement("div",{className:Y.a.rowValue},l.a.createElement("div",{className:Y.a.diffContainer},l.a.createElement("div",{className:O()(Y.a.diffValue,g)},!c||c.isZero()?"-":`${h} ${b}`),y&&l.a.createElement(s.Fragment,null,l.a.createElement(R.a,{arrow:v?"grey":f}),l.a.createElement("div",{className:O()(Y.a.diffValue,{[E]:!v,[Y.a.grey]:v})},!d||d.isZero()?"-":`${y} ${b}`)))))}renderNetFundingRow(e,t){const a=this.props,r=a.currentPair.displaySettlementSymbol,n=a.stringGetter,i=e.settlementMarket,o=this.getCurrentNetFunding(e,t);return l.a.createElement("div",{className:Y.a.row},l.a.createElement("div",{className:Y.a.rowLabel},l.a.createElement(k.a,{className:Y.a.tooltipWithTag,top:Q,left:$,tooltip:"perpetual-net-funding"},l.a.createElement(v.a,{extraSpacing:!0,tag:r},n({key:q.a.NET_FUNDING})))),l.a.createElement("div",{className:Y.a.rowValue},l.a.createElement("div",{className:Y.a.diffContainer},l.a.createElement("div",{className:O()({[Y.a.green]:o&&o.gte(0),[Y.a.red]:o&&o.lt(0)})},l.a.createElement(g.a,{thousandSeparator:!0,displayType:"text",prefix:o&&o.gte(0)?"+":"",value:o?new U.a(o,i).getNaturalTokenString():"-"})))))}renderPositionValueRow(e){const t=this.props,a=t.currentPair,r=a.displayQuoteSymbol,n=a.isInversePerpetual,i=t.stringGetter,o=e.baseMarket,c=e.quoteMarket,d=e.positionAmount,u=e.newPositionAmount,p=e.indexPrice,m=e.hasOrderDiff,b=e.isPositionAmountLoading,h=n?o:c,y=n?d.div(p):d.times(p),O=d&&!d.isZero()?l.a.createElement(g.a,{thousandSeparator:!0,displayType:"text",value:new U.a(y.abs(),h).getNaturalTokenString()}):"-";let f,E;if(u){const e=n?u.div(p):u.times(p);f=u.isZero()?"-":l.a.createElement(g.a,{thousandSeparator:!0,displayType:"text",value:new U.a(e.abs(),h).getNaturalTokenString()})}b&&!m?E="grey":u&&(E=d.lt(u)?"green":"red");const _=this.getDiffValueClasses({isLoading:b,hasOrderDiff:m}),T=_.currentDiffValueClasses,P=_.newDiffValueClasses;return l.a.createElement("div",{className:Y.a.row},l.a.createElement("div",{className:Y.a.rowLabel},l.a.createElement(k.a,{className:Y.a.tooltipWithTag,top:Q,left:$,tooltip:n?"perpetual-position-value":"perpetual-notional-value",stringParams:{SYMBOL:o.symbol}},l.a.createElement(v.a,{extraSpacing:!0,tag:n?o.symbol:r},i({key:n?q.a.POSITION_VALUE:q.a.NOTIONAL_VALUE})))),l.a.createElement("div",{className:Y.a.rowValue},l.a.createElement("div",{className:Y.a.diffContainer},l.a.createElement("div",{className:T},O),u&&l.a.createElement(s.Fragment,null,l.a.createElement(R.a,{arrow:E}),l.a.createElement("div",{className:P},f)))))}renderEquityRow(e){const t=this.props,a=t.currentPair,r=a.displaySettlementSymbol,n=a.maxLeverage,i=a.isInversePerpetual,o=t.stringGetter,s=e.perpetualBalances,c=e.baseMarket,d=e.quoteMarket,u=e.indexPrice;let p;if(s&&u){p=Object(B.a)({balances:s,indexPrice:u,maxLeverage:n,isInversePerpetual:i}).equity}return l.a.createElement("div",{className:Y.a.row},l.a.createElement("div",{className:Y.a.rowLabel},l.a.createElement(k.a,{className:Y.a.tooltipWithTag,top:Q,left:$,tooltip:"perpetual-equity"},l.a.createElement(v.a,{extraSpacing:!0,tag:r},o({key:q.a.EQUITY})))),l.a.createElement("div",{className:Y.a.rowValue},l.a.createElement(g.a,{thousandSeparator:!0,displayType:"text",value:p?new U.a(p,i?c:d).getNaturalTokenString():"-"})))}renderCardPositionSide({positionAmount:e,positionSide:t,newPositionSide:a,isPositionLeverageLoading:r,hasOrderDiff:i}){const o=this.props,c=o.pendingDepositsWithdrawals,d=o.stringGetter,u=(r||!n()(c))&&!i,p=d({key:M.e[t]}),m=a&&d({key:M.e[a]});return l.a.createElement("div",{className:O()(Y.a.diffContainer,Y.a.diffContainerCard)},l.a.createElement("div",{className:O()(Y.a.diffValue,Y.a.diffValueOpaque)},(!e.isZero()||a)&&l.a.createElement("div",{className:O()(Y.a.cardSide,{[Y.a.long]:t===M.d.LONG,[Y.a.short]:t===M.d.SHORT,[Y.a.cardSideDots]:u})},u?l.a.createElement(E.b,{size:4}):p)),a&&a!==t&&l.a.createElement(s.Fragment,null,l.a.createElement(R.a,{arrow:"grey"}),l.a.createElement("div",{className:Y.a.diffValue},l.a.createElement("div",{className:O()(Y.a.cardSide,{[Y.a.long]:a===M.d.LONG,[Y.a.short]:a===M.d.SHORT,[Y.a.loading]:u})},m))))}renderCard(e){const t=this.props,a=t.currentPair,r=t.pendingDepositsWithdrawals,i=t.stringGetter,o=a.marketName,c=a.displayQuoteSymbol,d=a.maxLeverage,u=a.isInversePerpetual,p=e.baseMarket,m=e.quoteMarket,h=e.positionAmount,g=e.positionLeverage,y=e.positionSide,f=e.newPositionAmount,E=e.newPositionLeverage,v=e.newPositionSide,_=e.isPositionAmountLoading,k=e.isPositionLeverageLoading,T=e.hasOrderDiff,P=u?m:p,S=`${new U.a(h.abs(),P).getNaturalTokenString()}${f?"":` ${u?c:P.symbol}`}`,w=g.isZero()?"-":`${g.toFixed(x.e)}\xd7`,N=f&&!f.eq(h)&&new U.a(f.abs(),P).getNaturalTokenString();let I,C;if(E)if(C=E.lt(0)||!E.isFinite(),E.isZero())I="-";else if(C)I="\u221e";else if(E.gt(0)){const e=E.gt(d)?b.a.ROUND_UP:b.a.ROUND_HALF_UP;I=`${E.toFixed(x.e,e)}\xd7`}let A="grey";y===v&&f&&(A=f.abs().lt(h.abs())?"red":"green");let L="grey";y===v&&E&&(L=C?"red":E.lt(g)?"green":"red");const j=k||!n()(r),D=this.getDiffValueClasses({isLoading:j,hasOrderDiff:T}),M=D.currentDiffValueClasses,B=D.newDiffValueClasses;return l.a.createElement("div",{className:Y.a.card},l.a.createElement("div",{className:Y.a.perpName},o," ",i({key:q.a.PERPETUAL_CONTRACT_SHORT}),l.a.createElement("div",{className:Y.a.tablet},this.renderCardPositionSide(e))),l.a.createElement("div",{className:Y.a.cardValues},l.a.createElement("div",{className:Y.a.cardRow},l.a.createElement("div",{className:Y.a.cardRowValue},l.a.createElement("div",{className:O()(Y.a.diffContainer,Y.a.diffContainerCard)},l.a.createElement("div",{className:M},S),N&&l.a.createElement(s.Fragment,null,l.a.createElement(R.a,{arrow:_?"grey":A}),l.a.createElement("div",{className:B},N)))),l.a.createElement("div",{className:Y.a.cardRowLabel},i({key:q.a.AMOUNT}))),l.a.createElement("div",{className:Y.a.cardRow},l.a.createElement("div",{className:Y.a.cardRowValue},l.a.createElement("div",{className:O()(Y.a.diffContainer,Y.a.diffContainerCard)},l.a.createElement("div",{className:M},w),I&&l.a.createElement(s.Fragment,null,l.a.createElement(R.a,{arrow:j?"grey":L}),l.a.createElement("div",{className:O()(B,{[Y.a.infiniteLeverage]:C,[Y.a.red]:C||E.gt(d)})},I)))),l.a.createElement("div",{className:Y.a.cardRowLabel},i({key:q.a.LEVERAGE})," / 10\xd7")),l.a.createElement("div",{className:Y.a.desktop},this.renderCardPositionSide(e))))}renderTable(e,t){const a=this.props,r=a.currentPair.isInversePerpetual,n=a.openModal,i=a.stringGetter,o=a.walletAddress,s=e.positionAmount,c=e.positionSide,d=e.perpetualBalances;let u=!1;return s&&!s.isZero()&&(u=r?c===M.d.LONG?s.plus(d.pendingPosition).lt(0):s.plus(d.pendingPosition).gt(0):c===M.d.LONG?s.plus(d.pendingPosition).gt(0):s.plus(d.pendingPosition).lt(0)),l.a.createElement("div",{className:Y.a.table},l.a.createElement("div",{className:Y.a.column},this.renderLiquidationPriceRow(e),this.renderAverageOpenRow(e,t),this.renderAverageCloseRow(e,t),this.renderRealizedPnlRow(e,t),this.renderUnrealizedPnlRow(e,t)),l.a.createElement("div",{className:Y.a.column},this.renderFundingRateRow(e),this.renderNetFundingRow(e,t),this.renderPositionValueRow(e),this.renderEquityRow(e),u&&l.a.createElement("div",{className:Y.a.closeButtonContainer},l.a.createElement(T.d,{grey:!0,className:Y.a.closeButton,onClick:()=>{n({type:F.a.CLOSE_PERPETUAL}),Object(G.b)("perpetual-position","click-close-position",{walletAddress:o})}},l.a.createElement("div",{className:Y.a.buttonText},i({key:q.a.CLOSE_POSITION}),l.a.createElement(k.a,{shortDelay:!0,className:Y.a.buttonTooltipIcon,top:-100,left:-192,tooltip:"perpetual-close-position"},"?"))))))}render(){const e=this.props,t=e.allIndexPrices,a=e.allMarkets,r=e.areIndexPricesLoaded,n=e.arePerpBalancesLoaded,i=e.arePerpMarketsLoaded,o=e.currentPair,s=e.currentTradeData,c=e.isWalletConnecting,d=e.isWalletInvalid,u=e.perpetualBalances,p=e.perpetualMarkets,m=e.perpetualAggregateData,b=Object(B.h)({allIndexPrices:t,allMarkets:a,currentPair:o,perpetualBalances:u,perpetualMarkets:p,currentTradeData:s}),h=c||!d&&!(n&&i&&r);return l.a.createElement("div",{className:Y.a.perpPosition},h?l.a.createElement("div",{className:Z.a.loading},l.a.createElement(_.a,null)):l.a.createElement("div",{className:Y.a.wrapper},this.renderCard(b),this.renderTable(b,m)))}}X.propTypes={allIndexPrices:d.a.object.isRequired,allMarkets:d.a.array.isRequired,allOrderbookOrders:d.a.object.isRequired,areIndexPricesLoaded:d.a.bool.isRequired,arePerpBalancesLoaded:d.a.bool.isRequired,arePerpMarketsLoaded:d.a.bool.isRequired,currentPair:d.a.object.isRequired,currentTradeData:d.a.object.isRequired,isWalletConnecting:d.a.bool.isRequired,isWalletInvalid:d.a.bool.isRequired,openModal:d.a.func.isRequired,pendingDepositsWithdrawals:d.a.array.isRequired,perpetualAggregateData:d.a.object.isRequired,perpetualBalances:d.a.object.isRequired,perpetualMarkets:d.a.object.isRequired,stringGetter:d.a.func.isRequired,walletAddress:d.a.string};t.a=Object(f.k)(Object(u.c)(e=>({allIndexPrices:Object(D.b)(e),allMarkets:Object(C.d)(e),allOrderbookOrders:Object(N.d)(e),areIndexPricesLoaded:Object(D.c)(e),arePerpBalancesLoaded:Object(S.c)(e),arePerpMarketsLoaded:Object(S.d)(e),currentPair:Object(I.e)(e),currentTradeData:Object(A.b)(e),isWalletConnecting:Object(w.e)(e),isWalletInvalid:Object(w.v)(e),pendingDepositsWithdrawals:Object(L.e)(e),perpetualAggregateData:Object(j.f)(e),perpetualBalances:Object(S.e)(e),perpetualMarkets:Object(S.g)(e),walletAddress:Object(w.m)(e)}),e=>Object(p.b)({openModal:P.c},e))(X))},2251:function(e,t,a){e.exports={perpSidebar:"_3KUZeySmY1U88X3xyQv1Ks",sidebarBalances:"_3-tg6dWI8vBUaOsHnA7X1U",sidebarBalancesContent:"_1u19Luhi7IaCXdszLtAkGi",title:"_3UfO-6Hi3n9Y41LvrcEHFX",balanceItem:"_2BS4V30y_eVAAdakLbjwEi",balanceLoading:"IyJhxvIk65m4RYRywtW4v",balanceItemHighlight:"_4SbWxs7pJz_gQMGLy4fB3",tooltipWithTag:"_2NlBDV-Gxb252i5Eufbu6s",collateralization:"_1tApEXv1t_kvgguJ7owZYb","cell-tooltip":"_14E3vf4SPyDD_yeBAa2A7n","content-tooltip":"Tby_-2gMA4QjvrfmMPK47",buttons:"_3TAl1Dv7VBpe82LuCUORz-",scrollContainer:"_1yXlKkBOeyhfXY9uGeoJC2"}},2252:function(e,t,a){e.exports={perpPosition:"_3YTPdJo1n5g_U1FaKvKREz",wrapper:"_32eyYpQ6mNv9lwOC2hTIL3",card:"_32SMdGafVPi5evezX6JuyV",perpName:"vQ-iROhKiLGQ1GxTvno_2",cardRow:"_3LOz6NAutWIDm65zMJi21f",cardRowValue:"_3AcS3T9p0ED-Q_l-dgHPM4",cardRowLabel:"_104jWF5SL4cOKwlVbP_isz",cardSide:"_17_eF_GE5qwtymxxB44H9z",cardSideDots:"_2kjTWxgRZSGdKyrVDYp1zA",long:"_3xf8e1qle-4rW6LCtZQRKx",short:"Hjf2o0dpGXOXXzIDZ5DuH",loading:"_1ZNRAkJm3biLa4uxHSBVb5",table:"_2uUkQJ24fPRos3OCFJBh80",column:"_1Y49qUd86MTmNcF8VYP4X7",row:"_8bNFoz8bY0IEoPA7OYEtL",rowLabel:"_25IkSsBRB2cx8nwXvLYrA6",rowValue:"_1zUlSx9oKU7QAcXArtnS6R",diffContainer:"_1TRqPHR4Wvzzyqtm7PW4LN",diffValue:"_3ojBjAu4CdTOXTjf-3KMAi",grey:"_2TkrzNxSvQeUn5Is5lY6XZ",white:"_1zhnj_6UXDcqTmG4t6Y2KQ",red:"piaPc3EQ4Ps1Waawph6kk",green:"_18--BfkytkelE1lE7HxJ6x",infiniteLeverage:"GtT0RtQO5ryxrk5_bGWVH",diffContainerCard:"nMpNxsiAnAdg-BwvyWYgl",diffContainerLoading:"_1bY2ySF7tzLsIPPeemFuK9",tooltipWithTag:"_3I_Nqqf06W6akH9PD2qIIj",tablet:"_2ARpym2_5avJhsY4zf_xFE",desktop:"_30wfKoGr3VmJlzCBC6lbfP",closeButtonContainer:"_3fsqm8sJq26p1070wW5wzh",closeButton:"_2ITivaxClVF5B2XJHTc39I",buttonText:"maE0FeRv8DC0n7rMFef1n",buttonTooltipIcon:"kpC5sgOa7L6NMZs7lbcS4"}},2253:function(e,t,a){e.exports={tradeInfoHeader:"_2ln-YbHINPIkQha2rC13ES",tabbedHeader:"_3j8AxEcdOWh0RsiotOfakf",filterDropdown:"_2cpBoscFFudmLkj-eeQfm6",filterDropdownLabel:"_1J1EhhO1-K4hSwJJw1RADU",selectedContent:"_1XRnstyYGbZBW-Dy0TC0I"}},2254:function(e,t,a){e.exports={tradeLayoutMobile:"_13SQej1-yAwr1TNsyh-m6l",tradeLayoutMobileContent:"dQKW3i_alxdMJLnRRKxjJ",bottomMenu:"UkvkGbSlSxSbThRH7Fi3q",menuButtons:"_3ZBrmfngPcqYocO5m-kVyC",buttonClickContainer:"_3G62LdrSV98M18dRkR9Xuc",menuButton:"_6owPbLiWkjukSknZGCEdY",menuButtonSelected:"_2u6yiD6c88tHuD2C6lYGtZ"}},2265:function(e,t,a){"use strict";var r=a(55),n=a.n(r),i=a(0),o=a.n(i),s=a(1),l=a.n(s),c=a(52),d=a(60),u=a(19),p=a.n(u),m=a(2156),b=a(2207),h=a(2208),g=a(74),y=a(86),O=a(343),f=a(11),E=a(2254),v=a.n(E);class _ extends i.Component{renderHome(){const e=this.props,t=e.selectedTab,a=e.setSelectedTab,r=e.getHomeTabConfig,s=e.homeTabComponentMapping;return o.a.createElement(i.Fragment,null,o.a.createElement(b.a,null),o.a.createElement(m.a,{className:"tabbed-header",config:r(),selectedToggleKey:t,onClick:e=>a(e)}),n()(s,({tabKey:e,TabComponent:a})=>t===e&&o.a.createElement(a,{key:e})))}renderMenu(){const e=this.props,t=e.setMobileTradeTab,a=e.selectedMobileTradeTab;return o.a.createElement("div",{className:v.a.bottomMenu},o.a.createElement("div",{className:v.a.menuButtons},n()(f.p,e=>o.a.createElement("div",{key:e,role:"button",tabIndex:0,className:v.a.buttonClickContainer,onClick:()=>t(e)},o.a.createElement("div",{className:p()(v.a.menuButton,{[v.a.menuButtonSelected]:a===e})},e)))))}render(){const e=this.props,t=e.selectedMobileTradeTab,a=e.sidebar;let r;switch(t){case f.p.TRADE:r=a;break;case f.p.HOME:r=this.renderHome();break;case f.p.BOOK:r=o.a.createElement(g.i,{setHeight:!0,setMaxHeight:!0,heightOffset:-88},o.a.createElement("div",null,o.a.createElement(h.b,null)));break;case f.p.HISTORY:r=o.a.createElement(g.i,{setHeight:!0,setMaxHeight:!0,heightOffset:-88},o.a.createElement("div",null,o.a.createElement(h.a,null)))}return o.a.createElement(g.i,{setMinHeight:!0},o.a.createElement("div",{className:v.a.tradeLayoutMobile},o.a.createElement("div",{className:v.a.tradeLayoutMobileContent},r,this.renderMenu())))}}_.propTypes={getHomeTabConfig:l.a.func.isRequired,selectedMobileTradeTab:l.a.string.isRequired,selectedTab:l.a.string.isRequired,setMobileTradeTab:l.a.func.isRequired,setSelectedTab:l.a.func.isRequired,sidebar:l.a.oneOfType([l.a.arrayOf(l.a.node),l.a.node]).isRequired,homeTabComponentMapping:l.a.array.isRequired};var k=Object(c.c)(e=>({selectedMobileTradeTab:Object(O.c)(e)}),e=>Object(d.b)({setMobileTradeTab:y.a},e))(_);a.d(t,"a",function(){return k})},2310:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(1),o=a.n(i),s=a(52),l=a(60),c=a(2265),d=a(2216),u=a(2218),p=a(2155),m=a(2157),b=a(2219),h=a(86),g=a(343),y=a(11);const O=[{tabKey:y.q.POSITION,TabComponent:b.a},{tabKey:y.q.ORDERS,TabComponent:p.a},{tabKey:y.q.FILLS,TabComponent:m.a}],f=({selectedPerpContent:e,setPerpContent:t})=>n.a.createElement(c.a,{getHomeTabConfig:u.getTabConfig,sidebar:n.a.createElement(d.default,null),selectedTab:e,setSelectedTab:t,homeTabComponentMapping:O});f.propTypes={selectedPerpContent:o.a.string.isRequired,setPerpContent:o.a.func.isRequired};t.default=Object(s.c)(e=>({selectedPerpContent:Object(g.d)(e)}),e=>Object(l.b)({setPerpContent:h.b},e))(f)}}]);