(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{2122:function(e,t,a){"use strict";a.d(t,"b",function(){return d}),a.d(t,"c",function(){return u}),a.d(t,"d",function(){return m}),a.d(t,"a",function(){return p});var r=a(4),n=a.n(r),l=a(41),o=a(44),i=a(26),s=a(94),c=a(10);const d=e=>n()(e,"indexPrices.indexPrices"),u=e=>n()(e,"indexPrices.areIndexPricesLoaded"),m=Object(l.a)([o.e,d,i.d],(e,t,a)=>p({pair:e,allIndexPrices:t,allMarkets:a})),p=({pair:e,allIndexPrices:t,allMarkets:a})=>{const r=e.orderMarket,n=e.baseSymbol,l=e.quoteSymbol,o=Object(i.c)({allMarkets:a,symbol:n}),d=Object(i.c)({allMarkets:a,symbol:l}),u=t[r];if(u)return new s.a(u,o,d).getNaturalValue();const m=Object(i.c)({allMarkets:a,symbol:"DAI"});if(m&&m.oraclePrice){if("WETH-DAI"===r){if(t["WETH-USDC"])return new s.a(t["WETH-USDC"],o,Object(i.c)({allMarkets:a,symbol:"USDC"})).getNaturalValue().div(m.oraclePrice)}if("DAI-USDC"===r)return Object(c.a)(m.oraclePrice)}return null}},2125:function(e,t,a){e.exports={loadingDots:"_3jMPchhhIOb4dZOy6GLdPk",dot:"_2f58i9-DZX4n6MkcSDUG0","dot-keyframes":"j0RjL1ZlcGTCa4Xjy9tyY",newLoadingDots:"oppLNwiDeV9-rzLw4k37w","dot-animation":"_15KINsZKdzjYj3pK_pSvRH",compact:"_1WWoQQoq0KrhJIG9Mb9dfZ"}},2126:function(e,t,a){var r=a(921),n=a(619),l=a(385),o=9007199254740991,i=4294967295,s=Math.min;e.exports=function times(e,t){if((e=l(e))<1||e>o)return[];var a=i,c=s(e,i);t=n(t),e-=i;for(var d=r(c,t);++a<e;)t(a);return d}},2132:function(e,t,a){"use strict";var r=a(2126),n=a.n(r),l=a(0),o=a.n(l),i=a(1),s=a.n(i),c=a(2125),d=a.n(c);const u=({size:e=2})=>o.a.createElement("div",{className:d.a.loadingDots,style:{width:3*e+8}},n()(3,t=>o.a.createElement("div",{key:t,className:d.a.dot,style:{height:e,width:e}})));u.propTypes={size:s.a.number};var m=u,p=a(19),b=a.n(p);const g=({compact:e})=>o.a.createElement("div",{className:b()(d.a.newLoadingDots,{[d.a.compact]:e})});g.propTypes={compact:s.a.bool};var h=g;a.d(t,"b",function(){return m}),a.d(t,"a",function(){return h})},2190:function(e,t,a){e.exports={withReceipt:"_1XgtXOljETPmDV2RMD_zuD",container:"_1KSJY3ymebc_XX7esTa-Bv",row:"_3czUZmv5NRAhWXk7e4BeXt",label:"_3w9JeXQbjRWOihV4g0yLEx",value:"_1wdfbLcW3Y7NsjKZjiy9aD",regularFont:"_1rm9HlnGoqIMCwM7brFAWM",green:"_3R93GTFh8lN30elv0AYFzt",tag:"_14uhD-CacaKRqVnuzmNqNk"}},2191:function(e,t,a){e.exports={inputField:"_9jpup2dndkdIZHhKRKEgy",input:"WtsliSD4q1flPqAShEpRp",active:"_1Pne0H3t6xkuYMwEC-808a",centered:"_39ZsT6rbn0bgGV1IEh3Zbd",small:"AeUWp8wbdvK2oeHZURAZj",large:"JNAL3FY5IBs3E59ke9RFW",regularFont:"_3d1YYjk54xB1oLSG10EVSU",disabled:"VtnAMrgcEDQBv-MWgLQKI",tag:"Tmgg5zTEUcLdvJag3G71_",max:"_3GDGOwlV1g_T7_HOaGuLS2"}},2192:function(e,t,a){e.exports={message:"_1nDlju_OQsa7Fpu3i2cUQA",error:"_1lxrBdNKb7mbvm2e8yvi4D",title:"_2888coz9yxAoJQcmNng5rA",text:"_3j0TvNuUnrm1Q7lzyPr70J",info:"_1QXuXYTJVIjd_LypI75nfO",warning:"_3w6n7ECIC0jxPJd4vOPoaV"}},2209:function(e,t,a){"use strict";var r=a(118),n=a.n(r),l=a(0),o=a.n(l),i=a(1),s=a.n(i),c=a(19),d=a.n(c),u=a(2192),m=a.n(u);const p={ERROR:"ERROR",WARNING:"WARNING",INFO:"INFO"},b=({className:e,message:t,title:a,type:r=p.ERROR})=>o.a.createElement("div",{className:d()(m.a.message,{[m.a.error]:r===p.ERROR,[m.a.warning]:r===p.WARNING,[m.a.info]:r===p.INFO},e)},a&&o.a.createElement("div",{className:m.a.title},a),o.a.createElement("div",{className:m.a.text},t," "));b.propTypes={className:s.a.string,message:s.a.string.isRequired,title:s.a.string,type:s.a.oneOf(n()(p))};var g=b;a.d(t,"b",function(){return g}),a.d(t,"a",function(){return p})},2210:function(e,t,a){"use strict";var r=a(118),n=a.n(r),l=a(0),o=a.n(l),i=a(1),s=a.n(i),c=a(19),d=a.n(c),u=a(230),m=a.n(u),p=a(74),b=a(251),g=a(5),h=a(2191),E=a.n(h);const w={SMALL:"SMALL",LARGE:"LARGE"},y={PERCENT:"PERCENT",TEXT:"TEXT",NUMBER:"NUMBER"},f=({active:e,centered:t,disabled:a,max:r,onChange:n,onClickMax:l,placeholder:i,regularFont:s,size:c=w.LARGE,stringGetter:u,tag:p,type:h,value:f})=>{return o.a.createElement("div",{className:d()(E.a.inputField,{[E.a.active]:e,[E.a.centered]:t,[E.a.disabled]:a,[E.a.small]:c===w.SMALL,[E.a.large]:c===w.LARGE})},o.a.createElement(m.a,{className:d()(E.a.input,{[E.a.regularFont]:s}),onChange:e=>{const t=h===y.PERCENT?e.target.value.slice(0,-1):e.target.value;h!==y.TEXT&&h!==y.PERCENT&&Number.isNaN(Number(t))?f&&n(""):n(t)},placeholder:i,value:f,displayType:"input",allowNegative:!1,disabled:a,suffix:h===y.PERCENT?"%":"",isAllowed:e=>!r||e.floatValue<=r||!e.floatValue}),p&&o.a.createElement(b.a,{muted:!0,light:!0,className:E.a.tag},p),l&&o.a.createElement("div",{role:"button",tabIndex:0,className:E.a.max,onClick:l},u({key:g.a.MAX})))};f.propTypes={active:s.a.bool,centered:s.a.bool,disabled:s.a.bool,max:s.a.number,onChange:s.a.func.isRequired,onClickMax:s.a.func,placeholder:s.a.string,regularFont:s.a.bool,stringGetter:s.a.func,size:s.a.oneOf(n()(w)),tag:s.a.string,type:s.a.oneOf(n()(y)),value:s.a.string.isRequired},f.defaultProps={placeholder:"0.0000",type:y.NUMBER};var O=Object(p.k)(f);a.d(t,"c",function(){return O}),a.d(t,"a",function(){return w}),a.d(t,"b",function(){return y})},2211:function(e,t,a){"use strict";var r=a(0),n=a.n(r),l=a(1),o=a.n(l),i=a(19),s=a.n(i),c=a(251),d=a(2190),u=a.n(d);const m=({children:e,receiptConfig:t,receiptOnTop:a})=>n.a.createElement("div",{className:u.a.withReceipt},!a&&e,n.a.createElement("div",{className:u.a.container},t.map(({key:e,label:t,currency:a,value:r,regularFont:l,green:o})=>n.a.createElement("div",{key:e,className:u.a.row},n.a.createElement("div",{className:u.a.label},t),a&&n.a.createElement(c.a,{muted:!0,className:u.a.tag},a),n.a.createElement("span",{className:s()(u.a.value,{[u.a.regularFont]:l,[u.a.green]:o})},r)))),a&&e);m.propTypes={children:o.a.oneOfType([o.a.arrayOf(o.a.node),o.a.node]).isRequired,receiptConfig:o.a.arrayOf(o.a.shape({label:o.a.oneOfType([o.a.string,o.a.node]).isRequired,currency:o.a.string,value:o.a.oneOfType([o.a.string,o.a.node])})).isRequired,receiptOnTop:o.a.bool};var p=m;a.d(t,"a",function(){return p})},2247:function(e,t,a){e.exports={arrowDiff:"_3kMFACDxUF4K2-HIagn2th",regularFont:"_1H_LhdERrAeRIw00F89lbg",before:"_3OtMkqNt6rAKIyhLMd0fTq",arrowAndAfter:"qq1wyfcY5p_dVImKY5F1v",arrow:"_2ZtLNXp-1ZU0defH5eFHQ2",green:"_2mbKWeL_UkyBMRN50JFI60",red:"ZL2WZDjbB1jja34n6oxon",grey:"_2ZCuQblgqGCWf4OfoKs7S1"}},2267:function(e,t,a){"use strict";var r=a(118),n=a.n(r),l=a(0),o=a.n(l),i=a(1),s=a.n(i),c=a(19),d=a.n(c),u=a(2247),m=a.n(u);const p={RED:"RED",GREEN:"GREEN",GREY:"GREY"},b=({before:e,after:t,arrowColor:a=p.GREY,regularFont:r})=>o.a.createElement("div",{className:d()(m.a.arrowDiff,{[m.a.regularFont]:r})},o.a.createElement("span",{className:d()({[m.a.before]:!!t})},e),t&&o.a.createElement("span",{className:m.a.arrowAndAfter},o.a.createElement("span",{className:d()(m.a.arrow,{[m.a.green]:a===p.GREEN,[m.a.red]:a===p.RED,[m.a.grey]:a===p.GREY})},"\u2192"),t));b.propTypes={before:s.a.oneOfType([s.a.arrayOf(s.a.node),s.a.node]),after:s.a.oneOfType([s.a.arrayOf(s.a.node),s.a.node]),arrowColor:s.a.oneOf(n()(p)),regularFont:s.a.bool};var g=b;a.d(t,"b",function(){return g}),a.d(t,"a",function(){return p})},2473:function(e,t,a){e.exports={withdrawModal:"_3YQnpi55UGl6oVxWlARAqT",modalContent:"_3O60HkXBBStA3O6TkNe93r",walletShort:"_2cWGRvTr7na9rxrQzs359U",loading:"_1YESRdvoXVFUVWpDg4CorV",red:"ZIxEUi24ZX5q3lOXCXdKk",green:"_2xk7icOzvyffLbtoahQ4Zv",flexVerticalAlign:"B2mkxUv8SXqzRX5djgWbQ",settingsMenuPlacement:"_3QI7Akog7LP_C1T9cFmns2",helpIcon:"_1IxFLXYbciWnFdByTYmi9Z",settingsIcon:"_1HP_6yhOBxGcKkSsJutxPL",exchangeProvider:"_3RlHAXOIgN8DZXRFy5ePLb",dropdownContainer:"_28HtCUZu1IhC285yYBhwW3",dropdownLabel:"_3Ve8g96jiVmawKVr9HIQ5",infiniteLeverage:"_2V9xj0CEvozKvqc3hBdaqJ",settingsMenuOverlay:"_2M8Ydh2_NMQXlrVfWaLww","transition-bg":"_19cniXPYNqOdX10-qsg6jQ",settingsMenu:"xTib4OEfze4yRRSidvC5y",settingsMenuContent:"_1N9AVmBtc1MqrpgBTtO7r7",slippageButtons:"_3Pc_ZQGQ65TR480qdrnZEN"}},2508:function(e,t,a){"use strict";a.r(t);var r=a(39),n=a.n(r),l=a(231),o=a.n(l),i=a(55),s=a.n(i),c=a(6),d=a.n(c),u=a(923),m=a.n(u),p=a(0),b=a.n(p),g=a(1),h=a.n(g),E=a(60),w=a(52),y=a(9),f=a.n(y),O=a(19),v=a.n(O),A=a(74),C=a(31),N=a(2144),k=a(2131),R=a(149),M=a(387),I=a(251),j=a(625),S=a(622),T=a(2211),L=a(2183),_=a(2209),P=a(2267),W=a(2210),x=a(2132),D=a(2127),F=a(2135),G=a(190),q=a(49),V=a(51),B=a(44),U=a(26),X=a(2122),Z=a(296),z=a(102),H=a(33),Q=a(171),Y=a(24),K=a(5),J=a(42),$=a(61),ee=a(297),te=a(11),ae=a(57),re=a(94),ne=a(32),le=a(894),oe=a(170),ie=a(46),se=a(10),ce=a(191),de=a(2),ue=a(615),me=a(2473),pe=a.n(me);function ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(a,!0).forEach(function(t){_defineProperty(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function asyncGeneratorStep(e,t,a,r,n,l,o){try{var i=e[l](o),s=i.value}catch(c){return void a(c)}i.done?t(s):Promise.resolve(s).then(r,n)}function _asyncToGenerator(e){return function(){var t=this,a=arguments;return new Promise(function(r,n){var l=e.apply(t,a);function _next(e){asyncGeneratorStep(l,r,n,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(l,r,n,_next,_throw,"throw",e)}_next(void 0)})}}const be="SPOT_ACCOUNT",ge="MARGIN_ACCOUNT",he="WALLET",Ee={error:null,amount:de.a.ZERO,inputValue:"",expectedConversionAmount:null,isConversionLoading:!1,slippageInput:"",slippage:Q.a};class we extends p.Component{constructor(e){var t;super(e),t=this,this.getConversionOrderData=_asyncToGenerator(function*(){const e=t.props.walletAddress,a=t.state,r=a.amount,n=a.slippage,l=a.withdrawFromPair.orderMarket;if(r&&r.gt(0)){const a=yield Object(ue.e)({amount:r,isWithdraw:!0,orderMarket:l,slippage:n,walletAddress:e}),o=a.exchangeWrapperAddress,i=a.expectedAmount,s=a.transactionData;t.exchangeWrapperAddress=o,t.conversionData=s,t.setState({expectedConversionAmount:i,isConversionLoading:!1})}}),this.getEquityFreeCollateral=(()=>{const e=this.props,t=e.allIndexPrices,a=e.perpetualBalances,r=this.state.withdrawFromPair,n=r.orderMarket,l=r.isInversePerpetual,o=r.maxLeverage,i=a[n],s=t[n];return Object(ue.a)({balances:i,indexPrice:s,maxLeverage:o,isInversePerpetual:l})}),this.onChangeInput=(e=>{const t=this.state.withdrawMarket,a={amount:Object(ie.c)(Object(se.a)(e),t.currency.decimals),inputValue:e,error:null};this.getWithdrawNeedsConversion()&&(this.getConversionOrderData(),a.isConversionLoading=!0,a.expectedConversionAmount=null),this.setState(a)}),this.onClickMax=(()=>{const e=this.props,t=e.spotAccount,a=e.marginAccount,r=e.allMarkets,n=this.state,l=n.withdrawMarket,o=n.selectedWithdrawFrom;let i,s;if(d()([be,ge],o)){const e=o===be?t:a,n=Object(z.b)({account:e,market:l}),c=Object(le.b)({account:e,allMarkets:r,withdrawMarket:l});i=f.a.min(n.wei,c),s=Object(ce.e)(i,l.currency.decimals)}else{i=this.getEquityFreeCollateral().freeCollateral,s=Object(ce.e)(i,l.currency.decimals)}const c={amount:i,inputValue:s,error:null};this.getWithdrawNeedsConversion()&&(this.getConversionOrderData(),c.isConversionLoading=!0,c.expectedConversionAmount=null),this.setState(c)}),this.onChangeWithdrawFrom=(e=>{const t=this.props.allMarkets,a=_objectSpread({},Ee,{selectedWithdrawFrom:e});if(d()([be,ge],e))a.withdrawMarket=Object(U.c)({allMarkets:t,symbol:ee.c[0]});else{const r=Object(B.b)(e);a.withdrawFromPair=r,a.withdrawMarket=Object(U.c)({allMarkets:t,symbol:r.supportedDepositSymbols[0]})}this.setState(a)}),this.onChangeWithdrawAsset=(e=>{const t=this.props.allMarkets;this.state.withdrawMarket.symbol!==e&&this.setState(_objectSpread({},Ee,{withdrawMarket:Object(U.c)({allMarkets:t,symbol:e})}))}),this.onClickCta=_asyncToGenerator(function*(){const e=t.props,a=e.walletAddress,r=e.walletType,n=e.closeSidebarModal,l=e.convertAndWithdraw,o=e.withdrawPerpetual,i=e.withdrawSolo,s=e.stringGetter,c=t.state,u=c.amount,m=c.selectedWithdrawFrom,p=c.withdrawFromPair,b=c.withdrawMarket;t.setState({loading:!0});try{if(d()([be,ge],m))yield i({accountNumber:m===be?J.c:J.b,withdrawToAddress:Object(U.h)(b)?ne.a.contracts.payableProxy.options.address:a,market:b,amount:u,walletAddress:a,walletType:r,withdrawAll:t.getIsSoloWithdrawAll()});else{const e=p.orderMarket;t.getWithdrawNeedsConversion()?yield l({amount:u,exchangeWrapperAddress:t.exchangeWrapperAddress,orderMarket:e,walletAddress:a,walletType:r,withdrawData:t.conversionData}):yield o({amount:u,orderMarket:e,walletAddress:a,walletType:r})}n()}catch(g){const e=Object(oe.j)({error:g,walletAddress:a,walletType:r,location:"withdraw-modal",stringGetter:s}).message;t.setState({loading:!1,error:e})}});const a=e.allMarkets,r=e.currentPair,n=e.spotOnly,l=e.perpetualOnly,o=r.supportedDepositSymbols,i=r.orderMarket;let s,c,u;l?(s=Object(U.c)({allMarkets:a,symbol:o[0]}),c=i,u=r):(s=Object(U.c)({allMarkets:a,symbol:ee.c[0]}),c=n?be:ge),this.state=_objectSpread({loading:!1,showSettingsMenu:!1,withdrawMarket:s,selectedWithdrawFrom:c,withdrawFromPair:u},Ee),this.getConversionOrderData=m()(this.getConversionOrderData,500)}getWithdrawNeedsConversion(){const e=this.state,t=e.withdrawFromPair,a=e.withdrawMarket;if(t){if(t.type===Y.d.PERPETUAL){return("WETH"===t.settlementSymbol?"ETH":t.settlementSymbol)!==a.symbol}return t.quoteSymbol!==a.symbol}return!1}getIsSoloWithdrawAll(){const e=this.props,t=e.spotAccount,a=e.marginAccount,r=this.state,n=r.inputValue,l=r.withdrawMarket,o=r.selectedWithdrawFrom,i=Object(z.b)({account:o===be?t:a,market:l});return n===Object(ce.e)(Object(se.a)(i.wei),l.currency.decimals)}getError(){const e=this.props,t=e.getNewCollateralization,a=e.marginAccount,r=e.spotAccount,n=e.stringGetter,l=this.state,o=l.withdrawMarket,i=l.amount,s=l.selectedWithdrawFrom,c=l.withdrawFromPair,u=(void 0===c?{}:c).maxLeverage;if(d()([be,ge],s)){const e=o.symbol,l=o.totalSupplyWei,c=o.totalBorrowWei,d=Object(z.b)({account:s===be?r:a,market:o}),u=Object(se.a)(d.wei),m=t(new ae.a(de.a.NEGATIVE_ONE.times(i),o)),p=s===be;if(!p&&Object(se.a)(d.wei).lte(0))return n({key:K.a.ZERO_NEGATIVE_WITHDRAW,params:{SYMBOL:e}});if(i.gt(u))return n({key:K.a.INSUFFICIENT_SYMBOL_BALANCE,params:{SYMBOL:e}});if(!p&&m.lt(te.b))return n({key:K.a.WITHDRAW_UNDERCOLLATERALIZED});if(i.gt(Object(se.a)(l).minus(c)))return n({key:K.a.WITHDRAW_LENDING_LIQUIDITY})}else{const e=this.getEquityFreeCollateral().freeCollateral;if(i.gt(e))return n({key:K.a.WITHDRAW_OVER_MAX_LEVERAGE,params:{MAX_LEVERAGE:u.toFixed()}})}return null}isWithdrawEnabled(){const e=this.props.walletAddress,t=this.state,a=t.amount,r=t.selectedWithdrawFrom;if(!e)return!1;if(a.lte(0)||a.isNaN())return!1;if(!d()([be,ge],r)){const e=this.getEquityFreeCollateral().freeCollateral;if(a.gt(e))return!1}return!0}renderAmountInput(){const e=this.props.stringGetter,t=this.state,a=t.inputValue,r=t.loading,n=t.withdrawMarket,l=t.selectedWithdrawFrom,o=t.withdrawFromPair,i=t.showSettingsMenu,s=o||{},c=s.baseSymbol,u=s.displayQuoteSymbol,m=s.isInversePerpetual,g=d()([be,ge],l),h=_objectSpread({},n);return g||(h.symbol=m?c:u),b.a.createElement(D.b,{label:b.a.createElement("div",{className:v()(pe.a.flexVerticalAlign,pe.a.settingsMenuPlacement)},e({key:K.a.AMOUNT}),this.getWithdrawNeedsConversion()&&b.a.createElement(p.Fragment,null,b.a.createElement("div",{role:"button",tabIndex:0,className:v()(pe.a.flexVerticalAlign,pe.a.settingsIcon),onClick:()=>this.setState({showSettingsMenu:!0})},b.a.createElement(C.D,null)),i&&this.renderSettingsMenu()))},b.a.createElement(T.a,{receiptConfig:g?this.getWithdrawFromSoloReceiptConfig():this.getWithrawFromPerpetualReceiptConfig()},b.a.createElement(W.c,{disabled:r,onChange:this.onChangeInput,onClickMax:this.onClickMax,value:a})))}renderSettingsMenu(){const e=this.props.stringGetter,t=this.state,a=t.slippage,r=t.slippageInput;return b.a.createElement("div",{className:pe.a.settingsMenu},b.a.createElement(M.a,{noBorder:!0,title:e({key:K.a.SETTINGS}),closeModal:()=>this.setState({showSettingsMenu:!1})}),b.a.createElement("div",{className:pe.a.settingsMenuContent},b.a.createElement(D.b,{label:b.a.createElement(L.a,{tooltip:"perpetual-withdraw-max-slippage",top:12,left:-38},e({key:K.a.MAXIMUM_SLIPPAGE}))},b.a.createElement("div",{className:pe.a.slippageButtons},b.a.createElement(G.f,{uppercase:!1,size:G.e.SMALL,active:a&&a.eq(.001),onClick:()=>{this.getConversionOrderData(),this.setState({slippage:Object(se.a)(.001),slippageInput:"",isConversionLoading:!0,expectedConversionAmount:null})}},"0.10%"),b.a.createElement(G.f,{uppercase:!1,size:G.e.SMALL,active:a&&a.eq(.0025),onClick:()=>{this.getConversionOrderData(),this.setState({slippage:Object(se.a)(.0025),slippageInput:"",isConversionLoading:!0,expectedConversionAmount:null})}},"0.25%"),b.a.createElement(W.c,{centered:!0,regularFont:!0,active:!!r,size:W.a.SMALL,type:W.b.PERCENT,max:Q.b.times(100).toNumber(),placeholder:e({key:K.a.CUSTOM_INPUT}),value:r,onChange:e=>{this.getConversionOrderData(),this.setState({slippage:e?Object(se.a)(e).div(100):Q.a,slippageInput:e,isConversionLoading:!0,expectedConversionAmount:null})}})))))}getWithdrawFromSoloReceiptConfig(){const e=this.props,t=e.getNewCollateralization,a=e.marginAccountCollateralization,r=e.marginAccount,n=e.spotAccount,l=e.stringGetter,o=this.state,i=o.amount,s=o.withdrawMarket,c=o.selectedWithdrawFrom,d=s.symbol,u=s.currency,m=c===be,g=Object(z.b)({account:m?n:r,market:s}),h=Object(se.a)(g.wei),E=Object(ce.e)(h,u.decimals),w=this.getIsSoloWithdrawAll()?$.o:Object(ce.e)(h.minus(i),u.decimals),y=t(new ae.a(de.a.NEGATIVE_ONE.times(i),s)),f=[{key:K.a.AVAILABLE,label:b.a.createElement(p.Fragment,null,l({key:K.a.AVAILABLE}),b.a.createElement(I.a,{marginLeft:!0},d)),value:b.a.createElement(P.b,{before:E,after:i.gt(0)&&b.a.createElement("div",{className:v()({[pe.a.red]:i.gt(h)})},w),arrowColor:P.a.RED})}];return m||f.push({key:K.a.COLLATERALIZATION,label:l({key:K.a.COLLATERALIZATION}),value:b.a.createElement(P.b,{before:b.a.createElement(N.b,{collateralization:a}),after:i.gt(0)&&y.isFinite()&&b.a.createElement("div",{className:v()({[pe.a.red]:y.lt(te.b)})},b.a.createElement(N.b,{collateralization:y})),arrowColor:P.a.RED})}),f}getWithrawFromPerpetualReceiptConfig(){const e=this.props,t=e.allIndexPrices,a=e.perpetualBalances,r=e.stringGetter,n=this.state,l=n.amount,o=n.withdrawMarket.currency,i=n.withdrawFromPair,s=i.displayQuoteSymbol,c=i.orderMarket,d=i.maxLeverage,u=i.isInversePerpetual,m=this.getEquityFreeCollateral(),p=m.equity,g=m.freeCollateral,h=Object(ce.e)(p,o.decimals),E=Object(ce.e)(g,o.decimals),w=p.minus(l),y=Object(ce.e)(w,o.decimals),f=g.minus(l),O=Object(ce.e)(f,o.decimals),A=a[c],C=t[c],N=Object(se.a)(A.position),k=Object(se.a)(A.margin),R=Object(ue.c)({positionBN:N,marginBN:k,indexPrice:C,isInversePerpetual:u}),M=R.isZero()?"-":`${R.toFixed($.e)}X`;let j;l&&l.gt(0)&&(j=Object(ue.c)({positionBN:N,marginBN:k.minus(l),indexPrice:C,isInversePerpetual:u}));let S="-";!j||!j.lt(0)&&j.isFinite()?j&&j.gt(0)&&(S=`${j.toFixed($.e)}X`):S=b.a.createElement("div",{className:pe.a.infiniteLeverage},"\u221e");const T=j&&M!==S;return[{key:K.a.EQUITY,label:b.a.createElement(L.a,{top:12,left:-40,tooltip:"perpetual-equity",className:pe.a.flexVerticalAlign},r({key:K.a.EQUITY}),b.a.createElement(I.a,{marginLeft:!0},s)),value:b.a.createElement(P.b,{before:h,after:l.gt(0)&&b.a.createElement("div",{className:v()({[pe.a.red]:w.lt(0)})},y),arrowColor:P.a.RED})},{key:K.a.FREE_COLLATERAL_ABBREVIATED,label:b.a.createElement(L.a,{top:12,left:-40,tooltip:"perpetual-free-collateral",className:pe.a.flexVerticalAlign},r({key:K.a.FREE_COLLATERAL_ABBREVIATED}),b.a.createElement(I.a,{marginLeft:!0},s)),value:b.a.createElement(P.b,{before:E,after:l.gt(0)&&b.a.createElement("div",{className:v()({[pe.a.red]:f.lt(0)})},O),arrowColor:P.a.RED})},{key:K.a.LEVERAGE,label:r({key:K.a.LEVERAGE}),value:b.a.createElement(P.b,{before:M,after:T&&b.a.createElement("div",{className:v()({[pe.a.red]:j.gt(d)||j.lt(0)})},S),arrowColor:P.a.RED})}]}renderSourceAccountDropdown(){const e=this.props,t=e.marginOnly,a=e.perpetualOnly,r=e.spotOnly,n=e.stringGetter,l=this.state.selectedWithdrawFrom,o={key:be,label:b.a.createElement("div",{className:pe.a.dropdownLabel},n({key:K.a.SPOT_ACCOUNT})),icon:b.a.createElement(C.hb,null),iconUsesFill:!0},i={key:ge,label:b.a.createElement("div",{className:pe.a.dropdownLabel},n({key:K.a.MARGIN_ACCOUNT})),icon:b.a.createElement(C.R,null),iconUsesFill:!0},c=[...s()(Y.f,({orderMarket:e,marketName:t,baseSymbol:a,displayQuoteSymbol:r})=>({key:e,label:b.a.createElement("div",{className:pe.a.dropdownLabel},t," ",n({key:K.a.PERPETUAL_CONTRACT_SHORT})),icon:b.a.createElement(k.a,{baseSymbol:a,quoteSymbol:r})}))];let d;return d=r?[o]:t?[i]:a?c:[o,i,...c],b.a.createElement(D.b,{label:n({key:K.a.SOURCE_ACCOUNT})},b.a.createElement("div",{className:pe.a.dropdownContainer},b.a.createElement(F.a,{selectedItemKey:l,onChangeSelection:this.onChangeWithdrawFrom,dropdownMenuItems:d})))}renderDestinationDropdown(){const e=this.props,t=e.isWalletInvalid,a=e.walletAddress,r=e.walletType,n=e.stringGetter;let l=n({key:K.a.NOT_CONNECTED});return a&&!t&&(l=b.a.createElement(p.Fragment,null,n({key:K.a.WALLET}),b.a.createElement(j.a,{className:pe.a.walletShort,hash:a}))),b.a.createElement(D.b,{label:n({key:K.a.DESTINATION})},b.a.createElement("div",{className:pe.a.dropdownContainer},b.a.createElement(F.a,{selectedItemKey:he,onChangeSelection:o.a,dropdownMenuItems:[{key:he,label:b.a.createElement("div",{className:pe.a.dropdownLabel},a&&b.a.createElement(S.a,{walletType:r}),l)}]})))}getConversionReceiptConfig(){const e=this.props,t=e.allMarkets,a=e.stringGetter,r=this.state,l=r.amount,o=r.withdrawMarket,i=r.selectedWithdrawFrom,s=r.withdrawFromPair,c=r.expectedConversionAmount,u=r.isConversionLoading,m=this.getWithdrawNeedsConversion(),p=this.getError(),g=s||{},h=g.baseSymbol,E=g.displayQuoteSymbol,w=g.isInversePerpetual,y=g.supportedDepositSymbols,f=d()([be,ge],i),O=_objectSpread({},o);f||(O.symbol=w?h:E);let A="-";if(s&&n()(y)>1){const e=de.a.ONE.toFixed($.n);if(m){if(!p&&l&&!l.isZero())if(u||m&&!c)A=b.a.createElement(x.a,{compact:!0});else{const a=Object(U.c)({allMarkets:t,symbol:s.quoteSymbol});A=`${e} \u2248 ${Object(ce.c)(new re.a(c.div(l),o,a).getNaturalValue(),$.n)}`}}else A=`${e} = ${e}`}const N=[{key:K.a.SWAP,label:b.a.createElement("div",{className:pe.a.flexVerticalAlign},a({key:K.a.SWAP}),b.a.createElement(L.a,{top:12,left:-78,tooltip:"perpetual-withdraw-asset",className:v()(pe.a.flexVerticalAlign,pe.a.helpIcon)},b.a.createElement(C.I,null))),value:b.a.createElement(P.b,{before:b.a.createElement(I.a,null,s.displayQuoteSymbol),after:b.a.createElement(I.a,null,o.symbol)})},{key:K.a.EXCHANGE_RATE,label:a({key:K.a.EXCHANGE_RATE}),value:A}];return m&&N.push({key:K.a.PROVIDER,label:a({key:K.a.PROVIDER}),value:b.a.createElement("div",{className:pe.a.exchangeProvider},b.a.createElement("img",{src:"/curve.png",alt:""}),"Curve"),regularFont:!0}),N}renderAssetDropdown(){const e=this.props,t=e.allMarkets,a=e.stringGetter,r=this.state,n=r.withdrawMarket,l=r.selectedWithdrawFrom,o=r.withdrawFromPair,i=(o||{}).supportedDepositSymbols,c=d()([be,ge],l),u=c?ee.c:i,m=b.a.createElement(F.a,{selectedItemKey:n.symbol,onChangeSelection:this.onChangeWithdrawAsset,dropdownMenuItems:s()(u,e=>{const a=Object(U.c)({allMarkets:t,symbol:e}),r=a.symbol;return{key:r,label:a.name,tag:r,icon:b.a.createElement(k.a,{baseSymbol:r}),menuOnlyDetail:!c&&r!==o.settlementSymbol&&b.a.createElement(C.jb,null)}})});return b.a.createElement(D.b,{label:a({key:K.a.ASSET})},c?m:b.a.createElement(T.a,{receiptConfig:this.getConversionReceiptConfig()},m))}getWalletDestinationReceiptConfig(){const e=this.props,t=e.allMarkets,a=e.getWalletBalance,r=e.stringGetter,n=this.state,l=n.amount,o=n.expectedConversionAmount,i=n.isConversionLoading,s=n.selectedWithdrawFrom,c=n.withdrawFromPair,u=n.withdrawMarket,m=u.symbol,g=u.currency,h=this.getWithdrawNeedsConversion(),E=!this.getError()&&l&&!l.isZero(),w=h?o:l,y=a(u),f=Object(ce.e)(y,g.decimals);let O,v;E&&(O=y.plus(w),v=Object(ce.e)(O,g.decimals));const A=[{key:K.a.DESTINATION,label:b.a.createElement(p.Fragment,null,r({key:K.a.DESTINATION}),b.a.createElement(I.a,{marginLeft:!0},m)),value:b.a.createElement(P.b,{before:f,after:E&&w&&w.gt(0)&&v,arrowColor:P.a.GREEN})}];if(!d()([be,ge],s)){const e=Object(U.c)({allMarkets:t,symbol:c.settlementSymbol}).currency.decimals;let a="-";E&&(a=i||h&&!o?b.a.createElement(x.a,{compact:!0}):h?o?`\u2248 ${Object(ce.e)(o,e)}`:"-":Object(ce.e)(l,e)),A.unshift({key:K.a.WITHDRAW,label:b.a.createElement(p.Fragment,null,r({key:K.a.WITHDRAW}),b.a.createElement(I.a,{marginLeft:!0},m)),value:a})}return A}renderModal(){const e=this.props,t=e.closeSidebarModal,a=e.stringGetter,r=this.state,n=r.error,l=r.loading,o=r.showSettingsMenu,i=n||this.getError();return b.a.createElement("div",{className:pe.a.withdrawModal},b.a.createElement(M.a,{noBorder:!0,title:a({key:K.a.WITHDRAW}),closeModal:t}),b.a.createElement("div",{className:pe.a.modalContent},b.a.createElement("div",null,this.renderSourceAccountDropdown(),this.renderDestinationDropdown(),this.renderAssetDropdown(),this.renderAmountInput(),i?b.a.createElement(_.b,{type:_.a.ERROR,message:i}):null),b.a.createElement(T.a,{receiptOnTop:!0,receiptConfig:this.getWalletDestinationReceiptConfig()},b.a.createElement(G.f,{purple:!0,fullWidth:!0,size:G.e.LARGE,disabled:!this.isWithdrawEnabled()||i,onClick:this.onClickCta,isLoading:l},a({key:K.a.CONFIRM_WITHDRAW}))),o&&b.a.createElement("div",{role:"button",tabIndex:0,className:pe.a.settingsMenuOverlay,onClick:()=>this.setState({showSettingsMenu:!1})})))}render(){const e=this.props,t=e.areIndexPricesLoaded,a=e.areSoloAccountsLoaded,r=e.arePerpetualBalancesLoaded;return a&&r&&t?this.renderModal():b.a.createElement("div",{className:pe.a.loading},b.a.createElement(R.a,null))}}we.propTypes={allIndexPrices:h.a.object.isRequired,allMarkets:h.a.array.isRequired,areIndexPricesLoaded:h.a.bool.isRequired,arePerpetualBalancesLoaded:h.a.bool.isRequired,areSoloAccountsLoaded:h.a.bool.isRequired,closeSidebarModal:h.a.func.isRequired,convertAndWithdraw:h.a.func.isRequired,currentPair:h.a.object.isRequired,getNewCollateralization:h.a.func.isRequired,getWalletBalance:h.a.func.isRequired,isWalletInvalid:h.a.bool.isRequired,marginAccount:h.a.object,marginAccountCollateralization:h.a.object,marginOnly:h.a.bool,perpetualBalances:h.a.object.isRequired,perpetualOnly:h.a.bool,spotAccount:h.a.object,spotOnly:h.a.bool,stringGetter:h.a.func.isRequired,walletAddress:h.a.string,walletType:h.a.string,withdrawPerpetual:h.a.func.isRequired,withdrawSolo:h.a.func.isRequired};var ye=Object(A.k)(Object(w.c)(e=>({allIndexPrices:Object(X.b)(e),allMarkets:Object(U.d)(e),areIndexPricesLoaded:Object(X.c)(e),arePerpetualBalancesLoaded:Object(Z.c)(e),areSoloAccountsLoaded:Object(z.i)(e),currentPair:Object(B.e)(e),getNewCollateralization:t=>Object(z.u)(e,[t]),getWalletBalance:t=>Object(H.n)(e,t),isWalletConnected:Object(H.u)(e),isWalletInvalid:Object(H.v)(e),marginAccount:Object(z.r)(e),marginAccountCollateralization:Object(z.s)(e),perpetualBalances:Object(Z.e)(e),spotAccount:Object(z.v)(e),walletAddress:Object(H.m)(e),walletType:Object(H.q)(e)}),e=>Object(E.b)({convertAndWithdraw:V.b,withdrawPerpetual:V.k,withdrawSolo:q.g},e))(we));a.d(t,"default",function(){return ye})}}]);