(window.webpackJsonp=window.webpackJsonp||[]).push([[37,7,11],{2122:function(e,t,a){"use strict";a.d(t,"b",function(){return d}),a.d(t,"c",function(){return u}),a.d(t,"d",function(){return E}),a.d(t,"a",function(){return m});var r=a(4),n=a.n(r),i=a(41),l=a(44),o=a(26),s=a(94),c=a(10);const d=e=>n()(e,"indexPrices.indexPrices"),u=e=>n()(e,"indexPrices.areIndexPricesLoaded"),E=Object(i.a)([l.e,d,o.d],(e,t,a)=>m({pair:e,allIndexPrices:t,allMarkets:a})),m=({pair:e,allIndexPrices:t,allMarkets:a})=>{const r=e.orderMarket,n=e.baseSymbol,i=e.quoteSymbol,l=Object(o.c)({allMarkets:a,symbol:n}),d=Object(o.c)({allMarkets:a,symbol:i}),u=t[r];if(u)return new s.a(u,l,d).getNaturalValue();const E=Object(o.c)({allMarkets:a,symbol:"DAI"});if(E&&E.oraclePrice){if("WETH-DAI"===r){if(t["WETH-USDC"])return new s.a(t["WETH-USDC"],l,Object(o.c)({allMarkets:a,symbol:"USDC"})).getNaturalValue().div(E.oraclePrice)}if("DAI-USDC"===r)return Object(c.a)(E.oraclePrice)}return null}},2129:function(e,t,a){"use strict";var r=a(0),n=a.n(r),i=a(1),l=a.n(i),o=a(190),s=a(2241),c=a.n(s);const d=({title:e,buttonConfig:t})=>n.a.createElement("div",{className:c.a.wrapper},n.a.createElement("div",{className:c.a.contentHeader},e,t&&n.a.createElement(o.f,{purple:!0,onClick:t.onClick,className:c.a.button},t.label)));d.propTypes={title:l.a.oneOfType([l.a.string,l.a.node]).isRequired,buttonConfig:l.a.shape({label:l.a.string.isRequired,onClick:l.a.func.isRequired})};var u=d,E=a(19),m=a.n(E),p=a(2242),b=a.n(p);const y=({children:e,noMarginBottom:t,useTableMargins:a})=>n.a.createElement("div",{className:b.a.contentWidthWrapper},n.a.createElement("div",{className:m()(b.a.content,{[b.a.noMarginBottom]:t,[b.a.useTableMargins]:a})},e));y.propTypes={children:l.a.oneOfType([l.a.arrayOf(l.a.node),l.a.node]),noMarginBottom:l.a.bool,useTableMargins:l.a.bool};var T=y,O=a(55),g=a.n(O),A=a(2243),h=a.n(A);const _=({onClick:e,selectedTabKey:t,tabConfig:a,cta:r})=>n.a.createElement("div",{className:h.a.wrapper},n.a.createElement("div",{className:h.a.contentHeader},n.a.createElement("div",{className:h.a.tabs},g()(a,({key:a,label:r})=>n.a.createElement("div",{key:a,role:"button",tabIndex:0,className:m()(h.a.tab,{[h.a.selected]:t===a}),onClick:()=>e(a)},r))),r));_.propTypes={cta:l.a.oneOfType([l.a.arrayOf(l.a.node),l.a.node]),onClick:l.a.func.isRequired,selectedTabKey:l.a.string.isRequired,tabConfig:l.a.arrayOf(l.a.shape({key:l.a.string.isRequired,label:l.a.string.isRequired})).isRequired};var S=_;a.d(t,"a",function(){return u}),a.d(t,"c",function(){return T}),a.d(t,"b",function(){return S})},2131:function(e,t,a){"use strict";var r=a(0),n=a.n(r),i=a(1),l=a.n(i),o=a(19),s=a.n(o),c=a(2128),d=a(2189),u=a.n(d);const E={ETH:"#7a57dd",DAI:"#fdc134",USDC:"#366edd",USD:"#29ab6c",LINK:"#335dd2",BTC:"#f49b33",USDT:"#43A182"},m=({baseSymbol:e,quoteSymbol:t,large:a})=>n.a.createElement("div",{className:s()(u.a.gradientAssetIcon,{[u.a.large]:a}),style:{background:t?`linear-gradient(141.71deg, ${E["WETH"===e?"ETH":e]} 14.34%, ${E[t]} 86.15%)`:E[e]}},n.a.createElement(c.a,{noColor:!0,symbol:e}));m.propTypes={baseSymbol:l.a.string.isRequired,quoteSymbol:l.a.string,large:l.a.bool};var p=m;a.d(t,"a",function(){return p})},2142:function(e,t,a){"use strict";var r=a(55),n=a.n(r),i=a(0),l=a.n(i),o=a(1),s=a.n(o),c=a(52),d=a(19),u=a.n(d),E=a(118),m=a.n(E),p=a(74),b=a(31),y=a(2183),T=a(2239),O=a.n(T);function ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}const g={INCREASING:"INCREASING",DECREASING:"DECREASING"},A=({className:e,extraPadding:t,leftPaddingOnly:a,minWidth:r="100%",rightPaddingOnly:o,sortableTableConfig:s,stringGetter:c,tableConfig:d})=>l.a.createElement("div",{className:u()(O.a.tableHeader,e,{[O.a.extraPadding]:t,[O.a.leftPaddingOnly]:a,[O.a.rightPaddingOnly]:o}),style:{minWidth:r}},n()(d,({sortKey:e,titleKey:t,secondaryTitleKey:a,width:r,tooltipConfig:n,rightAlign:o})=>{const d=s&&e,E=d&&s.sortedByKey===e,m=d?{role:"button",tabIndex:0,onClick:()=>s.onClickTableHeader(e)}:{};let p;return E&&(p=s.sortDirection===g.INCREASING?l.a.createElement("div",{className:O.a.sortArrow},l.a.createElement(b.b,null)):l.a.createElement("div",{className:u()(O.a.sortArrow,O.a.upArrow)},l.a.createElement(b.b,null))),l.a.createElement("div",_extends({key:t,style:{flexBasis:r},className:u()(O.a.headerItem,{[O.a.headerItemSortable]:d,[O.a.headerItemSortedBy]:E,[O.a.rightAlign]:o,[O.a.withTooltip]:n})},m),c({key:t}),a&&l.a.createElement(i.Fragment,null,l.a.createElement("span",{className:O.a.titleDivider},"/"),c({key:a})),p,n&&!p&&l.a.createElement("div",{role:"button",tabIndex:0,className:O.a.helpIcon,onClick:e=>e.stopPropagation()},l.a.createElement(y.a,{shortDelay:!0,key:t+r,top:n.top||12,left:n.left||-90,tooltip:n.name},l.a.createElement(b.I,null))))})),h={sortableTableConfig:s.a.shape({sortedByKey:s.a.string,sortDirection:s.a.oneOf(m()(g)),onClickTableHeader:s.a.func.isRequired}),tableConfig:s.a.arrayOf(s.a.shape({sortKey:s.a.string,titleKey:s.a.string,secondaryTitleKey:s.a.string,width:s.a.oneOfType([s.a.string,s.a.number]).isRequired,tooltipConfig:s.a.shape({name:s.a.string.isRequired,top:s.a.number,left:s.a.number}),rightAlign:s.a.bool})).isRequired};A.propTypes=function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(a,!0).forEach(function(t){_defineProperty(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({className:s.a.string,extraPadding:s.a.bool,leftPaddingOnly:s.a.bool,minWidth:s.a.oneOfType([s.a.string,s.a.number]),rightPaddingOnly:s.a.bool,stringGetter:s.a.func.isRequired},h);var _=Object(p.k)(A),S=a(300),I=a(146),R=a(2240),L=a.n(R);function table_ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function table_defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _slicedToArray(e,t){return function _arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function _iterableToArrayLimit(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var a=[],r=!0,n=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(a.push(l.value),!t||a.length!==t);r=!0);}catch(s){n=!0,i=s}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}return a}(e,t)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}const f=({children:e,className:t,extraPadding:a=!1,fixedCellConfig:r,isFullWidthTable:o=!0,isLoading:s,isSidebarOpen:c,noBorders:d,numLoadingRows:E,onTableVerticalScroll:m,pageViewport:p,rowContainerHeight:b,rowContainerRef:y,scrollingMinWidth:T,sortableTableConfig:O,tableConfig:g,tableLabel:A})=>{const h=Object(i.useRef)(null),I=_slicedToArray(Object(i.useState)(!1),2),R=I[0],f=I[1],P=_slicedToArray(Object(i.useState)(!1),2),k=P[0],C=P[1],w=_slicedToArray(Object(i.useState)(!0),2),D=w[0],M=w[1];if(Object(i.useEffect)(()=>{const e=h.current;e&&(e.clientWidth<e.scrollWidth?f(!0):f(!1))},[p.width,c]),Object(i.useEffect)(()=>{const e=()=>{const e=h.current;e&&(e.scrollLeft+e.clientWidth===e.scrollWidth?C(!0):C(!1),0===e.scrollLeft?M(!0):M(!1))};return h.current.addEventListener("scroll",e),()=>h.current.removeEventListener("scroll",e)},[]),s){const e=[...Array(E)].map((e,t)=>l.a.createElement("div",{key:t,className:u()(L.a.row,L.a.noBorder)})),n=l.a.createElement("div",{className:u()(L.a.table,{[L.a.withFixedCell]:!!r,[L.a.isFullWidthTable]:o,[L.a.noBorders]:d},t)},r&&l.a.createElement("div",{className:L.a.fixedCells,style:{flexBasis:r.width,minWidth:r.minWidth}},l.a.createElement(_,{leftPaddingOnly:!0,tableConfig:g.slice(0,1)}),e),r||T?l.a.createElement("div",{className:u()(L.a.gradientWrapper,{[L.a.hideAfterGradient]:!R,[L.a.hideBeforeGradient]:!0})},l.a.createElement("div",{ref:h,className:u()(L.a.scrollingColumns,L.a.overflowScroll),style:{flexBasis:`calc(100% - ${r?r.width:0}`}},l.a.createElement(_,{extraPadding:a,rightPaddingOnly:!!r,isFixedColumn:!r&&T,minWidth:T,tableConfig:r?g.slice(1):g}),e.map(e=>l.a.cloneElement(e,{style:{minWidth:T}})))):l.a.createElement(l.a.Fragment,null,l.a.createElement(_,{tableConfig:g}),e),l.a.createElement("div",{className:L.a.loadingSpinner},l.a.createElement(S.a,null)));return A?l.a.createElement(N,{tableLabel:A},n):n}const v=l.a.createElement("div",{className:u()(L.a.table,{[L.a.withFixedCell]:!!r,[L.a.isFullWidthTable]:o,[L.a.noBorders]:d},t)},r&&l.a.createElement("div",{className:L.a.fixedCells,style:{flexBasis:r.width,minWidth:r.minWidth}},l.a.createElement(_,{leftPaddingOnly:!0,tableConfig:g.slice(0,1),sortableTableConfig:O}),n()(r.fixedCells,(e,t)=>l.a.createElement("div",{key:t,className:L.a.row},e))),r||T?l.a.createElement("div",{className:u()(L.a.gradientWrapper,{[L.a.hideAfterGradient]:!R||k,[L.a.hideBeforeGradient]:!R||D})},l.a.createElement("div",{ref:h,className:u()(L.a.scrollingColumns,L.a.overflowScroll),style:{flexBasis:`calc(100% - ${r?r.width:0}`}},l.a.createElement(_,{extraPadding:a,rightPaddingOnly:!!r,isFixedColumn:!r&&T,minWidth:T,tableConfig:r?g.slice(1):g,sortableTableConfig:O}),m||y?l.a.createElement("div",{ref:y,className:L.a.rowContainer,onScroll:m,style:{minWidth:T,maxHeight:b||"100%"}},l.a.Children.map(e,e=>e?l.a.cloneElement(e,{minWidth:T}):null)):l.a.Children.map(e,e=>e?l.a.cloneElement(e,{minWidth:T}):null))):l.a.createElement(l.a.Fragment,null,l.a.createElement(_,{tableConfig:g,sortableTableConfig:O}),e));return A?l.a.createElement(N,{tableLabel:A},v):v};f.propTypes=function table_objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?table_ownKeys(a,!0).forEach(function(t){table_defineProperty(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):table_ownKeys(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({className:s.a.string,children:s.a.oneOfType([s.a.arrayOf(s.a.node),s.a.node]).isRequired,extraPadding:s.a.bool,isFullWidthTable:s.a.bool,isLoading:s.a.bool,isSidebarOpen:s.a.bool,fixedCellConfig:s.a.shape({width:s.a.string.isRequired,minWidth:s.a.number,fixedCells:s.a.arrayOf(s.a.node).isRequired}),numLoadingRows:s.a.number,onTableVerticalScroll:s.a.func,pageViewport:s.a.object.isRequired,rowContainerHeight:s.a.number,rowContainerRef:s.a.object,scrollingMinWidth:s.a.number,tableLabel:s.a.oneOfType([s.a.string,s.a.node])},h);var P=Object(c.c)(e=>({isSidebarOpen:Object(I.c)(e),pageViewport:Object(I.d)(e)}))(f);const N=({children:e,tableLabel:t})=>l.a.createElement("div",{className:L.a.withTableLabel},l.a.createElement("div",{className:L.a.tableLabel},t),l.a.createElement("div",{className:L.a.labeledTable},e));N.propTypes={children:s.a.oneOfType([s.a.arrayOf(s.a.node),s.a.node]).isRequired,tableLabel:s.a.oneOfType([s.a.string,s.a.node])};const k=({active:e,children:t,className:a,minWidth:r="100%",emptyState:n,extraPadding:i,onClick:o})=>l.a.createElement("div",{role:"button",tabIndex:0,className:u()(L.a.row,L.a.fullWidthRow,{[L.a.active]:e},{[L.a.emptyState]:n},{[L.a.extraPadding]:i},{[L.a.hoverableRow]:!!o},a),style:{minWidth:r},onClick:o},t);k.propTypes={active:s.a.bool,children:s.a.oneOfType([s.a.arrayOf(s.a.node),s.a.node]).isRequired,className:s.a.string,emptyState:s.a.bool,extraPadding:s.a.bool,minWidth:s.a.oneOfType([s.a.string,s.a.number]),onClick:s.a.func};const C=({children:e,className:t,green:a,muted:r,red:n,regularFont:i,rightAlignCell:o,stacked:s,width:c})=>l.a.createElement("div",{className:u()(L.a.cell,{[L.a.rightAlignCell]:o,[L.a.regularFont]:i,[L.a.stacked]:s,[L.a.green]:a,[L.a.red]:n,[L.a.muted]:r},t),style:{flexBasis:c}},e);C.propTypes={children:s.a.oneOfType([s.a.arrayOf(s.a.node),s.a.node]),className:s.a.string,green:s.a.bool,muted:s.a.bool,red:s.a.bool,regularFont:s.a.bool,rightAlignCell:s.a.bool,stacked:s.a.bool,width:s.a.oneOfType([s.a.string,s.a.number])},a.d(t,"d",function(){return P}),a.d(t,"b",function(){return k}),a.d(t,"a",function(){return C}),a.d(t,"c",function(){return g})},2144:function(e,t,a){"use strict";var r=a(55),n=a.n(r),i=a(0),l=a.n(i),o=a(1),s=a.n(o),c=a(19),d=a.n(c),u=a(191),E=a(2161),m=a.n(E);const p={SMALL:"SMALL",LARGE:"LARGE"},b=({className:e,collateralization:t,size:a,red:r,suffix:n})=>l.a.createElement("div",{className:d()(m.a.collateralization,e,{[m.a.red]:r,[m.a.small]:a===p.SMALL,[m.a.large]:a===p.LARGE})},Object(u.d)(t)||l.a.createElement("div",{className:d()(m.a.infinite,{[m.a.withSuffix]:n})},"\u221e")," ",n);b.propTypes={className:s.a.string,collateralization:s.a.object,size:s.a.oneOf(n()(p,e=>e)),red:s.a.bool,suffix:s.a.string},b.defaultProps={size:p.LARGE};var y=b;a.d(t,"b",function(){return y}),a.d(t,"a",function(){return p})},2148:function(e,t,a){e.exports={portfolioPageContent:"s2AZy1lCjRDL5UleUFOFx",sidebar:"guRMlQe73U6b_Uc5FNkFb",menuItemWithTag:"_1bPZNPyfe5FMtZ_UiQ6Mdj",selected:"_1Scjr7TI6TDCtCk2wX_VfV",tag:"_21Nht4tStv-jtfy2PzrfJW",sidebarButtons:"QmL82QpvzDhpIVU5hnFcF",green:"_2OrUWXMPk9I9iHUA6AeXd9",red:"_3NPEqIxZrsjjakw7gGjYck",interestRateDivider:"TeJMdGc6r4k8BI7WDdjCp",cursorPointer:"_1dTEZlhYEa0SVuHDjtyYnK",hideBottomBorder:"_1X137CFaEIsTgE1OLY0dAR",marginTableLabel:"_2Ti6GzVqngwU4U4gir9kAb",marginCollateralization:"_2cWYc7PBY_CwPCRU3vrRc5",marketAssetName:"_360NUFM7eiwmg3TUq9YzxG",pairCellText:"_1B4907iPYQCaJc1KAtC5tU",label:"_1-l6zMk6KjgZGRfBJzg7N5",stackedValueWithTag:"_3Vchd4dnU04dhnteIqE97b",initialTimestampCell:"_2TRaCmmmVFnC3EkPqwqiYO",cellTooltip:"_1EsechxMV3R7dEzkoBpQIL",emptyStateRow:"_2ztbcOSzKRwyFWnJRngWDS",linkOut:"_2RSezrCsryM5CJfMkIH1Pc",historyPageContent:"_2DU1iqT9GiGzWFYsyfr6t7",historyDownloadButton:"pgmIhMtQLuGhEYobWjVHV",moreRowsLoadingSpinner:"_1lE2rJwdt3VhuKtCgQtZ9w"}},2161:function(e,t,a){e.exports={collateralization:"_3Jjxqc_v5i6Sl5-pDI7v7m",red:"_2gfHkqdC0ZUKvmVSopFplt",withSuffix:"_2p_GsP7NpEmOIJxEpIcqvQ",infinite:"_1nKenGGt0Xnppcydfg8wMl",small:"wO275Y596ZIW4aEBgpYmG",large:"_3GPX8iSGVCnbO9zOBVdBHr"}},2162:function(e,t,a){"use strict";a.d(t,"g",function(){return v}),a.d(t,"a",function(){return j}),a.d(t,"b",function(){return x}),a.d(t,"c",function(){return G}),a.d(t,"d",function(){return B}),a.d(t,"e",function(){return U}),a.d(t,"f",function(){return W});var r=a(234),n=a.n(r),i=a(17),l=a.n(i),o=a(90),s=a.n(o),c=a(922),d=a.n(c),u=a(326),E=a.n(u),m=a(55),p=a.n(m),b=a(6),y=a.n(b),T=a(67),O=a.n(T),g=a(39),A=a.n(g),h=a(4),_=a.n(h),S=a(41),I=a(44),R=a(26),L=a(296),f=a(235),P=a(42),N=a(50),k=a(94),C=a(57),w=a(10),D=a(2);function ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const M=e=>_()(e,"standardActions.standardActions"),v=e=>_()(e,"standardActions.standardActionsVersion"),j=e=>_()(e,"standardActions.areStandardActionsLoaded"),x=e=>_()(e,"standardActions.hasRemainingActionsToFetch"),G=e=>{const t=M(e);return _()(t,`[${A()(t)-1}].confirmedAt`)},B=d()(e=>{const t=M(e),a=Object(R.d)(e),r=O()(t,({type:e,number:t,product:a})=>y()([f.d.DEPOSIT,f.d.WITHDRAW,f.d.BORROW,f.d.REPAY],e)&&(P.c.eq(t)||P.b.eq(t)||a===f.b.PERPETUAL));return p()(r,({asset:e,confirmedAt:t,market:r,number:n,product:i,transactionHash:l,transferAmount:o,type:s,uuid:c})=>{const d=Object(I.b)(r);let u;return i===f.b.PERPETUAL&&(u=d.marketName),{accountNumber:n,amountMV:new C.a(o,Object(R.c)({allMarkets:a,symbol:"SAI"===e?"DAI":e})),confirmedAt:t,marketName:u,pair:d,product:i,transactionHash:l,type:s,uuid:c}})},e=>v(e)),U=d()(e=>{const t=M(e),a=O()(t,({type:e})=>!y()([f.d.DEPOSIT,f.d.WITHDRAW,f.d.BORROW,f.d.REPAY,f.d.ACCOUNT_SETTLE],e)),r=p()(a,({uuid:t,type:a,side:r,market:n,price:i,pnl:l,tradeAmount:o,feeAmount:s,transferAmount:c,transactionHash:d,confirmedAt:u})=>{let E=n;"WETH-SAI"===n&&(E="WETH-DAI"),"SAI-USDC"===n&&(E="DAI-USDC");const m=Object(I.b)(E);if(!m)return"SAI-DAI"!==n&&N.a.notify(new Error(`Unknown market while parsing standard actions: ${n}`)),null;const p=m.baseSymbol,b=m.displayQuoteSymbol,T=m.quoteSymbol,O=m.isInversePerpetual,g=Object(R.d)(e),A=Object(R.c)({allMarkets:g,symbol:p}),h=Object(R.c)({allMarkets:g,symbol:T}),_=Object(w.a)(o),S=Object(w.a)(c),L=y()([f.d.ISOLATED_OPEN,f.d.ISOLATED_PARTIAL_CLOSE,f.d.ISOLATED_FULL_CLOSE],a),P=r===f.c.LONG;let D,M,v,j,x;switch(a){case f.d.ISOLATED_OPEN:D=f.a.OPEN;break;case f.d.ISOLATED_PARTIAL_CLOSE:case f.d.ISOLATED_FULL_CLOSE:D=f.a.CLOSE;break;case f.d.EXPIRED:D=f.a.EXP;break;case f.d.LIQUIDATED:D=f.a.LIQ;break;case f.d.OPEN:D=f.a.OPEN;break;case f.d.CLOSE:D=f.a.CLOSE;break;case f.d.INCREASE:D=f.a.INCREASE;break;case f.d.DECREASE:D=f.a.DECREASE;break;default:D=f.a.TRADE}if(M=L?P?new C.a(S.plus(o),A):new C.a(_,A):new C.a(_,O?function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(a,!0).forEach(function(t){_defineProperty(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},h,{symbol:b}):A),L&&c){const e=_.times(i);let t;t=P?S.times(i).plus(e):S.plus(e);const a=e;v=a.div(t.minus(a)),P&&(v=v.plus(1))}return a===f.d.ISOLATED_OPEN&&(j=new C.a(S,P?A:h)),L&&a!==f.d.ISOLATED_OPEN&&(x=new C.a(S,P?A:h)),{uuid:t,pair:m,side:r,leverageBN:v,amountMV:M,payoutMV:x,pnl:l?Object(w.a)(l):null,marginDepositMV:j,feeAmountMV:new C.a(s,O?A:h),priceMP:new k.a(i,A,h),type:D,transactionHash:d,confirmedAt:u}});return E()(r)},e=>v(e)),W=Object(S.a)([M,I.e,L.e],(e,t,a)=>{const r=t.orderMarket,i=t.settlementSymbol,o=t.isInversePerpetual,c=a[r];if(!c||s()(e))return{};const d=Object(w.a)(c.position),u=o?d.lt(0):d.gt(0);if(d.isZero())return{};let E=!1;const m=[];if(l()(e,e=>{const t=e.type,a=e.side,n=e.market,l=e.product,o=e.asset;if(n===r&&(y()([f.d.INCREASE,f.d.DECREASE],t)||t===f.d.ACCOUNT_SETTLE&&o===i))m.push(e);else if(t===f.d.OPEN&&n===r&&l===f.b.PERPETUAL&&(u?a===f.c.LONG:a===f.c.SHORT))return m.push(e),E=!0,!1;return!0}),s()(m)||!E)return{};let p=D.a.ZERO,b=D.a.ZERO,T=D.a.ZERO,O=D.a.ZERO,g=D.a.ZERO,A=D.a.ZERO,h=D.a.ZERO;const _=[];n()(m,({type:e,tradeAmount:t,transferAmount:a,feeAmount:r,price:n})=>{switch(e){case f.d.ACCOUNT_SETTLE:p=p.plus(a);break;case f.d.OPEN:case f.d.INCREASE:{b=b.plus(r);const e=Object(w.a)(t),a=t,i=o?e.div(n):e.times(n);T=T.plus(a),O=O.plus(i),_.push({remainingAmount:e,price:n});break}case f.d.DECREASE:{const e=Object(w.a)(t);b=b.plus(r),g=g.plus(t),h=h.plus(o?e.div(n):e.times(n));let a=e;l()(_,({remainingAmount:e,price:t},r)=>{if(!e.isZero()){if(!a.gt(e))return A=A.plus(o?a.div(t):a.times(t)),_[r].remainingAmount=e.minus(a),!1;A=A.plus(o?a.div(t):e.times(t)),a=a.minus(e),_[r].remainingAmount=D.a.ZERO}return!0});break}}});let S=D.a.ZERO;return l()(_,({remainingAmount:e,price:t})=>{e.isZero()||(S=S.plus(o?e.div(t):e.times(t)))}),{netFunding:p,netFees:b,totalOpenBaseAmount:T,totalOpenQuoteAmount:O,totalRemainingOpenQuoteAmount:S,totalCloseBaseAmount:g,totalClosedOpenQuoteAmount:A,totalCloseQuoteAmount:h}})},2182:function(e,t,a){"use strict";var r=a(0),n=a.n(r),i=a(1),l=a.n(i),o=a(19),s=a.n(o),c=a(2188),d=a.n(c);const u=({isPositive:e=!0})=>n.a.createElement("div",{className:s()(d.a.triangleIndicator,{[d.a.positive]:e,[d.a.negative]:!e})});u.propTypes={isPositive:l.a.bool};var E=u;a.d(t,"a",function(){return E})},2183:function(e,t,a){"use strict";var r=a(0),n=a.n(r),i=a(1),l=a.n(i),o=a(19),s=a.n(o),c=a(74),d=a(5),u=a(2206),E=a(2238),m=a.n(E);const p=({children:e,className:t,condition:a,left:r,shortDelay:i,stringGetter:l,stringParams:o,tooltip:c,top:E})=>{const p={left:r,top:E},b=u.a[c];if(!b)return e;const y=b({stringGetter:l,stringParams:o}),T=y.title,O=y.body,g=y.learnMoreLink;return a?n.a.createElement("div",{className:s()(m.a.withTooltip,t)},e,n.a.createElement("div",{className:s()(m.a.mouseSpace,{[m.a.shortDelay]:i}),style:p},n.a.createElement("div",{className:m.a.tooltipContent},n.a.createElement("div",{className:m.a.title},T),n.a.createElement("div",{className:m.a.body},n.a.createElement("span",{className:m.a.description},O),g&&n.a.createElement("a",{href:g,target:"_blank",rel:"noopener noreferrer"},n.a.createElement("div",{className:m.a.learnMoreLink},l({key:d.a.LEARN_MORE})," \u2192")))))):e};p.defaultProps={left:0,top:0,condition:!0},p.propTypes={children:l.a.oneOfType([l.a.arrayOf(l.a.node),l.a.node]).isRequired,className:l.a.string,condition:l.a.bool,left:l.a.number,shortDelay:l.a.bool,stringGetter:l.a.func.isRequired,stringParams:l.a.object,tooltip:l.a.string.isRequired,top:l.a.number};var b=Object(c.k)(p);a.d(t,"a",function(){return b})},2188:function(e,t,a){e.exports={triangleIndicator:"_282O5VB9Jn_qmm0jrw9S0L",positive:"_3BJ_ds05_hVM5_X65BjcUh",negative:"_1uPBdHzygVr850awSUtP7Q"}},2189:function(e,t,a){e.exports={gradientAssetIcon:"_1ALqtP7aq65jfQTWqvhMY_",large:"u2tjSHpkBfMm5_P9XO1Py"}},2206:function(e,t,a){"use strict";var r=a(5),n={"balances-price":({stringGetter:e})=>({title:e({key:r.d.BALANCES_PRICE_TITLE}),body:e({key:r.d.BALANCES_PRICE_BODY}),learnMoreLink:"https://help.dydx.exchange/en/articles/2953486-usd-price-data-on-dydx"}),"balances-interest-rate":({stringGetter:e})=>({title:e({key:r.d.BALANCES_INTEREST_RATE_TITLE}),body:e({key:r.d.BALANCES_INTEREST_RATE_BODY}),learnMoreLink:"https://help.dydx.exchange/en/articles/2924246-how-do-interest-rates-work"}),"balances-asset-balance":({stringGetter:e})=>({title:e({key:r.d.BALANCES_ASSET_BALANCE_TITLE}),body:e({key:r.d.BALANCES_ASSET_BALANCE_BODY})}),"balances-asset-value":({stringGetter:e})=>({title:e({key:r.d.BALANCES_ASSET_VALUE_TITLE}),body:e({key:r.d.BALANCES_ASSET_VALUE_BODY})}),"balances-total-value":({stringGetter:e})=>({title:e({key:r.d.BALANCES_TOTAL_VALUE_TITLE}),body:e({key:r.d.BALANCES_TOTAL_VALUE_BODY})}),"balances-positions-value":({stringGetter:e})=>({title:e({key:r.d.BALANCES_POSITIONS_VALUE_TITLE}),body:e({key:r.d.BALANCES_POSITIONS_VALUE_BODY})}),"balances-earning-apr":({stringGetter:e})=>({title:e({key:r.d.BALANCES_EARNING_APR_TITLE}),body:e({key:r.d.BALANCES_EARNING_APR_BODY})}),"balances-paying-apr":({stringGetter:e})=>({title:e({key:r.d.BALANCES_PAYING_APR_TITLE}),body:e({key:r.d.BALANCES_PAYING_APR_BODY})})},i={"deposit-allowance":({stringGetter:e,stringParams:t})=>({title:e({key:r.d.DEPOSIT_ALLOWANCE_TITLE,params:t}),body:e({key:r.d.DEPOSIT_ALLOWANCE_BODY,params:t})}),collateralization:({stringGetter:e})=>({title:e({key:r.d.COLLATERALIZATION_TITLE}),body:e({key:r.d.COLLATERALIZATION_BODY}),learnMoreLink:"https://help.dydx.exchange/en/articles/2906495-what-is-my-collateral-requirement"}),"spot-account-balances":({stringGetter:e})=>({title:e({key:r.d.SPOT_ACCOUNT_BALANCES_TITLE}),body:e({key:r.d.SPOT_ACCOUNT_BALANCES_BODY})}),"margin-account-balances":({stringGetter:e})=>({title:e({key:r.d.MARGIN_ACCOUNT_BALANCES_TITLE}),body:e({key:r.d.MARGIN_ACCOUNT_BALANCES_BODY})}),expiration:({stringGetter:e})=>({title:e({key:r.d.EXPIRATION_TITLE}),body:e({key:r.d.EXPIRATION_BODY}),learnMoreLink:"https://help.dydx.exchange/en/articles/2906752-what-happens-at-expiration"}),"exact-expiration":({stringGetter:e,stringParams:t})=>({title:e({key:r.d.EXACT_EXPIRATION_TITLE}),body:e({key:r.d.EXACT_EXPIRATION_BODY,params:t})}),"pending-email-verification":({stringGetter:e,stringParams:t})=>({title:e({key:r.d.PENDING_EMAIL_VERIFICATION_TITLE}),body:e({key:r.d.PENDING_EMAIL_VERIFICATION_BODY,params:t})})},l={"history-time":({stringGetter:e,stringParams:t})=>({title:e({key:r.d.HISTORY_TIME_TITLE}),body:e({key:r.d.HISTORY_TIME_BODY,params:t})}),"history-pnl":({stringGetter:e})=>({title:e({key:r.d.HISTORY_PNL_TITLE}),body:e({key:r.d.HISTORY_PNL_BODY})}),"history-amount":({stringGetter:e})=>({title:e({key:r.d.HISTORY_AMOUNT_TITLE}),body:e({key:r.d.HISTORY_AMOUNT_BODY})}),"history-margin-deposit":({stringGetter:e})=>({title:e({key:r.d.HISTORY_MARGIN_DEPOSIT_TITLE}),body:e({key:r.d.HISTORY_MARGIN_DEPOSIT_BODY})}),"history-market":({stringGetter:e})=>({title:e({key:r.d.HISTORY_MARKET_TITLE}),body:e({key:r.d.HISTORY_MARKET_BODY})}),"history-side":({stringGetter:e})=>({title:e({key:r.d.HISTORY_SIDE_TITLE}),body:e({key:r.d.HISTORY_SIDE_BODY})}),"history-fee":({stringGetter:e})=>({title:e({key:r.d.HISTORY_FEE_TITLE}),body:e({key:r.d.HISTORY_FEE_BODY}),learnMoreLink:"https://help.dydx.exchange/en/articles/3784235-trade-fees-on-dydx"})},o={"perpetual-average-open":({stringGetter:e})=>({title:e({key:r.d.PERPETUAL_AVERAGE_OPEN_TITLE}),body:e({key:r.d.PERPETUAL_AVERAGE_OPEN_BODY})}),"perpetual-average-close":({stringGetter:e})=>({title:e({key:r.d.PERPETUAL_AVERAGE_CLOSE_TITLE}),body:e({key:r.d.PERPETUAL_AVERAGE_CLOSE_BODY})}),"perpetual-realized-pnl":({stringGetter:e})=>({title:e({key:r.d.PERPETUAL_REALIZED_PNL_TITLE}),body:e({key:r.d.PERPETUAL_REALIZED_PNL_BODY})}),"perpetual-unrealized-pnl":({stringGetter:e})=>({title:e({key:r.d.PERPETUAL_UNREALIZED_PNL_TITLE}),body:e({key:r.d.PERPETUAL_UNREALIZED_PNL_BODY})}),"perpetual-account":({stringGetter:e,stringParams:t})=>({title:e({key:r.d.PERPETUAL_ACCOUNT_TITLE,params:t}),body:e({key:r.d.PERPETUAL_ACCOUNT_BODY})}),"perpetual-equity":({stringGetter:e})=>({title:e({key:r.d.PERPETUAL_EQUITY_TITLE}),body:e({key:r.d.PERPETUAL_EQUITY_BODY})}),"perpetual-free-collateral":({stringGetter:e})=>({title:e({key:r.d.PERPETUAL_FREE_COLLATERAL_TITLE}),body:e({key:r.d.PERPETUAL_FREE_COLLATERAL_BODY})}),"perpetual-funding-rate":({stringGetter:e,stringParams:t})=>({title:e({key:r.d.PERPETUAL_FUNDING_RATE_TITLE}),body:e({key:r.d.PERPETUAL_FUNDING_RATE_BODY,params:t}),learnMoreLink:"https://help.dydx.exchange/articles/3937624-funding/"}),"perpetual-net-funding":({stringGetter:e})=>({title:e({key:r.d.PERPETUAL_NET_FUNDING_TITLE}),body:e({key:r.d.PERPETUAL_NET_FUNDING_BODY}),learnMoreLink:"https://help.dydx.exchange/articles/3937624-funding/"}),"perpetual-notional-value":({stringGetter:e,stringParams:t})=>({title:e({key:r.d.PERPETUAL_NOTIONAL_VALUE_TITLE}),body:e({key:r.d.PERPETUAL_NOTIONAL_VALUE_BODY,params:t})}),"perpetual-position-value":({stringGetter:e,stringParams:t})=>({title:e({key:r.d.PERPETUAL_POSITION_VALUE_TITLE}),body:e({key:r.d.PERPETUAL_POSITION_VALUE_BODY,params:t})}),"perpetual-close-position":({stringGetter:e})=>({title:e({key:r.d.PERPETUAL_CLOSE_POSITION_TITLE}),body:e({key:r.d.PERPETUAL_CLOSE_POSITION_BODY})}),"perpetual-deposit-asset":({stringGetter:e})=>({title:e({key:r.d.PERPETUAL_DEPOSIT_ASSET_TITLE}),body:e({key:r.d.PERPETUAL_DEPOSIT_ASSET_BODY})}),"perpetual-withdraw-asset":({stringGetter:e})=>({title:e({key:r.d.PERPETUAL_WITHDRAW_ASSET_TITLE}),body:e({key:r.d.PERPETUAL_WITHDRAW_ASSET_BODY})}),"perpetual-deposit-amount":({stringGetter:e})=>({title:e({key:r.d.PERPETUAL_DEPOSIT_AMOUNT_TITLE}),body:e({key:r.d.PERPETUAL_DEPOSIT_AMOUNT_BODY}),learnMoreLink:"https://help.dydx.exchange/articles/4165957-usdt-deposits-and-withdrawals"}),"perpetual-withdraw-amount":({stringGetter:e})=>({title:e({key:r.d.PERPETUAL_WITHDRAW_AMOUNT_TITLE}),body:e({key:r.d.PERPETUAL_WITHDRAW_AMOUNT_BODY}),learnMoreLink:"https://help.dydx.exchange/articles/4165957-usdt-deposits-and-withdrawals"}),"perpetual-deposit-max-slippage":({stringGetter:e})=>({title:e({key:r.d.PERPETUAL_DEPOSIT_MAX_SLIPPAGE_TITLE}),body:e({key:r.d.PERPETUAL_DEPOSIT_MAX_SLIPPAGE_BODY})}),"perpetual-withdraw-max-slippage":({stringGetter:e})=>({title:e({key:r.d.PERPETUAL_WITHDRAW_MAX_SLIPPAGE_TITLE}),body:e({key:r.d.PERPETUAL_WITHDRAW_MAX_SLIPPAGE_BODY})}),"perpetual-leverage-slider":({stringGetter:e})=>({title:e({key:r.d.PERPETUAL_LEVERAGE_SLIDER_TITLE}),body:e({key:r.d.PERPETUAL_LEVERAGE_SLIDER_BODY})})},s={"positions-side":({stringGetter:e})=>({title:e({key:r.d.POSITIONS_SIDE_TITLE}),body:e({key:r.d.POSITIONS_SIDE_BODY})}),"positions-market":({stringGetter:e})=>({title:e({key:r.d.POSITIONS_MARKET_TITLE}),body:e({key:r.d.POSITIONS_MARKET_BODY})}),"positions-leverage":({stringGetter:e})=>({title:e({key:r.d.POSITIONS_LEVERAGE_TITLE}),body:e({key:r.d.POSITIONS_LEVERAGE_BODY}),learnMoreLink:"https://help.dydx.exchange/en/articles/3087911-why-does-the-leverage-of-my-position-change"}),"positions-pnl":({stringGetter:e})=>({title:e({key:r.d.POSITIONS_PNL_TITLE}),body:e({key:r.d.POSITIONS_PNL_BODY}),learnMoreLink:"https://help.dydx.exchange/en/articles/3087922-how-is-pnl-calculated"}),"positions-size":({stringGetter:e})=>({title:e({key:r.d.POSITIONS_SIZE_TITLE}),body:e({key:r.d.POSITIONS_SIZE_BODY})}),"positions-interest-rate":({stringGetter:e})=>({title:e({key:r.d.POSITIONS_INTEREST_RATE_TITLE}),body:e({key:r.d.POSITIONS_INTEREST_RATE_BODY})}),"positions-equity":({stringGetter:e})=>({title:e({key:r.d.POSITIONS_EQUITY_TITLE}),body:e({key:r.d.POSITIONS_EQUITY_BODY})}),"positions-liq-price":({stringGetter:e})=>({title:e({key:r.d.POSITIONS_LIQ_PRICE_TITLE}),body:e({key:r.d.POSITIONS_LIQ_PRICE_BODY}),learnMoreLink:"https://help.dydx.exchange/en/articles/2906496-liquidations-on-dydx"}),"positions-open-price":({stringGetter:e})=>({title:e({key:r.d.POSITIONS_OPEN_PRICE_TITLE}),body:e({key:r.d.POSITIONS_OPEN_PRICE_BODY})}),"positions-stop-price":({stringGetter:e,stringParams:t})=>({title:e({key:r.d.POSITIONS_STOP_PRICE_TITLE}),body:e({key:r.d.POSITIONS_STOP_PRICE_BODY,params:t})}),"positions-stop-price-hover":({stringGetter:e,stringParams:t})=>({title:e({key:r.d.POSITIONS_STOP_PRICE_HOVER_TITLE}),body:e({key:r.d.POSITIONS_STOP_PRICE_HOVER_BODY,params:t})}),"positions-interest-earned":({stringGetter:e})=>({title:e({key:r.d.POSITIONS_INTEREST_EARNED_TITLE}),body:e({key:r.d.POSITIONS_INTEREST_EARNED_BODY})}),"positions-interest-owed":({stringGetter:e})=>({title:e({key:r.d.POSITIONS_INTEREST_OWED_TITLE}),body:e({key:r.d.POSITIONS_INTEREST_OWED_BODY})}),"positions-margin-deposit":({stringGetter:e})=>({title:e({key:r.d.POSITIONS_MARGIN_DEPOSIT_TITLE}),body:e({key:r.d.POSITIONS_MARGIN_DEPOSIT_BODY})}),"positions-stop-close-price":({stringGetter:e})=>({title:e({key:r.d.POSITIONS_STOP_CLOSE_PRICE_TITLE}),body:e({key:r.d.POSITIONS_STOP_CLOSE_PRICE_BODY})}),"positions-take-profit-price":({stringGetter:e})=>({title:e({key:r.d.POSITIONS_TAKE_PROFIT_PRICE_TITLE}),body:e({key:r.d.POSITIONS_TAKE_PROFIT_PRICE_BODY})}),"positions-expiry":({stringGetter:e})=>({title:e({key:r.d.POSITIONS_EXPIRY_TITLE}),body:e({key:r.d.POSITIONS_EXPIRY_BODY})}),"positions-initial-leverage":({stringGetter:e})=>({title:e({key:r.d.POSITIONS_INITIAL_LEVERAGE_TITLE}),body:e({key:r.d.POSITIONS_INITIAL_LEVERAGE_BODY})})},c=a(21);function ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const d=function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(a,!0).forEach(function(t){_defineProperty(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},n,{},i,{},l,{},o,{},s,{},{cross:({stringGetter:e})=>({title:e({key:r.d.CROSS_TITLE}),body:e({key:r.d.CROSS_BODY}),learnMoreLink:"https://help.dydx.exchange/en/articles/2906209-what-is-the-difference-between-the-isolated-and-cross-tabs"}),isolated:({stringGetter:e})=>({title:e({key:r.d.ISOLATED_TITLE}),body:e({key:r.d.ISOLATED_BODY}),learnMoreLink:"https://help.dydx.exchange/en/articles/2906209-what-is-the-difference-between-the-isolated-and-cross-tabs"}),"amount-buy":({stringGetter:e,stringParams:t})=>({title:e({key:r.d.AMOUNT_BUY_TITLE}),body:e({key:r.d.AMOUNT_BUY_BODY,params:t})}),"amount-sell":({stringGetter:e,stringParams:t})=>({title:e({key:r.d.AMOUNT_SELL_TITLE}),body:e({key:r.d.AMOUNT_SELL_BODY,params:t})}),"position-size":({stringGetter:e})=>({title:e({key:r.d.POSITION_SIZE_TITLE}),body:e({key:r.d.POSITION_SIZE_BODY})}),"isolated-trade-amount":({stringGetter:e})=>({title:e({key:r.d.ISOLATED_TRADE_AMOUNT_TITLE}),body:e({key:r.d.ISOLATED_TRADE_AMOUNT_BODY})}),leverage:({stringGetter:e})=>({title:e({key:r.d.LEVERAGE_TITLE}),body:e({key:r.d.LEVERAGE_BODY})}),"price-impact":({stringGetter:e})=>({title:e({key:r.d.PRICE_IMPACT_TITLE}),body:e({key:r.d.PRICE_IMPACT_BODY}),learnMoreLink:"https://help.dydx.exchange/en/articles/2906230-spread-price-impact-and-slippage"}),"max-slippage":({stringGetter:e})=>({title:e({key:r.d.MAX_SLIPPAGE_TITLE}),body:e({key:r.d.MAX_SLIPPAGE_BODY}),learnMoreLink:"https://help.dydx.exchange/en/articles/2906230-spread-price-impact-and-slippage"}),"slippage-expected-price":({stringGetter:e})=>({title:e({key:r.d.SLIPPAGE_EXPECTED_PRICE_TITLE}),body:e({key:r.d.SLIPPAGE_EXPECTED_PRICE_BODY}),learnMoreLink:"https://help.dydx.exchange/en/articles/2906230-spread-price-impact-and-slippage"}),"slippage-worst-price":({stringGetter:e})=>({title:e({key:r.d.SLIPPAGE_WORST_PRICE_TITLE}),body:e({key:r.d.SLIPPAGE_WORST_PRICE_BODY}),learnMoreLink:"https://help.dydx.exchange/en/articles/2906230-spread-price-impact-and-slippage"}),"fee-small-order":({stringGetter:e,stringParams:t})=>({title:e({key:r.d.FEE_SMALL_ORDER_TITLE}),body:e({key:r.d.FEE_SMALL_ORDER_BODY,params:t}),learnMoreLink:"https://help.dydx.exchange/en/articles/3784235-trade-fees-on-dydx"}),"fee-taker":({stringGetter:e})=>({title:e({key:r.d.FEE_TAKER_TITLE}),body:e({key:r.d.FEE_TAKER_BODY}),learnMoreLink:"https://help.dydx.exchange/en/articles/3784235-trade-fees-on-dydx"}),"fee-maker":({stringGetter:e})=>({title:e({key:r.d.FEE_MAKER_TITLE}),body:e({key:r.d.FEE_MAKER_BODY}),learnMoreLink:"https://help.dydx.exchange/en/articles/3784235-trade-fees-on-dydx"}),"fee-maker-rebate":({stringGetter:e})=>({title:e({key:r.d.FEE_MAKER_REBATE_TITLE}),body:e({key:r.d.FEE_MAKER_REBATE_BODY}),learnMoreLink:"https://help.dydx.exchange/en/articles/3784235-trade-fees-on-dydx"}),"stop-price":({stringGetter:e,stringParams:t})=>({title:e({key:r.d.STOP_PRICE_TITLE}),body:e({key:r.d.STOP_PRICE_BODY,params:t})}),"index-price":({stringGetter:e})=>({title:e({key:r.d.INDEX_PRICE_TITLE}),body:e({key:r.d.INDEX_PRICE_BODY}),learnMoreLink:"https://help.dydx.exchange/en/articles/4196478-what-is-the-difference-between-mid-market-price-index-price-and-oracle-price"}),"oracle-price":({stringGetter:e})=>({title:e({key:r.d.ORACLE_PRICE_TITLE}),body:e({key:r.d.ORACLE_PRICE_BODY}),learnMoreLink:"https://help.dydx.exchange/en/articles/4196478-what-is-the-difference-between-mid-market-price-index-price-and-oracle-price"}),"liquidation-price-long":({stringGetter:e,stringParams:t})=>({title:e({key:r.d.LIQUIDATION_PRICE_LONG_TITLE}),body:e({key:r.d.LIQUIDATION_PRICE_LONG_BODY,params:t}),learnMoreLink:"https://help.dydx.exchange/en/articles/2906496-liquidations-on-dydx"}),"liquidation-price-short":({stringGetter:e,stringParams:t})=>({title:e({key:r.d.LIQUIDATION_PRICE_SHORT_TITLE}),body:e({key:r.d.LIQUIDATION_PRICE_SHORT_BODY,params:t}),learnMoreLink:"https://help.dydx.exchange/en/articles/2906496-liquidations-on-dydx"}),"time-in-force":({stringGetter:e})=>({title:e({key:r.d.TIME_IN_FORCE_TITLE}),body:e({key:r.d.TIME_IN_FORCE_BODY})}),"good-til-date":({stringGetter:e})=>({title:e({key:r.d.GOOD_TIL_DATE_TITLE}),body:e({key:r.d.GOOD_TIL_DATE_BODY,params:{GOOD_TIL_DATE_MIN_MINUTES:c.f,GOOD_TIL_DATE_MAX_DAYS:c.e}})}),"post-only":({stringGetter:e})=>({title:e({key:r.d.POST_ONLY_TITLE}),body:e({key:r.d.POST_ONLY_BODY})}),"interest-rate":({stringGetter:e,stringParams:t})=>({title:e({key:r.d.INTEREST_RATE_TITLE}),body:e({key:r.d.INTEREST_RATE_BODY,params:t}),learnMoreLink:"https://help.dydx.exchange/en/articles/2924246-how-do-interest-rates-work"}),"margin-deposit":({stringGetter:e})=>({title:e({key:r.d.MARGIN_DEPOSIT_TITLE}),body:e({key:r.d.MARGIN_DEPOSIT_BODY}),learnMoreLink:"https://help.dydx.exchange/en/articles/3186084-introduction-to-margin-deposits"}),"trade-sidebar-collateralization":({stringGetter:e})=>({title:e({key:r.d.TRADE_SIDEBAR_COLLATERALIZATION_TITLE}),body:e({key:r.d.TRADE_SIDEBAR_COLLATERALIZATION_BODY}),learnMoreLink:"https://help.dydx.exchange/en/articles/2906495-what-is-my-collateral-requirement"}),"trailing-stop":({stringGetter:e})=>({title:e({key:r.d.TRAILING_STOP_TITLE}),body:e({key:r.d.TRAILING_STOP_BODY})}),"initial-stop-price":({stringGetter:e})=>({title:e({key:r.d.INTIAL_STOP_PRICE_TITLE}),body:e({key:r.d.INTIAL_STOP_PRICE_BODY})})});t.a=d},2238:function(e,t,a){e.exports={withTooltip:"_310s9UdL2UgyoJUUGWw5eO",mouseSpace:"_1AQZhYWyAfBBdKclF87h2k","tooltip-animation":"_2L0d0uagNJ6KrWki6k2xnM",shortDelay:"_2BnZuV9jBNRc5tDjUDxez2",tooltipContent:"_3S9AwqRQ_JSl-sBCxJc8m",title:"_1zA-7a99YNkQWoZzDf997N",body:"_9KuTZcDGhnGcG0TMTQFgl",learnMoreLink:"_2nNaJpQpRGkFRk6yhito51"}},2239:function(e,t,a){e.exports={tableHeader:"_1TcS_QebdVP1kPWHEnvrLD",extraPadding:"aUEsUM0r1M6Vf9LrNMPTL",leftPaddingOnly:"_139hqSLhpCL7oXTXzFZsaN",rightPaddingOnly:"_22D4CUbxVLlW34yG3e1vhB",headerItem:"_1yT2FHrPH9_RfFw9W-FlnL",headerItemSortable:"_1U6Wf-7itBAZFtvslg8pKA",headerItemSortedBy:"_3mzz2wKjvU3eG_r0wdACwO",titleDivider:"_2zceoNQq_JtisVz-uZDlly",sortArrow:"_2VikrT_FXeqb-oOcTmnflf",upArrow:"_2AhirMaPDbte4hBDL03Bw5",withTooltip:"_2OAIGedYBIcvjViQyqnWMb",helpIcon:"_3UyIGHOhK2elsiQWqi1iuk",rightAlign:"_2T3nwG4l9-SMeF_FzedpYb"}},2240:function(e,t,a){e.exports={table:"_3SijqF0q5nfqumleIb293b",noBorders:"_3PGtrQs67tEe5m9xCzfyGB",loadingSpinner:"_2vQ3h_doVqTCO7L1q5YJvW",overflowScroll:"_3aMYHouY_YB5LwwK5rXZIj",rowContainer:"_2vrkpg9e7xFndhTSvdM_uh",withFixedCell:"_3eop9hoL3teZeeD3-8cRyF",fixedCells:"_2eSUxmo6JggKMVEYl9AHfO",row:"_3KhIl8lVVn_AZqbCGDKP14",scrollingColumns:"_1hFZBCD3ob5C9CpT9fc-fi",isFullWidthTable:"_3n42xV_tnfnii09lGoUngq",gradientWrapper:"_3BU3xqP7b9uRg45FW83DKg",hideBeforeGradient:"_1LrclDnuwUUMZbF9BkY-9_",hideAfterGradient:"Mgw9nciuTjBEVfUyYIar",withTableLabel:"wds6xEgUoHLBIqK8OMmEx",tableLabel:"_1cBzpQN3PlF0xsVlbjeAoe",labeledTable:"_2AtiQF7OwHoIltZwHhNDxH",fullWidthRow:"_W53OSHirGEHak_9GgtZe",hoverableRow:"_2hsG5HvvyNxxNvN6hairP2",active:"_2Y9yRqPFKybbXV2KUAG5_R",noBorder:"JwEWH0FhtO_7UdO9qSChB",emptyState:"LTzGO3zGdUbQgAhxsDxKi",extraPadding:"_1AADSye9ZpqhSGlnqKD8ed",cell:"_3JjUc1uhWcWgYuKMWvJbL_",regularFont:"_3r2u-9u8a5PzS2BHXspIke",rightAlignCell:"_2sD9MHfbiovFkCX9EbVr_Z",stacked:"_2tPnYdN4E_zht-1RD_SCT",green:"_2DLsPa8N4RcQEd0CnlWADM",red:"_3uSJUiTM6gXx9H2XKazyJp",muted:"_1btOsu2ciBh7_sApjd8CZX"}},2241:function(e,t,a){e.exports={wrapper:"_2MbxSjDyDpFFb2JZFin2KD",contentHeader:"_2M_YA3vcQ3NcqY9_AVquWL",button:"_1de-m126qrYD_OAZfNlCv2"}},2242:function(e,t,a){e.exports={contentWidthWrapper:"_3YNA_eSOnYxSr88lLXffmf",content:"_2cX5WRbvYuiY-_JGFP-p26",noMarginBottom:"_1fhhFH8jVsJij2kPhe1hr4",useTableMargins:"_2cj8dXA6pNakKhxGqSivS9"}},2243:function(e,t,a){e.exports={wrapper:"zW3XtRiSNhKDSdAbeWwC_",contentHeader:"_1105KcD2RHPxfBX3mZl0X7",tabs:"O4Z3Kun4KU3W_UguuxBJs",tab:"_3GoLwnZpc7EzInyprUotNK",selected:"_1lBqN-y1kq_QtA_qPM7zle"}},2301:function(e,t,a){e.exports={portfolioOverviewHeader:"_3clT9Doof-_IR5OmIrStL1",loading:"_2lu_kSNFb9UfOJJbznQ4rg",portfolioValue:"kuiXfZI3wD1KWxDmWvNZO",totalValueSection:"_3notKAhS4ReZJPiQUV856l",mainTitle:"_1ASaKOzj0Tb3LrvabrvmxX",subtitle:"_3u98xui1nuZUz1Yc8Irx6f",totalValue:"WHcbjRt2ZT7MyudaES3UI",hoverDateLabel:"Q9eQ_Z47sN1_FfS9LUEu7",valueBreakdownRow:"zdf7gYaVnVcz_-PTu3DAw",breakdownValue:"_911ss7LzJoS167Tp5cJU",todayDiff:"_36fCm0G8WDTJNrmpqtx2Q0",dollarDiff:"_2JD0q1SH-HNvttdTEwbyWG",percentDiff:"_1nW0oel5NVE4HQ-wz0s4a4",chartWrapper:"IixK84DD4cxeYZcxhz-F",emptyStateWrapper:"_1OcT18EpnILr34UVnZetpZ",emptyStateModal:"_2HG5Kqz26qLlNTC-d4tEwx",chartSettingsButton:"_1t1Rv7GwLw2RKqVwzgkLYR",chartSettings:"aDHUceL375Axjh6bS99O6",timescaleButtons:"_1xX-ztB-ty6riAuAxVq_SO",chart:"_1fqs0I7V4tyJJFkcq8Alut",green:"_qB0_YoJ4kpm2g6lhcrF4",red:"YWXXdAuIbHG1D9v6nqcGR"}},2447:function(e,t,a){e.exports={arrowLink:"WobG9yXNeGXydHlwnul05",inline:"_1jHHvjTLYxfZ9v_Cfh4V8H",marginLeft:"_1hucUUc9I5Lb2yOOiHAjW4"}},2448:function(e,t,a){e.exports={overviewRecentHistory:"_28aOnXSoCNnFMcIkmZmnVD",header:"_2n0P5mGT2bS0BWN_dZT4aA",title:"_19BSLd9v68peQEB07uJiGa",subtitle:"fgOL1VV88cHHSKet1aYTO"}},2449:function(e,t,a){e.exports={iconButton:"_3g1axCZaLlR1_i3lOES5wH",iconUsesFill:"_3_lOBvsF3W-m5Fa5dQn8wx",iconUsesStroke:"_3MEG7bDVIlUColfgb5mY-i"}},2498:function(e,t,a){"use strict";a.r(t);var r=a(6),n=a.n(r),i=a(0),l=a.n(i),o=a(1),s=a.n(o),c=a(40),d=a(52),u=a(60),E=a(19),m=a.n(E),p=a(74),b=a(31),y=a(118),T=a.n(y),O=a(55),g=a.n(O),A=a(2126),h=a.n(A),_=a(90),S=a.n(_),I=a(4),R=a.n(I),L=a(135),f=a.n(L),P=a(923),N=a.n(P),k=a(34),C=a(230),w=a.n(C),D=a(2272),M=a.n(D),v=a(231),j=a.n(v),x=a(2205),G=a(129),B=a(2301),U=a.n(B);const W={[G.a.DAY]:"ha",[G.a.WEEK]:"ccc ha",[G.a.MONTH]:"L/d"};class F extends i.Component{constructor(e){super(e),this.state={hoveredEntry:null},this.componentRef=l.a.createRef()}render(){const e=this.props,t=e.data,a=e.onMouseMove,r=e.onMouseEnter,n=e.onMouseOut,i=e.timescale,o=e.width,s=e.height,c=this.state.hoveredEntry;if(!t)return null;let d=0,u=Number.MAX_SAFE_INTEGER;t.forEach(({close:e})=>{e>d&&(d=Number(e)),e<u&&(u=Number(e))});const E=[],m=Math.floor(t.length/8)||1;for(let l=0;l<t.length;l+=m)E.push(t[l].date);const p=[],b=d-Math.floor(u);for(let l=Math.floor(u);l<d;l+=Math.max(1,Math.floor(b/100)))p.push(l);return l.a.createElement("div",{className:U.a.chart},l.a.createElement(x.d,{data:t,height:s,onMouseEnter:r,onMouseLeave:()=>{n(),this.setState({hoveredEntry:null})},onMouseMove:e=>{const t=R()(e,"activePayload[0].payload");a(t),this.setState({hoveredEntry:t})},width:o,margin:{top:0,right:0,bottom:0,left:0}},l.a.createElement(x.f,{cursor:{stroke:"#f7f7f7",strokeWidth:1.5,strokeOpacity:.3,strokeDasharray:"6 5"},content:j.a}),l.a.createElement(x.c,{activeDot:({cx:e,cy:t})=>t?l.a.createElement("g",null,l.a.createElement("circle",{cx:e,cy:t,r:4,fill:"#f7f7f7"})):null,strokeWidth:1.5,type:"natural",dot:!1,dataKey:"close",stroke:c?"#f7f7f7":"#6b6a80",isAnimationActive:!1}),0===t.length&&l.a.createElement(x.e,{type:"linear",strokeWidth:1,stroke:"#303044",isAnimationActive:!1,y:0}),c&&l.a.createElement(x.e,{type:"linear",strokeWidth:1.5,strokeDasharray:"6 5",stroke:"#f7f7f7",strokeOpacity:.3,isAnimationActive:!1,y:Number(c.close)}),l.a.createElement(x.h,{hide:!0,dataKey:"close",height:s,domain:0===t.length?[-1,1]:[`dataMin - ${b/4}`,`dataMax + ${b/4}`],ticks:p}),l.a.createElement(x.g,{height:3,dataKey:"date",axisLine:!1,tickLine:!1,domain:["dataMin","dataMax"],type:"number",tick:({height:e,payload:{value:t},textAnchor:a,width:r,x:n,y:o})=>l.a.createElement("text",{y:o,width:r,height:e,x:n,textAnchor:a},l.a.createElement("tspan",{x:n,dy:-36,fill:c?"#f7f7f7":"#6b6a80"},k.DateTime.fromSeconds(t).toLocal().toFormat(W[i]))),tickFormatter:e=>k.DateTime.fromSeconds(e).toLocal().toFormat(W[i]),ticks:E})))}}F.propTypes={data:s.a.array,height:s.a.number,onMouseEnter:s.a.func,onMouseMove:s.a.func,onMouseOut:s.a.func,timescale:s.a.oneOf(T()(G.a)),width:s.a.number},F.defaultProps={onMouseMove:j.a,onMouseEnter:j.a,onMouseOut:j.a};var V=F,q=a(300),Y=a(2182),H=a(2127),K=a(190),Z=a(186),z=a(45),X=a(102),Q=a(227),$=a(291),J=a(26),ee=a(33),te=a(44),ae=a(296),re=a(2122),ne=a(194),ie=a(5),le=a(61),oe=a(38),se=a(2),ce=a(615),de=a(46),ue=a(10),Ee=a(85);const me=10,pe=[];let be;class ye extends i.Component{constructor(e){super(e),this.onClickOutside=(e=>{this.chartSettingsRef.current&&this.chartSettingsRef.current.contains(e.target)||this.chartSettingsButtonRef.current&&this.chartSettingsButtonRef.current.contains(e.target)||this.setState({showChartSettings:!1})}),this.onClickTimeScale=(e=>{const t=this.props.setScale;Object(Ee.b)("portfolio-overview","change-timescale",{newTimescale:e}),t(e),this.setState({showChartSettings:!1})}),this.onMouseMove=(e=>{const t=this.state,a=t.chartHovered,r=t.hoveredHistoryEntry;a&&(!r||e&&r.date!==e.date)&&this.setState({hoveredHistoryEntry:e})}),this.onMouseEnter=(()=>{this.setState({chartHovered:!0})}),this.onMouseOut=(()=>{this.setState({chartHovered:!1,hoveredHistoryEntry:null})}),this.state={chartHovered:!1,hoveredHistoryEntry:null,showChartSettings:!1},this.onMouseMove=N()(this.onMouseMove,me),this.chartSettingsButtonRef=Object(i.createRef)(),this.chartSettingsRef=Object(i.createRef)()}componentWillMount(){window.addEventListener("click",this.onClickOutside)}componentWillUnmount(){window.removeEventListener("click",this.onClickOutside)}getAllHistoryData(){const e=this.props,t=e.soloBalanceHistory,a=e.perpetualBalanceHistory,r=[];let n=0,i=0,l=t[n],o=a[i];for(;l||o;)if(l)if(o){const e=l,s=e.date,c=e.spotClose,d=e.marginClose,u=e.positionsClose,E=o.close;c.plus(d).plus(u).plus(E).isNaN()||r.push({date:s,spotClose:c,marginClose:d,positionsClose:u,perpetualClose:E,close:c.plus(d).plus(E)}),n+=1,o=a[i+=1],l=t[n]}else{const e=l,a=e.date,i=e.spotClose,o=e.marginClose,s=e.positionsClose;r.push({date:a,spotClose:i,marginClose:o,close:i.plus(o).plus(s)}),l=t[n+=1]}else{const e=o,t=e.date,n=e.close;r.push({date:t,perpetualClose:n,close:n}),o=a[i+=1]}return r}getPerpetualAccountsValue(){const e=this.props,t=e.allMarkets,a=e.allIndexPrices,r=e.perpetualBalances,n=f()(r,(e,t,r)=>{const n=Object(te.b)(r);if(n){const i=n.isInversePerpetual,l=n.maxLeverage,o=a[r],s=Object(ce.a)({balances:t,indexPrice:o,maxLeverage:l,isInversePerpetual:i}).equity;return e.plus(i?s.times(o):s)}return e},se.a.ZERO),i=Object(J.c)({allMarkets:t,symbol:"USDC"});return Object(de.a)(n,i.currency.decimals)}getCurrentAccountValue(){const e=this.props,t=e.isolatedAccountsValue,a=e.marginAccountValue,r=e.spotAccountValue;let n=this.getPerpetualAccountsValue();return n=(n=n.plus(r)).plus(a).plus(t)}renderPortfolioValue(){const e=this.props,t=e.selectedLocale,a=e.stringGetter,r=e.isWalletConnecting,n=e.isWalletInvalid,i=this.state.hoveredHistoryEntry,o=this.getCurrentAccountValue(),s=this.getAllHistoryData(),c=i?i.close:o;let d=se.a.ZERO,u=se.a.ZERO;if(!be){const e=R()(s,`[${s.length>=8?s.length-8:0}]`);if(e){const t=e.spotClose,a=e.marginClose,r=e.perpetualClose,n=e.positionsClose;be=se.a.ZERO.plus(t).plus(a).plus(r).plus(n)}}return r||n||(d=o.minus(be),u=o.minus(be).div(o).times(100)),l.a.createElement("div",{className:U.a.portfolioValue},l.a.createElement("div",{className:U.a.totalValueSection},i?l.a.createElement("div",{className:U.a.hoverDateLabel},k.DateTime.fromSeconds(i.date).toLocaleString({locale:t,month:"long",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})):l.a.createElement("div",{className:U.a.mainTitle},a({key:ie.a.PORTFOLIO_VALUE})),l.a.createElement("div",{className:U.a.totalValue},l.a.createElement(w.a,{thousandSeparator:!0,displayType:"text",value:Object(ue.a)(c).toFixed(le.p),prefix:"$"}),!i&&l.a.createElement("div",{className:U.a.todayDiff},l.a.createElement(Y.a,{isPositive:d.gte(0)}),l.a.createElement("span",{className:m()(U.a.dollarDiff,{[U.a.green]:d.gt(0),[U.a.red]:d.lt(0)})},l.a.createElement(w.a,{thousandSeparator:!0,displayType:"text",value:d.abs().toFixed(le.p),prefix:"$"})),l.a.createElement("span",{className:U.a.percentDiff},`(${u.isFinite()?u.abs().toFixed(le.k):"-"}%) ${a({key:ie.a.TODAY})}`)))),l.a.createElement("div",null,this.renderValueBreakdown()))}renderValueBreakdown(){const e=this.props,t=e.isolatedAccountsValue,a=e.marginAccountValue,r=e.spotAccountValue,n=e.stringGetter,o=this.state.hoveredHistoryEntry,s=this.getPerpetualAccountsValue();return l.a.createElement(i.Fragment,null,l.a.createElement("div",{className:U.a.valueBreakdownRow},l.a.createElement(H.b,{label:n({key:ie.a.MARGIN_ACCOUNT})},l.a.createElement(w.a,{className:U.a.breakdownValue,thousandSeparator:!0,displayType:"text",value:Object(ue.a)(o?o.marginClose:a).toFixed(le.p),prefix:"$"})),l.a.createElement(H.b,{label:n({key:ie.a.SPOT_ACCOUNT})},l.a.createElement(w.a,{className:U.a.breakdownValue,thousandSeparator:!0,displayType:"text",value:Object(ue.a)(o?o.spotClose:r).toFixed(le.p),prefix:"$"}))),l.a.createElement("div",{className:U.a.valueBreakdownRow},l.a.createElement(H.b,{label:n({key:ie.a.MARGIN_POSITIONS})},l.a.createElement(w.a,{className:U.a.breakdownValue,thousandSeparator:!0,displayType:"text",value:Object(ue.a)(o?o.positionsClose:t).toFixed(le.p),prefix:"$"})),l.a.createElement(H.b,{label:n({key:ie.a.PERPETUALS})},l.a.createElement(w.a,{className:U.a.breakdownValue,thousandSeparator:!0,displayType:"text",value:Object(ue.a)(o?o.perpetualClose:s).toFixed(le.p),prefix:"$"}))))}renderHistoryChart(){const e=this.props,t=e.isolatedAccountsValue,a=e.isWalletConnecting,r=e.isWalletInvalid,n=e.marginAccountValue,o=e.openModal,s=e.selectedTimescale,c=e.spotAccountValue,d=e.stringGetter,u=this.state.showChartSettings;let E=this.getAllHistoryData();const m=this.getPerpetualAccountsValue(),p=!a&&r;if(E.length>0)E.push({date:Math.round((new Date).getTime()/1e3),marginClose:n,spotClose:c,positionsClose:t,perpetualClose:m,close:this.getCurrentAccountValue()});else if(p)if(S()(pe)){let e=k.DateTime.local().set({hour:0,minute:0,second:0,millisecond:0});h()(20,t=>{const a=0===t?1:Math.random()-.6,r=0===t?se.a.ZERO:pe[0].close,n=Math.floor(Math.random()*(0===t?100:50));pe.unshift({date:e.toSeconds(),close:a>0?r.plus(n):r.minus(n)}),e=e.minus({hours:3})}),E=pe}else E=pe;return l.a.createElement(i.Fragment,null,l.a.createElement("div",{className:U.a.chartWrapper},!a&&r?l.a.createElement("div",{className:U.a.emptyStateWrapper},l.a.createElement("div",{className:U.a.emptyStateModal},l.a.createElement("div",null,d({key:ie.a.GET_STARTED_DESCRIPTION})),l.a.createElement(K.f,{fullWidth:!0,purple:!0,onClick:()=>o({type:oe.a.CONNECT_WALLET})},d({key:ie.a.CONNECT_WALLET})))):l.a.createElement(K.f,{ref:this.chartSettingsButtonRef,className:U.a.chartSettingsButton,size:K.e.SMALL,onClick:()=>this.setState(e=>({showChartSettings:!e.showChartSettings}))},l.a.createElement(b.D,null)),u&&l.a.createElement("div",{ref:this.chartSettingsRef,className:U.a.chartSettings},l.a.createElement(H.b,{label:d({key:ie.a.DATE_RANGE})},l.a.createElement("div",{className:U.a.timescaleButtons},g()(G.a,e=>l.a.createElement(K.f,{key:e,uppercase:!1,active:s===e,size:K.e.SMALL,onClick:()=>this.onClickTimeScale(e)},`${G.b[e]}${d({key:ie.a.DAYS_ABBREVIATED})}`))))),l.a.createElement(M.a,null,({width:e,height:t})=>l.a.createElement(V,{data:E,height:t,onMouseEnter:this.onMouseEnter,onMouseMove:this.onMouseMove,onMouseOut:this.onMouseOut,timescale:s,width:e}))))}render(){const e=this.props,t=e.areIndexPricesLoaded,a=e.arePerpetualBalanceUpdatesLoaded,r=e.areSoloBalanceUpdatesLoaded,n=e.isHistoryDataLoaded,i=e.isWalletConnecting,o=e.isWalletInvalid;return i||!o&&!(n&&r&&a&&t)?l.a.createElement("div",{className:U.a.portfolioOverviewHeader},l.a.createElement("div",{className:U.a.loading},l.a.createElement(q.a,null))):l.a.createElement("div",{className:U.a.portfolioOverviewHeader},this.renderPortfolioValue(),this.renderHistoryChart())}}ye.propTypes={allIndexPrices:s.a.object.isRequired,allMarkets:s.a.array,areIndexPricesLoaded:s.a.bool.isRequired,arePerpetualBalanceUpdatesLoaded:s.a.bool.isRequired,areSoloBalanceUpdatesLoaded:s.a.bool.isRequired,isHistoryDataLoaded:s.a.bool.isRequired,isolatedAccountsValue:s.a.object,isWalletConnecting:s.a.bool.isRequired,isWalletInvalid:s.a.bool.isRequired,marginAccountValue:s.a.object,openModal:s.a.func.isRequired,perpetualBalanceHistory:s.a.array,perpetualBalances:s.a.object.isRequired,selectedLocale:s.a.string.isRequired,selectedTimescale:s.a.oneOf(T()(G.a)).isRequired,setScale:s.a.func.isRequired,soloBalanceHistory:s.a.array,spotAccountValue:s.a.object,stringGetter:s.a.func.isRequired};var Te=Object(p.k)(Object(d.c)(e=>({allIndexPrices:Object(re.b)(e),allMarkets:Object(J.d)(e),areIndexPricesLoaded:Object(re.c)(e),arePerpetualBalanceUpdatesLoaded:Object(Q.a)(e),areSoloBalanceUpdatesLoaded:Object(Q.b)(e),isHistoryDataLoaded:Object($.c)(e),isolatedAccountsValue:Object(X.h)(e),isWalletConnecting:Object(ee.e)(e),isWalletInvalid:Object(ee.g)(e),marginAccountValue:Object(X.t)(e),perpetualBalanceHistory:Object(Q.d)(e),perpetualBalances:Object(ae.e)(e),selectedLocale:Object(ne.c)(e),selectedTimescale:Object($.e)(e),soloBalanceHistory:Object(Q.f)(e),spotAccountValue:Object(X.w)(e)}),e=>Object(u.b)({openModal:z.c,setScale:Z.d},e))(ye)),Oe=a(39),ge=a.n(Oe),Ae=a(2447),he=a.n(Ae);const _e=({className:e,children:t,onClick:a,inline:r,marginLeft:n})=>l.a.createElement("div",{role:"button",tabIndex:0,className:m()(he.a.arrowLink,{[he.a.inline]:r,[he.a.marginLeft]:n},e),onClick:a},t," \u2192");_e.propTypes={className:s.a.string,children:s.a.string.isRequired,inline:s.a.bool,marginLeft:s.a.bool,onClick:s.a.string.isRequired};var Se=_e,Ie=a(251),Re=a(2131),Le=a(625),fe=a(2142),Pe=a(2129),Ne=a(627),ke=a(2162),Ce=a(146),we=a(235),De=a(8),Me=a(614),ve=a(2148),je=a.n(ve);const xe="https://etherscan.io/tx/",Ge=30,Be=De.i+56+28+40+2,Ue={[we.c.LONG]:ie.a.LONG,[we.c.SHORT]:ie.a.SHORT,[we.c.BUY]:ie.a.BUY,[we.c.SELL]:ie.a.SELL},We={[we.a.OPEN]:ie.a.HISTORY_OPEN_POSITION,[we.a.CLOSE]:ie.a.HISTORY_CLOSE_POSITION,[we.a.INCREASE]:ie.a.HISTORY_INCREASE_POSITION,[we.a.DECREASE]:ie.a.HISTORY_DECREASE_POSITION,[we.a.EXP]:ie.a.EXPIRED_ABBREVIATED,[we.a.LIQ]:ie.a.LIQUIDATED,[we.a.TRADE]:ie.a.TRADE},Fe={ACTION:{titleKey:ie.a.ACTION,width:"11%"},MARKET:{titleKey:ie.a.MARKET,width:"11.5%",tooltip:{name:"history-market",left:20}},SIDE:{titleKey:ie.a.SIDE,width:"7.5%",tooltip:{name:"history-side",left:16}},AMOUNT_DEPOSIT:{titleKey:ie.a.AMOUNT,secondaryTitleKey:ie.a.MARGIN_DEPOSIT_ABBREVIATED,width:"15%",tooltip:{name:"history-amount",left:20}},FEE:{titleKey:ie.a.FEE,width:"14%",tooltip:{name:"history-fee",left:8}},PRICE:{titleKey:ie.a.UNIT_PRICE,width:"12%"},LEVERAGE:{titleKey:ie.a.LEVERAGE,width:"8%"},PNL:{titleKey:ie.a.PNL,width:"8%",tooltip:{name:"history-pnl",left:12}},TRANSACTION:{titleKey:ie.a.TRANSACTION,width:"13%"}};class Ve extends i.Component{constructor(e){super(e),this.onTableScroll=(()=>{const e=this.props.hasRemainingActionsToFetch,t=this.tableRowsRef.current,a=t.scrollTop,r=t.scrollHeight,n=t.offsetHeight;e?a===r-n&&this.fetchMoreActions():this.setState({isLoadingMoreEntries:!1})}),this.renderRow=(({data:{amountMV:e,confirmedAt:t,feeAmountMV:a,leverageBN:r,marginDepositMV:i,pair:o,pnl:s,priceMP:c,side:d,transactionHash:u,type:E,uuid:m},stringGetter:p})=>{const y=this.props.isModuleEmbed,T=o.baseSymbol,O=o.displayQuoteSymbol,g=o.displaySettlementSymbol,A=o.isInversePerpetual,h=o.marketName,_=o.tickDecimals,S=k.DateTime.fromISO(t),I=Math.max(_,le.f),R=Object(Me.a)({dateTime:S,stringGetter:p}),L=R.timeString,f=R.unitString;return l.a.createElement(fe.b,{key:m,extraPadding:y},l.a.createElement(fe.a,{regularFont:!0,width:Fe.ACTION.width,className:je.a.initialTimestampCell},l.a.createElement("span",null,L,f),p({key:We[E]})||E),l.a.createElement(fe.a,{width:Fe.MARKET.width},l.a.createElement(Re.a,{baseSymbol:T,quoteSymbol:O}),l.a.createElement("div",{className:je.a.marketAssetName},h)),l.a.createElement(fe.a,{regularFont:!0,width:Fe.SIDE.width},l.a.createElement(Ie.a,{capitalize:!0,large:!0,green:n()([we.c.BUY,we.c.LONG],d),red:n()([we.c.SELL,we.c.SHORT],d)},p({key:Ue[d]}))),l.a.createElement(fe.a,{stacked:!0,width:Fe.AMOUNT_DEPOSIT.width},l.a.createElement("span",{className:je.a.stackedValueWithTag},e?l.a.createElement(l.a.Fragment,null,l.a.createElement(w.a,{thousandSeparator:!0,displayType:"text",value:e.getNaturalTokenString()}),l.a.createElement(Ie.a,{muted:!0,className:je.a.tag},e.market.symbol)):"-"),l.a.createElement("span",{className:je.a.stackedValueWithTag},i?l.a.createElement(w.a,{thousandSeparator:!0,displayType:"text",value:i.getNaturalTokenString()}):"-")),l.a.createElement(fe.a,{width:Fe.FEE.width},l.a.createElement("div",{className:je.a.stackedValueWithTag},l.a.createElement(w.a,{thousandSeparator:!0,displayType:"text",value:a?`${a.getNaturalTokenString()}`:`${se.a.ZERO.toFixed(le.n)}`}),l.a.createElement(Ie.a,{muted:!0,className:je.a.tag},A?g:O))),l.a.createElement(fe.a,{width:Fe.PRICE.width},c?l.a.createElement(l.a.Fragment,null,l.a.createElement(w.a,{thousandSeparator:!0,displayType:"text",value:c.getNaturalValue().toFormat(I)}),l.a.createElement(Ie.a,{muted:!0,className:je.a.tag},O)):"-"),l.a.createElement(fe.a,{width:Fe.LEVERAGE.width},r&&r.isFinite()?`${r.toFixed(le.e)}\xd7`:"-"),l.a.createElement(fe.a,{green:s&&s.gte(0),red:s&&s.lt(0),width:Fe.PNL.width},s?`${s.gt(0)?"+":""}${s.times(100).toFixed(le.l)}%`:"-"),l.a.createElement(fe.a,{width:Fe.TRANSACTION.width},l.a.createElement("a",{className:je.a.linkOut,target:"blank",rel:"noopener noreferrer",href:`${xe}${u}`},l.a.createElement(Le.a,{hash:u}),l.a.createElement(b.N,null))))}),this.tableRowsRef=Object(i.createRef)(),this.state={isLoadingMoreEntries:!1}}componentDidMount(){const e=this.props,t=e.tradeHistoryData;e.areStandardActionsLoaded&&ge()(t)<Ge&&this.fetchMoreActions()}componentDidUpdate(e){const t=e.tradeHistoryData,a=e.standardActionsVersion,r=this.props,n=r.tradeHistoryData,i=r.hasRemainingActionsToFetch,l=r.standardActionsVersion,o=this.state.isLoadingMoreEntries;i&&l!==a&&ge()(n)<Ge?this.fetchMoreActions():o&&(i?ge()(n)>ge()(t)?this.setState({isLoadingMoreEntries:!1}):l!==a&&this.fetchMoreActions():this.setState({isLoadingMoreEntries:!1}))}fetchMoreActions(){const e=this.props,t=e.hasRemainingActionsToFetch,a=e.fetchStandardActions,r=e.walletAddress,n=e.oldestActionCreatedAt;t&&n&&(this.setState({isLoadingMoreEntries:!0}),a({walletAddress:r,createdBefore:n}))}render(){const e=this.props,t=e.areMarketsLoaded,a=e.areStandardActionsLoaded,r=e.isModuleEmbed,n=e.isWalletConnecting,i=e.isWalletInvalid,o=e.openModal,s=e.pageViewport,c=e.stringGetter,d=e.tradeHistoryData,u=this.state,E=u.isLoadingMoreEntries,p=u.hasRemainingActionsToFetch,b=S()(d)?l.a.createElement(fe.b,{emptyState:!0,extraPadding:r},l.a.createElement(fe.a,{regularFont:!0},c({key:ie.a.EMPTY_STATE_TRADING}),!n&&i&&l.a.createElement(Se,{marginLeft:!0,onClick:()=>o({type:oe.a.CONNECT_WALLET})},c({key:ie.a.GET_STARTED_DESCRIPTION})))):g()(d,e=>this.renderRow({data:e,stringGetter:c})),y=!t||n||!i&&(!a||ge()(d)<Ge&&p);let O=s.height-Be;s.width>De.d&&(O-=De.h);const A=l.a.createElement(fe.d,{className:m()({[je.a.hideBottomBorder]:!r}),extraPadding:r,noBorderBottom:!y&&!S()(d),noBorders:r,isLoading:y,numLoadingRows:3,scrollingMinWidth:1122,tableConfig:T()(Fe),onTableVerticalScroll:this.onTableScroll,rowContainerRef:this.tableRowsRef,rowContainerHeight:r?180:O},b,!y&&E&&l.a.createElement(q.a,{className:je.a.moreRowsLoadingSpinner}));return r?A:l.a.createElement(Pe.c,{noMarginBottom:!0},A)}}Ve.propTypes={areMarketsLoaded:s.a.bool.isRequired,areStandardActionsLoaded:s.a.bool.isRequired,fetchStandardActions:s.a.func.isRequired,hasRemainingActionsToFetch:s.a.bool,isModuleEmbed:s.a.bool,isWalletConnecting:s.a.bool.isRequired,isWalletInvalid:s.a.bool.isRequired,oldestActionCreatedAt:s.a.string,openModal:s.a.func.isRequired,pageViewport:s.a.object.isRequired,standardActionsVersion:s.a.number,stringGetter:s.a.func.isRequired,tradeHistoryData:s.a.array.isRequired,walletAddress:s.a.string};var qe=Object(p.k)(Object(d.c)(e=>({areMarketsLoaded:Object(J.e)(e),areStandardActionsLoaded:Object(ke.a)(e),hasRemainingActionsToFetch:Object(ke.b)(e),isWalletConnecting:Object(ee.e)(e),isWalletInvalid:Object(ee.g)(e),oldestActionCreatedAt:Object(ke.c)(e),pageViewport:Object(Ce.d)(e),standardActionsVersion:Object(ke.g)(e),tradeHistoryData:Object(ke.e)(e),walletAddress:Object(ee.m)(e)}),e=>Object(u.b)({openModal:z.c,fetchStandardActions:Ne.a},e))(Ve)),Ye=a(2448),He=a.n(Ye);const Ke=({history:e,stringGetter:t})=>l.a.createElement("div",{className:He.a.overviewRecentHistory},l.a.createElement("div",{className:He.a.header},l.a.createElement("div",null,l.a.createElement("div",{className:He.a.title},t({key:ie.a.TRADING_HISTORY})),l.a.createElement("div",{className:He.a.subtitle},t({key:ie.a.TRADING_HISTORY_DESCRIPTION}))),l.a.createElement(K.f,{size:K.e.SMALL,onClick:()=>e.push(De.n.HISTORY)},t({key:ie.a.VIEW_ALL}))),l.a.createElement(qe,{isModuleEmbed:!0}));Ke.propTypes={history:s.a.object.isRequired,stringGetter:s.a.func.isRequired};var Ze=Object(p.k)(Object(c.g)(Ke));const ze=({stringGetter:e})=>l.a.createElement("div",null,l.a.createElement(Pe.a,{title:e({key:ie.a.OVERVIEW})}),l.a.createElement(Pe.c,{noMarginBottom:!0},l.a.createElement(Te,{selectedFilter:ie.a.ALL,onSelectFilter:()=>{}})),l.a.createElement(Pe.c,null,l.a.createElement(Ze,null)));ze.propTypes={stringGetter:s.a.func.isRequired};var Xe=Object(p.k)(ze),Qe=a(116),$e=a.n(Qe),Je=a(113),et=a.n(Je),tt=a(37),at=a.n(tt),rt=a(17),nt=a.n(rt),it=a(616),lt=a(42),ot=a(297),st=a(191);function _slicedToArray(e,t){return function _arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function _iterableToArrayLimit(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var a=[],r=!0,n=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(a.push(l.value),!t||a.length!==t);r=!0);}catch(s){n=!0,i=s}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}return a}(e,t)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}const ct={ASSET:{titleKey:ie.a.ASSET,width:"14%"},BALANCE:{sortKey:"BALANCE",titleKey:ie.a.BALANCE,width:"25%",tooltipConfig:{name:"balances-asset-balance"}},VALUE:{sortKey:"VALUE",titleKey:ie.a.VALUE,width:"25%",tooltipConfig:{name:"balances-asset-value"}},PRICE:{sortKey:"PRICE",titleKey:ie.a.PRICE,width:"20%",tooltipConfig:{name:"balances-price"}},INTEREST_APR:{sortKey:"INTEREST_APR",titleKey:ie.a.INTEREST_APR,width:"30%",tooltipConfig:{name:"balances-interest-rate",left:-120}}},dt=({allMarkets:e,areAccountsLoaded:t,areMarketsLoaded:a,isWalletConnecting:r,isWalletInvalid:n,pendingMarketsByAccountNumber:o,spotAccount:s,stringGetter:c})=>{const d=_slicedToArray(Object(i.useState)(null),2),u=d[0],E=d[1],m=_slicedToArray(Object(i.useState)(null),2),p=m[0],b=m[1],y=(({allMarkets:e,pendingMarketsByAccountNumber:t,sortDirection:a,sortedByKey:r,spotAccount:n})=>{let i=[];if(nt()(ot.c,a=>{const r=Object(J.c)({allMarkets:e,symbol:a});let l={},o=se.a.ZERO;n&&(l=Object(X.b)({account:n,market:r}),o=Object(X.e)({account:n,market:r}));const s=!!at()(t[lt.c.toFixed()],e=>e.id===r.id)||!o.isZero(),c=r.symbol,d=r.oraclePrice,u=r.totalSupplyAPR,E=r.totalBorrowAPR,m=r.currency,p=Object(de.a)(Object(ue.a)(l.wei),m.decimals);i.push({balanceNatural:p,balanceValue:p.times(d),isLoading:s,oraclePrice:Object(ue.a)(d),symbol:c,totalBorrowAPR:Object(ue.a)(E),totalSupplyAPR:Object(ue.a)(u)})}),r){switch(r){case"BALANCE":i=et()(i,e=>e.balanceNatural.toNumber());break;case"VALUE":i=et()(i,e=>e.balanceValue.toNumber());break;case"PRICE":i=et()(i,e=>e.oraclePrice.toNumber());break;case"INTEREST_APR":i=et()(i,({balanceNatural:e,totalSupplyAPR:t,totalBorrowAPR:a})=>e.gte(0)?t.toNumber():a.toNumber())}a===fe.c.DECREASING&&(i=$e()(i))}return i})({allMarkets:e,pendingMarketsByAccountNumber:o,sortDirection:p,sortedByKey:u,spotAccount:s}),O=[],g=[];nt()(y,e=>{const t=(({data:{balanceNatural:e,balanceValue:t,oraclePrice:a,symbol:r,totalBorrowAPR:n,totalSupplyAPR:i},stringGetter:o})=>{const s=ct.INTEREST_APR.width;let c;return c=e.eq(0)?l.a.createElement(fe.a,{regularFont:!0,width:s},l.a.createElement("span",{className:je.a.green},o({key:ie.a.EARN_PERCENT,params:{PERCENT:Object(ue.a)(i).times(100).toFixed(le.d)}})),l.a.createElement("span",{className:je.a.interestRateDivider},"/"),l.a.createElement("span",{className:je.a.red},o({key:ie.a.PAY_PERCENT,params:{PERCENT:Object(ue.a)(n).times(100).toFixed(le.d)}}))):e.lt(0)?l.a.createElement(fe.a,{regularFont:!0,red:!0,width:s},o({key:ie.a.PAYING_PERCENT,params:{PERCENT:Object(ue.a)(n).times(100).toFixed(le.d)}})):l.a.createElement(fe.a,{regularFont:!0,green:!0,width:s},o({key:ie.a.EARNING_PERCENT,params:{PERCENT:Object(ue.a)(i).times(100).toFixed(le.d)}})),{fixedCell:l.a.createElement(fe.a,null,l.a.createElement(Re.a,{baseSymbol:r}),l.a.createElement("span",{className:je.a.marketAssetName},r)),row:l.a.createElement(fe.b,{key:r},l.a.createElement(fe.a,{width:ct.BALANCE.width},l.a.createElement(w.a,{thousandSeparator:!0,displayType:"text",value:Object(st.c)(e,le.n)})),l.a.createElement(fe.a,{width:ct.VALUE.width},l.a.createElement(w.a,{thousandSeparator:!0,displayType:"text",value:Object(ue.a)(t).toFormat(le.p),prefix:"$"})),l.a.createElement(fe.a,{width:ct.PRICE.width},l.a.createElement(w.a,{thousandSeparator:!0,displayType:"text",value:Object(ue.a)(a).toFixed(le.p),prefix:"$"})),c)}})({data:e,stringGetter:c}),a=t.fixedCell,r=t.row;O.push(a),g.push(r)});const A=!a||r||!n&&!t;return l.a.createElement(Pe.c,{useTableMargins:!0},l.a.createElement(fe.d,{fixedCellConfig:{width:ct.ASSET.width,minWidth:128,fixedCells:O},isLoading:A,numLoadingRows:ot.c.length,scrollingMinWidth:640,tableConfig:T()(ct),tableLabel:c({key:ie.a.SPOT_ACCOUNT}),sortableTableConfig:{sortedByKey:u,sortDirection:p,onClickTableHeader:e=>{u!==e?(E(e),b(fe.c.DECREASING)):u===e&&p===fe.c.DECREASING?b(fe.c.INCREASING):(E(null),b(null))}}},g))};dt.propTypes={allMarkets:s.a.array,areAccountsLoaded:s.a.bool.isRequired,areMarketsLoaded:s.a.bool.isRequired,isWalletConnecting:s.a.bool.isRequired,isWalletInvalid:s.a.bool.isRequired,pendingMarketsByAccountNumber:s.a.object.isRequired,spotAccount:s.a.object,stringGetter:s.a.func.isRequired};var ut=Object(p.k)(Object(d.c)(e=>({allMarkets:Object(J.d)(e),areAccountsLoaded:Object(X.i)(e),areMarketsLoaded:Object(J.e)(e),isWalletConnecting:Object(ee.e)(e),isWalletInvalid:Object(ee.g)(e),pendingMarketsByAccountNumber:Object(it.d)(e),spotAccount:Object(X.v)(e)}))(dt)),Et=a(2144),mt=a(11);function margin_balances_table_slicedToArray(e,t){return function margin_balances_table_arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function margin_balances_table_iterableToArrayLimit(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var a=[],r=!0,n=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(a.push(l.value),!t||a.length!==t);r=!0);}catch(s){n=!0,i=s}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}return a}(e,t)||function margin_balances_table_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}const pt={ASSET:{titleKey:ie.a.ASSET,width:"14%"},BALANCE:{sortKey:"BALANCE",titleKey:ie.a.BALANCE,width:"20%",tooltipConfig:{name:"balances-asset-balance"}},VALUE:{sortKey:"VALUE",titleKey:ie.a.VALUE,width:"20%",tooltipConfig:{name:"balances-asset-value"}},PRICE:{sortKey:"PRICE",titleKey:ie.a.PRICE,width:"20%",tooltipConfig:{name:"balances-price"}},INTEREST_APR:{sortKey:"INTEREST_APR",titleKey:ie.a.INTEREST_APR,width:"25%",tooltipConfig:{name:"balances-interest-rate"}},EXPIRY:{sortKey:"EXPIRY",titleKey:ie.a.EXPIRY,width:"15%",tooltipConfig:{name:"expiration",left:-220}}},bt=({allMarkets:e,areAccountsLoaded:t,areMarketsLoaded:a,isWalletConnecting:r,isWalletInvalid:n,marginAccount:o,marginAccountCollateralization:s,pendingMarketsByAccountNumber:c,stringGetter:d})=>{const u=margin_balances_table_slicedToArray(Object(i.useState)(null),2),E=u[0],m=u[1],p=margin_balances_table_slicedToArray(Object(i.useState)(null),2),b=p[0],y=p[1],O=(({allMarkets:e,marginAccount:t,pendingMarketsByAccountNumber:a,sortDirection:r,sortedByKey:n})=>{let i=[];if(nt()(ot.c,r=>{const n=Object(J.c)({allMarkets:e,symbol:r});let l={},o=se.a.ZERO,s=null;t&&(l=Object(X.b)({account:t,market:n}),o=Object(X.e)({account:t,market:n}),s=Object(X.c)({account:t,market:n}));const c=!!at()(a[lt.c.toFixed()],e=>e.id===n.id)||!o.isZero(),d=n.symbol,u=n.oraclePrice,E=n.totalSupplyAPR,m=n.totalBorrowAPR,p=n.currency,b=Object(de.a)(Object(ue.a)(l.wei),p.decimals);i.push({balanceNatural:b,balanceValue:b.times(u),expiration:s,isLoading:c,oraclePrice:Object(ue.a)(u),symbol:d,totalBorrowAPR:Object(ue.a)(m),totalSupplyAPR:Object(ue.a)(E)})}),n){switch(n){case"BALANCE":i=et()(i,({balanceNatural:e})=>e.toNumber());break;case"VALUE":i=et()(i,({balanceValue:e})=>e.toNumber());break;case"PRICE":i=et()(i,({oraclePrice:e})=>e.toNumber());break;case"INTEREST_APR":i=et()(i,({balanceNatural:e,totalSupplyAPR:t,totalBorrowAPR:a})=>e.gte(0)?t.toNumber():a.toNumber());break;case"EXPIRY":i=et()(i,({expiration:e})=>e?e.toSeconds():0)}r===fe.c.DECREASING&&(i=$e()(i))}return i})({allMarkets:e,marginAccount:o,pendingMarketsByAccountNumber:c,sortDirection:b,sortedByKey:E}),g=[],A=[];nt()(O,e=>{const t=(({data:{balanceNatural:e,balanceValue:t,expiration:a,oraclePrice:r,symbol:n,totalBorrowAPR:i,totalSupplyAPR:o},stringGetter:s})=>{const c=l.a.createElement(fe.a,null,l.a.createElement(Re.a,{baseSymbol:n}),l.a.createElement("span",{className:je.a.marketAssetName},n)),d=pt.INTEREST_APR.width;let u;u=e.eq(0)?l.a.createElement(fe.a,{regularFont:!0,width:d},l.a.createElement("span",{className:je.a.green},s({key:ie.a.EARN_PERCENT,params:{PERCENT:Object(ue.a)(o).times(100).toFixed(le.d)}})),l.a.createElement("span",{className:je.a.interestRateDivider},"/"),l.a.createElement("span",{className:je.a.red},s({key:ie.a.PAY_PERCENT,params:{PERCENT:Object(ue.a)(i).times(100).toFixed(le.d)}}))):e.lt(0)?l.a.createElement(fe.a,{regularFont:!0,red:!0,width:d},s({key:ie.a.PAYING_PERCENT,params:{PERCENT:Object(ue.a)(i).times(100).toFixed(le.d)}})):l.a.createElement(fe.a,{regularFont:!0,green:!0,width:d},s({key:ie.a.EARNING_PERCENT,params:{PERCENT:Object(ue.a)(o).times(100).toFixed(le.d)}}));const E=Object(Me.c)({expiration:a,stringGetter:s}),m=E.timeString,p=E.unitString,b=E.hasExpirationWarning,y=pt.EXPIRY.width;let T;return T=m&&e.lt(0)?l.a.createElement(fe.a,{regularFont:!0,width:y,red:b},`${m} ${p}`):l.a.createElement(fe.a,{regularFont:!0,width:y},"-"),{fixedCell:c,row:l.a.createElement(fe.b,{key:n},l.a.createElement(fe.a,{width:pt.BALANCE.width},l.a.createElement(w.a,{thousandSeparator:!0,displayType:"text",value:Object(st.c)(e,le.n)})),l.a.createElement(fe.a,{width:pt.VALUE.width},l.a.createElement(w.a,{thousandSeparator:!0,displayType:"text",value:Object(ue.a)(t).toFormat(le.p),prefix:"$"})),l.a.createElement(fe.a,{width:pt.PRICE.width},l.a.createElement(w.a,{thousandSeparator:!0,displayType:"text",value:Object(ue.a)(r).toFixed(le.p),prefix:"$"})),u,T)}})({data:e,stringGetter:d}),a=t.fixedCell,r=t.row;g.push(a),A.push(r)});const h=!a||r||!n&&!t;return l.a.createElement(Pe.c,{noMarginBottom:!0},l.a.createElement(fe.d,{fixedCellConfig:{width:pt.ASSET.width,minWidth:128,fixedCells:g},isLoading:h,numLoadingRows:ot.c.length,scrollingMinWidth:768,tableConfig:T()(pt),tableLabel:l.a.createElement("div",{className:je.a.marginTableLabel},l.a.createElement("div",null,d({key:ie.a.MARGIN_ACCOUNT})),s&&s.isFinite()&&l.a.createElement("div",{className:je.a.marginCollateralization},l.a.createElement("span",null,d({key:ie.a.COLLATERALIZATION})),l.a.createElement(Et.b,{collateralization:s,red:s.lte(mt.a)}))),sortableTableConfig:{sortedByKey:E,sortDirection:b,onClickTableHeader:e=>{E!==e?(m(e),y(fe.c.DECREASING)):E===e&&b===fe.c.DECREASING?y(fe.c.INCREASING):(m(null),y(null))}}},A))};bt.propTypes={allMarkets:s.a.array,areAccountsLoaded:s.a.bool.isRequired,areMarketsLoaded:s.a.bool.isRequired,isWalletConnecting:s.a.bool.isRequired,isWalletInvalid:s.a.bool.isRequired,marginAccount:s.a.object,marginAccountCollateralization:s.a.object,pendingMarketsByAccountNumber:s.a.object.isRequired,stringGetter:s.a.func.isRequired};var yt=Object(p.k)(Object(d.c)(e=>({allMarkets:Object(J.d)(e),areAccountsLoaded:Object(X.i)(e),areMarketsLoaded:Object(J.e)(e),isWalletConnecting:Object(ee.e)(e),isWalletInvalid:Object(ee.g)(e),marginAccount:Object(X.r)(e),marginAccountCollateralization:Object(X.s)(e),pendingMarketsByAccountNumber:Object(it.d)(e)}))(bt)),Tt=a(24),Ot=a(57);function perpetual_balances_table_slicedToArray(e,t){return function perpetual_balances_table_arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function perpetual_balances_table_iterableToArrayLimit(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var a=[],r=!0,n=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(a.push(l.value),!t||a.length!==t);r=!0);}catch(s){n=!0,i=s}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}return a}(e,t)||function perpetual_balances_table_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}const gt={ACCOUNT:{titleKey:ie.a.ACCOUNT,width:"22%"},EQUITY:{titleKey:ie.a.EQUITY,width:"35%",tooltip:{name:"perpetual-equity"}},FREE_COLLATERAL:{titleKey:ie.a.FREE_COLLATERAL,width:"35%",tooltip:{name:"perpetual-free-collateral"}},VALUE:{sortKey:"VALUE",titleKey:ie.a.VALUE,width:"30%"}},At=({allIndexPrices:e,allMarkets:t,pendingDepositsWithdrawals:a,perpetualBalances:r,areIndexPricesLoaded:n,arePerpetualBalancesLoaded:o,isWalletConnecting:s,isWalletInvalid:c,stringGetter:d})=>{const u=perpetual_balances_table_slicedToArray(Object(i.useState)(null),2),E=u[0],m=u[1],p=perpetual_balances_table_slicedToArray(Object(i.useState)(null),2),b=p[0],y=p[1],O=(({allIndexPrices:e,allMarkets:t,pendingDepositsWithdrawals:a,perpetualBalances:r,sortDirection:n,sortedByKey:i})=>{let l=[];if(nt()(Tt.f,({baseSymbol:n,displayQuoteSymbol:i,displaySettlementSymbol:o,isInversePerpetual:s,marketName:c,maxLeverage:d,orderMarket:u,quoteSymbol:E,settlementSymbol:m})=>{const p=Object(J.c)({allMarkets:t,symbol:m}),b=Object(J.c)({allMarkets:t,symbol:E}),y=r[u],T=e[u];if(!y||!T)return l.push({baseSymbol:n,displayQuoteSymbol:i,displaySettlementSymbol:o,marketName:c}),!0;const O=Object(ce.a)({balances:y,indexPrice:T,maxLeverage:d,isInversePerpetual:s}),g=O.equity,A=O.freeCollateral,h=new Ot.a(g,p),_=h.getNaturalValue(),S=new Ot.a(A,p),I=!!at()(a,({orderMarket:e})=>e===u);return l.push({baseSymbol:n,displayQuoteSymbol:i,displaySettlementSymbol:o,equity:_,freeCollateral:S.getNaturalValue(),isLoading:I,marketName:c,value:s?Object(de.a)(h.baseAmount.times(T),b.currency.decimals):_}),!0}),i){switch(i){case"VALUE":l=et()(l,({value:e})=>e.toNumber())}n===fe.c.DECREASING&&(l=$e()(l))}return l})({allIndexPrices:e,allMarkets:t,pendingDepositsWithdrawals:a,perpetualBalances:r,sortDirection:b,sortedByKey:E}),g=[],A=[];nt()(O,e=>{const t=(({data:{baseSymbol:e,displayQuoteSymbol:t,displaySettlementSymbol:a,equity:r,freeCollateral:n,marketName:i,value:o}})=>{return{fixedCell:l.a.createElement(fe.a,null,l.a.createElement(Re.a,{baseSymbol:e,quoteSymbol:t}),l.a.createElement("span",{className:je.a.marketAssetName},i)),row:l.a.createElement(fe.b,{key:i},l.a.createElement(fe.a,{width:gt.EQUITY.width},r?l.a.createElement(l.a.Fragment,null,l.a.createElement(w.a,{thousandSeparator:!0,displayType:"text",value:Object(st.c)(r,le.n)}),l.a.createElement(Ie.a,{className:je.a.tag},a)):"-"),l.a.createElement(fe.a,{width:gt.FREE_COLLATERAL.width},n?l.a.createElement(l.a.Fragment,null,l.a.createElement(w.a,{thousandSeparator:!0,displayType:"text",value:Object(st.c)(n,le.n)}),l.a.createElement(Ie.a,{className:je.a.tag},a)):"-"),l.a.createElement(fe.a,{width:gt.VALUE.width},o?l.a.createElement(w.a,{thousandSeparator:!0,displayType:"text",value:o.toFixed(le.p),prefix:"$"}):"-"))}})({data:e}),a=t.fixedCell,r=t.row;g.push(a),A.push(r)});const h=s||!c&&!(o&&n);return l.a.createElement(Pe.c,{useTableMargins:!0},l.a.createElement(fe.d,{fixedCellConfig:{width:gt.ACCOUNT.width,minWidth:148,fixedCells:g},isLoading:h,numLoadingRows:ot.c.length,scrollingMinWidth:540,tableConfig:T()(gt),tableLabel:d({key:ie.a.PERPETUAL_ACCOUNTS}),sortableTableConfig:{sortedByKey:E,sortDirection:b,onClickTableHeader:e=>{E!==e?(m(e),y(fe.c.DECREASING)):E===e&&b===fe.c.DECREASING?y(fe.c.INCREASING):(m(null),y(null))}}},A))};At.propTypes={allIndexPrices:s.a.object.isRequired,allMarkets:s.a.array,areIndexPricesLoaded:s.a.bool.isRequired,arePerpetualBalancesLoaded:s.a.bool.isRequired,isWalletConnecting:s.a.bool.isRequired,isWalletInvalid:s.a.bool.isRequired,pendingDepositsWithdrawals:s.a.array.isRequired,perpetualBalances:s.a.object.isRequired,stringGetter:s.a.func.isRequired};var ht=Object(p.k)(Object(d.c)(e=>({allIndexPrices:Object(re.b)(e),allMarkets:Object(J.d)(e),areIndexPricesLoaded:Object(re.c)(e),arePerpetualBalancesLoaded:Object(ae.c)(e),isWalletConnecting:Object(ee.e)(e),isWalletInvalid:Object(ee.g)(e),pendingDepositsWithdrawals:Object(it.e)(e),perpetualBalances:Object(ae.e)(e)}))(At));const _t=({stringGetter:e})=>l.a.createElement(l.a.Fragment,null,l.a.createElement(Pe.a,{title:e({key:ie.a.BALANCES})}),l.a.createElement(yt,null),l.a.createElement(ut,null),l.a.createElement(ht,null));_t.propTypes={stringGetter:s.a.func.isRequired};var St=Object(p.k)(_t),It=a(302),Rt=a(2449),Lt=a.n(Rt);const ft=({className:e,icon:t,iconUsesFill:a,iconUsesStroke:r,onClick:n})=>l.a.createElement("div",{role:"button",tabIndex:0,className:m()(Lt.a.iconButton,{[Lt.a.iconUsesFill]:a,[Lt.a.iconUsesStroke]:r},e),onClick:n},t);ft.propTypes={className:s.a.string,icon:s.a.node.isRequired,iconUsesFill:s.a.bool,iconUsesStroke:s.a.bool,onClick:s.a.func};var Pt=ft,Nt=a(286),kt=a(223),Ct=a(49),wt=a(249),Dt=a(389),Mt=a(132),vt=a(65),jt=a(21),xt=a(298),Gt=a(94),Bt=a(170);function margin_positions_table_slicedToArray(e,t){return function margin_positions_table_arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function margin_positions_table_iterableToArrayLimit(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var a=[],r=!0,n=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(a.push(l.value),!t||a.length!==t);r=!0);}catch(s){n=!0,i=s}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}return a}(e,t)||function margin_positions_table_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function asyncGeneratorStep(e,t,a,r,n,i,l){try{var o=e[i](l),s=o.value}catch(c){return void a(c)}o.done?t(s):Promise.resolve(s).then(r,n)}const Ut={MARKET:{titleKey:ie.a.MARKET,sortKey:"MARKET",width:"11%",tooltipConfig:{name:"positions-market"}},LEVERAGE:{titleKey:ie.a.LEVERAGE_ABBREVIATED,sortKey:"LEVERAGE",width:"7%",tooltipConfig:{name:"positions-leverage"}},SIDE:{titleKey:ie.a.SIDE,width:"7%",tooltipConfig:{name:"positions-side"}},PNL:{titleKey:ie.a.PNL,sortKey:"PNL",width:"9%",tooltipConfig:{name:"positions-pnl"}},SIZE_EQUITY:{titleKey:ie.a.SIZE,secondaryTitleKey:ie.a.EQUITY,width:"14%"},LIQ_OPEN:{titleKey:ie.a.LIQUIDATION_PRICE_ABBREVIATED,secondaryTitleKey:ie.a.OPEN_PRICE_ABBREVIATED,width:"14%"},STOP_LOSS:{titleKey:ie.a.STOP_LOSS,width:"12%"},TAKE_PROFIT:{titleKey:ie.a.TAKE_PROFIT,width:"12%"},EXPIRY:{titleKey:ie.a.EXPIRY,sortKey:"EXPIRY",width:"9%",tooltipConfig:{name:"positions-expiry",left:-220}},CLOSE:{titleKey:ie.a.CLOSE,rightAlign:!0,width:"56px"}},Wt=function(){var e=function _asyncToGenerator(e){return function(){var t=this,a=arguments;return new Promise(function(r,n){var i=e.apply(t,a);function _next(e){asyncGeneratorStep(i,r,n,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(i,r,n,_next,_throw,"throw",e)}_next(void 0)})}}(function*({accountNumber:e,baseMarket:t,quoteMarket:a,sizeMV:r,stringGetter:n,type:i,walletAddress:l,walletType:o,withdrawIsolated:s}){try{yield s({walletAddress:l,accountNumber:e,marketId:i===vt.b.ISOLATED_LONG?t.id:a.id,amount:r.baseAmount,market:t,type:i})}catch(c){const e=Object(Bt.j)({error:c,walletAddress:l,walletType:o,location:"open-positions:withdraw-position",stringGetter:n}).message;e&&Object(It.b)(({closeToast:t})=>Object(Nt.b)({toastType:Nt.a.FAILED,title:n({key:ie.a.WITHDRAW_POSITION_FAILED}),body:e,onClose:t}))}});return function onClickWithdrawIsolated(t){return e.apply(this,arguments)}}(),Ft=({allOrders:e,accountNumber:t,baseMarket:a,quoteMarket:r,pair:n,orderType:i})=>{const l=n.tickDecimals,o=Object(wt.b)(e,t);if(ge()(o)>0){const e=at()(o,e=>e.orderType===i);if(e)return new Gt.a(e.triggerPrice,a,r).getNaturalValue().toFixed(l)}return null},Vt=({allOrders:e,areMarketsLoaded:t,areOrdersLoaded:a,arePositionsLoaded:r,isOrderbookLoaded:n,isWalletConnecting:o,isWalletReady:s,openModal:c,openSidebarModal:d,parsedPositions:u,pendingPositions:E,selectedLocale:p,sidebarModalConfig:y,stringGetter:O,walletAddress:g,walletType:A,withdrawIsolated:h})=>{const _=margin_positions_table_slicedToArray(Object(i.useState)(null),2),I=_[0],L=_[1],f=margin_positions_table_slicedToArray(Object(i.useState)(null),2),P=f[0],N=f[1],C=(({parsedPositions:e,pendingPositions:t,sortDirection:a,sortedByKey:r,stringGetter:n})=>{let i=[];if(nt()([...t,...e],e=>{const t=e.accountNumber,a=e.baseMarket,r=e.collateralization,l=e.equityMV,o=e.expiresAt,s=e.isClosed,c=e.isExpired,d=e.isLiquidated,u=e.isPending,E=e.leverageBN,m=e.liquidationPriceMP,p=e.openPriceMP,b=e.pair,y=e.pnl,T=e.quoteMarket,O=e.sizeMV,g=e.type,A=e.uuid;let h;s?h=n({key:ie.a.CLOSED}):d?h=n({key:ie.a.LIQUIDATED}):c?h=n({key:ie.a.EXPIRED}):o||(h=n({key:ie.a.NONE})),i.push({accountNumber:t,baseMarket:a,collateralization:r,equityMV:l,expiresAtDT:k.DateTime.fromISO(o),expiryStatusString:h,isClosed:s,isExpired:c,isLiquidated:d,isPending:u,leverageBN:E,liquidationPriceMP:m,openPriceMP:p,pair:b,pnl:y,position:e,quoteMarket:T,sizeMV:O,type:g,uuid:A})}),r){switch(r){case"MARKET":i=et()(i,({pair:e})=>e.marketName);break;case"LEVERAGE":i=et()(i,({leverageBN:e})=>e&&e.toNumber());break;case"PNL":i=et()(i,({pnl:e})=>e&&e.toNumber());break;case"SIDE":i=et()(i,({type:e})=>e);break;case"EXPIRY":i=et()(i,({expiresAtDT:e})=>e.toSeconds())}a===fe.c.DECREASING&&(i=$e()(i))}return i})({parsedPositions:u,pendingPositions:E,sortDirection:P,sortedByKey:I,stringGetter:O}),w=[];S()(u)&&S()(E)?w.push(l.a.createElement(fe.b,{key:"empty",emptyState:!0},l.a.createElement(fe.a,{regularFont:!0},O({key:ie.a.EMPTY_STATE_MARGIN_POSITIONS})))):nt()(C,t=>w.push((({data:{accountNumber:e,baseMarket:t,collateralization:a,equityMV:r,expiresAtDT:n,expiryStatusString:o,isClosed:s,isExpired:c,isLiquidated:d,isPending:u,leverageBN:E,liquidationPriceMP:p,openPriceMP:y,pair:T,pnl:O,position:g,quoteMarket:A,sizeMV:h,type:_,uuid:S},allOrders:I,openModal:L,openSidebarModal:f,selectedLocale:P,sidebarModalConfig:N,stringGetter:C,walletAddress:w,walletType:D,withdrawIsolated:M})=>{const v=T.baseSymbol,j=T.displayQuoteSymbol,x=T.marketName,G=T.tickDecimals,B=u,U=a&&a.lte(mt.a),W=Ft({allOrders:I,accountNumber:e,baseMarket:t,quoteMarket:A,pair:T,orderType:jt.n.CANONICAL_ISOLATED_STOP_LIMIT}),F=Ft({allOrders:I,accountNumber:e,baseMarket:t,quoteMarket:A,pair:T,orderType:jt.n.CANONICAL_ISOLATED_TAKE_PROFIT}),V=Object(Me.c)({expiration:n,abbreviateUnits:!0,stringGetter:C}),Y=V.timeString,H=V.unitString,K=V.hasExpirationWarning,Z=s||d||c;return l.a.createElement(fe.b,{key:S,active:R()(N,"props.position.uuid")===S,onClick:u?void 0:()=>f({modalType:xt.a.MARGIN_POSITION_DETAILS,modalProps:{position:g}})},l.a.createElement(fe.a,{width:Ut.MARKET.width,muted:B},l.a.createElement(Re.a,{baseSymbol:v,quoteSymbol:j}),l.a.createElement("div",{className:je.a.pairCellText},l.a.createElement("span",{className:je.a.marketAssetName},x))),l.a.createElement(fe.a,{width:Ut.LEVERAGE.width,muted:B},d||c||s?"-":`${E.toFixed(le.e)}\xd7`),l.a.createElement(fe.a,{width:Ut.SIDE.width,muted:B},l.a.createElement(Ie.a,{capitalize:!0,large:!0,green:_===vt.b.ISOLATED_LONG,red:_===vt.b.ISOLATED_SHORT},_===vt.b.ISOLATED_LONG?C({key:ie.a.LONG}):C({key:ie.a.SHORT}))),l.a.createElement(fe.a,{width:Ut.PNL.width,muted:B,green:O&&O.gt(0),red:O&&O.lt(0)},O?`${O.gt(0)?"+":""}${O.times(100).toFixed(le.l)}%`:"-"),l.a.createElement(fe.a,{stacked:!0,width:Ut.SIZE_EQUITY.width,muted:B},l.a.createElement("span",null,c||d||s?"-":l.a.createElement(i.Fragment,null,h.getNaturalTokenString(),l.a.createElement(Ie.a,{compact:!0,muted:!0,marginLeft:!0},h.market.symbol))),l.a.createElement("span",null,r?l.a.createElement(i.Fragment,null,r.getNaturalTokenString(),l.a.createElement(Ie.a,{compact:!0,dark:!0,marginLeft:!0},r.market.symbol)):"-")),l.a.createElement(fe.a,{stacked:!0,width:Ut.LIQ_OPEN.width,muted:B},l.a.createElement("span",{className:m()({[je.a.red]:U})},!p||!p.baseAmount.isFinite()||d||c||s?"-":l.a.createElement(i.Fragment,null,p.getNaturalValue().toFixed(G),l.a.createElement(Ie.a,{compact:!0,muted:!0,marginLeft:!0},R()(p,"quoteMarket.symbol")))),l.a.createElement("span",null,y.getNaturalValue().toFixed(G),l.a.createElement(Ie.a,{compact:!0,dark:!0,marginLeft:!0},y.quoteMarket.symbol))),l.a.createElement(fe.a,{width:Ut.STOP_LOSS.width,muted:B},c||d||s||!W?"-":l.a.createElement(i.Fragment,null,W,l.a.createElement(Ie.a,{muted:!0,marginLeft:!0},j))),l.a.createElement(fe.a,{width:Ut.TAKE_PROFIT.width,muted:B},c||d||s||!F?"-":l.a.createElement(i.Fragment,null,F,l.a.createElement(Ie.a,{muted:!0,marginLeft:!0},j))),l.a.createElement(fe.a,{regularFont:!!o,width:Ut.EXPIRY.width,red:d||c,muted:B},o||l.a.createElement(kt.b,{label:n.setLocale(P).toLocaleString(k.DateTime.DATETIME_FULL),position:kt.a.LEFT},l.a.createElement("div",{className:m()(je.a.cursorPointer,{[je.a.red]:K})},`${Y}${H}`))),l.a.createElement(fe.a,{rightAlignCell:!0,width:Ut.CLOSE.width},u?l.a.createElement(q.a,{compact:!0}):l.a.createElement(kt.b,{label:C({key:Z?ie.a.WITHDRAW:ie.a.CLOSE}),position:kt.a.LEFT},l.a.createElement(Pt,{iconUsesStroke:!0,icon:Z?l.a.createElement(b.vb,null):l.a.createElement(b.q,null),onClick:a=>{a.stopPropagation(),Z?Wt({accountNumber:e,baseMarket:t,quoteMarket:A,sizeMV:h,stringGetter:C,type:_,walletAddress:w,walletType:D,withdrawIsolated:M}):L({type:oe.a.CLOSE_POSITION,props:{accountNumber:e}})}}))))})({data:t,allOrders:e,openModal:c,openSidebarModal:d,selectedLocale:p,sidebarModalConfig:y,stringGetter:O,walletAddress:g,walletType:A,withdrawIsolated:h})));const D=o||!t||s&&!(r&&a)||s&&at()(u,({status:e})=>e===vt.a.OPEN)&&!n;return l.a.createElement(Pe.c,null,l.a.createElement(fe.d,{isLoading:D,numLoadingRows:ot.c.length,scrollingMinWidth:1122,tableConfig:T()(Ut),tableLabel:O({key:ie.a.MARGIN}),sortableTableConfig:{sortedByKey:I,sortDirection:P,onClickTableHeader:e=>{I!==e?(L(e),N(fe.c.DECREASING)):I===e&&P===fe.c.DECREASING?N(fe.c.INCREASING):(L(null),N(null))}}},w))};Vt.propTypes={allOrders:s.a.array.isRequired,areMarketsLoaded:s.a.bool.isRequired,areOrdersLoaded:s.a.bool.isRequired,arePositionsLoaded:s.a.bool.isRequired,isOrderbookLoaded:s.a.bool.isRequired,isWalletConnecting:s.a.bool.isRequired,isWalletReady:s.a.bool.isRequired,openModal:s.a.func.isRequired,openSidebarModal:s.a.func.isRequired,parsedPositions:s.a.array,pendingPositions:s.a.array,selectedLocale:s.a.string.isRequired,sidebarModalConfig:s.a.object,stringGetter:s.a.func.isRequired,walletAddress:s.a.string,walletType:s.a.string,withdrawIsolated:s.a.func.isRequired};var qt=Object(p.k)(Object(d.c)(e=>({allOrders:Object(wt.k)(e),areMarketsLoaded:Object(J.e)(e),areOrdersLoaded:Object(wt.l)(e),arePositionsLoaded:Object(Dt.b)(e),baseMarket:Object(te.d)(e),isMobile:Object(Ce.d)(e).isMobile,isOrderbookLoaded:Object(Mt.l)(e),isWalletConnecting:Object(ee.e)(e),isWalletInvalid:Object(ee.g)(e),isWalletReady:Object(ee.h)(e),parsedPositions:Object(Dt.d)(e),pendingPositions:Object(it.b)(e),quoteMarket:Object(te.h)(e),selectedLocale:Object(ne.c)(e),sidebarModalConfig:Object(Ce.e)(e),userHasNoAccounts:Object(X.y)(e),walletAddress:Object(ee.m)(e),walletType:Object(ee.q)(e)}),e=>Object(u.b)({openModal:z.c,openSidebarModal:z.d,withdrawIsolated:Ct.f},e))(Vt));const Yt=({stringGetter:e})=>l.a.createElement(l.a.Fragment,null,l.a.createElement(Pe.a,{title:e({key:ie.a.POSITIONS})}),l.a.createElement(qt,null));Yt.propTypes={stringGetter:s.a.func.isRequired};var Ht=Object(p.k)(Yt),Kt=a(83),Zt=a(80),zt=a(388),Xt=a(103);function orders_table_slicedToArray(e,t){return function orders_table_arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function orders_table_iterableToArrayLimit(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var a=[],r=!0,n=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(a.push(l.value),!t||a.length!==t);r=!0);}catch(s){n=!0,i=s}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}return a}(e,t)||function orders_table_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}const Qt={STATUS:{sortKey:"STATUS",titleKey:ie.a.STATUS,width:"72px"},PAIR:{sortKey:"PAIR",titleKey:ie.a.PAIR,width:"12%"},SIDE:{sortKey:"SIDE",titleKey:ie.a.SIDE,width:"8%"},AMOUNT:{titleKey:ie.a.AMOUNT,width:"15%"},FILLED:{titleKey:ie.a.AMOUNT_FILLED,width:"15%"},PRICE:{titleKey:ie.a.PRICE,width:"15%"},STOP_INDEX:{titleKey:ie.a.STOP_PRICE_ABBREVIATED,secondaryTitleKey:ie.a.INDEX_PRICE_ABBREVIATED,width:"15%"},GOOD_TIL:{sortKey:"GOOD_TIL",titleKey:ie.a.GOOD_TIL_DATE_ABBREVIATED,width:"8%"},CANCEL:{titleKey:ie.a.CANCEL,rightAlign:!0,width:"56px"}},$t=({allIndexPrices:e,allMarkets:t,areIndexPricesLoaded:a,areMarketsLoaded:r,areOrdersLoaded:o,cancelLimitOrder:s,clearDexOrder:c,isWalletConnecting:d,isWalletReady:u,legacySigning:E,ordersByProduct:p,product:y,selectedLocale:O,stringGetter:g,userHasNoAccounts:A,walletAddress:h,walletType:_})=>{const I=orders_table_slicedToArray(Object(i.useState)(null),2),R=I[0],L=I[1],f=orders_table_slicedToArray(Object(i.useState)(null),2),P=f[0],N=f[1],C=(({allIndexPrices:e,allMarkets:t,orders:a,sortDirection:r,sortedByKey:i,stringGetter:l})=>{let o=[];if(nt()(a,({baseAmount:a,cancelReason:r,createdAt:i,expiresAt:s,filledAmount:c,fillOrKill:d,id:u,market:E,orderType:m,price:p,side:b,status:y,triggerPrice:T})=>{const O=Object(te.b)(E),g=O.baseSymbol,A=O.isInversePerpetual,h=O.quoteSymbol,_=Object(J.c)({allMarkets:t,symbol:g}),S=Object(J.c)({allMarkets:t,symbol:h}),I=A?S:_,R=y===jt.l.CANCELED,L=y===jt.l.FILLED,f=n()([jt.n.PERPETUAL_STOP_LIMIT,jt.n.CANONICAL_STOP_LIMIT,jt.n.CANONICAL_SPOT_STOP_LIMIT],m),P=!R&&y!==jt.l.FILLED&&(f||!d);let N="";f&&(N=`${l({key:ie.a.ORDER_TYPES_STOP})} `),N+=l(d?{key:ie.a.ORDER_TYPES_MARKET}:{key:ie.a.ORDER_TYPES_LIMIT}),o.push({cancelReason:r,createdAtDT:k.DateTime.fromISO(i),expiresAtDT:k.DateTime.fromISO(s),filledAmount:Object(de.a)(c,I.currency.decimals),fillOrKill:d,id:u,indexPrice:Object(re.a)({pair:O,allIndexPrices:e,allMarkets:t}),isCanceledOrder:R,isFilledOrder:L,isStopOrder:f,orderType:m,orderTypeLabel:N,pair:O,price:new Gt.a(p,_,S).getNaturalValue(),showGoodTil:P,side:b,status:y,totalAmount:Object(de.a)(a,I.currency.decimals),triggerPrice:new Gt.a(T,_,S).getNaturalValue()})}),i){switch(i){case"STATUS":o=et()(o,({status:e})=>e);break;case"PAIR":o=et()(o,({pair:e,orderTypeLabel:t})=>e.marketName+t);break;case"SIDE":o=et()(o,({side:e})=>e===jt.k.BUY?1:0);break;case"GOOD_TIL":o=et()(o,({expiresAtDT:e})=>e.toSeconds())}r===fe.c.DECREASING&&(o=$e()(o))}return o})({allIndexPrices:e,allMarkets:t,orders:p[y],sortDirection:P,sortedByKey:R,stringGetter:g}),D=[];if(S()(C)){let e;switch(y){case zt.a.SPOT:e=ie.a.EMPTY_STATE_SPOT_ORDERS;break;case zt.a.MARGIN:e=ie.a.EMPTY_STATE_MARGIN_ORDERS;break;case zt.a.PERPETUALS:e=ie.a.EMPTY_STATE_PERPETUAL_ORDERS}D.push(l.a.createElement(fe.b,{emptyState:!0},l.a.createElement(fe.a,{regularFont:!0},g({key:e}))))}else nt()(C,e=>D.push((({data:{cancelReason:e,createdAtDT:t,expiresAtDT:a,filledAmount:r,fillOrKill:n,id:o,indexPrice:s,isCanceledOrder:c,isFilledOrder:d,isStopOrder:u,orderType:E,orderTypeLabel:p,pair:y,price:T,showGoodTil:O,side:g,status:A,totalAmount:h,triggerPrice:_},cancelLimitOrder:S,clearDexOrder:I,legacySigning:R,selectedLocale:L,stringGetter:f,walletAddress:P,walletType:N})=>{const C=y.baseSymbol,D=y.displayQuoteSymbol,M=y.isInversePerpetual,v=y.marketName,j=y.tickDecimals,x=Object(Me.c)({expiration:a.minus({minutes:jt.j}),abbreviateUnits:!0,stringGetter:f}),G=x.timeString,B=x.unitString,U=x.hasExpirationWarning,W=Object(Me.a)({dateTime:t,stringGetter:f}),F=W.timeString,V=W.unitString;let q;switch(A){case jt.l.PENDING:q=l.a.createElement(b.Z,null);break;case jt.l.OPEN:q=l.a.createElement(b.X,null);break;case jt.l.FILLED:q=l.a.createElement(b.W,null);break;case jt.l.PARTIALLY_FILLED:q=l.a.createElement(b.Y,null);break;case jt.l.CANCELED:q=l.a.createElement(b.V,null);break;case jt.l.UNTRIGGERED:q=l.a.createElement(b.X,null)}const Y=Object(Xt.e)(A,e),H=Y?f({key:Y}):"-",K=A===jt.l.CANCELED,Z=jt.b[e],z=K;return l.a.createElement(fe.b,{key:o},l.a.createElement(fe.a,{width:Qt.STATUS.width,className:je.a.initialTimestampCell},l.a.createElement("span",null,F,V),l.a.createElement(kt.b,{label:l.a.createElement(i.Fragment,null,H,K&&Z?`- ${Z}`:""),position:kt.a.RIGHT},l.a.createElement("div",{className:je.a.cursorPointer},q))),l.a.createElement(fe.a,{width:Qt.PAIR.width,muted:z},l.a.createElement(Re.a,{baseSymbol:C,quoteSymbol:D}),l.a.createElement("div",{className:je.a.pairCellText},l.a.createElement("span",{className:je.a.marketAssetName},v),l.a.createElement("span",{className:m()(je.a.marketAssetName,je.a.label)},p))),l.a.createElement(fe.a,{width:Qt.SIDE.width,muted:z},l.a.createElement(Ie.a,{muted:!0,capitalize:!0,large:!0,green:g===jt.k.BUY,red:g===jt.k.SELL},g===jt.k.BUY?f({key:ie.a.BUY}):f({key:ie.a.SELL}))),l.a.createElement(fe.a,{width:Qt.AMOUNT.width,muted:z},l.a.createElement(w.a,{thousandSeparator:!0,displayType:"text",value:h.toFixed(le.n)}),l.a.createElement(Ie.a,{muted:!0,marginLeft:!0},M?D:C)),l.a.createElement(fe.a,{width:Qt.FILLED.width,muted:z},l.a.createElement(w.a,{thousandSeparator:!0,displayType:"text",value:r.toFixed(le.n)}),l.a.createElement(Ie.a,{muted:!0,marginLeft:!0},M?D:C)),l.a.createElement(fe.a,{width:Qt.PRICE.width,regularFont:u&&n,muted:z},u&&n?f({key:ie.a.MARKET_PRICE_SHORT}):l.a.createElement(i.Fragment,null,l.a.createElement(w.a,{thousandSeparator:!0,displayType:"text",value:T.toFixed(j)}),l.a.createElement(Ie.a,{muted:!0,marginLeft:!0},D))),l.a.createElement(fe.a,{stacked:!0,width:Qt.STOP_INDEX.width,muted:z},u?l.a.createElement(i.Fragment,null,l.a.createElement("span",{className:je.a.stackedValueWithTag},_.toFixed(j),l.a.createElement(Ie.a,{muted:!0,marginLeft:!0},D)),l.a.createElement("span",null,s?s.toFixed(j):"-")):"-"),l.a.createElement(fe.a,{width:Qt.GOOD_TIL.width,muted:z,red:O&&G&&U},l.a.createElement(kt.b,{label:a.setLocale(L).toLocaleString(k.DateTime.DATETIME_FULL),position:kt.a.LEFT},l.a.createElement("div",{className:je.a.cursorPointer},O&&G?`${G}${B}`:"-"))),l.a.createElement(fe.a,{rightAlignCell:!0,width:Qt.CANCEL.width},l.a.createElement(kt.b,{label:f({key:c||d?ie.a.CLEAR:ie.a.CANCEL_ORDER}),position:kt.a.LEFT},l.a.createElement(Pt,{iconUsesStroke:!0,icon:l.a.createElement(b.q,null),onClick:e=>{e.stopPropagation(),c||d?I(o):S({pair:y,walletAddress:P,walletType:N,legacySigning:R,orderHash:o,tradeOrderType:E})}}))))})({data:e,cancelLimitOrder:s,clearDexOrder:c,legacySigning:E,selectedLocale:O,stringGetter:g,walletAddress:h,walletType:_})));const M=d||!r||!a||!A&&!o&&u;let v;switch(y){case zt.a.SPOT:v=ie.a.SPOT;break;case zt.a.MARGIN:v=ie.a.MARGIN;break;case zt.a.PERPETUALS:v=ie.a.PERPETUALS}return l.a.createElement(Pe.c,{useTableMargins:y!==zt.a.MARGIN,noMarginBottom:y===zt.a.MARGIN},l.a.createElement(fe.d,{isLoading:M,numLoadingRows:ot.c.length,scrollingMinWidth:1024,tableConfig:T()(Qt),tableLabel:g({key:v}),sortableTableConfig:{sortedByKey:R,sortDirection:P,onClickTableHeader:e=>{R!==e?(L(e),N(fe.c.DECREASING)):R===e&&P===fe.c.DECREASING?N(fe.c.INCREASING):(L(null),N(null))}}},D))};$t.propTypes={allIndexPrices:s.a.object.isRequired,allMarkets:s.a.array.isRequired,areIndexPricesLoaded:s.a.bool.isRequired,areMarketsLoaded:s.a.bool.isRequired,areOrdersLoaded:s.a.bool.isRequired,cancelLimitOrder:s.a.func.isRequired,clearDexOrder:s.a.func.isRequired,isWalletConnecting:s.a.bool.isRequired,isWalletReady:s.a.bool.isRequired,legacySigning:s.a.bool.isRequired,ordersByProduct:s.a.object,product:s.a.oneOf(T()(zt.a)).isRequired,selectedLocale:s.a.string.isRequired,stringGetter:s.a.func.isRequired,userHasNoAccounts:s.a.bool.isRequired,walletAddress:s.a.string,walletType:s.a.string};var Jt=Object(p.k)(Object(d.c)(e=>({allIndexPrices:Object(re.b)(e),allMarkets:Object(J.d)(e),areIndexPricesLoaded:Object(re.c)(e),areMarketsLoaded:Object(J.e)(e),areOrdersLoaded:Object(wt.l)(e),isWalletConnecting:Object(ee.e)(e),isWalletReady:Object(ee.h)(e),legacySigning:Object(ee.i)(e),ordersByProduct:Object(wt.o)(e),userHasNoAccounts:Object(X.y)(e),selectedLocale:Object(ne.c)(e),walletAddress:Object(ee.m)(e),walletType:Object(ee.q)(e)}),e=>Object(u.b)({cancelLimitOrder:Kt.a,clearDexOrder:Zt.a},e))($t));const ea=({stringGetter:e})=>l.a.createElement(l.a.Fragment,null,l.a.createElement(Pe.a,{title:e({key:ie.a.ORDERS})}),l.a.createElement(Jt,{product:zt.a.MARGIN}),l.a.createElement(Jt,{product:zt.a.SPOT}),l.a.createElement(Jt,{product:zt.a.PERPETUALS}));ea.propTypes={stringGetter:s.a.func.isRequired};var ta=Object(p.k)(ea);const aa="https://etherscan.io/tx/",ra=30,na=De.i+56+28+40+2,ia={[we.d.WITHDRAW]:ie.a.WITHDRAW,[we.d.DEPOSIT]:ie.a.DEPOSIT,[we.d.REPAY]:ie.a.REPAY,[we.d.BORROW]:ie.a.BORROW},la={ACTION:{titleKey:ie.a.ACTION,width:"20%"},ACCOUNT:{titleKey:ie.a.ACCOUNT,width:"25%"},ASSET:{titleKey:ie.a.ASSET,width:"20%"},AMOUNT:{titleKey:ie.a.AMOUNT,width:"20%"},TRANSACTION:{titleKey:ie.a.TRANSACTION,width:"15%"}};class oa extends i.Component{constructor(e){super(e),this.onTableScroll=(()=>{const e=this.props.hasRemainingActionsToFetch,t=this.tableRowsRef.current,a=t.scrollTop,r=t.scrollHeight,n=t.offsetHeight;e?a===r-n&&this.fetchMoreActions():this.setState({isLoadingMoreEntries:!1})}),this.renderRow=(({data:{accountNumber:e,amountMV:t,confirmedAt:a,marketName:r,pair:n,product:i,transactionHash:o,type:s,uuid:c},stringGetter:d})=>{const u=k.DateTime.fromISO(a);let E=t.market.symbol,m=t.market.symbol;if(n&&n.type===Tt.d.PERPETUAL){const e=n.baseSymbol,t=n.displayQuoteSymbol,a=n.quoteSymbol,r=n.isInversePerpetual;E=r?e:t,m=r?e:a}const p=Object(Me.a)({dateTime:u,stringGetter:d}),y=p.timeString,T=p.unitString;let O;return O=i===we.b.PERPETUAL?`${r} ${d({key:ie.a.PERPETUAL_CONTRACT_SHORT})}`:d({key:lt.c.eq(e)?ie.a.SPOT:ie.a.MARGIN}),l.a.createElement(fe.b,{key:c},l.a.createElement(fe.a,{regularFont:!0,width:la.ACTION.width,className:je.a.initialTimestampCell},l.a.createElement("span",null,y,T),d({key:ia[s]})||s),l.a.createElement(fe.a,{regularFont:!0,width:la.ACCOUNT.width},O),l.a.createElement(fe.a,{width:la.ASSET.width},l.a.createElement(Re.a,{baseSymbol:m})," ",l.a.createElement("div",{className:je.a.marketAssetName},E)),l.a.createElement(fe.a,{width:la.AMOUNT.width},t?t.getNaturalValue().toFixed(le.n):"-"),l.a.createElement(fe.a,{width:la.TRANSACTION.width},l.a.createElement("a",{className:je.a.linkOut,target:"blank",rel:"noopener noreferrer",href:`${aa}${o}`},l.a.createElement(Le.a,{hash:o}),l.a.createElement(b.N,null))))}),this.tableRowsRef=Object(i.createRef)(),this.state={isLoadingMoreEntries:!1}}componentDidMount(){const e=this.props,t=e.fundingHistoryData;e.areStandardActionsLoaded&&ge()(t)<ra&&this.fetchMoreActions()}componentDidUpdate(e){const t=e.fundingHistoryData,a=e.standardActionsVersion,r=this.props,n=r.fundingHistoryData,i=r.hasRemainingActionsToFetch,l=r.standardActionsVersion,o=this.state.isLoadingMoreEntries;i&&l!==a&&ge()(n)<ra?this.fetchMoreActions():o&&(i?ge()(n)>ge()(t)?this.setState({isLoadingMoreEntries:!1}):l!==a&&this.fetchMoreActions():this.setState({isLoadingMoreEntries:!1}))}fetchMoreActions(){const e=this.props,t=e.hasRemainingActionsToFetch,a=e.fetchStandardActions,r=e.walletAddress,n=e.oldestActionCreatedAt;t&&n&&(this.setState({isLoadingMoreEntries:!0}),a({walletAddress:r,createdBefore:n}))}render(){const e=this.props,t=e.areMarketsLoaded,a=e.areStandardActionsLoaded,r=e.isWalletConnecting,n=e.isWalletInvalid,i=e.openModal,o=e.pageViewport,s=e.stringGetter,c=e.fundingHistoryData,d=this.state,u=d.isLoadingMoreEntries,E=d.hasRemainingActionsToFetch,m=S()(c)?l.a.createElement(fe.b,{emptyState:!0},l.a.createElement(fe.a,{regularFont:!0},s({key:ie.a.EMPTY_STATE_TRANSFERS})," ",!r&&n&&l.a.createElement(Se,{marginLeft:!0,onClick:()=>i({type:oe.a.CONNECT_WALLET})},s({key:ie.a.GET_STARTED_DESCRIPTION})))):g()(c,e=>this.renderRow({data:e,stringGetter:s})),p=!t||r||!n&&(!a||ge()(c)<ra&&E);let b=o.height-na;return o.width>De.d&&(b-=De.h),l.a.createElement(l.a.Fragment,null,l.a.createElement(Pe.c,{noMarginBottom:!0},l.a.createElement(fe.d,{className:je.a.hideBottomBorder,noBorderBottom:!0,isLoading:p,numLoadingRows:3,scrollingMinWidth:1024,tableConfig:T()(la),onTableVerticalScroll:this.onTableScroll,rowContainerRef:this.tableRowsRef,rowContainerHeight:b},m,!p&&u&&l.a.createElement(q.a,{className:je.a.moreRowsLoadingSpinner}))))}}oa.propTypes={areMarketsLoaded:s.a.bool.isRequired,areStandardActionsLoaded:s.a.bool.isRequired,fetchStandardActions:s.a.func.isRequired,fundingHistoryData:s.a.array.isRequired,hasRemainingActionsToFetch:s.a.bool,isWalletConnecting:s.a.bool.isRequired,isWalletInvalid:s.a.bool.isRequired,oldestActionCreatedAt:s.a.string,openModal:s.a.func.isRequired,pageViewport:s.a.object.isRequired,standardActionsVersion:s.a.number,stringGetter:s.a.func.isRequired,walletAddress:s.a.string};var sa=Object(p.k)(Object(d.c)(e=>({areMarketsLoaded:Object(J.e)(e),areStandardActionsLoaded:Object(ke.a)(e),fundingHistoryData:Object(ke.d)(e),hasRemainingActionsToFetch:Object(ke.b)(e),isWalletConnecting:Object(ee.e)(e),isWalletInvalid:Object(ee.v)(e),oldestActionCreatedAt:Object(ke.c)(e),pageViewport:Object(Ce.d)(e),standardActionsVersion:Object(ke.g)(e),walletAddress:Object(ee.m)(e)}),e=>Object(u.b)({openModal:z.c,fetchStandardActions:Ne.a},e))(oa));const ca=["UTC Timestamp","Trade Type","Market","Side","Leverage","PNL","Margin Deposit","Amount","Fee","Price","Transaction"],da=e=>{let t="data:text/csv;charset=utf-8,";return t+=`${ca.join(",")}\n`,nt()(e,({confirmedAt:e,type:a,side:r,pair:n,leverageBN:i,pnl:l,marginDepositMV:o,amountMV:s,feeAmountMV:c,priceMP:d,transactionHash:u})=>{const E=[];E.push(k.DateTime.fromISO(e).toUTC()),E.push(a||"-"),E.push(n.symbol),E.push(r),E.push(i?`${i.toFixed(le.e)}X`:"-"),E.push(l?`${l.gt(0)?"+":""}${l.times(100).toFixed(le.l)}%`:"-"),E.push(o?`${o.getNaturalValue()} ${o.market.symbol}`:"-"),E.push(s?`${s.getNaturalValue()} ${s.market.symbol}`:"-"),E.push(c?`${c.getNaturalValue()} ${c.market.symbol}`:"-"),E.push(d?`${d.getNaturalValue().toFixed(le.n)} ${d.market.symbol}`:"-"),E.push(u||"-"),t+=`${E.join(",")}\n`}),t},ua=["UTC Timestamp","Account","Type","Asset","Amount","Transaction"],Ea=e=>{let t="data:text/csv;charset=utf-8,";return t+=`${ua.join(",")}\n`,nt()(e,({confirmedAt:e,type:a,amountMV:r,marketName:n,product:i,transactionHash:l})=>{const o=[];o.push(k.DateTime.fromISO(e).toUTC()),o.push(i===we.b.PERPETUAL?`${n} ${i}`:i||"MARGIN"),o.push(a||"-"),o.push(r?r.market.symbol:"-"),o.push(r?r.getNaturalValue():"-"),o.push(l||"-"),t+=`${o.join(",")}\n`}),t};class ma extends i.Component{constructor(e){super(e),this.downloadHistory=(()=>{const e=this.props,t=e.tradeHistoryData,a=e.fundingHistoryData,r=e.walletAddress,n=this.state.isTransferHistorySelected,i=n?Ea(a):da(t),l=encodeURI(i),o=document.createElement("a");o.setAttribute("href",l),o.setAttribute("download",`dYdX_${n?"Transfer":"Trading"}_History_${k.DateTime.local().toFormat("MM-dd-yyyy")}_${r}.csv`),document.body.appendChild(o),o.click()}),this.onClickDownload=(()=>{this.props.hasRemainingActionsToFetch?(this.setState({userClickedDownload:!0}),this.fetchMoreActions()):this.downloadHistory()}),this.state={userClickedDownload:!1,isTransferHistorySelected:!1}}componentDidUpdate(e){const t=e.standardActionsVersion,a=this.props,r=a.hasRemainingActionsToFetch,n=a.standardActionsVersion;this.state.userClickedDownload&&(r?t!==n&&this.fetchMoreActions():(this.setState({userClickedDownload:!1}),this.downloadHistory()))}fetchMoreActions(){const e=this.props,t=e.hasRemainingActionsToFetch,a=e.fetchStandardActions,r=e.walletAddress,n=e.oldestActionCreatedAt;t&&n&&a({walletAddress:r,createdBefore:n})}render(){const e=this.props,t=e.markets,a=e.isWalletConnecting,r=e.isWalletInvalid,n=e.areStandardActionsLoaded,i=e.stringGetter,o=this.state,s=o.isTransferHistorySelected,c=o.userClickedDownload,d=!t||a||!n||r;return l.a.createElement("div",{className:je.a.historyPageContent},l.a.createElement(Pe.b,{onClick:e=>this.setState({isTransferHistorySelected:"TRANSFERS"===e}),selectedTabKey:s?"TRANSFERS":"TRADING",tabConfig:[{key:"TRADING",label:i({key:ie.a.TRADING})},{key:"TRANSFERS",label:i({key:ie.a.TRANSFERS})}],cta:!d&&l.a.createElement(K.f,{muted:!0,uppercase:!1,className:je.a.historyDownloadButton,size:K.e.SMALL,isLoading:c,onClick:this.onClickDownload},l.a.createElement(b.y,null),"CSV")}),s?l.a.createElement(sa,null):l.a.createElement(qe,null))}}ma.propTypes={areStandardActionsLoaded:s.a.bool.isRequired,fetchStandardActions:s.a.func.isRequired,fundingHistoryData:s.a.array.isRequired,hasRemainingActionsToFetch:s.a.bool,isWalletConnecting:s.a.bool.isRequired,isWalletInvalid:s.a.bool.isRequired,markets:s.a.array.isRequired,oldestActionCreatedAt:s.a.string,standardActionsVersion:s.a.number,stringGetter:s.a.func.isRequired,tradeHistoryData:s.a.array.isRequired,walletAddress:s.a.string};var pa=Object(p.k)(Object(d.c)(e=>({areStandardActionsLoaded:Object(ke.a)(e),fundingHistoryData:Object(ke.d)(e),hasRemainingActionsToFetch:Object(ke.b)(e),isWalletConnecting:Object(ee.e)(e),isWalletInvalid:Object(ee.v)(e),markets:Object(J.d)(e),oldestActionCreatedAt:Object(ke.c)(e),standardActionsVersion:Object(ke.g)(e),tradeHistoryData:Object(ke.e)(e),walletAddress:Object(ee.m)(e)}),e=>Object(u.b)({fetchStandardActions:Ne.a},e))(ma)),ba=a(2181),ya=a(2262),Ta=a(70);class Oa extends i.Component{constructor(...e){super(...e),this.onClickLink=(()=>{const e=this.props,t=e.closeSidebarModal,a=e.pageViewport,r=e.setIsSidebarOpen;t(),a.width<=De.d&&r(!1)})}renderSidebar(){const e=this.props,t=e.allCrossOrders,a=e.areOrdersLoaded,r=e.arePositionsLoaded,i=e.isWalletReady,o=e.location,s=e.openSidebarModal,c=e.parsedPositions,d=e.pendingPositions,u=e.sidebarModalConfig,E=e.stringGetter;let p=t.length;p>99&&(p="99+");let y=c.length+d.length;y>99&&(y="99+");const T=n()(o.pathname,De.n.POSITIONS),O=n()(o.pathname,De.n.ORDERS);return l.a.createElement("div",{className:je.a.sidebar},l.a.createElement("div",null,l.a.createElement(ya.a,{title:E({key:ie.a.VIEWS})}),l.a.createElement(ya.b,{iconUsesStroke:!0,tinyIcon:!0,icon:l.a.createElement(b.ab,null),label:E({key:ie.a.OVERVIEW}),linkTo:De.n.OVERVIEW,onClick:this.onClickLink,selected:n()(o.pathname,De.n.OVERVIEW)}),l.a.createElement(ya.b,{iconUsesFill:!0,icon:l.a.createElement(b.eb,null),label:E({key:ie.a.BALANCES}),linkTo:De.n.BALANCES,onClick:this.onClickLink,selected:n()(o.pathname,De.n.BALANCES)}),l.a.createElement(ya.b,{className:m()(je.a.menuItemWithTag,{[je.a.selected]:T}),iconUsesFill:!0,icon:l.a.createElement(b.t,null),label:l.a.createElement(l.a.Fragment,null,E({key:ie.a.POSITIONS}),r&&l.a.createElement(Ie.a,{muted:!0,className:je.a.tag},y)),linkTo:De.n.POSITIONS,onClick:this.onClickLink,selected:T}),l.a.createElement(ya.b,{className:m()(je.a.menuItemWithTag,{[je.a.selected]:O}),iconUsesStroke:!0,icon:l.a.createElement(b.Z,null),label:l.a.createElement(l.a.Fragment,null,E({key:ie.a.ORDERS}),a&&l.a.createElement(Ie.a,{muted:!0,className:je.a.tag},p)),linkTo:De.n.ORDERS,onClick:this.onClickLink,selected:O}),l.a.createElement(ya.b,{iconUsesFill:!0,icon:l.a.createElement(b.J,null),label:E({key:ie.a.HEADER_HISTORY}),linkTo:De.n.HISTORY,onClick:this.onClickLink,selected:n()(o.pathname,De.n.HISTORY)})),i&&l.a.createElement("div",{className:je.a.sidebarButtons},l.a.createElement(K.f,{fullWidth:!0,active:u&&u.type===xt.a.DEPOSIT,onClick:()=>s({modalType:xt.a.DEPOSIT})},l.a.createElement(b.v,null),E({key:ie.a.DEPOSIT})),l.a.createElement(K.f,{fullWidth:!0,active:u&&u.type===xt.a.WITHDRAW,onClick:()=>s({modalType:xt.a.WITHDRAW})},l.a.createElement(b.vb,null),E({key:ie.a.WITHDRAW}))))}render(){return l.a.createElement(ba.a,{sidebar:this.renderSidebar()},l.a.createElement("div",{className:je.a.portfolioPageContent},l.a.createElement(c.d,null,l.a.createElement(c.b,{path:De.n.OVERVIEW,component:Xe}),l.a.createElement(c.b,{path:De.n.BALANCES,component:St}),l.a.createElement(c.b,{path:De.n.POSITIONS,component:Ht}),l.a.createElement(c.b,{path:De.n.ORDERS,component:ta}),l.a.createElement(c.b,{path:De.n.HISTORY,component:pa}),l.a.createElement(c.b,{path:De.k.PORTFOLIO},l.a.createElement(c.a,{to:De.n.OVERVIEW})))))}}Oa.propTypes={allCrossOrders:s.a.array.isRequired,areOrdersLoaded:s.a.bool.isRequired,arePositionsLoaded:s.a.bool.isRequired,closeSidebarModal:s.a.func.isRequired,isWalletReady:s.a.bool.isRequired,location:s.a.shape({pathname:s.a.string}),openSidebarModal:s.a.func.isRequired,pageViewport:s.a.object.isRequired,parsedPositions:s.a.array.isRequired,pendingPositions:s.a.array.isRequired,setIsSidebarOpen:s.a.func.isRequired,sidebarModalConfig:s.a.object,stringGetter:s.a.func.isRequired};t.default=Object(p.k)(Object(c.g)(Object(d.c)(e=>({allCrossOrders:Object(wt.d)(e),areOrdersLoaded:Object(wt.l)(e),arePositionsLoaded:Object(Dt.b)(e),isWalletReady:Object(ee.h)(e),pageViewport:Object(Ce.d)(e),parsedPositions:Object(Dt.d)(e),pendingPositions:Object(it.b)(e),sidebarModalConfig:Object(Ce.e)(e)}),e=>Object(u.b)({setIsSidebarOpen:Ta.e,openSidebarModal:z.d,closeSidebarModal:z.b},e))(Oa)))}}]);