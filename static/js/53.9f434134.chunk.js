(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{2122:function(e,a,t){"use strict";t.d(a,"b",function(){return m}),t.d(a,"c",function(){return d}),t.d(a,"d",function(){return E}),t.d(a,"a",function(){return p});var n=t(4),r=t.n(n),i=t(41),l=t(44),o=t(26),c=t(94),s=t(10);const m=e=>r()(e,"indexPrices.indexPrices"),d=e=>r()(e,"indexPrices.areIndexPricesLoaded"),E=Object(i.a)([l.e,m,o.d],(e,a,t)=>p({pair:e,allIndexPrices:a,allMarkets:t})),p=({pair:e,allIndexPrices:a,allMarkets:t})=>{const n=e.orderMarket,r=e.baseSymbol,i=e.quoteSymbol,l=Object(o.c)({allMarkets:t,symbol:r}),m=Object(o.c)({allMarkets:t,symbol:i}),d=a[n];if(d)return new c.a(d,l,m).getNaturalValue();const E=Object(o.c)({allMarkets:t,symbol:"DAI"});if(E&&E.oraclePrice){if("WETH-DAI"===n){if(a["WETH-USDC"])return new c.a(a["WETH-USDC"],l,Object(o.c)({allMarkets:t,symbol:"USDC"})).getNaturalValue().div(E.oraclePrice)}if("DAI-USDC"===n)return Object(s.a)(E.oraclePrice)}return null}},2474:function(e,a,t){e.exports={positionDetailsModal:"Brj8OhhZD8Su3o48-PuEZ",modalContent:"_40fBkOPdG4FvbMyvPdXlz",marketAndType:"_3Yzc77WaA-ivHdm4H3aD2f",infoSectionRowContainer:"gpaHJLYhKp5An2lSiSMpn",infoSectionRow:"_2Dt43Ops55mAwJuLdC6NMr",infoSection:"_2iYZiyJiuxTiPb4CEwNIMb",dynamicButtons:"_3fyyfWJ0Jr9at6xEV8vxi0",divider:"GF2QbUxeOhJagPhFTELgo",green:"iWbxaYbpczbQTI_uiAHmM",red:"_3okvxIjb9SfTdmL-jvCpbv",triggerModalLink:"_1IgULqpvBq78qU2D6dNsxH",floatingCta:"_1mxxaxXLSdpEgv3FQTqDCi"}},2507:function(e,a,t){"use strict";t.r(a);var n=t(37),r=t.n(n),i=t(0),l=t.n(i),o=t(1),c=t.n(o),s=t(52),m=t(60),d=t(34),E=t(302),p=t(19),u=t.n(p),b=t(74),f=t(251),S=t(387),N=t(2131),y=t(2183),O=t(286),T=t(2127),I=t(190),g=t(45),k=t(49),v=t(249),_=t(2122),A=t(26),P=t(33),L=t(5),R=t(65),w=t(61),D=t(11),M=t(21),x=t(298),C=t(38),G=t(94),j=t(10),h=t(614),q=t(170),F=t(2474),V=t.n(F);function asyncGeneratorStep(e,a,t,n,r,i,l){try{var o=e[i](l),c=o.value}catch(s){return void t(s)}o.done?a(c):Promise.resolve(c).then(n,r)}function _slicedToArray(e,a){return function _arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function _iterableToArrayLimit(e,a){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var t=[],n=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(n=(l=o.next()).done)&&(t.push(l.value),!a||t.length!==a);n=!0);}catch(c){r=!0,i=c}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return t}(e,a)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}const W=({allOrders:e,accountNumber:a,orderType:t})=>{const n=Object(v.b)(e,a);return r()(n,e=>e.orderType===t)},H=({allIndexPrices:e,allMarkets:a,allOrders:t,closeSidebarModal:n,openModal:r,openSidebarModal:o,position:c,stringGetter:s,withdrawIsolated:m,walletAddress:p,walletType:b})=>{const g=_slicedToArray(Object(i.useState)(!1),2),k=g[0],v=g[1],A=c.accountNumber,P=c.baseMarket,F=c.collateralization,H=c.createdAt,B=c.equityMV,U=c.initialLeverageBN,z=c.interestEarnedMV,J=c.interestOwedMV,$=c.interestRate,Q=c.isClosed,Y=c.isExpired,X=c.isLiquidated,Z=c.isPositionOpen,K=c.leverageBN,ee=c.liquidationPriceMP,ae=c.openPriceMP,te=c.pair,ne=c.pnl,re=c.quoteMarket,ie=c.sizeMV,le=c.status,oe=c.stopClosePriceMP,ce=c.type,se=te.baseSymbol,me=te.displayQuoteSymbol,de=te.marketName,Ee=te.tickDecimals,pe=Object(h.b)({datetime:d.DateTime.fromISO(H),stringGetter:s}),ue=pe.timeString,be=pe.unitString,fe=Object(_.a)({allIndexPrices:e,allMarkets:a,pair:te}),Se=W({allOrders:t,accountNumber:A,baseMarket:P,quoteMarket:re,pair:te,orderType:M.n.CANONICAL_ISOLATED_STOP_LIMIT}),Ne=W({allOrders:t,accountNumber:A,baseMarket:P,quoteMarket:re,pair:te,orderType:M.n.CANONICAL_ISOLATED_TAKE_PROFIT}),ye=function(){var e=function _asyncToGenerator(e){return function(){var a=this,t=arguments;return new Promise(function(n,r){var i=e.apply(a,t);function _next(e){asyncGeneratorStep(i,n,r,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(i,n,r,_next,_throw,"throw",e)}_next(void 0)})}}(function*(){v(!0);try{yield m({walletAddress:p,accountNumber:A,marketId:ce===R.b.ISOLATED_LONG?P.id:re.id,amount:ie.baseAmount,market:P,type:ce}),n()}catch(e){const a=Object(q.j)({error:e,walletAddress:p,walletType:b,location:"position-details-modal:withdraw-position",stringGetter:s}).message;a&&Object(E.b)(({closeToast:e})=>Object(O.b)({toastType:O.a.FAILED,title:s({key:L.a.WITHDRAW_POSITION_FAILED}),body:a,onClose:e})),v(!1)}});return function onClickWithdrawIsolated(){return e.apply(this,arguments)}}();return l.a.createElement("div",{className:V.a.positionDetailsModal},l.a.createElement(S.a,{noBorder:!0,title:s({key:L.a.POSITION_DETAILS_MODAL_TITLE}),closeModal:n}),l.a.createElement("div",{className:V.a.modalContent},l.a.createElement("div",{className:V.a.marketAndType},l.a.createElement(N.a,{large:!0,baseSymbol:se,quoteSymbol:me}),l.a.createElement("span",null,de),l.a.createElement(f.a,{capitalize:!0,large:!0,marginLeft:!0,green:ce===R.b.ISOLATED_LONG,red:ce===R.b.ISOLATED_SHORT},ce===R.b.ISOLATED_LONG?s({key:L.a.LONG}):s({key:L.a.SHORT}))),l.a.createElement("div",{className:V.a.infoSectionRowContainer},l.a.createElement("div",{className:V.a.infoSectionRow},l.a.createElement("div",{className:V.a.infoSection},l.a.createElement(T.b,{label:l.a.createElement(y.a,{top:12,left:-40,tooltip:"positions-size"},s({key:L.a.SIZE}),l.a.createElement(f.a,{compact:!0,muted:!0,marginLeft:!0},P.symbol))},Y||X||Q?"-":ie.getNaturalTokenString())),l.a.createElement("div",{className:V.a.infoSection},l.a.createElement(T.b,{label:l.a.createElement(y.a,{top:12,left:-164,tooltip:"positions-leverage"},s({key:L.a.LEVERAGE}))},X||Y||Q?"-":`${K.toFixed(w.e)}\xd7`))),l.a.createElement("div",{className:V.a.infoSectionRow},l.a.createElement("div",{className:V.a.infoSection},l.a.createElement(T.b,{label:l.a.createElement(y.a,{top:12,left:-40,tooltip:"positions-equity"},s({key:L.a.EQUITY}),l.a.createElement(f.a,{compact:!0,muted:!0,marginLeft:!0},(ce===R.b.ISOLATED_LONG?P:re).symbol))},B?B.getNaturalTokenString():"-")),l.a.createElement("div",{className:V.a.infoSection},l.a.createElement(T.b,{label:s({key:L.a.CREATED_AT})},`${ue} ${be}`)))),Z&&l.a.createElement("div",{className:V.a.dynamicButtons},l.a.createElement(I.f,{size:I.e.SMALL,onClick:()=>o({modalType:x.a.POSITION_TRIGGERS_MODAL,modalProps:{position:c,preselectStop:!0}})},s({key:Se?L.a.EDIT_STOP:L.a.ADD_STOP})),l.a.createElement(I.f,{size:I.e.SMALL,onClick:()=>o({modalType:x.a.POSITION_TRIGGERS_MODAL,modalProps:{position:c,preselectTakeProfit:!0}})},s({key:Ne?L.a.EDIT_TRIGGER:L.a.ADD_TRIGGER}))),l.a.createElement("div",{className:V.a.divider}),l.a.createElement("div",{className:V.a.infoSectionRowContainer},l.a.createElement("div",{className:V.a.infoSectionRow},l.a.createElement("div",{className:V.a.infoSection},l.a.createElement(T.b,{label:l.a.createElement(y.a,{top:12,left:-40,tooltip:"positions-pnl"},s({key:L.a.PNL}))},l.a.createElement("span",{className:u()({[V.a.green]:ne&&ne.gt(0),[V.a.red]:ne&&ne.lt(0)})},ne?`${ne.gt(0)?"+":""}${ne.times(100).toFixed(w.l)}%`:"-"))),l.a.createElement("div",{className:V.a.infoSection},l.a.createElement(T.b,{label:l.a.createElement(y.a,{top:12,left:-164,tooltip:"index-price"},s({key:L.a.INDEX_PRICE_ABBREVIATED}),l.a.createElement(f.a,{compact:!0,muted:!0,marginLeft:!0},me))},fe&&fe.toFixed(Ee)))),l.a.createElement("div",{className:V.a.infoSectionRow},l.a.createElement("div",{className:V.a.infoSection},l.a.createElement(T.b,{label:l.a.createElement(y.a,{top:12,left:-40,tooltip:"positions-open-price"},s({key:L.a.OPEN}),l.a.createElement(f.a,{compact:!0,muted:!0,marginLeft:!0},me))},ae.getNaturalValue().toFixed(Ee))),l.a.createElement("div",{className:V.a.infoSection},l.a.createElement(T.b,{label:l.a.createElement(y.a,{top:12,left:-164,tooltip:"positions-liq-price"},s({key:L.a.LIQUIDATION}),l.a.createElement(f.a,{compact:!0,muted:!0,marginLeft:!0},me))},!ee||!ee.baseAmount.isFinite()||X||Y||Q?"-":l.a.createElement("span",{className:u()({[V.a.red]:F&&F.lte(D.a)})},ee.getNaturalValue().toFixed(Ee))))),le===R.a.STOP_EXECUTED&&oe&&l.a.createElement("div",{className:V.a.infoSectionRow},l.a.createElement("div",{className:V.a.infoSection},l.a.createElement(T.b,{label:l.a.createElement(y.a,{top:12,left:-40,tooltip:"positions-stop-close-price"},s({key:L.a.STOP_CLOSED_AT_PRICE}))},oe.getNaturalTokenString(),l.a.createElement(f.a,{compact:!0,muted:!0,marginLeft:!0},oe.market.symbol))))),Z&&l.a.createElement(i.Fragment,null,l.a.createElement("div",{className:V.a.divider}),l.a.createElement("div",{className:V.a.infoSectionRowContainer},l.a.createElement("div",{className:V.a.infoSectionRow},l.a.createElement("div",{className:V.a.infoSection},l.a.createElement(T.b,{label:l.a.createElement(i.Fragment,null,s({key:L.a.STOP_LOSS}),Se&&l.a.createElement(f.a,{compact:!0,muted:!0,marginLeft:!0},me))},Se?l.a.createElement(i.Fragment,null,new G.a(Se.triggerPrice,P,re).getNaturalValue().toFixed(Ee)):l.a.createElement("div",{role:"button",tabIndex:0,className:V.a.triggerModalLink,onClick:()=>o({modalType:x.a.POSITION_TRIGGERS_MODAL,modalProps:{position:c,preselectStop:!0}})},s({key:L.a.ADD_STOP})," \u2192"))),l.a.createElement("div",{className:V.a.infoSection},l.a.createElement(T.b,{label:l.a.createElement(i.Fragment,null,s({key:L.a.TAKE_PROFIT}),Ne&&l.a.createElement(f.a,{compact:!0,muted:!0,marginLeft:!0},me))},Ne?l.a.createElement("span",{className:V.a.specialOrderPrice},new G.a(Ne.triggerPrice,P,re).getNaturalValue().toFixed(Ee)):l.a.createElement("div",{role:"button",tabIndex:0,className:V.a.triggerModalLink,onClick:()=>o({modalType:x.a.POSITION_TRIGGERS_MODAL,modalProps:{position:c,preselectTakeProfit:!0}})},s({key:L.a.ADD_TRIGGER})," \u2192")))),Se&&Se.trailingPercent&&l.a.createElement("div",{className:V.a.infoSectionRow},l.a.createElement("div",{className:V.a.infoSection},l.a.createElement(T.b,{label:l.a.createElement(y.a,{top:12,left:-40,tooltip:"trailing-stop"},s({key:L.a.TRAILING_PERCENT}))},Object(j.a)(Se.trailingPercent).abs().toFixed(w.k),"%"))))),l.a.createElement("div",{className:V.a.divider}),l.a.createElement("div",{className:V.a.infoSectionRowContainer},l.a.createElement("div",{className:V.a.infoSectionRow},l.a.createElement("div",{className:V.a.infoSection},l.a.createElement(T.b,{label:l.a.createElement(y.a,{top:12,left:-40,tooltip:"positions-initial-leverage"},s({key:L.a.INITIAL_LEVERAGE}))},U.toFixed(w.k),"\xd7")),l.a.createElement("div",{className:V.a.infoSection},l.a.createElement(T.b,{label:l.a.createElement(y.a,{top:12,left:-164,tooltip:"positions-interest-rate"},s({key:L.a.INTEREST_APR}))},l.a.createElement("span",{className:u()({[V.a.red]:$.gt(0),[V.a.green]:$.lt(0)})},$&&$.isFinite()?`${s({key:$.lt(0)?L.a.EARNING:L.a.PAYING})} ${$.abs().times(100).toFixed(w.k)}%`:"-")))),l.a.createElement("div",{className:V.a.infoSectionRow},l.a.createElement("div",{className:V.a.infoSection},l.a.createElement(T.b,{label:l.a.createElement(y.a,{top:12,left:-40,tooltip:"positions-interest-owed"},s({key:L.a.OWED}),J&&l.a.createElement(f.a,{compact:!0,muted:!0,marginLeft:!0},J.market.symbol))},l.a.createElement("span",{className:u()({[V.a.red]:J&&Z})},J&&Z?J.getNaturalTokenString():"-"))),l.a.createElement("div",{className:V.a.infoSection},l.a.createElement(T.b,{label:l.a.createElement(y.a,{top:12,left:-164,tooltip:"positions-interest-earned"},s({key:L.a.EARNED}),z&&l.a.createElement(f.a,{compact:!0,muted:!0,marginLeft:!0},z.market.symbol))},l.a.createElement("span",{className:u()({[V.a.green]:z&&Z})},z&&Z?z.getNaturalTokenString():"-")))))),l.a.createElement("div",{className:V.a.floatingCta},l.a.createElement(I.f,{fullWidth:!0,isLoading:le!==R.a.OPEN&&k,onClick:()=>{Z?(n(),r({type:C.a.CLOSE_POSITION,props:{accountNumber:A}})):ye()}},s({key:Z?L.a.CLOSE_POSITION:L.a.WITHDRAW_POSITION}))))};H.propTypes={allIndexPrices:c.a.object.isRequired,allMarkets:c.a.array.isRequired,allOrders:c.a.array.isRequired,closeSidebarModal:c.a.func.isRequired,openModal:c.a.func.isRequired,openSidebarModal:c.a.func.isRequired,position:c.a.object.isRequired,stringGetter:c.a.func.isRequired,walletAddress:c.a.string,walletType:c.a.string,withdrawIsolated:c.a.func.isRequired};var B=Object(b.k)(Object(s.c)(e=>({allIndexPrices:Object(_.b)(e),allMarkets:Object(A.d)(e),allOrders:Object(v.k)(e),walletAddress:Object(P.m)(e),walletType:Object(P.q)(e)}),e=>Object(m.b)({openModal:g.c,openSidebarModal:g.d,withdrawIsolated:k.f},e))(H));t.d(a,"default",function(){return B})}}]);